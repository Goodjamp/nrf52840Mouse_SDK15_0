cscope 15 C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0"               0000762222
	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\ble\ble_advertising\ble_advertising.c

40 
	~"sdk_commÚ.h
"

41 #ià
NRF_MODULE_ENABLED
(
BLE_ADVERTISING
)

42 
	~"bË_advd©a.h
"

43 
	~"bË_adv”tisšg.h
"

44 
	~"Äf_soc.h
"

45 
	~"Äf_log.h
"

46 
	~"Äf_f¡Üage.h
"

47 
	~"sdk_”rÜs.h
"

48 
	~"Äf_sdh_bË.h
"

49 
	~"Äf_sdh_soc.h
"

51 
	#BLE_ADV_MODES
 (5è

	)

58 
boŞ
 
	$wh™–i¡_has_’Œ›s
(
bË_adv”tisšg_t
 * cÚ¡ 
p_adv”tisšg
)

60  
p_adv”tisšg
->
wh™–i¡_š_u£
;

61 
	}
}

68 
boŞ
 
	$addr_is_v®id
(
ušt8_t
 cÚ¡ * cÚ¡ 
p_addr
)

70 
ušt32_t
 
i
 = 0; i < 
BLE_GAP_ADDR_LEN
; i++)

72 ià(
p_addr
[
i
] != 0)

74  
Œue
;

77  
çl£
;

78 
	}
}

85 
bË_adv_mode_t
 
	$adv_mode_Ãxt_g‘
(
bË_adv_mode_t
 
adv_mode
)

87  (
bË_adv_mode_t
)((
adv_mode
 + 1è% 
BLE_ADV_MODES
);

88 
	}
}

95 
	$Ú_cÚÃùed
(
bË_adv”tisšg_t
 * cÚ¡ 
p_adv”tisšg
, 
bË_evt_t
 cÚ¡ * 
p_bË_evt
)

97 ià(
p_bË_evt
->
evt
.
g­_evt
.
·¿ms
.
cÚÃùed
.
rŞe
 =ğ
BLE_GAP_ROLE_PERIPH
)

99 
p_adv”tisšg
->
cu¼’t_¦ave_lšk_cÚn_hªdË
 = 
p_bË_evt
->
evt
.
g­_evt
.
cÚn_hªdË
;

101 
	}
}

109 
	$Ú_discÚÃùed
(
bË_adv”tisšg_t
 * cÚ¡ 
p_adv”tisšg
, 
bË_evt_t
 cÚ¡ * 
p_bË_evt
)

111 
ušt32_t
 
»t
;

113 
p_adv”tisšg
->
wh™–i¡_‹mpÜ¬y_di§bËd
 = 
çl£
;

115 ià(
p_bË_evt
->
evt
.
g­_evt
.
cÚn_hªdË
 =ğ
p_adv”tisšg
->
cu¼’t_¦ave_lšk_cÚn_hªdË
 &&

116 
p_adv”tisšg
->
adv_modes_cÚfig
.
bË_adv_Ú_discÚÃù_di§bËd
 =ğ
çl£
)

118 
»t
 = 
	`bË_adv”tisšg_¡¬t
(
p_adv”tisšg
, 
BLE_ADV_MODE_DIRECTED_HIGH_DUTY
);

119 ià((
»t
 !ğ
NRF_SUCCESS
è&& (
p_adv”tisšg
->
”rÜ_hªdËr
 !ğ
NULL
))

121 
p_adv”tisšg
->
	`”rÜ_hªdËr
(
»t
);

124 
	}
}

132 
	$Ú_‹rmš©ed
(
bË_adv”tisšg_t
 * cÚ¡ 
p_adv”tisšg
, 
bË_evt_t
 cÚ¡ * 
p_bË_evt
)

134 
»t_code_t
 
»t
;

136 ià(
p_bË_evt
->
h—d”
.
evt_id
 !ğ
BLE_GAP_EVT_ADV_SET_TERMINATED
)

142 iàĞ
p_bË_evt
->
evt
.
g­_evt
.
·¿ms
.
adv_£t_‹rmš©ed
.
»asÚ
 =ğ
BLE_GAP_EVT_ADV_SET_TERMINATED_REASON_TIMEOUT


143 ||
p_bË_evt
->
evt
.
g­_evt
.
·¿ms
.
adv_£t_‹rmš©ed
.
»asÚ
 =ğ
BLE_GAP_EVT_ADV_SET_TERMINATED_REASON_LIMIT_REACHED
)

146 
»t
 = 
	`bË_adv”tisšg_¡¬t
(
p_adv”tisšg
, 
	`adv_mode_Ãxt_g‘
Õ_adv”tisšg->
adv_mode_cu¼’t
));

148 ià((
»t
 !ğ
NRF_SUCCESS
è&& (
p_adv”tisšg
->
”rÜ_hªdËr
 !ğ
NULL
))

150 
p_adv”tisšg
->
	`”rÜ_hªdËr
(
»t
);

153 
	}
}

160 
boŞ
 
	$æash_acûss_š_´og»ss
()

162  
	`Äf_f¡Üage_is_busy
(
NULL
);

163 
	}
}

173 
bË_adv_mode_t
 
	$adv_mode_Ãxt_ava_g‘
(
bË_adv”tisšg_t
 * cÚ¡ 
p_adv”tisšg
,

174 
bË_adv_mode_t
 
adv_mode
)

176 
boŞ
 
³”_addr_is_v®id
 = 
	`addr_is_v®id
(
p_adv”tisšg
->
³”_add»ss
.
addr
);

180 
adv_mode
)

182 
BLE_ADV_MODE_DIRECTED_HIGH_DUTY
:

183 iàĞ(
p_adv”tisšg
->
adv_modes_cÚfig
.
bË_adv_dœeùed_high_duty_’abËd
)

184 && (!
p_adv”tisšg
->
adv_modes_cÚfig
.
bË_adv_ex‹nded_’abËd
)

185 && (
³”_addr_is_v®id
))

187  
BLE_ADV_MODE_DIRECTED_HIGH_DUTY
;

191 
BLE_ADV_MODE_DIRECTED
:

192 ià((
p_adv”tisšg
->
adv_modes_cÚfig
.
bË_adv_dœeùed_’abËd
è&& 
³”_addr_is_v®id
)

194  
BLE_ADV_MODE_DIRECTED
;

198 
BLE_ADV_MODE_FAST
:

199 ià(
p_adv”tisšg
->
adv_modes_cÚfig
.
bË_adv_ç¡_’abËd
)

201  
BLE_ADV_MODE_FAST
;

205 
BLE_ADV_MODE_SLOW
:

206 ià(
p_adv”tisšg
->
adv_modes_cÚfig
.
bË_adv_¦ow_’abËd
)

208  
BLE_ADV_MODE_SLOW
;

213  
BLE_ADV_MODE_IDLE
;

215 
	}
}

225 
»t_code_t
 
	$£t_adv_mode_dœeùed_high_duty
(
bË_adv”tisšg_t
 * cÚ¡ 
p_adv”tisšg
,

226 
bË_g­_adv_·¿ms_t
 * 
p_adv_·¿ms
)

228 
p_adv”tisšg
->
adv_evt
 = 
BLE_ADV_EVT_DIRECTED_HIGH_DUTY
;

229 
p_adv”tisšg
->
p_adv_d©a
 = 
NULL
;

231 
p_adv_·¿ms
->
p_³”_addr
 = &(
p_adv”tisšg
->
³”_add»ss
);

232 
p_adv_·¿ms
->
š‹rv®
 = 0;

233 
p_adv_·¿ms
->
´İ”t›s
.
ty³
 = 
BLE_GAP_ADV_TYPE_CONNECTABLE_NONSCANNABLE_DIRECTED_HIGH_DUTY_CYCLE
;

234 
p_adv_·¿ms
->
du¿tiÚ
 = 
BLE_GAP_ADV_TIMEOUT_HIGH_DUTY_MAX
;

236  
NRF_SUCCESS
;

237 
	}
}

247 
»t_code_t
 
	$£t_adv_mode_dœeùed
(
bË_adv”tisšg_t
 * cÚ¡ 
p_adv”tisšg
,

248 
bË_g­_adv_·¿ms_t
 * 
p_adv_·¿ms
)

250 
p_adv”tisšg
->
adv_evt
 = 
BLE_ADV_EVT_DIRECTED
;

251 #ià!
	`defšed
 (
S112
)

252 ià(
p_adv”tisšg
->
adv_modes_cÚfig
.
bË_adv_ex‹nded_’abËd
)

254 
p_adv_·¿ms
->
´İ”t›s
.
ty³
 = 
BLE_GAP_ADV_TYPE_EXTENDED_CONNECTABLE_NONSCANNABLE_DIRECTED
;

259 
p_adv_·¿ms
->
´İ”t›s
.
ty³
 = 
BLE_GAP_ADV_TYPE_CONNECTABLE_NONSCANNABLE_DIRECTED
;

260 #ià!
	`defšed
 (
S112
)

263 
p_adv_·¿ms
->
du¿tiÚ
 = 
p_adv”tisšg
->
adv_modes_cÚfig
.
bË_adv_dœeùed_timeout
;

265 
p_adv”tisšg
->
p_adv_d©a
 = 
NULL
;

267 
p_adv_·¿ms
->
p_³”_addr
 = &
p_adv”tisšg
->
³”_add»ss
;

268 
p_adv_·¿ms
->
š‹rv®
 = 
p_adv”tisšg
->
adv_modes_cÚfig
.
bË_adv_dœeùed_š‹rv®
;

270  
NRF_SUCCESS
;

271 
	}
}

280 
boŞ
 
	$u£_wh™–i¡
(
bË_adv”tisšg_t
 * cÚ¡ 
p_adv”tisšg
)

282 ((
p_adv”tisšg
->
adv_modes_cÚfig
.
bË_adv_wh™–i¡_’abËd
) &&

283 (!
p_adv”tisšg
->
wh™–i¡_‹mpÜ¬y_di§bËd
) &&

284 (
	`wh™–i¡_has_’Œ›s
(
p_adv”tisšg
)));

285 
	}
}

295 
»t_code_t
 
	$æags_£t
(
bË_adv”tisšg_t
 * cÚ¡ 
p_adv”tisšg
, 
ušt8_t
 
æags
)

297 
ušt8_t
 * 
p_æags
 = 
	`bË_advd©a_·r£
(
p_adv”tisšg
->
adv_d©a
.adv_d©a.
p_d©a
,

298 
p_adv”tisšg
->
adv_d©a
.adv_d©a.
Ën
,

299 
BLE_GAP_AD_TYPE_FLAGS
);

301 ià(
p_æags
 !ğ
NULL
)

303 *
p_æags
 = 
æags
;

306  
	`sd_bË_g­_adv_£t_cÚfigu»
(&
p_adv”tisšg
->
adv_hªdË
, &p_adv”tisšg->
adv_d©a
, &p_adv”tisšg->
adv_·¿ms
);

307 
	}
}

317 
»t_code_t
 
	$£t_adv_mode_ç¡
(
bË_adv”tisšg_t
 * cÚ¡ 
p_adv”tisšg
,

318 
bË_g­_adv_·¿ms_t
 * 
p_adv_·¿ms
)

320 
»t_code_t
 
»t
;

322 
p_adv_·¿ms
->
š‹rv®
 = 
p_adv”tisšg
->
adv_modes_cÚfig
.
bË_adv_ç¡_š‹rv®
;

323 
p_adv_·¿ms
->
du¿tiÚ
 = 
p_adv”tisšg
->
adv_modes_cÚfig
.
bË_adv_ç¡_timeout
;

325 #ià!
	`defšed
 (
S112
)

326 ià(
p_adv”tisšg
->
adv_modes_cÚfig
.
bË_adv_ex‹nded_’abËd
)

328 
p_adv”tisšg
->
adv_·¿ms
.
´İ”t›s
.
ty³
 = 
BLE_GAP_ADV_TYPE_EXTENDED_CONNECTABLE_NONSCANNABLE_UNDIRECTED
;

333 
p_adv”tisšg
->
adv_·¿ms
.
´İ”t›s
.
ty³
 = 
BLE_GAP_ADV_TYPE_CONNECTABLE_SCANNABLE_UNDIRECTED
;

334 #ià!
	`defšed
 (
S112
)

338 ià(
	`u£_wh™–i¡
(
p_adv”tisšg
))

340 
p_adv_·¿ms
->
f‹r_pŞicy
 = 
BLE_GAP_ADV_FP_FILTER_CONNREQ
;

343 
»t
 = 
	`æags_£t
(
p_adv”tisšg
, 
BLE_GAP_ADV_FLAG_BR_EDR_NOT_SUPPORTED
);

344 
	`VERIFY_SUCCESS
(
»t
);

346 
p_adv”tisšg
->
adv_evt
 = 
BLE_ADV_EVT_FAST_WHITELIST
;

350 
p_adv”tisšg
->
adv_evt
 = 
BLE_ADV_EVT_FAST
;

352 
p_adv”tisšg
->
p_adv_d©a
 = &Õ_adv”tisšg->
adv_d©a
);

353  
NRF_SUCCESS
;

354 
	}
}

364 
»t_code_t
 
	$£t_adv_mode_¦ow
(
bË_adv”tisšg_t
 * cÚ¡ 
p_adv”tisšg
,

365 
bË_g­_adv_·¿ms_t
 * 
p_adv_·¿ms
)

367 
»t_code_t
 
»t
;

369 
p_adv_·¿ms
->
š‹rv®
 = 
p_adv”tisšg
->
adv_modes_cÚfig
.
bË_adv_¦ow_š‹rv®
;

370 
p_adv_·¿ms
->
du¿tiÚ
 = 
p_adv”tisšg
->
adv_modes_cÚfig
.
bË_adv_¦ow_timeout
;

372 #ià!
	`defšed
 (
S112
)

373 ià(
p_adv”tisšg
->
adv_modes_cÚfig
.
bË_adv_ex‹nded_’abËd
)

375 
p_adv”tisšg
->
adv_·¿ms
.
´İ”t›s
.
ty³
 = 
BLE_GAP_ADV_TYPE_EXTENDED_CONNECTABLE_NONSCANNABLE_UNDIRECTED
;

380 
p_adv”tisšg
->
adv_·¿ms
.
´İ”t›s
.
ty³
 = 
BLE_GAP_ADV_TYPE_CONNECTABLE_SCANNABLE_UNDIRECTED
;

381 #ià!
	`defšed
 (
S112
)

385 ià(
	`u£_wh™–i¡
(
p_adv”tisšg
))

387 
p_adv_·¿ms
->
f‹r_pŞicy
 = 
BLE_GAP_ADV_FP_FILTER_CONNREQ
;

390 
»t
 = 
	`æags_£t
(
p_adv”tisšg
, 
BLE_GAP_ADV_FLAG_BR_EDR_NOT_SUPPORTED
);

391 
	`VERIFY_SUCCESS
(
»t
);

393 
p_adv”tisšg
->
adv_evt
 = 
BLE_ADV_EVT_SLOW_WHITELIST
;

397 
p_adv”tisšg
->
adv_evt
 = 
BLE_ADV_EVT_SLOW
;

399 
p_adv”tisšg
->
p_adv_d©a
 = &Õ_adv”tisšg->
adv_d©a
);

400  
NRF_SUCCESS
;

401 
	}
}

414 
boŞ
 
	$cÚfig_is_v®id
(
bË_adv_modes_cÚfig_t
 cÚ¡ * cÚ¡ 
p_cÚfig
)

416 ià((
p_cÚfig
->
bË_adv_dœeùed_high_duty_’abËd
 =ğ
Œue
) &&

417 (
p_cÚfig
->
bË_adv_ex‹nded_’abËd
 =ğ
Œue
))

419  
çl£
;

421 #ià!
	`defšed
 (
S140
)

422 iàĞ
p_cÚfig
->
bË_adv_´im¬y_phy
 =ğ
BLE_GAP_PHY_CODED
 ||

423 
p_cÚfig
->
bË_adv_£cÚd¬y_phy
 =ğ
BLE_GAP_PHY_CODED
)

425  
çl£
;

430  
Œue
;

432 
	}
}

435 
	$bË_adv”tisšg_cÚn_cfg_g_£t
(
bË_adv”tisšg_t
 * cÚ¡ 
p_adv”tisšg
,

436 
ušt8_t
 
bË_cfg_g
)

438 
p_adv”tisšg
->
cÚn_cfg_g
 = 
bË_cfg_g
;

439 
	}
}

442 
ušt32_t
 
	$bË_adv”tisšg_š™
(
bË_adv”tisšg_t
 * cÚ¡ 
p_adv”tisšg
,

443 
bË_adv”tisšg_š™_t
 cÚ¡ * cÚ¡ 
p_š™
)

445 
ušt32_t
 
»t
;

446 ià((
p_š™
 =ğ
NULL
è|| (
p_adv”tisšg
 == NULL))

448  
NRF_ERROR_NULL
;

450 ià(!
	`cÚfig_is_v®id
(&
p_š™
->
cÚfig
))

452  
NRF_ERROR_INVALID_PARAM
;

455 
p_adv”tisšg
->
adv_mode_cu¼’t
 = 
BLE_ADV_MODE_IDLE
;

456 
p_adv”tisšg
->
adv_modes_cÚfig
 = 
p_š™
->
cÚfig
;

457 
p_adv”tisšg
->
cÚn_cfg_g
 = 
BLE_CONN_CFG_TAG_DEFAULT
;

458 
p_adv”tisšg
->
evt_hªdËr
 = 
p_š™
->evt_handler;

459 
p_adv”tisšg
->
”rÜ_hªdËr
 = 
p_š™
->error_handler;

460 
p_adv”tisšg
->
cu¼’t_¦ave_lšk_cÚn_hªdË
 = 
BLE_CONN_HANDLE_INVALID
;

461 
p_adv”tisšg
->
p_adv_d©a
 = &p_adv”tisšg->
adv_d©a
;

463 
	`mem£t
(&
p_adv”tisšg
->
³”_add»ss
, 0, (p_advertising->peer_address));

466 ià(!
p_adv”tisšg
->
š™Ÿlized
)

468 
p_adv”tisšg
->
adv_hªdË
 = 
BLE_GAP_ADV_SET_HANDLE_NOT_SET
;

470 
p_adv”tisšg
->
adv_d©a
.adv_d©a.
p_d©a
 =…_adv”tisšg->
’c_advd©a
;

471 
p_adv”tisšg
->
adv_d©a
.adv_d©a.
Ën
 = 
BLE_GAP_ADV_SET_DATA_SIZE_MAX
;

473 
»t
 = 
	`bË_advd©a_’code
(&
p_š™
->
advd©a
, 
p_adv”tisšg
->
’c_advd©a
, &p_adv”tisšg->
adv_d©a
.adv_d©a.
Ën
);

474 
	`VERIFY_SUCCESS
(
»t
);

476 ià(&
p_š™
->
¤d©a
 !ğ
NULL
)

478 
p_adv”tisšg
->
adv_d©a
.
sÿn_r¥_d©a
.
p_d©a
 =…_adv”tisšg->
’c_sÿn_r¥_d©a
;

479 
p_adv”tisšg
->
adv_d©a
.
sÿn_r¥_d©a
.
Ën
 = 
BLE_GAP_ADV_SET_DATA_SIZE_MAX
;

481 
»t
 = 
	`bË_advd©a_’code
(&
p_š™
->
¤d©a
,

482 
p_adv”tisšg
->
adv_d©a
.
sÿn_r¥_d©a
.
p_d©a
,

483 &
p_adv”tisšg
->
adv_d©a
.
sÿn_r¥_d©a
.
Ën
);

484 
	`VERIFY_SUCCESS
(
»t
);

488 
p_adv”tisšg
->
adv_d©a
.
sÿn_r¥_d©a
.
p_d©a
 = 
NULL
;

489 
p_adv”tisšg
->
adv_d©a
.
sÿn_r¥_d©a
.
Ën
 = 0;

495 
p_adv”tisšg
->
adv_·¿ms
.
´im¬y_phy
 = 
BLE_GAP_PHY_1MBPS
;

496 
p_adv”tisšg
->
adv_·¿ms
.
du¿tiÚ
 =…_adv”tisšg->
adv_modes_cÚfig
.
bË_adv_ç¡_timeout
;

497 
p_adv”tisšg
->
adv_·¿ms
.
´İ”t›s
.
ty³
 = 
BLE_GAP_ADV_TYPE_CONNECTABLE_SCANNABLE_UNDIRECTED
;

498 
p_adv”tisšg
->
adv_·¿ms
.
p_³”_addr
 = 
NULL
;

499 
p_adv”tisšg
->
adv_·¿ms
.
f‹r_pŞicy
 = 
BLE_GAP_ADV_FP_ANY
;

500 
p_adv”tisšg
->
adv_·¿ms
.
š‹rv®
 =…_adv”tisšg->
adv_modes_cÚfig
.
bË_adv_ç¡_š‹rv®
;

502 
»t
 = 
	`sd_bË_g­_adv_£t_cÚfigu»
(&
p_adv”tisšg
->
adv_hªdË
, 
NULL
, &p_adv”tisšg->
adv_·¿ms
);

503 
	`VERIFY_SUCCESS
(
»t
);

505 
p_adv”tisšg
->
š™Ÿlized
 = 
Œue
;

506  
»t
;

507 
	}
}

517 
boŞ
 
	$phy_is_v®id
(
ušt32_t
 cÚ¡ * cÚ¡ 
p_phy
)

519 ià((*
p_phy
è=ğ
BLE_GAP_PHY_1MBPS
 ||

520 (*
p_phy
è=ğ
BLE_GAP_PHY_2MBPS


521 #ià
	`defšed
 (
S140
)

522 || (*
p_phy
è=ğ
BLE_GAP_PHY_CODED


526  
Œue
;

530  
çl£
;

532 
	}
}

535 
ušt32_t
 
	$bË_adv”tisšg_¡¬t
(
bË_adv”tisšg_t
 * cÚ¡ 
p_adv”tisšg
,

536 
bË_adv_mode_t
 
adv”tisšg_mode
)

538 
ušt32_t
 
»t
;

540 ià(
p_adv”tisšg
->
š™Ÿlized
 =ğ
çl£
)

542  
NRF_ERROR_INVALID_STATE
;

545 
p_adv”tisšg
->
adv_mode_cu¼’t
 = 
adv”tisšg_mode
;

548 ià(
	`æash_acûss_š_´og»ss
())

550 
p_adv”tisšg
->
adv”tisšg_¡¬t_³ndšg
 = 
Œue
;

551  
NRF_SUCCESS
;

554 
	`mem£t
(&
p_adv”tisšg
->
³”_add»ss
, 0, (p_advertising->peer_address));

556 iàĞ((
p_adv”tisšg
->
adv_modes_cÚfig
.
bË_adv_dœeùed_high_duty_’abËd
è&& (p_adv”tisšg->
adv_mode_cu¼’t
 =ğ
BLE_ADV_MODE_DIRECTED_HIGH_DUTY
))

557 ||((
p_adv”tisšg
->
adv_modes_cÚfig
.
bË_adv_dœeùed_’abËd
è&& (p_adv”tisšg->
adv_mode_cu¼’t
 =ğ
BLE_ADV_MODE_DIRECTED_HIGH_DUTY
))

558 ||((
p_adv”tisšg
->
adv_modes_cÚfig
.
bË_adv_dœeùed_’abËd
è&& (p_adv”tisšg->
adv_mode_cu¼’t
 =ğ
BLE_ADV_MODE_DIRECTED
))

561 ià(
p_adv”tisšg
->
evt_hªdËr
 !ğ
NULL
)

563 
p_adv”tisšg
->
³”_addr_»¶y_ex³ùed
 = 
Œue
;

564 
p_adv”tisšg
->
	`evt_hªdËr
(
BLE_ADV_EVT_PEER_ADDR_REQUEST
);

568 
p_adv”tisšg
->
³”_addr_»¶y_ex³ùed
 = 
çl£
;

572 
p_adv”tisšg
->
adv_mode_cu¼’t
 = 
	`adv_mode_Ãxt_ava_g‘
Õ_adv”tisšg, 
adv”tisšg_mode
);

575 ià((
p_adv”tisšg
->
evt_hªdËr
 !ğ
NULL
) &&

576 (
p_adv”tisšg
->
adv_mode_cu¼’t
 =ğ
BLE_ADV_MODE_FAST
 ||…_adv”tisšg->adv_mode_cu¼’ˆ=ğ
BLE_ADV_MODE_SLOW
) &&

577 (
p_adv”tisšg
->
adv_modes_cÚfig
.
bË_adv_wh™–i¡_’abËd
) &&

578 (!
p_adv”tisšg
->
wh™–i¡_‹mpÜ¬y_di§bËd
))

580 
p_adv”tisšg
->
wh™–i¡_š_u£
 = 
çl£
;

581 
p_adv”tisšg
->
wh™–i¡_»¶y_ex³ùed
 = 
Œue
;

582 
p_adv”tisšg
->
	`evt_hªdËr
(
BLE_ADV_EVT_WHITELIST_REQUEST
);

586 
p_adv”tisšg
->
wh™–i¡_»¶y_ex³ùed
 = 
çl£
;

590 
	`mem£t
(&
p_adv”tisšg
->
adv_·¿ms
, 0, (p_advertising->adv_params));

592 
p_adv”tisšg
->
adv_·¿ms
.
´İ”t›s
.
ty³
 = 
BLE_GAP_ADV_TYPE_CONNECTABLE_SCANNABLE_UNDIRECTED
;

595 ià(
	`phy_is_v®id
(&
p_adv”tisšg
->
adv_modes_cÚfig
.
bË_adv_´im¬y_phy
))

597 
p_adv”tisšg
->
adv_·¿ms
.
´im¬y_phy
 =…_adv”tisšg->
adv_modes_cÚfig
.
bË_adv_´im¬y_phy
;

601 
p_adv”tisšg
->
adv_·¿ms
.
´im¬y_phy
 = 
BLE_GAP_PHY_1MBPS
;

604 ià(
p_adv”tisšg
->
adv_modes_cÚfig
.
bË_adv_ex‹nded_’abËd
)

607 ià(
	`phy_is_v®id
(&
p_adv”tisšg
->
adv_modes_cÚfig
.
bË_adv_´im¬y_phy
))

609 
p_adv”tisšg
->
adv_·¿ms
.
£cÚd¬y_phy
 =…_adv”tisšg->
adv_modes_cÚfig
.
bË_adv_£cÚd¬y_phy
;

613 
p_adv”tisšg
->
adv_·¿ms
.
£cÚd¬y_phy
 = 
BLE_GAP_PHY_1MBPS
;

616 
p_adv”tisšg
->
adv_·¿ms
.
f‹r_pŞicy
 = 
BLE_GAP_ADV_FP_ANY
;

619 
p_adv”tisšg
->
adv_mode_cu¼’t
)

621 
BLE_ADV_MODE_DIRECTED_HIGH_DUTY
:

622 
»t
 = 
	`£t_adv_mode_dœeùed_high_duty
(
p_adv”tisšg
, &p_adv”tisšg->
adv_·¿ms
);

625 
BLE_ADV_MODE_DIRECTED
:

626 
»t
 = 
	`£t_adv_mode_dœeùed
(
p_adv”tisšg
, &p_adv”tisšg->
adv_·¿ms
);

629 
BLE_ADV_MODE_FAST
:

630 
»t
 = 
	`£t_adv_mode_ç¡
(
p_adv”tisšg
, &p_adv”tisšg->
adv_·¿ms
);

633 
BLE_ADV_MODE_SLOW
:

634 
»t
 = 
	`£t_adv_mode_¦ow
(
p_adv”tisšg
, &p_adv”tisšg->
adv_·¿ms
);

637 
BLE_ADV_MODE_IDLE
:

638 
p_adv”tisšg
->
adv_evt
 = 
BLE_ADV_EVT_IDLE
;

645 ià(
p_adv”tisšg
->
adv_mode_cu¼’t
 !ğ
BLE_ADV_MODE_IDLE
)

648 
»t
 = 
	`sd_bË_g­_adv_£t_cÚfigu»
(&
p_adv”tisšg
->
adv_hªdË
,…_adv”tisšg->
p_adv_d©a
, &p_adv”tisšg->
adv_·¿ms
);

649 ià(
»t
 !ğ
NRF_SUCCESS
)

651  
»t
;

653 
»t
 = 
	`sd_bË_g­_adv_¡¬t
(
p_adv”tisšg
->
adv_hªdË
,…_adv”tisšg->
cÚn_cfg_g
);

655 ià(
»t
 !ğ
NRF_SUCCESS
)

657  
»t
;

661 ià(
p_adv”tisšg
->
evt_hªdËr
 !ğ
NULL
)

663 
p_adv”tisšg
->
	`evt_hªdËr
Õ_adv”tisšg->
adv_evt
);

666  
NRF_SUCCESS
;

667 
	}
}

670 
	$bË_adv”tisšg_Ú_bË_evt
(
bË_evt_t
 cÚ¡ * 
p_bË_evt
, * 
p_cÚ‹xt
)

672 
bË_adv”tisšg_t
 * 
p_adv”tisšg
 = (bË_adv”tisšg_ˆ*)
p_cÚ‹xt
;

674 
p_bË_evt
->
h—d”
.
evt_id
)

676 
BLE_GAP_EVT_CONNECTED
:

677 
	`Ú_cÚÃùed
(
p_adv”tisšg
, 
p_bË_evt
);

681 
BLE_GAP_EVT_DISCONNECTED
:

682 
	`Ú_discÚÃùed
(
p_adv”tisšg
, 
p_bË_evt
);

686 
BLE_GAP_EVT_ADV_SET_TERMINATED
:

687 
	`Ú_‹rmš©ed
(
p_adv”tisšg
, 
p_bË_evt
);

693 
	}
}

696 
	$bË_adv”tisšg_Ú_sys_evt
(
ušt32_t
 
evt_id
, * 
p_cÚ‹xt
)

698 
bË_adv”tisšg_t
 * 
p_adv”tisšg
 = (bË_adv”tisšg_ˆ*)
p_cÚ‹xt
;

700 
evt_id
)

703 
NRF_EVT_FLASH_OPERATION_SUCCESS
:

704 
NRF_EVT_FLASH_OPERATION_ERROR
:

706 ià(
p_adv”tisšg
->
adv”tisšg_¡¬t_³ndšg
)

708 
p_adv”tisšg
->
adv”tisšg_¡¬t_³ndšg
 = 
çl£
;

709 
»t_code_t
 
»t
 = 
	`bË_adv”tisšg_¡¬t
(
p_adv”tisšg
,

710 
p_adv”tisšg
->
adv_mode_cu¼’t
);

712 ià((
»t
 !ğ
NRF_SUCCESS
è&& (
p_adv”tisšg
->
”rÜ_hªdËr
 !ğ
NULL
))

714 
p_adv”tisšg
->
	`”rÜ_hªdËr
(
»t
);

723 
	}
}

726 
ušt32_t
 
	$bË_adv”tisšg_³”_addr_»¶y
(
bË_adv”tisšg_t
 * cÚ¡ 
p_adv”tisšg
,

727 
bË_g­_addr_t
 * 
p_³”_add»ss
)

729 ià(!
p_adv”tisšg
->
³”_addr_»¶y_ex³ùed
)

731  
NRF_ERROR_INVALID_STATE
;

734 
p_adv”tisšg
->
³”_addr_»¶y_ex³ùed
 = 
çl£
;

736 
	`memıy
(&
p_adv”tisšg
->
³”_add»ss
, 
p_³”_add»ss
, (p_advertising->peer_address));

738  
NRF_SUCCESS
;

739 
	}
}

742 
ušt32_t
 
	$bË_adv”tisšg_wh™–i¡_»¶y
(
bË_adv”tisšg_t
 * cÚ¡ 
p_adv”tisšg
,

743 
bË_g­_addr_t
 cÚ¡ * 
p_g­_addrs
,

744 
ušt32_t
 
addr_út
,

745 
bË_g­_œk_t
 cÚ¡ * 
p_g­_œks
,

746 
ušt32_t
 
œk_út
)

748 ià(!
p_adv”tisšg
->
wh™–i¡_»¶y_ex³ùed
)

750  
NRF_ERROR_INVALID_STATE
;

753 
p_adv”tisšg
->
wh™–i¡_»¶y_ex³ùed
 = 
çl£
;

754 
p_adv”tisšg
->
wh™–i¡_š_u£
 = ((
addr_út
 > 0è|| (
œk_út
 > 0));

756  
NRF_SUCCESS
;

757 
	}
}

760 
ušt32_t
 
	$bË_adv”tisšg_»¡¬t_w™hout_wh™–i¡
(
bË_adv”tisšg_t
 * cÚ¡ 
p_adv”tisšg
)

762 
»t_code_t
 
»t
;

764 (è
	`sd_bË_g­_adv_¡İ
(
p_adv”tisšg
->
adv_hªdË
);

766 
p_adv”tisšg
->
wh™–i¡_‹mpÜ¬y_di§bËd
 = 
Œue
;

767 
p_adv”tisšg
->
wh™–i¡_š_u£
 = 
çl£
;

768 
p_adv”tisšg
->
adv_·¿ms
.
f‹r_pŞicy
 = 
BLE_GAP_ADV_FP_ANY
;

770 
»t
 = 
	`æags_£t
(
p_adv”tisšg
, 
BLE_GAP_ADV_FLAGS_LE_ONLY_GENERAL_DISC_MODE
);

771 
	`VERIFY_SUCCESS
(
»t
);

773 
»t
 = 
	`bË_adv”tisšg_¡¬t
(
p_adv”tisšg
,…_adv”tisšg->
adv_mode_cu¼’t
);

774 ià((
»t
 !ğ
NRF_SUCCESS
è&& (
p_adv”tisšg
->
”rÜ_hªdËr
 !ğ
NULL
))

776 
p_adv”tisšg
->
	`”rÜ_hªdËr
(
»t
);

779  
NRF_SUCCESS
;

780 
	}
}

783 
	$bË_adv”tisšg_modes_cÚfig_£t
(
bË_adv”tisšg_t
 * cÚ¡ 
p_adv”tisšg
,

784 
bË_adv_modes_cÚfig_t
 cÚ¡ * cÚ¡ 
p_adv_modes_cÚfig
)

786 
p_adv”tisšg
->
adv_modes_cÚfig
 = *
p_adv_modes_cÚfig
;

787 
	}
}

	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\ble\ble_link_ctx_manager\ble_link_ctx_manager.c

40 
	~"bË_lšk_ùx_mªag”.h
"

41 
	~"sdk_commÚ.h
"

44 
»t_code_t
 
	$blcm_lšk_ùx_g‘
(
blcm_lšk_ùx_¡Üage_t
 cÚ¡ * cÚ¡ 
p_lšk_ùx_¡Üage
,

45 
ušt16_t
 cÚ¡ 
cÚn_hªdË
,

46 ** cÚ¡ 
µ_ùx_d©a
)

48 
ušt8_t
 
cÚn_id
;

50 ià(
µ_ùx_d©a
 =ğ
NULL
)

52  
NRF_ERROR_NULL
;

56 *
µ_ùx_d©a
 = 
NULL
;

59 
	`VERIFY_PARAM_NOT_NULL
(
p_lšk_ùx_¡Üage
);

60 
	`VERIFY_PARAM_NOT_NULL
(
p_lšk_ùx_¡Üage
->
p_ùx_d©a_poŞ
);

61 
	`VERIFY_TRUE
((
p_lšk_ùx_¡Üage
->
lšk_ùx_size
 % 
BYTES_PER_WORD
è=ğ0, 
NRF_ERROR_INVALID_PARAM
);

63 
cÚn_id
 = 
	`bË_cÚn_¡©e_cÚn_idx
(
cÚn_hªdË
);

65 ià(
cÚn_id
 =ğ
BLE_CONN_STATE_MAX_CONNECTIONS
)

67  
NRF_ERROR_NOT_FOUND
;

70 ià(
cÚn_id
 >ğ
p_lšk_ùx_¡Üage
->
max_lšks_út
)

72  
NRF_ERROR_NO_MEM
;

75 *
µ_ùx_d©a
 = (*è((
ušt8_t
 *è
p_lšk_ùx_¡Üage
->
p_ùx_d©a_poŞ
 +

76 
cÚn_id
 * 
p_lšk_ùx_¡Üage
->
lšk_ùx_size
);

77  
NRF_SUCCESS
;

78 
	}
}

	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\ble\ble_services\ble_bas\ble_bas.c

44 
	~"sdk_commÚ.h
"

45 #ià
NRF_MODULE_ENABLED
(
BLE_BAS
)

46 
	~"bË_bas.h
"

47 
	~<¡ršg.h
>

48 
	~"bË_¤v_commÚ.h
"

49 
	~"bË_cÚn_¡©e.h
"

51 
	#NRF_LOG_MODULE_NAME
 
bË_bas


	)

52 #ià
BLE_BAS_CONFIG_LOG_ENABLED


53 
	#NRF_LOG_LEVEL
 
BLE_BAS_CONFIG_LOG_LEVEL


	)

54 
	#NRF_LOG_INFO_COLOR
 
BLE_BAS_CONFIG_INFO_COLOR


	)

55 
	#NRF_LOG_DEBUG_COLOR
 
BLE_BAS_CONFIG_DEBUG_COLOR


	)

57 
	#NRF_LOG_LEVEL
 0

	)

59 
	~"Äf_log.h
"

60 
NRF_LOG_MODULE_REGISTER
();

63 
	#INVALID_BATTERY_LEVEL
 255

	)

71 
	$Ú_wr™e
(
bË_bas_t
 * 
p_bas
, 
bË_evt_t
 cÚ¡ * 
p_bË_evt
)

73 ià(!
p_bas
->
is_nÙifiÿtiÚ_suµÜ‹d
)

78 
bË_g©ts_evt_wr™e_t
 cÚ¡ * 
p_evt_wr™e
 = &
p_bË_evt
->
evt
.
g©ts_evt
.
·¿ms
.
wr™e
;

80 iàĞ(
p_evt_wr™e
->
hªdË
 =ğ
p_bas
->
b©‹ry_Ëv–_hªdËs
.
cccd_hªdË
)

81 && (
p_evt_wr™e
->
Ën
 == 2))

83 ià(
p_bas
->
evt_hªdËr
 =ğ
NULL
)

88 
bË_bas_evt_t
 
evt
;

90 ià(
	`bË_¤v_is_nÙifiÿtiÚ_’abËd
(
p_evt_wr™e
->
d©a
))

92 
evt
.
evt_ty³
 = 
BLE_BAS_EVT_NOTIFICATION_ENABLED
;

96 
evt
.
evt_ty³
 = 
BLE_BAS_EVT_NOTIFICATION_DISABLED
;

98 
evt
.
cÚn_hªdË
 = 
p_bË_evt
->evt.
g©ts_evt
.conn_handle;

101 
p_bas
->
	`evt_hªdËr
Õ_bas, &
evt
);

103 
	}
}

106 
	$bË_bas_Ú_bË_evt
(
bË_evt_t
 cÚ¡ * 
p_bË_evt
, * 
p_cÚ‹xt
)

108 ià((
p_cÚ‹xt
 =ğ
NULL
è|| (
p_bË_evt
 == NULL))

113 
bË_bas_t
 * 
p_bas
 = (bË_bas_ˆ*)
p_cÚ‹xt
;

115 
p_bË_evt
->
h—d”
.
evt_id
)

117 
BLE_GATTS_EVT_WRITE
:

118 
	`Ú_wr™e
(
p_bas
, 
p_bË_evt
);

125 
	}
}

135 
»t_code_t
 
	$b©‹ry_Ëv–_ch¬_add
(
bË_bas_t
 * 
p_bas
, cÚ¡ 
bË_bas_š™_t
 * 
p_bas_š™
)

137 
»t_code_t
 
”r_code
;

138 
bË_g©ts_ch¬_md_t
 
ch¬_md
;

139 
bË_g©ts_©Œ_md_t
 
cccd_md
;

140 
bË_g©ts_©Œ_t
 
©Œ_ch¬_v®ue
;

141 
bË_uuid_t
 
bË_uuid
;

142 
bË_g©ts_©Œ_md_t
 
©Œ_md
;

143 
ušt8_t
 
š™Ÿl_b©‹ry_Ëv–
;

144 
ušt8_t
 
’coded_»pÜt_»f
[
BLE_SRV_ENCODED_REPORT_REF_LEN
];

145 
ušt8_t
 
š™_Ën
;

148 ià(
p_bas
->
is_nÙifiÿtiÚ_suµÜ‹d
)

150 
	`mem£t
(&
cccd_md
, 0, (cccd_md));

154 
	`BLE_GAP_CONN_SEC_MODE_SET_OPEN
(&
cccd_md
.
»ad_³rm
);

155 
cccd_md
.
wr™e_³rm
 = 
p_bas_š™
->
b©‹ry_Ëv–_ch¬_©Œ_md
.
cccd_wr™e_³rm
;

156 
cccd_md
.
vloc
 = 
BLE_GATTS_VLOC_STACK
;

159 
	`mem£t
(&
ch¬_md
, 0, (char_md));

161 
ch¬_md
.
ch¬_´İs
.
»ad
 = 1;

162 
ch¬_md
.
ch¬_´İs
.
nÙify
 = (
p_bas
->
is_nÙifiÿtiÚ_suµÜ‹d
) ? 1 : 0;

163 
ch¬_md
.
p_ch¬_u£r_desc
 = 
NULL
;

164 
ch¬_md
.
p_ch¬_pf
 = 
NULL
;

165 
ch¬_md
.
p_u£r_desc_md
 = 
NULL
;

166 
ch¬_md
.
p_cccd_md
 = (
p_bas
->
is_nÙifiÿtiÚ_suµÜ‹d
è? &
cccd_md
 : 
NULL
;

167 
ch¬_md
.
p_sccd_md
 = 
NULL
;

169 
	`BLE_UUID_BLE_ASSIGN
(
bË_uuid
, 
BLE_UUID_BATTERY_LEVEL_CHAR
);

171 
	`mem£t
(&
©Œ_md
, 0, (attr_md));

173 
©Œ_md
.
»ad_³rm
 = 
p_bas_š™
->
b©‹ry_Ëv–_ch¬_©Œ_md
.read_perm;

174 
©Œ_md
.
wr™e_³rm
 = 
p_bas_š™
->
b©‹ry_Ëv–_ch¬_©Œ_md
.write_perm;

175 
©Œ_md
.
vloc
 = 
BLE_GATTS_VLOC_STACK
;

176 
©Œ_md
.
rd_auth
 = 0;

177 
©Œ_md
.
wr_auth
 = 0;

178 
©Œ_md
.
vËn
 = 0;

180 
š™Ÿl_b©‹ry_Ëv–
 = 
p_bas_š™
->
š™Ÿl_b©t_Ëv–
;

182 
	`mem£t
(&
©Œ_ch¬_v®ue
, 0, (attr_char_value));

184 
©Œ_ch¬_v®ue
.
p_uuid
 = &
bË_uuid
;

185 
©Œ_ch¬_v®ue
.
p_©Œ_md
 = &
©Œ_md
;

186 
©Œ_ch¬_v®ue
.
š™_Ën
 = (
ušt8_t
);

187 
©Œ_ch¬_v®ue
.
š™_offs
 = 0;

188 
©Œ_ch¬_v®ue
.
max_Ën
 = (
ušt8_t
);

189 
©Œ_ch¬_v®ue
.
p_v®ue
 = &
š™Ÿl_b©‹ry_Ëv–
;

191 
”r_code
 = 
	`sd_bË_g©ts_ch¬aù”i¡ic_add
(
p_bas
->
£rviû_hªdË
, &
ch¬_md
,

192 &
©Œ_ch¬_v®ue
,

193 &
p_bas
->
b©‹ry_Ëv–_hªdËs
);

194 ià(
”r_code
 !ğ
NRF_SUCCESS
)

196  
”r_code
;

199 ià(
p_bas_š™
->
p_»pÜt_»f
 !ğ
NULL
)

202 
	`BLE_UUID_BLE_ASSIGN
(
bË_uuid
, 
BLE_UUID_REPORT_REF_DESCR
);

204 
	`mem£t
(&
©Œ_md
, 0, (attr_md));

206 
©Œ_md
.
»ad_³rm
 = 
p_bas_š™
->
b©‹ry_Ëv–_»pÜt_»ad_³rm
;

207 
	`BLE_GAP_CONN_SEC_MODE_SET_NO_ACCESS
(&
©Œ_md
.
wr™e_³rm
);

209 
©Œ_md
.
vloc
 = 
BLE_GATTS_VLOC_STACK
;

210 
©Œ_md
.
rd_auth
 = 0;

211 
©Œ_md
.
wr_auth
 = 0;

212 
©Œ_md
.
vËn
 = 0;

214 
š™_Ën
 = 
	`bË_¤v_»pÜt_»f_’code
(
’coded_»pÜt_»f
, 
p_bas_š™
->
p_»pÜt_»f
);

216 
	`mem£t
(&
©Œ_ch¬_v®ue
, 0, (attr_char_value));

218 
©Œ_ch¬_v®ue
.
p_uuid
 = &
bË_uuid
;

219 
©Œ_ch¬_v®ue
.
p_©Œ_md
 = &
©Œ_md
;

220 
©Œ_ch¬_v®ue
.
š™_Ën
 = init_len;

221 
©Œ_ch¬_v®ue
.
š™_offs
 = 0;

222 
©Œ_ch¬_v®ue
.
max_Ën
 =‡‰r_ch¬_v®ue.
š™_Ën
;

223 
©Œ_ch¬_v®ue
.
p_v®ue
 = 
’coded_»pÜt_»f
;

225 
”r_code
 = 
	`sd_bË_g©ts_desütÜ_add
(
p_bas
->
b©‹ry_Ëv–_hªdËs
.
v®ue_hªdË
,

226 &
©Œ_ch¬_v®ue
,

227 &
p_bas
->
»pÜt_»f_hªdË
);

228 ià(
”r_code
 !ğ
NRF_SUCCESS
)

230  
”r_code
;

235 
p_bas
->
»pÜt_»f_hªdË
 = 
BLE_GATT_HANDLE_INVALID
;

238  
NRF_SUCCESS
;

239 
	}
}

242 
»t_code_t
 
	$bË_bas_š™
(
bË_bas_t
 * 
p_bas
, cÚ¡ 
bË_bas_š™_t
 * 
p_bas_š™
)

244 ià(
p_bas
 =ğ
NULL
 || 
p_bas_š™
 == NULL)

246  
NRF_ERROR_NULL
;

249 
»t_code_t
 
”r_code
;

250 
bË_uuid_t
 
bË_uuid
;

253 
p_bas
->
evt_hªdËr
 = 
p_bas_š™
->evt_handler;

254 
p_bas
->
is_nÙifiÿtiÚ_suµÜ‹d
 = 
p_bas_š™
->
suµÜt_nÙifiÿtiÚ
;

255 
p_bas
->
b©‹ry_Ëv–_Ï¡
 = 
INVALID_BATTERY_LEVEL
;

258 
	`BLE_UUID_BLE_ASSIGN
(
bË_uuid
, 
BLE_UUID_BATTERY_SERVICE
);

260 
”r_code
 = 
	`sd_bË_g©ts_£rviû_add
(
BLE_GATTS_SRVC_TYPE_PRIMARY
, &
bË_uuid
, &
p_bas
->
£rviû_hªdË
);

261 
	`VERIFY_SUCCESS
(
”r_code
);

264 
”r_code
 = 
	`b©‹ry_Ëv–_ch¬_add
(
p_bas
, 
p_bas_š™
);

265  
”r_code
;

266 
	}
}

276 
»t_code_t
 
	$b©‹ry_nÙifiÿtiÚ_£nd
(
bË_g©ts_hvx_·¿ms_t
 * cÚ¡ 
p_hvx_·¿ms
,

277 
ušt16_t
 
cÚn_hªdË
)

279 
»t_code_t
 
”r_code
 = 
	`sd_bË_g©ts_hvx
(
cÚn_hªdË
, 
p_hvx_·¿ms
);

280 ià(
”r_code
 =ğ
NRF_SUCCESS
)

282 
	`NRF_LOG_INFO
("B©‹ry‚ÙifiÿtiÚ ha b“À£Á usšg cÚn_hªdË: 0x%04X", 
cÚn_hªdË
);

286 
	`NRF_LOG_DEBUG
("Error: 0x%08X while sending‚otification with conn_handle: 0x%04X",

287 
”r_code
,

288 
cÚn_hªdË
);

290  
”r_code
;

291 
	}
}

294 
»t_code_t
 
	$bË_bas_b©‹ry_Ëv–_upd©e
(
bË_bas_t
 * 
p_bas
,

295 
ušt8_t
 
b©‹ry_Ëv–
,

296 
ušt16_t
 
cÚn_hªdË
)

298 ià(
p_bas
 =ğ
NULL
)

300  
NRF_ERROR_NULL
;

303 
»t_code_t
 
”r_code
 = 
NRF_SUCCESS
;

304 
bË_g©ts_v®ue_t
 
g©ts_v®ue
;

306 ià(
b©‹ry_Ëv–
 !ğ
p_bas
->
b©‹ry_Ëv–_Ï¡
)

309 
	`mem£t
(&
g©ts_v®ue
, 0, (gatts_value));

311 
g©ts_v®ue
.
Ën
 = (
ušt8_t
);

312 
g©ts_v®ue
.
off£t
 = 0;

313 
g©ts_v®ue
.
p_v®ue
 = &
b©‹ry_Ëv–
;

316 
”r_code
 = 
	`sd_bË_g©ts_v®ue_£t
(
BLE_CONN_HANDLE_INVALID
,

317 
p_bas
->
b©‹ry_Ëv–_hªdËs
.
v®ue_hªdË
,

318 &
g©ts_v®ue
);

319 ià(
”r_code
 =ğ
NRF_SUCCESS
)

321 
	`NRF_LOG_INFO
("B©‹ry†ev– ha b“Àupd©ed: %d%%", 
b©‹ry_Ëv–
)

324 
p_bas
->
b©‹ry_Ëv–_Ï¡
 = 
b©‹ry_Ëv–
;

328 
	`NRF_LOG_DEBUG
("E¼Ü duršg b©‹ry†ev– upd©e: 0x%08X", 
”r_code
)

330  
”r_code
;

334 ià(
p_bas
->
is_nÙifiÿtiÚ_suµÜ‹d
)

336 
bË_g©ts_hvx_·¿ms_t
 
hvx_·¿ms
;

338 
	`mem£t
(&
hvx_·¿ms
, 0, (hvx_params));

340 
hvx_·¿ms
.
hªdË
 = 
p_bas
->
b©‹ry_Ëv–_hªdËs
.
v®ue_hªdË
;

341 
hvx_·¿ms
.
ty³
 = 
BLE_GATT_HVX_NOTIFICATION
;

342 
hvx_·¿ms
.
off£t
 = 
g©ts_v®ue
.offset;

343 
hvx_·¿ms
.
p_Ën
 = &
g©ts_v®ue
.
Ën
;

344 
hvx_·¿ms
.
p_d©a
 = 
g©ts_v®ue
.
p_v®ue
;

346 ià(
cÚn_hªdË
 =ğ
BLE_CONN_HANDLE_ALL
)

348 
bË_cÚn_¡©e_cÚn_hªdË_li¡_t
 
cÚn_hªdËs
 = 
	`bË_cÚn_¡©e_cÚn_hªdËs
();

351 
ušt32_t
 
i
 = 0; i < 
cÚn_hªdËs
.
Ën
; i++)

353 ià(
	`bË_cÚn_¡©e_¡©us
(
cÚn_hªdËs
.cÚn_hªdËs[
i
]è=ğ
BLE_CONN_STATUS_CONNECTED
)

355 ià(
”r_code
 =ğ
NRF_SUCCESS
)

357 
”r_code
 = 
	`b©‹ry_nÙifiÿtiÚ_£nd
(&
hvx_·¿ms
,

358 
cÚn_hªdËs
.cÚn_hªdËs[
i
]);

363 
	`UNUSED_RETURN_VALUE
(
	`b©‹ry_nÙifiÿtiÚ_£nd
(&
hvx_·¿ms
,

364 
cÚn_hªdËs
.cÚn_hªdËs[
i
]));

371 
”r_code
 = 
	`b©‹ry_nÙifiÿtiÚ_£nd
(&
hvx_·¿ms
, 
cÚn_hªdË
);

376 
”r_code
 = 
NRF_ERROR_INVALID_STATE
;

380  
”r_code
;

381 
	}
}

	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\ble\ble_services\ble_dis\ble_dis.c

44 
	~"sdk_commÚ.h
"

45 #ià
NRF_MODULE_ENABLED
(
BLE_DIS
)

46 
	~"bË_dis.h
"

48 
	~<¡dlib.h
>

49 
	~<¡ršg.h
>

50 
	~"­p_”rÜ.h
"

51 
	~"bË_g©ts.h
"

52 
	~"bË_¤v_commÚ.h
"

55 
	#BLE_DIS_SYS_ID_LEN
 8

	)

56 
	#BLE_DIS_PNP_ID_LEN
 7

	)

58 
ušt16_t
 
	g£rviû_hªdË
;

59 
bË_g©ts_ch¬_hªdËs_t
 
	gmªuçù_Çme_hªdËs
;

60 
bË_g©ts_ch¬_hªdËs_t
 
	gmod–_num_hªdËs
;

61 
bË_g©ts_ch¬_hªdËs_t
 
	g£rŸl_num_hªdËs
;

62 
bË_g©ts_ch¬_hªdËs_t
 
	ghw_»v_hªdËs
;

63 
bË_g©ts_ch¬_hªdËs_t
 
	gfw_»v_hªdËs
;

64 
bË_g©ts_ch¬_hªdËs_t
 
	gsw_»v_hªdËs
;

65 
bË_g©ts_ch¬_hªdËs_t
 
	gsys_id_hªdËs
;

66 
bË_g©ts_ch¬_hªdËs_t
 
	g»g_û¹_d©a_li¡_hªdËs
;

67 
bË_g©ts_ch¬_hªdËs_t
 
	g²p_id_hªdËs
;

75 
	$sys_id_’code
(
ušt8_t
 * 
p_’coded_bufãr
, 
bË_dis_sys_id_t
 cÚ¡ * 
p_sys_id
)

77 
	`APP_ERROR_CHECK_BOOL
(
p_sys_id
 !ğ
NULL
);

78 
	`APP_ERROR_CHECK_BOOL
(
p_’coded_bufãr
 !ğ
NULL
);

80 
p_’coded_bufãr
[0] = (
p_sys_id
->
mªuçùu»r_id
 & 0x00000000FF);

81 
p_’coded_bufãr
[1] = (
p_sys_id
->
mªuçùu»r_id
 & 0x000000FF00) >> 8;

82 
p_’coded_bufãr
[2] = (
p_sys_id
->
mªuçùu»r_id
 & 0x0000FF0000) >> 16;

83 
p_’coded_bufãr
[3] = (
p_sys_id
->
mªuçùu»r_id
 & 0x00FF000000) >> 24;

84 
p_’coded_bufãr
[4] = (
p_sys_id
->
mªuçùu»r_id
 & 0xFF00000000) >> 32;

86 
p_’coded_bufãr
[5] = (
p_sys_id
->
Ügªiz©iÚ®ly_unique_id
 & 0x0000FF);

87 
p_’coded_bufãr
[6] = (
p_sys_id
->
Ügªiz©iÚ®ly_unique_id
 & 0x00FF00) >> 8;

88 
p_’coded_bufãr
[7] = (
p_sys_id
->
Ügªiz©iÚ®ly_unique_id
 & 0xFF0000) >> 16;

89 
	}
}

97 
	$²p_id_’code
(
ušt8_t
 * 
p_’coded_bufãr
, 
bË_dis_²p_id_t
 cÚ¡ * 
p_²p_id
)

99 
ušt8_t
 
Ën
 = 0;

101 
	`APP_ERROR_CHECK_BOOL
(
p_²p_id
 !ğ
NULL
);

102 
	`APP_ERROR_CHECK_BOOL
(
p_’coded_bufãr
 !ğ
NULL
);

104 
p_’coded_bufãr
[
Ën
++] = 
p_²p_id
->
v’dÜ_id_sourû
;

106 
Ën
 +ğ
	`ušt16_’code
(
p_²p_id
->
v’dÜ_id
, &
p_’coded_bufãr
[len]);

107 
Ën
 +ğ
	`ušt16_’code
(
p_²p_id
->
´oduù_id
, &
p_’coded_bufãr
[len]);

108 
Ën
 +ğ
	`ušt16_’code
(
p_²p_id
->
´oduù_v”siÚ
, &
p_’coded_bufãr
[len]);

110 
	`APP_ERROR_CHECK_BOOL
(
Ën
 =ğ
BLE_DIS_PNP_ID_LEN
);

111 
	}
}

124 
ušt32_t
 
	$ch¬_add
(
ušt16_t
 
uuid
,

125 
ušt8_t
 * 
p_ch¬_v®ue
,

126 
ušt16_t
 
ch¬_Ën
,

127 
bË_¤v_£cur™y_mode_t
 cÚ¡ * 
dis_©Œ_md
,

128 
bË_g©ts_ch¬_hªdËs_t
 * 
p_hªdËs
)

130 
bË_uuid_t
 
bË_uuid
;

131 
bË_g©ts_ch¬_md_t
 
ch¬_md
;

132 
bË_g©ts_©Œ_t
 
©Œ_ch¬_v®ue
;

133 
bË_g©ts_©Œ_md_t
 
©Œ_md
;

135 
	`APP_ERROR_CHECK_BOOL
(
p_ch¬_v®ue
 !ğ
NULL
);

136 
	`APP_ERROR_CHECK_BOOL
(
ch¬_Ën
 > 0);

139 
	`mem£t
(&
ch¬_md
, 0, (char_md));

141 
ch¬_md
.
ch¬_´İs
.
»ad
 = 1;

142 
ch¬_md
.
p_ch¬_u£r_desc
 = 
NULL
;

143 
ch¬_md
.
p_ch¬_pf
 = 
NULL
;

144 
ch¬_md
.
p_u£r_desc_md
 = 
NULL
;

145 
ch¬_md
.
p_cccd_md
 = 
NULL
;

146 
ch¬_md
.
p_sccd_md
 = 
NULL
;

148 
	`BLE_UUID_BLE_ASSIGN
(
bË_uuid
, 
uuid
);

150 
	`mem£t
(&
©Œ_md
, 0, (attr_md));

152 
©Œ_md
.
»ad_³rm
 = 
dis_©Œ_md
->read_perm;

153 
©Œ_md
.
wr™e_³rm
 = 
dis_©Œ_md
->write_perm;

154 
©Œ_md
.
vloc
 = 
BLE_GATTS_VLOC_STACK
;

155 
©Œ_md
.
rd_auth
 = 0;

156 
©Œ_md
.
wr_auth
 = 0;

157 
©Œ_md
.
vËn
 = 0;

159 
	`mem£t
(&
©Œ_ch¬_v®ue
, 0, (attr_char_value));

161 
©Œ_ch¬_v®ue
.
p_uuid
 = &
bË_uuid
;

162 
©Œ_ch¬_v®ue
.
p_©Œ_md
 = &
©Œ_md
;

163 
©Œ_ch¬_v®ue
.
š™_Ën
 = 
ch¬_Ën
;

164 
©Œ_ch¬_v®ue
.
š™_offs
 = 0;

165 
©Œ_ch¬_v®ue
.
max_Ën
 = 
ch¬_Ën
;

166 
©Œ_ch¬_v®ue
.
p_v®ue
 = 
p_ch¬_v®ue
;

168  
	`sd_bË_g©ts_ch¬aù”i¡ic_add
(
£rviû_hªdË
, &
ch¬_md
, &
©Œ_ch¬_v®ue
, 
p_hªdËs
);

169 
	}
}

172 
ušt32_t
 
	$bË_dis_š™
(
bË_dis_š™_t
 cÚ¡ * 
p_dis_š™
)

174 
ušt32_t
 
”r_code
;

175 
bË_uuid_t
 
bË_uuid
;

178 
	`BLE_UUID_BLE_ASSIGN
(
bË_uuid
, 
BLE_UUID_DEVICE_INFORMATION_SERVICE
);

180 
”r_code
 = 
	`sd_bË_g©ts_£rviû_add
(
BLE_GATTS_SRVC_TYPE_PRIMARY
, &
bË_uuid
, &
£rviû_hªdË
);

181 ià(
”r_code
 !ğ
NRF_SUCCESS
)

183  
”r_code
;

187 ià(
p_dis_š™
->
mªuçù_Çme_¡r
.
Ëngth
 > 0)

189 
”r_code
 = 
	`ch¬_add
(
BLE_UUID_MANUFACTURER_NAME_STRING_CHAR
,

190 
p_dis_š™
->
mªuçù_Çme_¡r
.
p_¡r
,

191 
p_dis_š™
->
mªuçù_Çme_¡r
.
Ëngth
,

192 &
p_dis_š™
->
dis_©Œ_md
,

193 &
mªuçù_Çme_hªdËs
);

194 ià(
”r_code
 !ğ
NRF_SUCCESS
)

196  
”r_code
;

199 ià(
p_dis_š™
->
mod–_num_¡r
.
Ëngth
 > 0)

201 
”r_code
 = 
	`ch¬_add
(
BLE_UUID_MODEL_NUMBER_STRING_CHAR
,

202 
p_dis_š™
->
mod–_num_¡r
.
p_¡r
,

203 
p_dis_š™
->
mod–_num_¡r
.
Ëngth
,

204 &
p_dis_š™
->
dis_©Œ_md
,

205 &
mod–_num_hªdËs
);

206 ià(
”r_code
 !ğ
NRF_SUCCESS
)

208  
”r_code
;

211 ià(
p_dis_š™
->
£rŸl_num_¡r
.
Ëngth
 > 0)

213 
”r_code
 = 
	`ch¬_add
(
BLE_UUID_SERIAL_NUMBER_STRING_CHAR
,

214 
p_dis_š™
->
£rŸl_num_¡r
.
p_¡r
,

215 
p_dis_š™
->
£rŸl_num_¡r
.
Ëngth
,

216 &
p_dis_š™
->
dis_©Œ_md
,

217 &
£rŸl_num_hªdËs
);

218 ià(
”r_code
 !ğ
NRF_SUCCESS
)

220  
”r_code
;

223 ià(
p_dis_š™
->
hw_»v_¡r
.
Ëngth
 > 0)

225 
”r_code
 = 
	`ch¬_add
(
BLE_UUID_HARDWARE_REVISION_STRING_CHAR
,

226 
p_dis_š™
->
hw_»v_¡r
.
p_¡r
,

227 
p_dis_š™
->
hw_»v_¡r
.
Ëngth
,

228 &
p_dis_š™
->
dis_©Œ_md
,

229 &
hw_»v_hªdËs
);

230 ià(
”r_code
 !ğ
NRF_SUCCESS
)

232  
”r_code
;

235 ià(
p_dis_š™
->
fw_»v_¡r
.
Ëngth
 > 0)

237 
”r_code
 = 
	`ch¬_add
(
BLE_UUID_FIRMWARE_REVISION_STRING_CHAR
,

238 
p_dis_š™
->
fw_»v_¡r
.
p_¡r
,

239 
p_dis_š™
->
fw_»v_¡r
.
Ëngth
,

240 &
p_dis_š™
->
dis_©Œ_md
,

241 &
fw_»v_hªdËs
);

242 ià(
”r_code
 !ğ
NRF_SUCCESS
)

244  
”r_code
;

247 ià(
p_dis_š™
->
sw_»v_¡r
.
Ëngth
 > 0)

249 
”r_code
 = 
	`ch¬_add
(
BLE_UUID_SOFTWARE_REVISION_STRING_CHAR
,

250 
p_dis_š™
->
sw_»v_¡r
.
p_¡r
,

251 
p_dis_š™
->
sw_»v_¡r
.
Ëngth
,

252 &
p_dis_š™
->
dis_©Œ_md
,

253 &
sw_»v_hªdËs
);

254 ià(
”r_code
 !ğ
NRF_SUCCESS
)

256  
”r_code
;

259 ià(
p_dis_š™
->
p_sys_id
 !ğ
NULL
)

261 
ušt8_t
 
’coded_sys_id
[
BLE_DIS_SYS_ID_LEN
];

263 
	`sys_id_’code
(
’coded_sys_id
, 
p_dis_š™
->
p_sys_id
);

264 
”r_code
 = 
	`ch¬_add
(
BLE_UUID_SYSTEM_ID_CHAR
,

265 
’coded_sys_id
,

266 
BLE_DIS_SYS_ID_LEN
,

267 &
p_dis_š™
->
dis_©Œ_md
,

268 &
sys_id_hªdËs
);

269 ià(
”r_code
 !ğ
NRF_SUCCESS
)

271  
”r_code
;

274 ià(
p_dis_š™
->
p_»g_û¹_d©a_li¡
 !ğ
NULL
)

276 
”r_code
 = 
	`ch¬_add
(
BLE_UUID_IEEE_REGULATORY_CERTIFICATION_DATA_LIST_CHAR
,

277 
p_dis_š™
->
p_»g_û¹_d©a_li¡
->
p_li¡
,

278 
p_dis_š™
->
p_»g_û¹_d©a_li¡
->
li¡_Ën
,

279 &
p_dis_š™
->
dis_©Œ_md
,

280 &
»g_û¹_d©a_li¡_hªdËs
);

281 ià(
”r_code
 !ğ
NRF_SUCCESS
)

283  
”r_code
;

286 ià(
p_dis_š™
->
p_²p_id
 !ğ
NULL
)

288 
ušt8_t
 
’coded_²p_id
[
BLE_DIS_PNP_ID_LEN
];

290 
	`²p_id_’code
(
’coded_²p_id
, 
p_dis_š™
->
p_²p_id
);

291 
”r_code
 = 
	`ch¬_add
(
BLE_UUID_PNP_ID_CHAR
,

292 
’coded_²p_id
,

293 
BLE_DIS_PNP_ID_LEN
,

294 &
p_dis_š™
->
dis_©Œ_md
,

295 &
²p_id_hªdËs
);

296 ià(
”r_code
 !ğ
NRF_SUCCESS
)

298  
”r_code
;

302  
NRF_SUCCESS
;

303 
	}
}

	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\ble\ble_services\ble_hids\ble_hids.c

44 
	~"sdk_commÚ.h
"

45 #ià
NRF_MODULE_ENABLED
(
BLE_HIDS
)

46 
	~"bË_hids.h
"

47 
	~<¡ršg.h
>

48 
	~"­p_”rÜ.h
"

49 
	~"bË_¤v_commÚ.h
"

53 
	#PROTOCOL_MODE_BOOT
 0x00

	)

54 
	#PROTOCOL_MODE_REPORT
 0x01

	)

57 
	#HIDS_CONTROL_POINT_SUSPEND
 0

	)

58 
	#HIDS_CONTROL_POINT_EXIT_SUSPEND
 1

	)

60 
	#DEFAULT_PROTOCOL_MODE
 
PROTOCOL_MODE_REPORT


	)

61 
	#INITIAL_VALUE_HID_CONTROL_POINT
 
HIDS_CONTROL_POINT_SUSPEND


	)

63 
	#ENCODED_HID_INFORMATION_LEN
 4

	)

71 
	#BLE_HIDS_ERROR_HANDLE
(
_p_hids
, 
_”r_code
) \

74 ià(((
_”r_code
è!ğ
NRF_SUCCESS
è&& ((
_p_hids
)->
”rÜ_hªdËr
 !ğ
NULL
)) \

76 (
_p_hids
)->
	`”rÜ_hªdËr
((
_”r_code
)); \

78 } 0)

	)

87 
size_t
 
	$bË_hids_ş›Á_cÚ‹xt_size_ÿlc
(
bË_hids_t
 * 
p_hids
)

89 
size_t
 
ş›Á_size
 = (
bË_hids_ş›Á_cÚ‹xt_t
è+ (
BOOT_KB_INPUT_REPORT_MAX_SIZE
) +

90 (
BOOT_KB_OUTPUT_REPORT_MAX_SIZE
è+ (
BOOT_MOUSE_INPUT_REPORT_MAX_SIZE
);

92 ià(
p_hids
->
p_šp_»p_š™_¬¿y
 !ğ
NULL
)

94 
ušt32_t
 
i
 = 0; i < 
p_hids
->
šp_»p_couÁ
; i++)

96 
ş›Á_size
 +ğ
p_hids
->
p_šp_»p_š™_¬¿y
[
i
].
max_Ën
;

99 ià(
p_hids
->
p_ou_»p_š™_¬¿y
 !ğ
NULL
)

101 
ušt32_t
 
i
 = 0; i < 
p_hids
->
ou_»p_couÁ
; i++)

103 
ş›Á_size
 +ğ
p_hids
->
p_ou_»p_š™_¬¿y
[
i
].
max_Ën
;

106 ià(
p_hids
->
p_ã©u»_»p_š™_¬¿y
 !ğ
NULL
)

108 
ušt32_t
 
i
 = 0; i < 
p_hids
->
ã©u»_»p_couÁ
; i++)

110 
ş›Á_size
 +ğ
p_hids
->
p_ã©u»_»p_š™_¬¿y
[
i
].
max_Ën
;

114  
ş›Á_size
;

115 
	}
}

126 
bË_hids_ch¬_id_t
 
	$make_ch¬_id
(
ušt16_t
 
uuid
, 
ušt8_t
 
»p_ty³
, ušt8_ˆ
»p_šdex
)

128 
bË_hids_ch¬_id_t
 
ch¬_id
 = {0};

130 
ch¬_id
.
uuid
 = uuid;

131 
ch¬_id
.
»p_ty³
 =„ep_type;

132 
ch¬_id
.
»p_šdex
 =„ep_index;

134  
ch¬_id
;

135 
	}
}

143 
	$Ú_cÚÃù
(
bË_hids_t
 * 
p_hids
, 
bË_evt_t
 cÚ¡ * 
p_bË_evt
)

145 
ušt32_t
 
”r_code
;

146 
bË_g©ts_v®ue_t
 
g©ts_v®ue
;

147 
bË_hids_ş›Á_cÚ‹xt_t
 * 
p_ş›Á
 = 
NULL
;

149 
”r_code
 = 
	`blcm_lšk_ùx_g‘
(
p_hids
->
p_lšk_ùx_¡Üage
,

150 
p_bË_evt
->
evt
.
g­_evt
.
cÚn_hªdË
,

151 (*è&
p_ş›Á
);

152 
	`BLE_HIDS_ERROR_HANDLE
(
p_hids
, 
”r_code
);

154 ià(
p_ş›Á
 =ğ
NULL
)

159 
	`mem£t
(
p_ş›Á
, 0, 
	`bË_hids_ş›Á_cÚ‹xt_size_ÿlc
(
p_hids
));

161 ià(
p_hids
->
´ÙocŞ_mode_hªdËs
.
v®ue_hªdË
)

164 
p_ş›Á
->
´ÙocŞ_mode
 = 
DEFAULT_PROTOCOL_MODE
;

167 
	`mem£t
(&
g©ts_v®ue
, 0, (gatts_value));

169 
g©ts_v®ue
.
Ën
 = (
ušt8_t
);

170 
g©ts_v®ue
.
off£t
 = 0;

171 
g©ts_v®ue
.
p_v®ue
 = &
p_ş›Á
->
´ÙocŞ_mode
;

173 
”r_code
 = 
	`sd_bË_g©ts_v®ue_£t
(
p_bË_evt
->
evt
.
g­_evt
.
cÚn_hªdË
,

174 
p_hids
->
´ÙocŞ_mode_hªdËs
.
v®ue_hªdË
,

175 &
g©ts_v®ue
);

176 
	`BLE_HIDS_ERROR_HANDLE
(
p_hids
, 
”r_code
);

178 
	}
}

186 
	$Ú_cÚŒŞ_pošt_wr™e
(
bË_hids_t
 * 
p_hids
, 
bË_evt_t
 cÚ¡ * 
p_bË_evt
)

188 
»t_code_t
 
”r_code
;

189 
bË_hids_ş›Á_cÚ‹xt_t
 * 
p_ho¡
;

190 
bË_g©ts_evt_wr™e_t
 cÚ¡ * 
p_evt_wr™e
 = &
p_bË_evt
->
evt
.
g©ts_evt
.
·¿ms
.
wr™e
;

192 
”r_code
 = 
	`blcm_lšk_ùx_g‘
(
p_hids
->
p_lšk_ùx_¡Üage
,

193 
p_bË_evt
->
evt
.
g©ts_evt
.
cÚn_hªdË
,

194 (*è&
p_ho¡
);

195 
	`BLE_HIDS_ERROR_HANDLE
(
p_hids
, 
”r_code
);

197 ià(
p_ho¡
 =ğ
NULL
)

202 ià(
p_evt_wr™e
->
Ën
 == 1)

204 
bË_hids_evt_t
 
evt
;

206 
p_evt_wr™e
->
d©a
[0])

208 
HIDS_CONTROL_POINT_SUSPEND
:

209 
evt
.
evt_ty³
 = 
BLE_HIDS_EVT_HOST_SUSP
;

212 
HIDS_CONTROL_POINT_EXIT_SUSPEND
:

213 
evt
.
evt_ty³
 = 
BLE_HIDS_EVT_HOST_EXIT_SUSP
;

222 
p_ho¡
->
ù¾_±
 = 
p_evt_wr™e
->
d©a
[0];

225 ià(
p_hids
->
evt_hªdËr
 !ğ
NULL
)

227 
evt
.
p_bË_evt
 =…_ble_evt;

228 
p_hids
->
	`evt_hªdËr
Õ_hids, &
evt
);

231 
	}
}

239 
	$Ú_´ÙocŞ_mode_wr™e
(
bË_hids_t
 * 
p_hids
, 
bË_evt_t
 cÚ¡ * 
p_bË_evt
)

241 
»t_code_t
 
”r_code
;

242 
bË_hids_ş›Á_cÚ‹xt_t
 * 
p_ho¡
;

243 
bË_g©ts_evt_wr™e_t
 cÚ¡ * 
p_evt_wr™e
 = &
p_bË_evt
->
evt
.
g©ts_evt
.
·¿ms
.
wr™e
;

245 
”r_code
 = 
	`blcm_lšk_ùx_g‘
(
p_hids
->
p_lšk_ùx_¡Üage
,

246 
p_bË_evt
->
evt
.
g©ts_evt
.
cÚn_hªdË
,

247 (*è&
p_ho¡
);

248 
	`BLE_HIDS_ERROR_HANDLE
(
p_hids
, 
”r_code
);

251 ià(
p_ho¡
 =ğ
NULL
)

256 ià(
p_evt_wr™e
->
Ën
 == 1)

258 
bË_hids_evt_t
 
evt
;

260 
p_evt_wr™e
->
d©a
[0])

262 
PROTOCOL_MODE_BOOT
:

263 
evt
.
evt_ty³
 = 
BLE_HIDS_EVT_BOOT_MODE_ENTERED
;

266 
PROTOCOL_MODE_REPORT
:

267 
evt
.
evt_ty³
 = 
BLE_HIDS_EVT_REPORT_MODE_ENTERED
;

276 
p_ho¡
->
´ÙocŞ_mode
 = 
p_evt_wr™e
->
d©a
[0];

279 ià(
p_hids
->
evt_hªdËr
 !ğ
NULL
)

281 
evt
.
p_bË_evt
 =…_ble_evt;

282 
p_hids
->
	`evt_hªdËr
Õ_hids, &
evt
);

285 
	}
}

293 
	$Ú_´ÙocŞ_mode_»ad_auth
(
bË_hids_t
 * 
p_hids
, 
bË_evt_t
 cÚ¡ * 
p_bË_evt
)

295 
»t_code_t
 
”r_code
;

296 
bË_g©ts_rw_authÜize_»¶y_·¿ms_t
 
auth_»ad_·¿ms
;

297 
bË_hids_ş›Á_cÚ‹xt_t
 * 
p_ho¡
;

298 
bË_g©ts_evt_rw_authÜize_»que¡_t
 cÚ¡ * 
p_»ad_auth
 =

299 &
p_bË_evt
->
evt
.
g©ts_evt
.
·¿ms
.
authÜize_»que¡
;

301 
”r_code
 = 
	`blcm_lšk_ùx_g‘
(
p_hids
->
p_lšk_ùx_¡Üage
,

302 
p_bË_evt
->
evt
.
g©ts_evt
.
cÚn_hªdË
,

303 (*è&
p_ho¡
);

304 
	`BLE_HIDS_ERROR_HANDLE
(
p_hids
, 
”r_code
);

307 ià(
p_ho¡
 !ğ
NULL
)

309 
	`mem£t
(&
auth_»ad_·¿ms
, 0, (auth_read_params));

311 
auth_»ad_·¿ms
.
ty³
 = 
BLE_GATTS_AUTHORIZE_TYPE_READ
;

312 
auth_»ad_·¿ms
.
·¿ms
.
»ad
.
g©t_¡©us
 = 
BLE_GATT_STATUS_SUCCESS
;

313 
auth_»ad_·¿ms
.
·¿ms
.
»ad
.
off£t
 = 
p_»ad_auth
->
»que¡
.read.offset;

314 
auth_»ad_·¿ms
.
·¿ms
.
»ad
.
Ën
 = (
ušt8_t
);

315 
auth_»ad_·¿ms
.
·¿ms
.
»ad
.
p_d©a
 = &
p_ho¡
->
´ÙocŞ_mode
;

316 
auth_»ad_·¿ms
.
·¿ms
.
»ad
.
upd©e
 = 1;

318 
”r_code
 = 
	`sd_bË_g©ts_rw_authÜize_»¶y
(
p_bË_evt
->
evt
.
g­_evt
.
cÚn_hªdË
,

319 &
auth_»ad_·¿ms
);

320 
	`BLE_HIDS_ERROR_HANDLE
(
p_hids
, 
”r_code
);

322 
	}
}

331 
	$Ú_»pÜt_cccd_wr™e
(
bË_hids_t
 * 
p_hids
,

332 
bË_hids_ch¬_id_t
 * 
p_ch¬_id
,

333 
bË_evt_t
 cÚ¡ * 
p_bË_evt
)

335 
bË_g©ts_evt_wr™e_t
 cÚ¡ * 
p_evt_wr™e
 = &
p_bË_evt
->
evt
.
g©ts_evt
.
·¿ms
.
wr™e
;

337 ià(
p_evt_wr™e
->
Ën
 == 2)

340 ià(
p_hids
->
evt_hªdËr
 !ğ
NULL
)

342 
bË_hids_evt_t
 
evt
;

344 ià(
	`bË_¤v_is_nÙifiÿtiÚ_’abËd
(
p_evt_wr™e
->
d©a
))

346 
evt
.
evt_ty³
 = 
BLE_HIDS_EVT_NOTIF_ENABLED
;

350 
evt
.
evt_ty³
 = 
BLE_HIDS_EVT_NOTIF_DISABLED
;

352 
evt
.
·¿ms
.
nÙifiÿtiÚ
.
ch¬_id
 = *
p_ch¬_id
;

353 
evt
.
p_bË_evt
 =…_ble_evt;

355 
p_hids
->
	`evt_hªdËr
Õ_hids, &
evt
);

358 
	}
}

369 
	$Ú_»pÜt_v®ue_wr™e
(
bË_hids_t
 * 
p_hids
,

370 
bË_evt_t
 cÚ¡ * 
p_bË_evt
,

371 
bË_hids_ch¬_id_t
 * 
p_ch¬_id
,

372 
ušt16_t
 
»p_off£t
,

373 
ušt16_t
 
»p_max_Ën
)

376 
»t_code_t
 
”r_code
;

377 
ušt8_t
 * 
p_»pÜt
;

378 
bË_hids_ş›Á_cÚ‹xt_t
 * 
p_ho¡
;

379 
bË_g©ts_evt_wr™e_t
 cÚ¡ * 
p_wr™e
 = &
p_bË_evt
->
evt
.
g©ts_evt
.
·¿ms
.
wr™e
;

381 
”r_code
 = 
	`blcm_lšk_ùx_g‘
(
p_hids
->
p_lšk_ùx_¡Üage
,

382 
p_bË_evt
->
evt
.
g©ts_evt
.
cÚn_hªdË
,

383 (*è&
p_ho¡
);

384 
	`BLE_HIDS_ERROR_HANDLE
(
p_hids
, 
”r_code
);

387 ià((
p_ho¡
 !ğ
NULL
è&& (
p_wr™e
->
Ën
 +…_wr™e->
off£t
 <ğ
»p_max_Ën
))

389 
p_»pÜt
 = (
ušt8_t
 *è
p_ho¡
 + 
»p_off£t
;

390 
	`memıy
(
p_»pÜt
, 
p_wr™e
->
d©a
,…_wr™e->
Ën
);

398 ià(
p_hids
->
evt_hªdËr
 !ğ
NULL
)

400 
bË_hids_evt_t
 
evt
;

402 
evt
.
evt_ty³
 = 
BLE_HIDS_EVT_REP_CHAR_WRITE
;

403 
evt
.
·¿ms
.
ch¬_wr™e
.
ch¬_id
 = *
p_ch¬_id
;

404 
evt
.
·¿ms
.
ch¬_wr™e
.
off£t
 = 
p_bË_evt
->evt.
g©ts_evt
.·¿ms.
wr™e
.offset;

405 
evt
.
·¿ms
.
ch¬_wr™e
.
Ën
 = 
p_bË_evt
->evt.
g©ts_evt
.·¿ms.
wr™e
.len;

406 
evt
.
·¿ms
.
ch¬_wr™e
.
d©a
 = 
p_bË_evt
->evt.
g©ts_evt
.·¿ms.
wr™e
.data;

407 
evt
.
p_bË_evt
 =…_ble_evt;

409 
p_hids
->
	`evt_hªdËr
Õ_hids, &
evt
);

411 
	}
}

422 
	$Ú_»pÜt_v®ue_»ad_auth
(
bË_hids_t
 * 
p_hids
,

423 
bË_hids_ch¬_id_t
 * 
p_ch¬_id
,

424 
bË_evt_t
 cÚ¡ * 
p_bË_evt
,

425 
ušt16_t
 
»p_off£t
,

426 
ušt16_t
 
»p_max_Ën
)

428 
bË_g©ts_rw_authÜize_»¶y_·¿ms_t
 
auth_»ad_·¿ms
;

429 
bË_hids_ş›Á_cÚ‹xt_t
 * 
p_ho¡
;

430 
ušt8_t
 * 
p_»pÜt
;

431 
ušt16_t
 
»ad_off£t
;

432 
ušt32_t
 
”r_code
 = 
NRF_SUCCESS
;

434 
”r_code
 = 
	`blcm_lšk_ùx_g‘
(
p_hids
->
p_lšk_ùx_¡Üage
,

435 
p_bË_evt
->
evt
.
g©ts_evt
.
cÚn_hªdË
,

436 (*è&
p_ho¡
);

437 
	`BLE_HIDS_ERROR_HANDLE
(
p_hids
, 
”r_code
);

440 ià(
p_ho¡
 !ğ
NULL
)

442 
»ad_off£t
 = 
p_bË_evt
->
evt
.
g©ts_evt
.
·¿ms
.
authÜize_»que¡
.
»que¡
.
»ad
.
off£t
;

443 
p_»pÜt
 = (
ušt8_t
 *è
p_ho¡
 + 
»p_off£t
;

444 
	`mem£t
(&
auth_»ad_·¿ms
, 0, (auth_read_params));

446 
auth_»ad_·¿ms
.
ty³
 = 
BLE_GATTS_AUTHORIZE_TYPE_READ
;

447 
auth_»ad_·¿ms
.
·¿ms
.
»ad
.
g©t_¡©us
 = 
BLE_GATT_STATUS_SUCCESS
;

448 
auth_»ad_·¿ms
.
·¿ms
.
»ad
.
off£t
 = 
»ad_off£t
;

449 
auth_»ad_·¿ms
.
·¿ms
.
»ad
.
Ën
 = 
»p_max_Ën
 - 
»ad_off£t
;

450 
auth_»ad_·¿ms
.
·¿ms
.
»ad
.
p_d©a
 = 
p_»pÜt
 + 
»ad_off£t
;

451 
auth_»ad_·¿ms
.
·¿ms
.
»ad
.
upd©e
 = 1;

453 
”r_code
 = 
	`sd_bË_g©ts_rw_authÜize_»¶y
(
p_bË_evt
->
evt
.
g­_evt
.
cÚn_hªdË
,

454 &
auth_»ad_·¿ms
);

456 
	`BLE_HIDS_ERROR_HANDLE
(
p_hids
, 
”r_code
);

463 ià(
p_hids
->
evt_hªdËr
 !ğ
NULL
)

465 
bË_hids_evt_t
 
evt
;

467 
evt
.
evt_ty³
 = 
BLE_HIDS_EVT_REPORT_READ
;

468 
evt
.
·¿ms
.
ch¬_auth_»ad
.
ch¬_id
 = *
p_ch¬_id
;

469 
evt
.
p_bË_evt
 =…_ble_evt;

471 
p_hids
->
	`evt_hªdËr
Õ_hids, &
evt
);

473 
	}
}

484 
boŞ
 
	$šp_»p_cccd_id’tify
(
bË_hids_t
 * 
p_hids
,

485 
ušt16_t
 
hªdË
,

486 
bË_hids_ch¬_id_t
 * 
p_ch¬_id
)

488 
ušt8_t
 
i
;

490 
i
 = 0; i < 
p_hids
->
šp_»p_couÁ
; i++)

492 ià(
hªdË
 =ğ
p_hids
->
šp_»p_¬¿y
[
i
].
ch¬_hªdËs
.
cccd_hªdË
)

494 *
p_ch¬_id
 = 
	`make_ch¬_id
(
BLE_UUID_REPORT_CHAR
, 
BLE_HIDS_REP_TYPE_INPUT
, 
i
);

495  
Œue
;

499  
çl£
;

500 
	}
}

513 
boŞ
 
	$»p_v®ue_id’tify
(
bË_hids_t
 * 
p_hids
,

514 
ušt16_t
 
hªdË
,

515 
bË_hids_ch¬_id_t
 * 
p_ch¬_id
,

516 
ušt16_t
 * 
p_cÚ‹xt_off£t
,

517 
ušt16_t
 * 
p_»p_max_Ën
)

519 
ušt8_t
 
i
;

522 *
p_cÚ‹xt_off£t
 = (
bË_hids_ş›Á_cÚ‹xt_t
è+ 
BOOT_KB_INPUT_REPORT_MAX_SIZE
 +

523 
BOOT_KB_OUTPUT_REPORT_MAX_SIZE
 + 
BOOT_MOUSE_INPUT_REPORT_MAX_SIZE
;

525 ià(
p_hids
->
p_šp_»p_š™_¬¿y
 !ğ
NULL
)

527 
i
 = 0; i < 
p_hids
->
šp_»p_couÁ
; i++)

529 ià(
hªdË
 =ğ
p_hids
->
šp_»p_¬¿y
[
i
].
ch¬_hªdËs
.
v®ue_hªdË
)

531 *
p_ch¬_id
 = 
	`make_ch¬_id
(
BLE_UUID_REPORT_CHAR
, 
BLE_HIDS_REP_TYPE_INPUT
, 
i
);

532 *
p_»p_max_Ën
 = 
p_hids
->
p_šp_»p_š™_¬¿y
[
i
].
max_Ën
;

533  
Œue
;

535 *
p_cÚ‹xt_off£t
 +ğ
p_hids
->
p_šp_»p_š™_¬¿y
[
i
].
max_Ën
;

538 ià(
p_hids
->
p_ou_»p_š™_¬¿y
 !ğ
NULL
)

540 
i
 = 0; i < 
p_hids
->
ou_»p_couÁ
; i++)

542 ià(
hªdË
 =ğ
p_hids
->
ou_»p_¬¿y
[
i
].
ch¬_hªdËs
.
v®ue_hªdË
)

544 *
p_ch¬_id
 = 
	`make_ch¬_id
(
BLE_UUID_REPORT_CHAR
, 
BLE_HIDS_REP_TYPE_OUTPUT
, 
i
);

545 *
p_»p_max_Ën
 = 
p_hids
->
p_ou_»p_š™_¬¿y
[
i
].
max_Ën
;

546  
Œue
;

548 *
p_cÚ‹xt_off£t
 +ğ
p_hids
->
p_ou_»p_š™_¬¿y
[
i
].
max_Ën
;

551 ià(
p_hids
->
p_ã©u»_»p_š™_¬¿y
 !ğ
NULL
)

553 
i
 = 0; i < 
p_hids
->
ã©u»_»p_couÁ
; i++)

555 ià(
hªdË
 =ğ
p_hids
->
ã©u»_»p_¬¿y
[
i
].
ch¬_hªdËs
.
v®ue_hªdË
)

557 *
p_ch¬_id
 = 
	`make_ch¬_id
(
BLE_UUID_REPORT_CHAR
, 
BLE_HIDS_REP_TYPE_FEATURE
, 
i
);

558 *
p_»p_max_Ën
 = 
p_hids
->
p_ã©u»_»p_š™_¬¿y
[
i
].
max_Ën
;

559  
Œue
;

561 *
p_cÚ‹xt_off£t
 +ğ
p_hids
->
p_ã©u»_»p_š™_¬¿y
[
i
].
max_Ën
;

565  
çl£
;

566 
	}
}

574 
	$Ú_wr™e
(
bË_hids_t
 * 
p_hids
, 
bË_evt_t
 cÚ¡ * 
p_bË_evt
)

576 
bË_hids_ch¬_id_t
 
ch¬_id
;

577 
bË_g©ts_evt_wr™e_t
 cÚ¡ * 
p_evt_wr™e
 = &
p_bË_evt
->
evt
.
g©ts_evt
.
·¿ms
.
wr™e
;

578 
ušt16_t
 
»p_d©a_off£t
 = (
bË_hids_ş›Á_cÚ‹xt_t
);

579 
ušt16_t
 
max_»p_Ën
 = 0;

581 ià(
p_evt_wr™e
->
hªdË
 =ğ
p_hids
->
hid_cÚŒŞ_pošt_hªdËs
.
v®ue_hªdË
)

583 
	`Ú_cÚŒŞ_pošt_wr™e
(
p_hids
, 
p_bË_evt
);

585 ià(
p_evt_wr™e
->
hªdË
 =ğ
p_hids
->
´ÙocŞ_mode_hªdËs
.
v®ue_hªdË
)

587 
	`Ú_´ÙocŞ_mode_wr™e
(
p_hids
, 
p_bË_evt
);

589 ià(
p_evt_wr™e
->
hªdË
 =ğ
p_hids
->
boÙ_kb_šp_»p_hªdËs
.
cccd_hªdË
)

591 
ch¬_id
 = 
	`make_ch¬_id
(
BLE_UUID_BOOT_KEYBOARD_INPUT_REPORT_CHAR
, 0, 0);

592 
	`Ú_»pÜt_cccd_wr™e
(
p_hids
, &
ch¬_id
, 
p_bË_evt
);

594 ià(
p_evt_wr™e
->
hªdË
 =ğ
p_hids
->
boÙ_kb_šp_»p_hªdËs
.
v®ue_hªdË
)

596 
ch¬_id
 = 
	`make_ch¬_id
(
BLE_UUID_BOOT_KEYBOARD_INPUT_REPORT_CHAR
, 0, 0);

597 
max_»p_Ën
 = 
BOOT_KB_INPUT_REPORT_MAX_SIZE
;

598 
	`Ú_»pÜt_v®ue_wr™e
(
p_hids
, 
p_bË_evt
, &
ch¬_id
, 
»p_d©a_off£t
, 
max_»p_Ën
);

600 ià(
p_evt_wr™e
->
hªdË
 =ğ
p_hids
->
boÙ_kb_ou_»p_hªdËs
.
v®ue_hªdË
)

602 
ch¬_id
 = 
	`make_ch¬_id
(
BLE_UUID_BOOT_KEYBOARD_OUTPUT_REPORT_CHAR
, 0, 0);

603 
»p_d©a_off£t
 +ğ
BOOT_KB_INPUT_REPORT_MAX_SIZE
;

604 
max_»p_Ën
 = 
BOOT_KB_OUTPUT_REPORT_MAX_SIZE
;

605 
	`Ú_»pÜt_v®ue_wr™e
(
p_hids
, 
p_bË_evt
, &
ch¬_id
, 
»p_d©a_off£t
, 
max_»p_Ën
);

607 ià(
p_evt_wr™e
->
hªdË
 =ğ
p_hids
->
boÙ_mou£_šp_»p_hªdËs
.
cccd_hªdË
)

609 
ch¬_id
 = 
	`make_ch¬_id
(
BLE_UUID_BOOT_MOUSE_INPUT_REPORT_CHAR
, 0, 0);

610 
	`Ú_»pÜt_cccd_wr™e
(
p_hids
, &
ch¬_id
, 
p_bË_evt
);

612 ià(
p_evt_wr™e
->
hªdË
 =ğ
p_hids
->
boÙ_mou£_šp_»p_hªdËs
.
v®ue_hªdË
)

614 
ch¬_id
 = 
	`make_ch¬_id
(
BLE_UUID_BOOT_MOUSE_INPUT_REPORT_CHAR
, 0, 0);

615 
»p_d©a_off£t
 +ğ
BOOT_KB_INPUT_REPORT_MAX_SIZE
 + 
BOOT_KB_OUTPUT_REPORT_MAX_SIZE
;

616 
max_»p_Ën
 = 
BOOT_MOUSE_INPUT_REPORT_MAX_SIZE
;

617 
	`Ú_»pÜt_v®ue_wr™e
(
p_hids
, 
p_bË_evt
, &
ch¬_id
, 
»p_d©a_off£t
, 
max_»p_Ën
);

619 ià(
	`šp_»p_cccd_id’tify
(
p_hids
, 
p_evt_wr™e
->
hªdË
, &
ch¬_id
))

621 
	`Ú_»pÜt_cccd_wr™e
(
p_hids
, &
ch¬_id
, 
p_bË_evt
);

623 ià(
	`»p_v®ue_id’tify
(
p_hids
,

624 
p_evt_wr™e
->
hªdË
,

625 &
ch¬_id
,

626 &
»p_d©a_off£t
,

627 &
max_»p_Ën
))

629 
	`Ú_»pÜt_v®ue_wr™e
(
p_hids
, 
p_bË_evt
, &
ch¬_id
, 
»p_d©a_off£t
, 
max_»p_Ën
);

635 
	}
}

643 
	$Ú_rw_authÜize_»que¡
(
bË_hids_t
 * 
p_hids
, 
bË_evt_t
 cÚ¡ * 
p_bË_evt
)

645 
bË_g©ts_evt_rw_authÜize_»que¡_t
 cÚ¡ * 
evt_rw_auth
 =

646 &
p_bË_evt
->
evt
.
g©ts_evt
.
·¿ms
.
authÜize_»que¡
;

648 
bË_hids_ch¬_id_t
 
ch¬_id
;

649 
ušt16_t
 
»p_d©a_off£t
 = (
bË_hids_ş›Á_cÚ‹xt_t
);

650 
ušt16_t
 
max_»p_Ën
 = 0;

652 ià(
evt_rw_auth
->
ty³
 !ğ
BLE_GATTS_AUTHORIZE_TYPE_READ
)

659 ià(
evt_rw_auth
->
»que¡
.
»ad
.
hªdË
 =ğ
p_hids
->
´ÙocŞ_mode_hªdËs
.
v®ue_hªdË
)

661 
	`Ú_´ÙocŞ_mode_»ad_auth
(
p_hids
, 
p_bË_evt
);

663 ià(
evt_rw_auth
->
»que¡
.
»ad
.
hªdË
 =ğ
p_hids
->
boÙ_kb_šp_»p_hªdËs
.
v®ue_hªdË
)

665 
ch¬_id
 = 
	`make_ch¬_id
(
BLE_UUID_BOOT_KEYBOARD_INPUT_REPORT_CHAR
, 0, 0);

666 
max_»p_Ën
 = 
BOOT_KB_INPUT_REPORT_MAX_SIZE
;

667 
	`Ú_»pÜt_v®ue_»ad_auth
(
p_hids
, &
ch¬_id
, 
p_bË_evt
, 
»p_d©a_off£t
, 
max_»p_Ën
);

669 ià(
evt_rw_auth
->
»que¡
.
»ad
.
hªdË
 =ğ
p_hids
->
boÙ_kb_ou_»p_hªdËs
.
v®ue_hªdË
)

671 
ch¬_id
 = 
	`make_ch¬_id
(
BLE_UUID_BOOT_KEYBOARD_OUTPUT_REPORT_CHAR
, 0, 0);

672 
»p_d©a_off£t
 +ğ
BOOT_KB_INPUT_REPORT_MAX_SIZE
;

673 
max_»p_Ën
 = 
BOOT_KB_OUTPUT_REPORT_MAX_SIZE
;

674 
	`Ú_»pÜt_v®ue_»ad_auth
(
p_hids
, &
ch¬_id
, 
p_bË_evt
, 
»p_d©a_off£t
, 
max_»p_Ën
);

676 ià(
evt_rw_auth
->
»que¡
.
»ad
.
hªdË
 =ğ
p_hids
->
boÙ_mou£_šp_»p_hªdËs
.
v®ue_hªdË
)

678 
ch¬_id
 = 
	`make_ch¬_id
(
BLE_UUID_BOOT_MOUSE_INPUT_REPORT_CHAR
, 0, 0);

679 
»p_d©a_off£t
 +ğ
BOOT_KB_INPUT_REPORT_MAX_SIZE
 + 
BOOT_KB_OUTPUT_REPORT_MAX_SIZE
;

680 
max_»p_Ën
 = 
BOOT_MOUSE_INPUT_REPORT_MAX_SIZE
;

681 
	`Ú_»pÜt_v®ue_»ad_auth
(
p_hids
, &
ch¬_id
, 
p_bË_evt
, 
»p_d©a_off£t
, 
max_»p_Ën
);

683 ià(
	`»p_v®ue_id’tify
(
p_hids
,

684 
evt_rw_auth
->
»que¡
.
»ad
.
hªdË
,

685 &
ch¬_id
,

686 &
»p_d©a_off£t
,

687 &
max_»p_Ën
))

689 
	`Ú_»pÜt_v®ue_»ad_auth
(
p_hids
, &
ch¬_id
, 
p_bË_evt
, 
»p_d©a_off£t
, 
max_»p_Ën
);

691 
	}
}

694 
	$bË_hids_Ú_bË_evt
(
bË_evt_t
 cÚ¡ * 
p_bË_evt
, * 
p_cÚ‹xt
)

696 
bË_hids_t
 * 
p_hids
 = (bË_hids_ˆ*è
p_cÚ‹xt
;

698 
p_bË_evt
->
h—d”
.
evt_id
)

700 
BLE_GAP_EVT_CONNECTED
:

701 
	`Ú_cÚÃù
(
p_hids
, 
p_bË_evt
);

704 
BLE_GATTS_EVT_WRITE
:

705 
	`Ú_wr™e
(
p_hids
, 
p_bË_evt
);

708 
BLE_GATTS_EVT_RW_AUTHORIZE_REQUEST
:

709 
	`Ú_rw_authÜize_»que¡
(
p_hids
, 
p_bË_evt
);

716 
	}
}

726 
ušt32_t
 
	$´ÙocŞ_mode_ch¬_add
(
bË_hids_t
 * 
p_hids
,

727 cÚ¡ 
bË_¤v_£cur™y_mode_t
 * 
p_£c_mode
)

729 
bË_g©ts_ch¬_md_t
 
ch¬_md
;

730 
bË_g©ts_©Œ_t
 
©Œ_ch¬_v®ue
;

731 
bË_uuid_t
 
bË_uuid
;

732 
bË_g©ts_©Œ_md_t
 
©Œ_md
;

733 
ušt8_t
 
š™Ÿl_´ÙocŞ_mode
;

735 
	`mem£t
(&
ch¬_md
, 0, (char_md));

737 
ch¬_md
.
ch¬_´İs
.
»ad
 = 1;

738 
ch¬_md
.
ch¬_´İs
.
wr™e_wo_»¥
 = 1;

739 
ch¬_md
.
p_ch¬_u£r_desc
 = 
NULL
;

740 
ch¬_md
.
p_ch¬_pf
 = 
NULL
;

741 
ch¬_md
.
p_u£r_desc_md
 = 
NULL
;

742 
ch¬_md
.
p_cccd_md
 = 
NULL
;

743 
ch¬_md
.
p_sccd_md
 = 
NULL
;

745 
	`BLE_UUID_BLE_ASSIGN
(
bË_uuid
, 
BLE_UUID_PROTOCOL_MODE_CHAR
);

747 
	`mem£t
(&
©Œ_md
, 0, (attr_md));

749 
©Œ_md
.
»ad_³rm
 = 
p_£c_mode
->read_perm;

750 
©Œ_md
.
wr™e_³rm
 = 
p_£c_mode
->write_perm;

751 
©Œ_md
.
vloc
 = 
BLE_GATTS_VLOC_STACK
;

752 
©Œ_md
.
rd_auth
 = 1;

753 
©Œ_md
.
wr_auth
 = 0;

754 
©Œ_md
.
vËn
 = 0;

756 
	`mem£t
(&
©Œ_ch¬_v®ue
, 0, (attr_char_value));

758 
š™Ÿl_´ÙocŞ_mode
 = 
DEFAULT_PROTOCOL_MODE
;

760 
©Œ_ch¬_v®ue
.
p_uuid
 = &
bË_uuid
;

761 
©Œ_ch¬_v®ue
.
p_©Œ_md
 = &
©Œ_md
;

762 
©Œ_ch¬_v®ue
.
š™_Ën
 = (
ušt8_t
);

763 
©Œ_ch¬_v®ue
.
š™_offs
 = 0;

764 
©Œ_ch¬_v®ue
.
max_Ën
 = (
ušt8_t
);

765 
©Œ_ch¬_v®ue
.
p_v®ue
 = &
š™Ÿl_´ÙocŞ_mode
;

767  
	`sd_bË_g©ts_ch¬aù”i¡ic_add
(
p_hids
->
£rviû_hªdË
,

768 &
ch¬_md
,

769 &
©Œ_ch¬_v®ue
,

770 &
p_hids
->
´ÙocŞ_mode_hªdËs
);

771 
	}
}

786 
ušt32_t
 
	$»p_ch¬_add
(
bË_hids_t
 * 
p_hids
,

787 
bË_g©t_ch¬_´İs_t
 * 
p_´İ”t›s
,

788 
ušt16_t
 
max_Ën
,

789 
bË_¤v_»pÜt_»f_t
 cÚ¡ * 
p_»p_»f
,

790 
bË_¤v_cccd_£cur™y_mode_t
 cÚ¡ * 
p_»p_»f_©Œ_md
,

791 
boŞ
 
is_»ad_»¥
,

792 
bË_hids_»p_ch¬_t
 * 
p_»p_ch¬
)

794 
ušt32_t
 
”r_code
;

795 
bË_g©ts_ch¬_md_t
 
ch¬_md
;

796 
bË_g©ts_©Œ_md_t
 
cccd_md
;

797 
bË_g©ts_©Œ_t
 
©Œ_ch¬_v®ue
;

798 
bË_uuid_t
 
bË_uuid
;

799 
bË_g©ts_©Œ_md_t
 
©Œ_md
;

800 
ušt8_t
 
’coded_»p_»f
[
BLE_SRV_ENCODED_REPORT_REF_LEN
];

803 ià(
p_´İ”t›s
->
nÙify
)

805 
	`mem£t
(&
cccd_md
, 0, (cccd_md));

806 
	`BLE_GAP_CONN_SEC_MODE_SET_OPEN
(&
cccd_md
.
»ad_³rm
);

807 
cccd_md
.
wr™e_³rm
 = 
p_»p_»f_©Œ_md
->
cccd_wr™e_³rm
;

808 
cccd_md
.
vloc
 = 
BLE_GATTS_VLOC_STACK
;

811 
	`mem£t
(&
ch¬_md
, 0, (char_md));

813 
ch¬_md
.
ch¬_´İs
 = *
p_´İ”t›s
;

814 
ch¬_md
.
p_ch¬_u£r_desc
 = 
NULL
;

815 
ch¬_md
.
p_ch¬_pf
 = 
NULL
;

816 
ch¬_md
.
p_u£r_desc_md
 = 
NULL
;

817 
ch¬_md
.
p_cccd_md
 = (
p_´İ”t›s
->
nÙify
è? &
cccd_md
 : 
NULL
;

818 
ch¬_md
.
p_sccd_md
 = 
NULL
;

820 
	`BLE_UUID_BLE_ASSIGN
(
bË_uuid
, 
BLE_UUID_REPORT_CHAR
);

822 
	`mem£t
(&
©Œ_md
, 0, (attr_md));

824 
©Œ_md
.
»ad_³rm
 = 
p_»p_»f_©Œ_md
->read_perm;

825 
©Œ_md
.
wr™e_³rm
 = 
p_»p_»f_©Œ_md
->write_perm;

826 
©Œ_md
.
vloc
 = 
BLE_GATTS_VLOC_STACK
;

827 
©Œ_md
.
rd_auth
 = 
is_»ad_»¥
 ? 1 : 0;

828 
©Œ_md
.
wr_auth
 = 0;

829 
©Œ_md
.
vËn
 = 1;

831 
	`mem£t
(&
©Œ_ch¬_v®ue
, 0, (attr_char_value));

833 
©Œ_ch¬_v®ue
.
p_uuid
 = &
bË_uuid
;

834 
©Œ_ch¬_v®ue
.
p_©Œ_md
 = &
©Œ_md
;

835 
©Œ_ch¬_v®ue
.
š™_Ën
 = 0;

836 
©Œ_ch¬_v®ue
.
š™_offs
 = 0;

837 
©Œ_ch¬_v®ue
.
max_Ën
 = max_len;

838 
©Œ_ch¬_v®ue
.
p_v®ue
 = 
NULL
;

840 
”r_code
 = 
	`sd_bË_g©ts_ch¬aù”i¡ic_add
(
p_hids
->
£rviû_hªdË
,

841 &
ch¬_md
,

842 &
©Œ_ch¬_v®ue
,

843 &
p_»p_ch¬
->
ch¬_hªdËs
);

844 ià(
”r_code
 !ğ
NRF_SUCCESS
)

846  
”r_code
;

850 
	`BLE_UUID_BLE_ASSIGN
(
bË_uuid
, 
BLE_UUID_REPORT_REF_DESCR
);

852 
	`mem£t
(&
©Œ_md
, 0, (attr_md));

854 
©Œ_md
.
»ad_³rm
 = 
p_»p_»f_©Œ_md
->read_perm;

855 
©Œ_md
.
wr™e_³rm
 = 
p_»p_»f_©Œ_md
->write_perm;

856 
©Œ_md
.
vloc
 = 
BLE_GATTS_VLOC_STACK
;

857 
©Œ_md
.
rd_auth
 = 0;

858 
©Œ_md
.
wr_auth
 = 0;

859 
©Œ_md
.
vËn
 = 0;

861 
	`mem£t
(&
©Œ_ch¬_v®ue
, 0, (attr_char_value));

863 
©Œ_ch¬_v®ue
.
p_uuid
 = &
bË_uuid
;

864 
©Œ_ch¬_v®ue
.
p_©Œ_md
 = &
©Œ_md
;

865 
©Œ_ch¬_v®ue
.
š™_Ën
 = 
	`bË_¤v_»pÜt_»f_’code
(
’coded_»p_»f
, 
p_»p_»f
);

866 
©Œ_ch¬_v®ue
.
š™_offs
 = 0;

867 
©Œ_ch¬_v®ue
.
max_Ën
 =‡‰r_ch¬_v®ue.
š™_Ën
;

868 
©Œ_ch¬_v®ue
.
p_v®ue
 = 
’coded_»p_»f
;

870  
	`sd_bË_g©ts_desütÜ_add
(
p_»p_ch¬
->
ch¬_hªdËs
.
v®ue_hªdË
,

871 &
©Œ_ch¬_v®ue
,

872 &
p_»p_ch¬
->
»f_hªdË
);

873 
	}
}

883 
ušt32_t
 
	$»p_m­_ch¬_add
(
bË_hids_t
 * 
p_hids
, cÚ¡ 
bË_hids_š™_t
 * 
p_hids_š™
)

885 
ušt32_t
 
”r_code
;

886 
bË_g©ts_ch¬_md_t
 
ch¬_md
;

887 
bË_g©ts_©Œ_t
 
©Œ_ch¬_v®ue
;

888 
bË_uuid_t
 
bË_uuid
;

889 
bË_g©ts_©Œ_md_t
 
©Œ_md
;

892 
	`mem£t
(&
ch¬_md
, 0, (char_md));

894 
ch¬_md
.
ch¬_´İs
.
»ad
 = 1;

895 
ch¬_md
.
p_ch¬_u£r_desc
 = 
NULL
;

896 
ch¬_md
.
p_ch¬_pf
 = 
NULL
;

897 
ch¬_md
.
p_u£r_desc_md
 = 
NULL
;

898 
ch¬_md
.
p_cccd_md
 = 
NULL
;

899 
ch¬_md
.
p_sccd_md
 = 
NULL
;

901 
	`BLE_UUID_BLE_ASSIGN
(
bË_uuid
, 
BLE_UUID_REPORT_MAP_CHAR
);

903 
	`mem£t
(&
©Œ_md
, 0, (attr_md));

905 
©Œ_md
.
»ad_³rm
 = 
p_hids_š™
->
»p_m­
.
£cur™y_mode
.read_perm;

906 
©Œ_md
.
wr™e_³rm
 = 
p_hids_š™
->
»p_m­
.
£cur™y_mode
.write_perm;

907 
©Œ_md
.
vloc
 = 
BLE_GATTS_VLOC_STACK
;

908 
©Œ_md
.
rd_auth
 = 0;

909 
©Œ_md
.
wr_auth
 = 0;

910 
©Œ_md
.
vËn
 = 1;

912 
	`mem£t
(&
©Œ_ch¬_v®ue
, 0, (attr_char_value));

914 
©Œ_ch¬_v®ue
.
p_uuid
 = &
bË_uuid
;

915 
©Œ_ch¬_v®ue
.
p_©Œ_md
 = &
©Œ_md
;

916 
©Œ_ch¬_v®ue
.
š™_Ën
 = 
p_hids_š™
->
»p_m­
.
d©a_Ën
;

917 
©Œ_ch¬_v®ue
.
š™_offs
 = 0;

918 
©Œ_ch¬_v®ue
.
max_Ën
 = 
p_hids_š™
->
»p_m­
.
d©a_Ën
;

919 
©Œ_ch¬_v®ue
.
p_v®ue
 = 
p_hids_š™
->
»p_m­
.
p_d©a
;

921 
”r_code
 = 
	`sd_bË_g©ts_ch¬aù”i¡ic_add
(
p_hids
->
£rviû_hªdË
,

922 &
ch¬_md
,

923 &
©Œ_ch¬_v®ue
,

924 &
p_hids
->
»p_m­_hªdËs
);

925 ià(
”r_code
 !ğ
NRF_SUCCESS
)

927  
”r_code
;

930 ià(
p_hids_š™
->
»p_m­
.
ext_»p_»f_num
 !ğ0 &&…_hids_š™->»p_m­.
p_ext_»p_»f
 =ğ
NULL
)

932  
NRF_ERROR_INVALID_PARAM
;

935 
i
 = 0; i < 
p_hids_š™
->
»p_m­
.
ext_»p_»f_num
; ++i)

937 
ušt8_t
 
’coded_»p_»f
[(
bË_uuid128_t
)];

938 
ušt8_t
 
’coded_»p_»f_Ën
;

941 
	`BLE_UUID_BLE_ASSIGN
(
bË_uuid
, 
BLE_UUID_EXTERNAL_REPORT_REF_DESCR
);

943 
	`mem£t
(&
©Œ_md
, 0, (attr_md));

945 
	`BLE_GAP_CONN_SEC_MODE_SET_ENC_NO_MITM
(&
©Œ_md
.
»ad_³rm
);

946 
	`BLE_GAP_CONN_SEC_MODE_SET_NO_ACCESS
(&
©Œ_md
.
wr™e_³rm
);

948 
©Œ_md
.
vloc
 = 
BLE_GATTS_VLOC_STACK
;

949 
©Œ_md
.
rd_auth
 = 0;

950 
©Œ_md
.
wr_auth
 = 0;

951 
©Œ_md
.
vËn
 = 0;

953 
”r_code
 = 
	`sd_bË_uuid_’code
(&
p_hids_š™
->
»p_m­
.
p_ext_»p_»f
[
i
],

954 &
’coded_»p_»f_Ën
,

955 
’coded_»p_»f
);

956 ià(
”r_code
 !ğ
NRF_SUCCESS
)

958  
”r_code
;

961 
	`mem£t
(&
©Œ_ch¬_v®ue
, 0, (attr_char_value));

963 
©Œ_ch¬_v®ue
.
p_uuid
 = &
bË_uuid
;

964 
©Œ_ch¬_v®ue
.
p_©Œ_md
 = &
©Œ_md
;

965 
©Œ_ch¬_v®ue
.
š™_Ën
 = 
’coded_»p_»f_Ën
;

966 
©Œ_ch¬_v®ue
.
š™_offs
 = 0;

967 
©Œ_ch¬_v®ue
.
max_Ën
 =‡‰r_ch¬_v®ue.
š™_Ën
;

968 
©Œ_ch¬_v®ue
.
p_v®ue
 = 
’coded_»p_»f
;

970 
”r_code
 = 
	`sd_bË_g©ts_desütÜ_add
(
p_hids
->
»p_m­_hªdËs
.
v®ue_hªdË
,

971 &
©Œ_ch¬_v®ue
,

972 &
p_hids
->
»p_m­_ext_»p_»f_hªdË
);

973 ià(
”r_code
 !ğ
NRF_SUCCESS
)

975  
”r_code
;

979  
NRF_SUCCESS
;

980 
	}
}

993 
ušt32_t
 
	$boÙ_šp_»p_ch¬_add
(
bË_hids_t
 * 
p_hids
,

994 
ušt16_t
 
uuid
,

995 
ušt16_t
 
max_d©a_Ën
,

996 cÚ¡ 
bË_¤v_cccd_£cur™y_mode_t
 * 
p_£c_mode
,

997 
bË_g©ts_ch¬_hªdËs_t
 * 
p_ch¬_hªdËs
)

999 
bË_g©ts_ch¬_md_t
 
ch¬_md
;

1000 
bË_g©ts_©Œ_md_t
 
cccd_md
;

1001 
bË_g©ts_©Œ_t
 
©Œ_ch¬_v®ue
;

1002 
bË_uuid_t
 
bË_uuid
;

1003 
bË_g©ts_©Œ_md_t
 
©Œ_md
;

1005 
	`mem£t
(&
cccd_md
, 0, (cccd_md));

1007 
	`BLE_GAP_CONN_SEC_MODE_SET_OPEN
(&
cccd_md
.
»ad_³rm
);

1008 
cccd_md
.
wr™e_³rm
 = 
p_£c_mode
->
cccd_wr™e_³rm
;

1009 
cccd_md
.
vloc
 = 
BLE_GATTS_VLOC_STACK
;

1011 
	`mem£t
(&
ch¬_md
, 0, (char_md));

1013 
ch¬_md
.
ch¬_´İs
.
»ad
 = 1;

1014 
ch¬_md
.
ch¬_´İs
.
wr™e
 = (
p_£c_mode
->
wr™e_³rm
.
sm
) ? 1 : 0;

1015 
ch¬_md
.
ch¬_´İs
.
nÙify
 = 1;

1016 
ch¬_md
.
p_ch¬_u£r_desc
 = 
NULL
;

1017 
ch¬_md
.
p_ch¬_pf
 = 
NULL
;

1018 
ch¬_md
.
p_u£r_desc_md
 = 
NULL
;

1019 
ch¬_md
.
p_cccd_md
 = &
cccd_md
;

1020 
ch¬_md
.
p_sccd_md
 = 
NULL
;

1022 
	`BLE_UUID_BLE_ASSIGN
(
bË_uuid
, 
uuid
);

1024 
	`mem£t
(&
©Œ_md
, 0, (attr_md));

1026 
©Œ_md
.
»ad_³rm
 = 
p_£c_mode
->read_perm;

1027 
©Œ_md
.
wr™e_³rm
 = 
p_£c_mode
->write_perm;

1028 
©Œ_md
.
vloc
 = 
BLE_GATTS_VLOC_STACK
;

1029 
©Œ_md
.
rd_auth
 = 1;

1030 
©Œ_md
.
wr_auth
 = 0;

1031 
©Œ_md
.
vËn
 = 0;

1033 
	`mem£t
(&
©Œ_ch¬_v®ue
, 0, (attr_char_value));

1035 
©Œ_ch¬_v®ue
.
p_uuid
 = &
bË_uuid
;

1036 
©Œ_ch¬_v®ue
.
p_©Œ_md
 = &
©Œ_md
;

1037 
©Œ_ch¬_v®ue
.
š™_Ën
 = 0;

1038 
©Œ_ch¬_v®ue
.
š™_offs
 = 0;

1039 
©Œ_ch¬_v®ue
.
max_Ën
 = 
max_d©a_Ën
;

1040 
©Œ_ch¬_v®ue
.
p_v®ue
 = 
NULL
;

1042  
	`sd_bË_g©ts_ch¬aù”i¡ic_add
(
p_hids
->
£rviû_hªdË
,

1043 &
ch¬_md
,

1044 &
©Œ_ch¬_v®ue
,

1045 
p_ch¬_hªdËs
);

1046 
	}
}

1056 
ušt32_t
 
	$boÙ_kb_ou_»p_ch¬_add
(
bË_hids_t
 * 
p_hids
, cÚ¡ 
bË_hids_š™_t
 * 
p_hids_š™
)

1058 
bË_g©ts_ch¬_md_t
 
ch¬_md
;

1059 
bË_g©ts_©Œ_t
 
©Œ_ch¬_v®ue
;

1060 
bË_uuid_t
 
bË_uuid
;

1061 
bË_g©ts_©Œ_md_t
 
©Œ_md
;

1063 
	`mem£t
(&
ch¬_md
, 0, (char_md));

1065 
ch¬_md
.
ch¬_´İs
.
»ad
 = 1;

1066 
ch¬_md
.
ch¬_´İs
.
wr™e
 = 1;

1067 
ch¬_md
.
ch¬_´İs
.
wr™e_wo_»¥
 = 1;

1068 
ch¬_md
.
p_ch¬_u£r_desc
 = 
NULL
;

1069 
ch¬_md
.
p_ch¬_pf
 = 
NULL
;

1070 
ch¬_md
.
p_u£r_desc_md
 = 
NULL
;

1071 
ch¬_md
.
p_cccd_md
 = 
NULL
;

1072 
ch¬_md
.
p_sccd_md
 = 
NULL
;

1074 
	`BLE_UUID_BLE_ASSIGN
(
bË_uuid
, 
BLE_UUID_BOOT_KEYBOARD_OUTPUT_REPORT_CHAR
);

1076 
	`mem£t
(&
©Œ_md
, 0, (attr_md));

1078 
©Œ_md
.
»ad_³rm
 = 
p_hids_š™
->
£cur™y_mode_boÙ_kb_ou_»p
.read_perm;

1079 
©Œ_md
.
wr™e_³rm
 = 
p_hids_š™
->
£cur™y_mode_boÙ_kb_ou_»p
.write_perm;

1080 
©Œ_md
.
vloc
 = 
BLE_GATTS_VLOC_STACK
;

1081 
©Œ_md
.
rd_auth
 = 1;

1082 
©Œ_md
.
wr_auth
 = 0;

1083 
©Œ_md
.
vËn
 = 0;

1085 
	`mem£t
(&
©Œ_ch¬_v®ue
, 0, (attr_char_value));

1087 
©Œ_ch¬_v®ue
.
p_uuid
 = &
bË_uuid
;

1088 
©Œ_ch¬_v®ue
.
p_©Œ_md
 = &
©Œ_md
;

1089 
©Œ_ch¬_v®ue
.
š™_Ën
 = 0;

1090 
©Œ_ch¬_v®ue
.
š™_offs
 = 0;

1091 
©Œ_ch¬_v®ue
.
max_Ën
 = 
BOOT_KB_OUTPUT_REPORT_MAX_SIZE
;

1092 
©Œ_ch¬_v®ue
.
p_v®ue
 = 
NULL
;

1094  
	`sd_bË_g©ts_ch¬aù”i¡ic_add
(
p_hids
->
£rviû_hªdË
, &
ch¬_md
, &
©Œ_ch¬_v®ue
,

1095 &
p_hids
->
boÙ_kb_ou_»p_hªdËs
);

1096 
	}
}

1106 
ušt8_t
 
	$’code_hid_šfÜm©iÚ
(
ušt8_t
 * 
p_’coded_bufãr
,

1107 cÚ¡ 
bË_hids_hid_šfÜm©iÚ_t
 * 
p_hid_šfÜm©iÚ
)

1109 
ušt8_t
 
Ën
 = 
	`ušt16_’code
(
p_hid_šfÜm©iÚ
->
bcd_hid
, 
p_’coded_bufãr
);

1111 
p_’coded_bufãr
[
Ën
++] = 
p_hid_šfÜm©iÚ
->
b_couÁry_code
;

1112 
p_’coded_bufãr
[
Ën
++] = 
p_hid_šfÜm©iÚ
->
æags
;

1114 
	`APP_ERROR_CHECK_BOOL
(
Ën
 =ğ
ENCODED_HID_INFORMATION_LEN
);

1116  
Ën
;

1117 
	}
}

1127 
ušt32_t
 
	$hid_šfÜm©iÚ_ch¬_add
(
bË_hids_t
 * 
p_hids
, cÚ¡ 
bË_hids_š™_t
 * 
p_hids_š™
)

1129 
bË_g©ts_ch¬_md_t
 
ch¬_md
;

1130 
bË_g©ts_©Œ_t
 
©Œ_ch¬_v®ue
;

1131 
bË_uuid_t
 
bË_uuid
;

1132 
bË_g©ts_©Œ_md_t
 
©Œ_md
;

1133 
ušt8_t
 
’coded_hid_šfÜm©iÚ
[
ENCODED_HID_INFORMATION_LEN
];

1134 
ušt8_t
 
hid_šfo_Ën
;

1136 
	`mem£t
(&
ch¬_md
, 0, (char_md));

1138 
ch¬_md
.
ch¬_´İs
.
»ad
 = 1;

1139 
ch¬_md
.
p_ch¬_u£r_desc
 = 
NULL
;

1140 
ch¬_md
.
p_ch¬_pf
 = 
NULL
;

1141 
ch¬_md
.
p_u£r_desc_md
 = 
NULL
;

1142 
ch¬_md
.
p_cccd_md
 = 
NULL
;

1143 
ch¬_md
.
p_sccd_md
 = 
NULL
;

1145 
	`BLE_UUID_BLE_ASSIGN
(
bË_uuid
, 
BLE_UUID_HID_INFORMATION_CHAR
);

1147 
	`mem£t
(&
©Œ_md
, 0, (attr_md));

1149 
©Œ_md
.
»ad_³rm
 = 
p_hids_š™
->
hid_šfÜm©iÚ
.
£cur™y_mode
.read_perm;

1150 
©Œ_md
.
wr™e_³rm
 = 
p_hids_š™
->
hid_šfÜm©iÚ
.
£cur™y_mode
.write_perm;

1151 
©Œ_md
.
vloc
 = 
BLE_GATTS_VLOC_STACK
;

1152 
©Œ_md
.
rd_auth
 = 0;

1153 
©Œ_md
.
wr_auth
 = 0;

1154 
©Œ_md
.
vËn
 = 0;

1156 
hid_šfo_Ën
 = 
	`’code_hid_šfÜm©iÚ
(
’coded_hid_šfÜm©iÚ
, &
p_hids_š™
->
hid_šfÜm©iÚ
);

1158 
	`mem£t
(&
©Œ_ch¬_v®ue
, 0, (attr_char_value));

1160 
©Œ_ch¬_v®ue
.
p_uuid
 = &
bË_uuid
;

1161 
©Œ_ch¬_v®ue
.
p_©Œ_md
 = &
©Œ_md
;

1162 
©Œ_ch¬_v®ue
.
š™_Ën
 = 
hid_šfo_Ën
;

1163 
©Œ_ch¬_v®ue
.
š™_offs
 = 0;

1164 
©Œ_ch¬_v®ue
.
max_Ën
 =‡‰r_ch¬_v®ue.
š™_Ën
;

1165 
©Œ_ch¬_v®ue
.
p_v®ue
 = 
’coded_hid_šfÜm©iÚ
;

1167  
	`sd_bË_g©ts_ch¬aù”i¡ic_add
(
p_hids
->
£rviû_hªdË
, &
ch¬_md
,

1168 &
©Œ_ch¬_v®ue
,

1169 &
p_hids
->
hid_šfÜm©iÚ_hªdËs
);

1170 
	}
}

1180 
ušt32_t
 
	$hid_cÚŒŞ_pošt_ch¬_add
(
bË_hids_t
 * 
p_hids
,

1181 cÚ¡ 
bË_¤v_£cur™y_mode_t
 * 
p_£c_mode
)

1183 
bË_g©ts_ch¬_md_t
 
ch¬_md
;

1184 
bË_g©ts_©Œ_t
 
©Œ_ch¬_v®ue
;

1185 
bË_uuid_t
 
bË_uuid
;

1186 
bË_g©ts_©Œ_md_t
 
©Œ_md
;

1187 
ušt8_t
 
š™Ÿl_hid_cÚŒŞ_pošt
;

1189 
	`mem£t
(&
ch¬_md
, 0, (char_md));

1191 
ch¬_md
.
ch¬_´İs
.
wr™e_wo_»¥
 = 1;

1192 
ch¬_md
.
p_ch¬_u£r_desc
 = 
NULL
;

1193 
ch¬_md
.
p_ch¬_pf
 = 
NULL
;

1194 
ch¬_md
.
p_u£r_desc_md
 = 
NULL
;

1195 
ch¬_md
.
p_cccd_md
 = 
NULL
;

1196 
ch¬_md
.
p_sccd_md
 = 
NULL
;

1198 
	`BLE_UUID_BLE_ASSIGN
(
bË_uuid
, 
BLE_UUID_HID_CONTROL_POINT_CHAR
);

1200 
	`mem£t
(&
©Œ_md
, 0, (attr_md));

1202 
©Œ_md
.
»ad_³rm
 = 
p_£c_mode
->read_perm;

1203 
©Œ_md
.
wr™e_³rm
 = 
p_£c_mode
->write_perm;

1204 
©Œ_md
.
vloc
 = 
BLE_GATTS_VLOC_STACK
;

1205 
©Œ_md
.
rd_auth
 = 0;

1206 
©Œ_md
.
wr_auth
 = 0;

1207 
©Œ_md
.
vËn
 = 0;

1209 
š™Ÿl_hid_cÚŒŞ_pošt
 = 
INITIAL_VALUE_HID_CONTROL_POINT
;

1211 
	`mem£t
(&
©Œ_ch¬_v®ue
, 0, (attr_char_value));

1213 
©Œ_ch¬_v®ue
.
p_uuid
 = &
bË_uuid
;

1214 
©Œ_ch¬_v®ue
.
p_©Œ_md
 = &
©Œ_md
;

1215 
©Œ_ch¬_v®ue
.
š™_Ën
 = (
ušt8_t
);

1216 
©Œ_ch¬_v®ue
.
š™_offs
 = 0;

1217 
©Œ_ch¬_v®ue
.
max_Ën
 = (
ušt8_t
);

1218 
©Œ_ch¬_v®ue
.
p_v®ue
 = &
š™Ÿl_hid_cÚŒŞ_pošt
;

1220  
	`sd_bË_g©ts_ch¬aù”i¡ic_add
(
p_hids
->
£rviû_hªdË
, &
ch¬_md
,

1221 &
©Œ_ch¬_v®ue
,

1222 &
p_hids
->
hid_cÚŒŞ_pošt_hªdËs
);

1223 
	}
}

1233 
ušt32_t
 
	$šp_»p_ch¬aù”i¡ics_add
(
bË_hids_t
 * 
p_hids
,

1234 cÚ¡ 
bË_hids_š™_t
 * 
p_hids_š™
)

1236 ià((
p_hids_š™
->
šp_»p_couÁ
 !ğ0è&& (p_hids_š™->
p_šp_»p_¬¿y
 !ğ
NULL
))

1238 
ušt8_t
 
i
;

1240 
i
 = 0; i < 
p_hids_š™
->
šp_»p_couÁ
; i++)

1242 
ušt32_t
 
”r_code
;

1243 
bË_hids_šp_»p_š™_t
 cÚ¡ * 
p_»p_š™
 = &
p_hids_š™
->
p_šp_»p_¬¿y
[
i
];

1244 
bË_g©t_ch¬_´İs_t
 
´İ”t›s
;

1246 
	`mem£t
(&
´İ”t›s
, 0, (properties));

1248 
´İ”t›s
.
»ad
 = 
Œue
;

1249 
´İ”t›s
.
wr™e
 = 
p_»p_š™
->
£cur™y_mode
.
wr™e_³rm
.
sm
 ? 1 : 0;

1250 
´İ”t›s
.
nÙify
 = 
Œue
;

1252 
”r_code
 = 
	`»p_ch¬_add
(
p_hids
,

1253 &
´İ”t›s
,

1254 
p_»p_š™
->
max_Ën
,

1255 &
p_»p_š™
->
»p_»f
,

1256 &
p_»p_š™
->
£cur™y_mode
,

1258 &
p_hids
->
šp_»p_¬¿y
[
i
]);

1259 ià(
”r_code
 !ğ
NRF_SUCCESS
)

1261  
”r_code
;

1266  
NRF_SUCCESS
;

1267 
	}
}

1277 
ušt32_t
 
	$ou_»p_ch¬aù”i¡ics_add
(
bË_hids_t
 * 
p_hids
,

1278 cÚ¡ 
bË_hids_š™_t
 * 
p_hids_š™
)

1280 ià((
p_hids_š™
->
ou_»p_couÁ
 !ğ0è&& (p_hids_š™->
p_ou_»p_¬¿y
 !ğ
NULL
))

1282 
ušt8_t
 
i
;

1284 
i
 = 0; i < 
p_hids_š™
->
ou_»p_couÁ
; i++)

1286 
ušt32_t
 
”r_code
;

1287 
bË_hids_ou_»p_š™_t
 cÚ¡ * 
p_»p_š™
 = &
p_hids_š™
->
p_ou_»p_¬¿y
[
i
];

1288 
bË_g©t_ch¬_´İs_t
 
´İ”t›s
;

1290 
	`mem£t
(&
´İ”t›s
, 0, (properties));

1292 
´İ”t›s
.
»ad
 = 
Œue
;

1293 
´İ”t›s
.
wr™e
 = 
Œue
;

1294 
´İ”t›s
.
wr™e_wo_»¥
 = 
Œue
;

1296 
”r_code
 = 
	`»p_ch¬_add
(
p_hids
,

1297 &
´İ”t›s
,

1298 
p_»p_š™
->
max_Ën
,

1299 &
p_»p_š™
->
»p_»f
,

1300 &
p_»p_š™
->
£cur™y_mode
,

1302 &
p_hids
->
ou_»p_¬¿y
[
i
]);

1303 ià(
”r_code
 !ğ
NRF_SUCCESS
)

1305  
”r_code
;

1310  
NRF_SUCCESS
;

1311 
	}
}

1321 
ušt32_t
 
	$ã©u»_»p_ch¬aù”i¡ics_add
(
bË_hids_t
 * 
p_hids
,

1322 cÚ¡ 
bË_hids_š™_t
 * 
p_hids_š™
)

1324 ià((
p_hids_š™
->
ã©u»_»p_couÁ
 !ğ0è&& (p_hids_š™->
p_ã©u»_»p_¬¿y
 !ğ
NULL
))

1326 
ušt8_t
 
i
;

1328 
i
 = 0; i < 
p_hids_š™
->
ã©u»_»p_couÁ
; i++)

1330 
ušt32_t
 
”r_code
;

1331 
bË_hids_ã©u»_»p_š™_t
 cÚ¡ * 
p_»p_š™
 = &
p_hids_š™
->
p_ã©u»_»p_¬¿y
[
i
];

1332 
bË_g©t_ch¬_´İs_t
 
´İ”t›s
;

1334 
	`mem£t
(&
´İ”t›s
, 0, (properties));

1336 
´İ”t›s
.
»ad
 = 
Œue
;

1337 
´İ”t›s
.
wr™e
 = 
Œue
;

1339 
”r_code
 = 
	`»p_ch¬_add
(
p_hids
,

1340 &
´İ”t›s
,

1341 
p_»p_š™
->
max_Ën
,

1342 &
p_»p_š™
->
»p_»f
,

1343 &
p_»p_š™
->
£cur™y_mode
,

1345 &
p_hids
->
ã©u»_»p_¬¿y
[
i
]);

1346 ià(
”r_code
 !ğ
NRF_SUCCESS
)

1348  
”r_code
;

1353  
NRF_SUCCESS
;

1354 
	}
}

1364 
ušt32_t
 
	$šşudes_add
(
bË_hids_t
 * 
p_hids
, cÚ¡ 
bË_hids_š™_t
 * 
p_hids_š™
)

1366 
ušt32_t
 
”r_code
;

1367 
ušt8_t
 
i
;

1368 
ušt16_t
 
unu£d_šşude_hªdË
;

1370 
i
 = 0; i < 
p_hids_š™
->
šşuded_£rviûs_couÁ
; i++)

1372 
”r_code
 = 
	`sd_bË_g©ts_šşude_add
(
p_hids
->
£rviû_hªdË
,

1373 
p_hids_š™
->
p_šşuded_£rviûs_¬¿y
[
i
],

1374 &
unu£d_šşude_hªdË
);

1375 ià(
”r_code
 !ğ
NRF_SUCCESS
)

1377  
”r_code
;

1381  
NRF_SUCCESS
;

1382 
	}
}

1385 
ušt32_t
 
	$bË_hids_š™
(
bË_hids_t
 * 
p_hids
, cÚ¡ 
bË_hids_š™_t
 * 
p_hids_š™
)

1387 
ušt32_t
 
”r_code
;

1388 
bË_uuid_t
 
bË_uuid
;

1390 ià((
p_hids_š™
->
šp_»p_couÁ
 > 
BLE_HIDS_MAX_INPUT_REP
) ||

1391 (
p_hids_š™
->
ou_»p_couÁ
 > 
BLE_HIDS_MAX_OUTPUT_REP
) ||

1392 (
p_hids_š™
->
ã©u»_»p_couÁ
 > 
BLE_HIDS_MAX_FEATURE_REP
)

1395  
NRF_ERROR_INVALID_PARAM
;

1399 
p_hids
->
evt_hªdËr
 = 
p_hids_š™
->evt_handler;

1400 
p_hids
->
”rÜ_hªdËr
 = 
p_hids_š™
->error_handler;

1401 
p_hids
->
šp_»p_couÁ
 = 
p_hids_š™
->inp_rep_count;

1402 
p_hids
->
ou_»p_couÁ
 = 
p_hids_š™
->outp_rep_count;

1403 
p_hids
->
ã©u»_»p_couÁ
 = 
p_hids_š™
->feature_rep_count;

1406 
	`BLE_UUID_BLE_ASSIGN
(
bË_uuid
, 
BLE_UUID_HUMAN_INTERFACE_DEVICE_SERVICE
);

1408 
”r_code
 = 
	`sd_bË_g©ts_£rviû_add
(
BLE_GATTS_SRVC_TYPE_PRIMARY
,

1409 &
bË_uuid
,

1410 &
p_hids
->
£rviû_hªdË
);

1411 ià(
”r_code
 !ğ
NRF_SUCCESS
)

1413  
”r_code
;

1417 
”r_code
 = 
	`šşudes_add
(
p_hids
, 
p_hids_š™
);

1418 ià(
”r_code
 !ğ
NRF_SUCCESS
)

1420  
”r_code
;

1423 ià(
p_hids_š™
->
is_kb
 ||…_hids_š™->
is_mou£
)

1426 
”r_code
 = 
	`´ÙocŞ_mode_ch¬_add
(
p_hids
, &
p_hids_š™
->
£cur™y_mode_´ÙocŞ
);

1427 ià(
”r_code
 !ğ
NRF_SUCCESS
)

1429  
”r_code
;

1434 
”r_code
 = 
	`šp_»p_ch¬aù”i¡ics_add
(
p_hids
, 
p_hids_š™
);

1435 ià(
”r_code
 !ğ
NRF_SUCCESS
)

1437  
”r_code
;

1441 
”r_code
 = 
	`ou_»p_ch¬aù”i¡ics_add
(
p_hids
, 
p_hids_š™
);

1442 ià(
”r_code
 !ğ
NRF_SUCCESS
)

1444  
”r_code
;

1448 
”r_code
 = 
	`ã©u»_»p_ch¬aù”i¡ics_add
(
p_hids
, 
p_hids_š™
);

1449 ià(
”r_code
 !ğ
NRF_SUCCESS
)

1451  
”r_code
;

1455 
”r_code
 = 
	`»p_m­_ch¬_add
(
p_hids
, 
p_hids_š™
);

1456 ià(
”r_code
 !ğ
NRF_SUCCESS
)

1458  
”r_code
;

1461 ià(
p_hids_š™
->
is_kb
)

1464 
”r_code
 = 
	`boÙ_šp_»p_ch¬_add
(
p_hids
,

1465 
BLE_UUID_BOOT_KEYBOARD_INPUT_REPORT_CHAR
,

1466 
BOOT_KB_INPUT_REPORT_MAX_SIZE
,

1467 &
p_hids_š™
->
£cur™y_mode_boÙ_kb_šp_»p
,

1468 &
p_hids
->
boÙ_kb_šp_»p_hªdËs
);

1469 ià(
”r_code
 !ğ
NRF_SUCCESS
)

1471  
”r_code
;

1475 
”r_code
 = 
	`boÙ_kb_ou_»p_ch¬_add
(
p_hids
, 
p_hids_š™
);

1476 ià(
”r_code
 !ğ
NRF_SUCCESS
)

1478  
”r_code
;

1482 ià(
p_hids_š™
->
is_mou£
)

1485 
”r_code
 = 
	`boÙ_šp_»p_ch¬_add
(
p_hids
,

1486 
BLE_UUID_BOOT_MOUSE_INPUT_REPORT_CHAR
,

1487 
BOOT_MOUSE_INPUT_REPORT_MAX_SIZE
,

1488 &
p_hids_š™
->
£cur™y_mode_boÙ_mou£_šp_»p
,

1489 &
p_hids
->
boÙ_mou£_šp_»p_hªdËs
);

1490 ià(
”r_code
 !ğ
NRF_SUCCESS
)

1492  
”r_code
;

1497 
”r_code
 = 
	`hid_šfÜm©iÚ_ch¬_add
(
p_hids
, 
p_hids_š™
);

1498 ià(
”r_code
 !ğ
NRF_SUCCESS
)

1500  
”r_code
;

1504 
”r_code
 = 
	`hid_cÚŒŞ_pošt_ch¬_add
(
p_hids
, &
p_hids_š™
->
£cur™y_mode_ù¾_pošt
);

1505 ià(
”r_code
 !ğ
NRF_SUCCESS
)

1507  
”r_code
;

1511 
p_hids
->
p_šp_»p_š™_¬¿y
 = 
p_hids_š™
->
p_šp_»p_¬¿y
;

1512 
p_hids
->
p_ou_»p_š™_¬¿y
 = 
p_hids_š™
->
p_ou_»p_¬¿y
;

1513 
p_hids
->
p_ã©u»_»p_š™_¬¿y
 = 
p_hids_š™
->
p_ã©u»_»p_¬¿y
;

1515  
”r_code
;

1516 
	}
}

1519 
ušt32_t
 
	$bË_hids_šp_»p_£nd
(
bË_hids_t
 * 
p_hids
,

1520 
ušt8_t
 
»p_šdex
,

1521 
ušt16_t
 
Ën
,

1522 
ušt8_t
 * 
p_d©a
,

1523 
ušt16_t
 
cÚn_hªdË
)

1525 
ušt32_t
 
”r_code
;

1527 ià(
»p_šdex
 < 
p_hids
->
šp_»p_couÁ
)

1529 
bË_hids_»p_ch¬_t
 * 
p_»p_ch¬
 = &
p_hids
->
šp_»p_¬¿y
[
»p_šdex
];

1531 ià(
cÚn_hªdË
 !ğ
BLE_CONN_HANDLE_INVALID
)

1533 
bË_g©ts_hvx_·¿ms_t
 
hvx_·¿ms
;

1534 
ušt8_t
 
šdex
 = 0;

1535 
ušt16_t
 
hvx_Ën
 = 
Ën
;

1536 
ušt8_t
 * 
p_ho¡_»p_d©a
;

1538 
”r_code
 = 
	`blcm_lšk_ùx_g‘
(
p_hids
->
p_lšk_ùx_¡Üage
,

1539 
cÚn_hªdË
,

1540 (*è&
p_ho¡_»p_d©a
);

1541 
	`VERIFY_SUCCESS
(
”r_code
);

1543 ià(
p_ho¡_»p_d©a
 !ğ
NULL
)

1545 
p_ho¡_»p_d©a
 +ğ(
bË_hids_ş›Á_cÚ‹xt_t
è+ 
BOOT_KB_INPUT_REPORT_MAX_SIZE
 +

1546 
BOOT_KB_OUTPUT_REPORT_MAX_SIZE
 + 
BOOT_MOUSE_INPUT_REPORT_MAX_SIZE
;

1550  
NRF_ERROR_NOT_FOUND
;

1554 
šdex
 < 
»p_šdex
)

1556 
p_ho¡_»p_d©a
 +ğ
p_hids
->
p_šp_»p_š™_¬¿y
[
šdex
].
max_Ën
;

1557 ++
šdex
;

1560 ià(
Ën
 <ğ
p_hids
->
p_šp_»p_š™_¬¿y
[
»p_šdex
].
max_Ën
)

1562 
	`memıy
(
p_ho¡_»p_d©a
, 
p_d©a
, 
Ën
);

1566  
NRF_ERROR_DATA_SIZE
;

1570 
	`mem£t
(&
hvx_·¿ms
, 0, (hvx_params));

1572 
hvx_·¿ms
.
hªdË
 = 
p_»p_ch¬
->
ch¬_hªdËs
.
v®ue_hªdË
;

1573 
hvx_·¿ms
.
ty³
 = 
BLE_GATT_HVX_NOTIFICATION
;

1574 
hvx_·¿ms
.
off£t
 = 0;

1575 
hvx_·¿ms
.
p_Ën
 = &
hvx_Ën
;

1576 
hvx_·¿ms
.
p_d©a
 =…_data;

1578 
”r_code
 = 
	`sd_bË_g©ts_hvx
(
cÚn_hªdË
, &
hvx_·¿ms
);

1579 ià((
”r_code
 =ğ
NRF_SUCCESS
è&& (
hvx_Ën
 !ğ
Ën
))

1581 
”r_code
 = 
NRF_ERROR_DATA_SIZE
;

1586 
”r_code
 = 
NRF_ERROR_INVALID_STATE
;

1591 
”r_code
 = 
NRF_ERROR_INVALID_PARAM
;

1594  
”r_code
;

1595 
	}
}

1598 
ušt32_t
 
	$bË_hids_boÙ_kb_šp_»p_£nd
(
bË_hids_t
 * 
p_hids
,

1599 
ušt16_t
 
Ën
,

1600 
ušt8_t
 * 
p_d©a
,

1601 
ušt16_t
 
cÚn_hªdË
)

1603 
ušt32_t
 
”r_code
;

1605 ià(
cÚn_hªdË
 !ğ
BLE_CONN_HANDLE_INVALID
)

1607 
bË_g©ts_hvx_·¿ms_t
 
hvx_·¿ms
;

1608 
ušt16_t
 
hvx_Ën
 = 
Ën
;

1609 
ušt8_t
 * 
p_ho¡_»p_d©a
;

1611 
”r_code
 = 
	`blcm_lšk_ùx_g‘
(
p_hids
->
p_lšk_ùx_¡Üage
,

1612 
cÚn_hªdË
,

1613 (*è&
p_ho¡_»p_d©a
);

1614 
	`VERIFY_SUCCESS
(
”r_code
);

1616 ià(
p_ho¡_»p_d©a
 !ğ
NULL
)

1618 
p_ho¡_»p_d©a
 +ğ(
bË_hids_ş›Á_cÚ‹xt_t
);

1622  
NRF_ERROR_NOT_FOUND
;

1626 ià(
Ën
 <ğ
BOOT_KB_INPUT_REPORT_MAX_SIZE
)

1628 
	`memıy
(
p_ho¡_»p_d©a
, 
p_d©a
, 
Ën
);

1632 
	`mem£t
(&
hvx_·¿ms
, 0, (hvx_params));

1634 
hvx_·¿ms
.
hªdË
 = 
p_hids
->
boÙ_kb_šp_»p_hªdËs
.
v®ue_hªdË
;

1635 
hvx_·¿ms
.
ty³
 = 
BLE_GATT_HVX_NOTIFICATION
;

1636 
hvx_·¿ms
.
off£t
 = 0;

1637 
hvx_·¿ms
.
p_Ën
 = &
hvx_Ën
;

1638 
hvx_·¿ms
.
p_d©a
 =…_data;

1640 
”r_code
 = 
	`sd_bË_g©ts_hvx
(
cÚn_hªdË
, &
hvx_·¿ms
);

1641 ià((
”r_code
 =ğ
NRF_SUCCESS
è&& (
hvx_Ën
 !ğ
Ën
))

1643 
”r_code
 = 
NRF_ERROR_DATA_SIZE
;

1648 
”r_code
 = 
NRF_ERROR_INVALID_STATE
;

1651  
”r_code
;

1652 
	}
}

1655 
ušt32_t
 
	$bË_hids_boÙ_mou£_šp_»p_£nd
(
bË_hids_t
 * 
p_hids
,

1656 
ušt8_t
 
bu‰Ús
,

1657 
št8_t
 
x_d–
,

1658 
št8_t
 
y_d–
,

1659 
ušt16_t
 
İtiÚ®_d©a_Ën
,

1660 
ušt8_t
 * 
p_İtiÚ®_d©a
,

1661 
ušt16_t
 
cÚn_hªdË
)

1663 
ušt32_t
 
”r_code
;

1665 ià(
cÚn_hªdË
 !ğ
BLE_CONN_HANDLE_INVALID
)

1667 
ušt16_t
 
hvx_Ën
 = 
BOOT_MOUSE_INPUT_REPORT_MIN_SIZE
 + 
İtiÚ®_d©a_Ën
;

1669 ià(
hvx_Ën
 <ğ
BOOT_MOUSE_INPUT_REPORT_MAX_SIZE
)

1671 
ušt8_t
 
bufãr
[
BOOT_MOUSE_INPUT_REPORT_MAX_SIZE
];

1672 
bË_g©ts_hvx_·¿ms_t
 
hvx_·¿ms
;

1673 
ušt8_t
 * 
p_ho¡_»p_d©a
;

1675 
”r_code
 = 
	`blcm_lšk_ùx_g‘
(
p_hids
->
p_lšk_ùx_¡Üage
,

1676 
cÚn_hªdË
,

1677 (*è&
p_ho¡_»p_d©a
);

1678 
	`VERIFY_SUCCESS
(
”r_code
);

1680 ià(
p_ho¡_»p_d©a
 !ğ
NULL
)

1682 
p_ho¡_»p_d©a
 +ğ(
bË_hids_ş›Á_cÚ‹xt_t
è+ 
BOOT_KB_INPUT_REPORT_MAX_SIZE
 +

1683 
BOOT_KB_OUTPUT_REPORT_MAX_SIZE
;

1687  
NRF_ERROR_NOT_FOUND
;

1690 
	`APP_ERROR_CHECK_BOOL
(
BOOT_MOUSE_INPUT_REPORT_MIN_SIZE
 == 3);

1693 
bufãr
[0] = 
bu‰Ús
;

1694 
bufãr
[1] = (
ušt8_t
)
x_d–
;

1695 
bufãr
[2] = (
ušt8_t
)
y_d–
;

1697 ià(
İtiÚ®_d©a_Ën
 > 0)

1699 
	`memıy
(&
bufãr
[3], 
p_İtiÚ®_d©a
, 
İtiÚ®_d©a_Ën
);

1703 
	`memıy
(
p_ho¡_»p_d©a
, 
bufãr
, 
hvx_Ën
);

1706 
	`mem£t
(&
hvx_·¿ms
, 0, (hvx_params));

1708 
hvx_·¿ms
.
hªdË
 = 
p_hids
->
boÙ_mou£_šp_»p_hªdËs
.
v®ue_hªdË
;

1709 
hvx_·¿ms
.
ty³
 = 
BLE_GATT_HVX_NOTIFICATION
;

1710 
hvx_·¿ms
.
off£t
 = 0;

1711 
hvx_·¿ms
.
p_Ën
 = &
hvx_Ën
;

1712 
hvx_·¿ms
.
p_d©a
 = 
bufãr
;

1714 
”r_code
 = 
	`sd_bË_g©ts_hvx
(
cÚn_hªdË
, &
hvx_·¿ms
);

1715 ià((
”r_code
 =ğ
NRF_SUCCESS
) &&

1716 (
hvx_Ën
 !ğ
BOOT_MOUSE_INPUT_REPORT_MIN_SIZE
 + 
İtiÚ®_d©a_Ën
)

1719 
”r_code
 = 
NRF_ERROR_DATA_SIZE
;

1724 
”r_code
 = 
NRF_ERROR_DATA_SIZE
;

1729 
”r_code
 = 
NRF_ERROR_INVALID_STATE
;

1732  
”r_code
;

1733 
	}
}

1736 
ušt32_t
 
	$bË_hids_ou_»p_g‘
(
bË_hids_t
 * 
p_hids
,

1737 
ušt8_t
 
»p_šdex
,

1738 
ušt16_t
 
Ën
,

1739 
ušt8_t
 
off£t
,

1740 
ušt16_t
 
cÚn_hªdË
,

1741 
ušt8_t
 * 
p_ou_»p
)

1743 
»t_code_t
 
”r_code
;

1744 
ušt8_t
 * 
p_»p_d©a
;

1746 ià(
»p_šdex
 > 
p_hids
->
ou_»p_couÁ
)

1748  
NRF_ERROR_INVALID_PARAM
;

1751 
”r_code
 = 
	`blcm_lšk_ùx_g‘
(
p_hids
->
p_lšk_ùx_¡Üage
,

1752 
cÚn_hªdË
,

1753 (*è&
p_»p_d©a
);

1754 
	`VERIFY_SUCCESS
(
”r_code
);

1756 ià(
p_»p_d©a
 !ğ
NULL
)

1758 
ušt8_t
 
šdex
;

1759 
p_»p_d©a
 +ğ(
bË_hids_ş›Á_cÚ‹xt_t
è+ 
BOOT_KB_INPUT_REPORT_MAX_SIZE
 +

1760 
BOOT_KB_OUTPUT_REPORT_MAX_SIZE
 + 
BOOT_MOUSE_INPUT_REPORT_MAX_SIZE
;

1762 
šdex
 = 0; index < 
p_hids
->
šp_»p_couÁ
; index++)

1764 
p_»p_d©a
 +ğ
p_hids
->
p_šp_»p_š™_¬¿y
[
šdex
].
max_Ën
;

1767 
šdex
 = 0; index < 
»p_šdex
; index++)

1769 
p_»p_d©a
 +ğ
p_hids
->
p_ou_»p_š™_¬¿y
[
šdex
].
max_Ën
;

1774  
NRF_ERROR_NOT_FOUND
;

1778 ià(
Ën
 + 
off£t
 <ğ
p_hids
->
p_ou_»p_š™_¬¿y
[
»p_šdex
].
max_Ën
)

1780 
	`memıy
(
p_ou_»p
, 
p_»p_d©a
 + 
off£t
, 
Ën
);

1784  
NRF_ERROR_INVALID_LENGTH
;

1787  
NRF_SUCCESS
;

1788 
	}
}

	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\ble\common\ble_advdata.c

40 
	~"bË_advd©a.h
"

41 
	~"bË_g­.h
"

42 
	~"bË_¤v_commÚ.h
"

43 
	~"sdk_commÚ.h
"

49 
	#AD_TYPE_BLE_DEVICE_ADDR_TYPE_PUBLIC
 0UL

	)

50 
	#AD_TYPE_BLE_DEVICE_ADDR_TYPE_RANDOM
 1UL

	)

52 
	#UUID16_SIZE
 2

	)

53 
	#UUID32_SIZE
 4

	)

54 
	#UUID128_SIZE
 16

	)

56 
	#N_AD_TYPES
 2

	)

59 
»t_code_t
 
	$bË_deviû_addr_’code
(
ušt8_t
 * 
p_’coded_d©a
,

60 
ušt16_t
 * 
p_off£t
,

61 
ušt16_t
 
max_size
)

63 
»t_code_t
 
”r_code
;

64 
bË_g­_addr_t
 
deviû_addr
;

67 ià(((*
p_off£t
è+ 
AD_TYPE_BLE_DEVICE_ADDR_SIZE
è> 
max_size
)

69  
NRF_ERROR_DATA_SIZE
;

73 
”r_code
 = 
	`sd_bË_g­_addr_g‘
(&
deviû_addr
);

74 
	`VERIFY_SUCCESS
(
”r_code
);

77 
p_’coded_d©a
[*
p_off£t
] = (
ušt8_t
)(
AD_TYPE_FIELD_SIZE
 +

78 
AD_TYPE_BLE_DEVICE_ADDR_DATA_SIZE
);

79 *
p_off£t
 +ğ
AD_LENGTH_FIELD_SIZE
;

80 
p_’coded_d©a
[*
p_off£t
] = 
BLE_GAP_AD_TYPE_LE_BLUETOOTH_DEVICE_ADDRESS
;

81 *
p_off£t
 +ğ
AD_TYPE_FIELD_SIZE
;

82 
	`memıy
(&
p_’coded_d©a
[*
p_off£t
], &
deviû_addr
.
addr
[0], 
BLE_GAP_ADDR_LEN
);

83 *
p_off£t
 +ğ
BLE_GAP_ADDR_LEN
;

84 ià(
BLE_GAP_ADDR_TYPE_PUBLIC
 =ğ
deviû_addr
.
addr_ty³
)

86 
p_’coded_d©a
[*
p_off£t
] = 
AD_TYPE_BLE_DEVICE_ADDR_TYPE_PUBLIC
;

90 
p_’coded_d©a
[*
p_off£t
] = 
AD_TYPE_BLE_DEVICE_ADDR_TYPE_RANDOM
;

92 *
p_off£t
 +ğ
AD_TYPE_BLE_DEVICE_ADDR_TYPE_SIZE
;

94  
NRF_SUCCESS
;

95 
	}
}

97 
»t_code_t
 
	$Çme_’code
(cÚ¡ 
bË_advd©a_t
 * 
p_advd©a
,

98 
ušt8_t
 * 
p_’coded_d©a
,

99 
ušt16_t
 * 
p_off£t
,

100 
ušt16_t
 
max_size
)

102 
»t_code_t
 
”r_code
;

103 
ušt16_t
 
»m_adv_d©a_Ën
;

104 
ušt16_t
 
aùu®_Ëngth
;

105 
ušt8_t
 
adv_d©a_fÜm©
;

109 ià((
BLE_ADVDATA_SHORT_NAME
 =ğ
p_advd©a
->
Çme_ty³
è&& (0 =ğp_advd©a->
shÜt_Çme_Ën
))

111  
NRF_ERROR_INVALID_PARAM
;

115 iàĞ(((*
p_off£t
è+ 
AD_DATA_OFFSET
è> 
max_size
) ||

116 Ğ(
BLE_ADVDATA_SHORT_NAME
 =ğ
p_advd©a
->
Çme_ty³
) &&

117 (((*
p_off£t
è+ 
AD_DATA_OFFSET
 + 
p_advd©a
->
shÜt_Çme_Ën
è> 
max_size
)))

119  
NRF_ERROR_DATA_SIZE
;

122 
»m_adv_d©a_Ën
 = 
max_size
 - (*
p_off£t
è- 
AD_DATA_OFFSET
;

123 
aùu®_Ëngth
 = 
»m_adv_d©a_Ën
;

126 
”r_code
 = 
	`sd_bË_g­_deviû_Çme_g‘
(&
p_’coded_d©a
[(*
p_off£t
è+ 
AD_DATA_OFFSET
],

127 &
aùu®_Ëngth
);

128 
	`VERIFY_SUCCESS
(
”r_code
);

131 ià((
p_advd©a
->
Çme_ty³
 =ğ
BLE_ADVDATA_FULL_NAME
è&& (
aùu®_Ëngth
 <ğ
»m_adv_d©a_Ën
))

134 
adv_d©a_fÜm©
 = 
BLE_GAP_AD_TYPE_COMPLETE_LOCAL_NAME
;

139 
adv_d©a_fÜm©
 = 
BLE_GAP_AD_TYPE_SHORT_LOCAL_NAME
;

143 ià((
BLE_ADVDATA_SHORT_NAME
 =ğ
p_advd©a
->
Çme_ty³
) &&

144 (
p_advd©a
->
shÜt_Çme_Ën
 <ğ
»m_adv_d©a_Ën
))

147 
aùu®_Ëngth
 = 
p_advd©a
->
shÜt_Çme_Ën
;

152 
aùu®_Ëngth
 = 
»m_adv_d©a_Ën
;

157 ià(
aùu®_Ëngth
 > (0x00FF - 
AD_TYPE_FIELD_SIZE
))

159  
NRF_ERROR_DATA_SIZE
;

163 
p_’coded_d©a
[*
p_off£t
] = (
ušt8_t
)(
AD_TYPE_FIELD_SIZE
 + 
aùu®_Ëngth
);

164 *
p_off£t
 +ğ
AD_LENGTH_FIELD_SIZE
;

165 
p_’coded_d©a
[*
p_off£t
] = 
adv_d©a_fÜm©
;

166 *
p_off£t
 +ğ
AD_TYPE_FIELD_SIZE
;

167 *
p_off£t
 +ğ
aùu®_Ëngth
;

169  
NRF_SUCCESS
;

170 
	}
}

173 
»t_code_t
 
	$­³¬ªû_’code
(
ušt8_t
 * 
p_’coded_d©a
,

174 
ušt16_t
 * 
p_off£t
,

175 
ušt16_t
 
max_size
)

177 
»t_code_t
 
”r_code
;

178 
ušt16_t
 
­³¬ªû
;

181 ià(((*
p_off£t
è+ 
AD_TYPE_APPEARANCE_SIZE
è> 
max_size
)

183  
NRF_ERROR_DATA_SIZE
;

187 
”r_code
 = 
	`sd_bË_g­_­³¬ªû_g‘
(&
­³¬ªû
);

188 
	`VERIFY_SUCCESS
(
”r_code
);

191 
p_’coded_d©a
[*
p_off£t
] = (
ušt8_t
)(
AD_TYPE_FIELD_SIZE
 + 
AD_TYPE_APPEARANCE_DATA_SIZE
);

192 *
p_off£t
 +ğ
AD_LENGTH_FIELD_SIZE
;

193 
p_’coded_d©a
[*
p_off£t
] = 
BLE_GAP_AD_TYPE_APPEARANCE
;

194 *
p_off£t
 +ğ
AD_TYPE_FIELD_SIZE
;

195 *
p_off£t
 +ğ
	`ušt16_’code
(
­³¬ªû
, &
p_’coded_d©a
[*p_offset]);

197  
NRF_SUCCESS
;

198 
	}
}

200 
»t_code_t
 
	$æags_’code
(
št8_t
 
æags
,

201 
ušt8_t
 * 
p_’coded_d©a
,

202 
ušt16_t
 * 
p_off£t
,

203 
ušt16_t
 
max_size
)

206 ià(((*
p_off£t
è+ 
AD_TYPE_FLAGS_SIZE
è> 
max_size
)

208  
NRF_ERROR_DATA_SIZE
;

212 
p_’coded_d©a
[*
p_off£t
] = (
ušt8_t
)(
AD_TYPE_FIELD_SIZE
 + 
AD_TYPE_FLAGS_DATA_SIZE
);

213 *
p_off£t
 +ğ
AD_LENGTH_FIELD_SIZE
;

214 
p_’coded_d©a
[*
p_off£t
] = 
BLE_GAP_AD_TYPE_FLAGS
;

215 *
p_off£t
 +ğ
AD_TYPE_FIELD_SIZE
;

216 
p_’coded_d©a
[*
p_off£t
] = 
æags
;

217 *
p_off£t
 +ğ
AD_TYPE_FLAGS_DATA_SIZE
;

219  
NRF_SUCCESS
;

220 
	}
}

222 
»t_code_t
 
	$tx_pow”_Ëv–_’code
(
št8_t
 
tx_pow”_Ëv–
,

223 
ušt8_t
 * 
p_’coded_d©a
,

224 
ušt16_t
 * 
p_off£t
,

225 
ušt16_t
 
max_size
)

228 ià(((*
p_off£t
è+ 
AD_TYPE_TX_POWER_LEVEL_SIZE
è> 
max_size
)

230  
NRF_ERROR_DATA_SIZE
;

234 
p_’coded_d©a
[*
p_off£t
] = (
ušt8_t
)(
AD_TYPE_FIELD_SIZE
 +

235 
AD_TYPE_TX_POWER_LEVEL_DATA_SIZE
);

236 *
p_off£t
 +ğ
AD_LENGTH_FIELD_SIZE
;

237 
p_’coded_d©a
[*
p_off£t
] = 
BLE_GAP_AD_TYPE_TX_POWER_LEVEL
;

238 *
p_off£t
 +ğ
AD_TYPE_FIELD_SIZE
;

239 
p_’coded_d©a
[*
p_off£t
] = 
tx_pow”_Ëv–
;

240 *
p_off£t
 +ğ
AD_TYPE_TX_POWER_LEVEL_DATA_SIZE
;

242  
NRF_SUCCESS
;

243 
	}
}

246 
»t_code_t
 
	$uuid_li¡_sized_’code
(cÚ¡ 
bË_advd©a_uuid_li¡_t
 * 
p_uuid_li¡
,

247 
ušt8_t
 
adv_ty³
,

248 
ušt8_t
 
uuid_size
,

249 
ušt8_t
 * 
p_’coded_d©a
,

250 
ušt16_t
 * 
p_off£t
,

251 
ušt16_t
 
max_size
)

253 
i
;

254 
boŞ
 
is_h—dšg_wr™‹n
 = 
çl£
;

255 
ušt16_t
 
¡¬t_pos
 = *
p_off£t
;

256 
ušt16_t
 
Ëngth
;

258 
i
 = 0; i < 
p_uuid_li¡
->
uuid_út
; i++)

260 
»t_code_t
 
”r_code
;

261 
ušt8_t
 
’coded_size
;

262 
bË_uuid_t
 
uuid
 = 
p_uuid_li¡
->
p_uuids
[
i
];

265 
”r_code
 = 
	`sd_bË_uuid_’code
(&
uuid
, &
’coded_size
, 
NULL
);

266 
	`VERIFY_SUCCESS
(
”r_code
);

269 ià(
’coded_size
 =ğ
uuid_size
)

271 
ušt8_t
 
h—dšg_by‹s
 = (
is_h—dšg_wr™‹n
è? 0 : 
AD_DATA_OFFSET
;

274 ià(((*
p_off£t
è+ 
’coded_size
 + 
h—dšg_by‹s
è> 
max_size
)

276  
NRF_ERROR_DATA_SIZE
;

279 ià(!
is_h—dšg_wr™‹n
)

282 *
p_off£t
 +ğ
AD_LENGTH_FIELD_SIZE
;

283 
p_’coded_d©a
[*
p_off£t
] = 
adv_ty³
;

284 *
p_off£t
 +ğ
AD_TYPE_FIELD_SIZE
;

285 
is_h—dšg_wr™‹n
 = 
Œue
;

289 
”r_code
 = 
	`sd_bË_uuid_’code
(&
uuid
, &
’coded_size
, &
p_’coded_d©a
[*
p_off£t
]);

290 
	`VERIFY_SUCCESS
(
”r_code
);

291 *
p_off£t
 +ğ
’coded_size
;

295 ià(
is_h—dšg_wr™‹n
)

298 
Ëngth
 = (*
p_off£t
è- (
¡¬t_pos
 + 
AD_LENGTH_FIELD_SIZE
);

300 ià(
Ëngth
 > 0x00FF)

302  
NRF_ERROR_DATA_SIZE
;

304 
p_’coded_d©a
[
¡¬t_pos
] = (
ušt8_t
)
Ëngth
;

307  
NRF_SUCCESS
;

308 
	}
}

311 
»t_code_t
 
	$uuid_li¡_’code
(cÚ¡ 
bË_advd©a_uuid_li¡_t
 * 
p_uuid_li¡
,

312 
ušt8_t
 
adv_ty³_16
,

313 
ušt8_t
 
adv_ty³_128
,

314 
ušt8_t
 * 
p_’coded_d©a
,

315 
ušt16_t
 * 
p_off£t
,

316 
ušt16_t
 
max_size
)

318 
»t_code_t
 
”r_code
;

321 
”r_code
 = 
	`uuid_li¡_sized_’code
(
p_uuid_li¡
,

322 
adv_ty³_16
,

323 (
ušt16_Ë_t
),

324 
p_’coded_d©a
,

325 
p_off£t
,

326 
max_size
);

327 
	`VERIFY_SUCCESS
(
”r_code
);

330 
”r_code
 = 
	`uuid_li¡_sized_’code
(
p_uuid_li¡
,

331 
adv_ty³_128
,

332 (
bË_uuid128_t
),

333 
p_’coded_d©a
,

334 
p_off£t
,

335 
max_size
);

336 
	`VERIFY_SUCCESS
(
”r_code
);

338  
NRF_SUCCESS
;

339 
	}
}

342 
»t_code_t
 
	$cÚn_št_check
(cÚ¡ 
bË_advd©a_cÚn_št_t
 *
p_cÚn_št
)

345 ià((
p_cÚn_št
->
mš_cÚn_š‹rv®
 < 0x0006) ||

347 (
p_cÚn_št
->
mš_cÚn_š‹rv®
 > 0x0c80) &&

348 (
p_cÚn_št
->
mš_cÚn_š‹rv®
 != 0xffff)

352  
NRF_ERROR_INVALID_PARAM
;

356 ià((
p_cÚn_št
->
max_cÚn_š‹rv®
 < 0x0006) ||

358 (
p_cÚn_št
->
max_cÚn_š‹rv®
 > 0x0c80) &&

359 (
p_cÚn_št
->
max_cÚn_š‹rv®
 != 0xffff)

363  
NRF_ERROR_INVALID_PARAM
;

367 ià((
p_cÚn_št
->
mš_cÚn_š‹rv®
 != 0xffff) &&

368 (
p_cÚn_št
->
max_cÚn_š‹rv®
 != 0xffff) &&

369 (
p_cÚn_št
->
mš_cÚn_š‹rv®
 >…_cÚn_št->
max_cÚn_š‹rv®
)

372  
NRF_ERROR_INVALID_PARAM
;

375  
NRF_SUCCESS
;

376 
	}
}

379 
»t_code_t
 
	$cÚn_št_’code
(cÚ¡ 
bË_advd©a_cÚn_št_t
 * 
p_cÚn_št
,

380 
ušt8_t
 * 
p_’coded_d©a
,

381 
ušt16_t
 * 
p_off£t
,

382 
ušt16_t
 
max_size
)

384 
»t_code_t
 
”r_code
;

387 ià(((*
p_off£t
è+ 
AD_TYPE_CONN_INT_SIZE
è> 
max_size
)

389  
NRF_ERROR_DATA_SIZE
;

393 
”r_code
 = 
	`cÚn_št_check
(
p_cÚn_št
);

394 
	`VERIFY_SUCCESS
(
”r_code
);

397 
p_’coded_d©a
[*
p_off£t
] = (
ušt8_t
)(
AD_TYPE_FIELD_SIZE
 + 
AD_TYPE_CONN_INT_DATA_SIZE
);

398 *
p_off£t
 +ğ
AD_LENGTH_FIELD_SIZE
;

399 
p_’coded_d©a
[*
p_off£t
] = 
BLE_GAP_AD_TYPE_SLAVE_CONNECTION_INTERVAL_RANGE
;

400 *
p_off£t
 +ğ
AD_TYPE_FIELD_SIZE
;

403 *
p_off£t
 +ğ
	`ušt16_’code
(
p_cÚn_št
->
mš_cÚn_š‹rv®
, &
p_’coded_d©a
[*p_offset]);

404 *
p_off£t
 +ğ
	`ušt16_’code
(
p_cÚn_št
->
max_cÚn_š‹rv®
, &
p_’coded_d©a
[*p_offset]);

406  
NRF_SUCCESS
;

407 
	}
}

410 
»t_code_t
 
	$mªuf_¥ecific_d©a_’code
(cÚ¡ 
bË_advd©a_mªuf_d©a_t
 * 
p_mªuf_¥_d©a
,

411 
ušt8_t
 * 
p_’coded_d©a
,

412 
ušt16_t
 * 
p_off£t
,

413 
ušt16_t
 
max_size
)

415 
ušt32_t
 
d©a_size
 = 
AD_TYPE_MANUF_SPEC_DATA_ID_SIZE
 + 
p_mªuf_¥_d©a
->
d©a
.
size
;

418 ià(((*
p_off£t
è+ 
AD_DATA_OFFSET
 + 
d©a_size
è> 
max_size
)

420  
NRF_ERROR_DATA_SIZE
;

424 ià(
d©a_size
 > (0x00FF - 
AD_TYPE_FIELD_SIZE
))

426  
NRF_ERROR_DATA_SIZE
;

430 
p_’coded_d©a
[*
p_off£t
] = (
ušt8_t
)(
AD_TYPE_FIELD_SIZE
 + 
d©a_size
);

431 *
p_off£t
 +ğ
AD_LENGTH_FIELD_SIZE
;

432 
p_’coded_d©a
[*
p_off£t
] = 
BLE_GAP_AD_TYPE_MANUFACTURER_SPECIFIC_DATA
;

433 *
p_off£t
 +ğ
AD_TYPE_FIELD_SIZE
;

436 *
p_off£t
 +ğ
	`ušt16_’code
(
p_mªuf_¥_d©a
->
com·ny_id’tif›r
, &
p_’coded_d©a
[*p_offset]);

439 ià(
p_mªuf_¥_d©a
->
d©a
.
size
 > 0)

441 ià(
p_mªuf_¥_d©a
->
d©a
.
p_d©a
 =ğ
NULL
)

443  
NRF_ERROR_INVALID_PARAM
;

445 
	`memıy
(&
p_’coded_d©a
[*
p_off£t
], 
p_mªuf_¥_d©a
->
d©a
.
p_d©a
,…_mªuf_¥_d©a->d©a.
size
);

446 *
p_off£t
 +ğ
p_mªuf_¥_d©a
->
d©a
.
size
;

449  
NRF_SUCCESS
;

450 
	}
}

453 
»t_code_t
 
	$£rviû_d©a_’code
(cÚ¡ 
bË_advd©a_t
 * 
p_advd©a
,

454 
ušt8_t
 * 
p_’coded_d©a
,

455 
ušt16_t
 * 
p_off£t
,

456 
ušt16_t
 
max_size
)

458 
ušt8_t
 
i
;

461 ià(
p_advd©a
->
p_£rviû_d©a_¬¿y
 =ğ
NULL
)

463  
NRF_ERROR_INVALID_PARAM
;

466 
i
 = 0; i < 
p_advd©a
->
£rviû_d©a_couÁ
; i++)

468 
bË_advd©a_£rviû_d©a_t
 * 
p_£rviû_d©a
;

469 
ušt32_t
 
d©a_size
;

471 
p_£rviû_d©a
 = &
p_advd©a
->
p_£rviû_d©a_¬¿y
[
i
];

473 
d©a_size
 = 
AD_TYPE_SERV_DATA_16BIT_UUID_SIZE
 + 
p_£rviû_d©a
->
d©a
.
size
;

476 ià(
d©a_size
 > (0x00FF - 
AD_TYPE_FIELD_SIZE
))

478  
NRF_ERROR_DATA_SIZE
;

482 
p_’coded_d©a
[*
p_off£t
] = (
ušt8_t
)(
AD_TYPE_FIELD_SIZE
 + 
d©a_size
);

483 *
p_off£t
 +ğ
AD_LENGTH_FIELD_SIZE
;

484 
p_’coded_d©a
[*
p_off£t
] = 
BLE_GAP_AD_TYPE_SERVICE_DATA
;

485 *
p_off£t
 +ğ
AD_TYPE_FIELD_SIZE
;

488 *
p_off£t
 +ğ
	`ušt16_’code
(
p_£rviû_d©a
->
£rviû_uuid
, &
p_’coded_d©a
[*p_offset]);

491 ià(
p_£rviû_d©a
->
d©a
.
size
 > 0)

493 ià(
p_£rviû_d©a
->
d©a
.
p_d©a
 =ğ
NULL
)

495  
NRF_ERROR_INVALID_PARAM
;

497 
	`memıy
(&
p_’coded_d©a
[*
p_off£t
], 
p_£rviû_d©a
->
d©a
.
p_d©a
,…_£rviû_d©a->d©a.
size
);

498 *
p_off£t
 +ğ
p_£rviû_d©a
->
d©a
.
size
;

502  
NRF_SUCCESS
;

503 
	}
}

505 
»t_code_t
 
	$bË_advd©a_’code
(
bË_advd©a_t
 cÚ¡ * cÚ¡ 
p_advd©a
,

506 
ušt8_t
 * cÚ¡ 
p_’coded_d©a
,

507 
ušt16_t
 * cÚ¡ 
p_Ën
)

509 
»t_code_t
 
”r_code
 = 
NRF_SUCCESS
;

510 
ušt16_t
 
max_size
 = *
p_Ën
;

511 *
p_Ën
 = 0;

514 ià(
p_advd©a
->
šşude_bË_deviû_addr
)

516 
”r_code
 = 
	`bË_deviû_addr_’code
(
p_’coded_d©a
, 
p_Ën
, 
max_size
);

517 
	`VERIFY_SUCCESS
(
”r_code
);

521 ià(
p_advd©a
->
šşude_­³¬ªû
)

523 
”r_code
 = 
	`­³¬ªû_’code
(
p_’coded_d©a
, 
p_Ën
, 
max_size
);

524 
	`VERIFY_SUCCESS
(
”r_code
);

528 ià(
p_advd©a
->
æags
 != 0 )

530 
”r_code
 = 
	`æags_’code
(
p_advd©a
->
æags
, 
p_’coded_d©a
, 
p_Ën
, 
max_size
);

531 
	`VERIFY_SUCCESS
(
”r_code
);

535 ià(
p_advd©a
->
p_tx_pow”_Ëv–
 !ğ
NULL
)

537 
”r_code
 = 
	`tx_pow”_Ëv–_’code
(*
p_advd©a
->
p_tx_pow”_Ëv–
,

538 
p_’coded_d©a
,

539 
p_Ën
,

540 
max_size
);

541 
	`VERIFY_SUCCESS
(
”r_code
);

545 ià(
p_advd©a
->
uuids_mÜe_avaabË
.
uuid_út
 > 0)

547 
”r_code
 = 
	`uuid_li¡_’code
(&
p_advd©a
->
uuids_mÜe_avaabË
,

548 
BLE_GAP_AD_TYPE_16BIT_SERVICE_UUID_MORE_AVAILABLE
,

549 
BLE_GAP_AD_TYPE_128BIT_SERVICE_UUID_MORE_AVAILABLE
,

550 
p_’coded_d©a
,

551 
p_Ën
,

552 
max_size
);

553 
	`VERIFY_SUCCESS
(
”r_code
);

557 ià(
p_advd©a
->
uuids_com¶‘e
.
uuid_út
 > 0)

559 
”r_code
 = 
	`uuid_li¡_’code
(&
p_advd©a
->
uuids_com¶‘e
,

560 
BLE_GAP_AD_TYPE_16BIT_SERVICE_UUID_COMPLETE
,

561 
BLE_GAP_AD_TYPE_128BIT_SERVICE_UUID_COMPLETE
,

562 
p_’coded_d©a
,

563 
p_Ën
,

564 
max_size
);

565 
	`VERIFY_SUCCESS
(
”r_code
);

569 ià(
p_advd©a
->
uuids_sŞic™ed
.
uuid_út
 > 0)

571 
”r_code
 = 
	`uuid_li¡_’code
(&
p_advd©a
->
uuids_sŞic™ed
,

572 
BLE_GAP_AD_TYPE_SOLICITED_SERVICE_UUIDS_16BIT
,

573 
BLE_GAP_AD_TYPE_SOLICITED_SERVICE_UUIDS_128BIT
,

574 
p_’coded_d©a
,

575 
p_Ën
,

576 
max_size
);

577 
	`VERIFY_SUCCESS
(
”r_code
);

581 ià(
p_advd©a
->
p_¦ave_cÚn_št
 !ğ
NULL
)

583 
”r_code
 = 
	`cÚn_št_’code
(
p_advd©a
->
p_¦ave_cÚn_št
, 
p_’coded_d©a
, 
p_Ën
, 
max_size
);

584 
	`VERIFY_SUCCESS
(
”r_code
);

588 ià(
p_advd©a
->
p_mªuf_¥ecific_d©a
 !ğ
NULL
)

590 
”r_code
 = 
	`mªuf_¥ecific_d©a_’code
(
p_advd©a
->
p_mªuf_¥ecific_d©a
,

591 
p_’coded_d©a
,

592 
p_Ën
,

593 
max_size
);

594 
	`VERIFY_SUCCESS
(
”r_code
);

598 ià(
p_advd©a
->
£rviû_d©a_couÁ
 > 0)

600 
”r_code
 = 
	`£rviû_d©a_’code
(
p_advd©a
, 
p_’coded_d©a
, 
p_Ën
, 
max_size
);

601 
	`VERIFY_SUCCESS
(
”r_code
);

605 ià(
p_advd©a
->
Çme_ty³
 !ğ
BLE_ADVDATA_NO_NAME
)

607 
”r_code
 = 
	`Çme_’code
(
p_advd©a
, 
p_’coded_d©a
, 
p_Ën
, 
max_size
);

608 
	`VERIFY_SUCCESS
(
”r_code
);

611  
”r_code
;

612 
	}
}

615 
ušt16_t
 
	$bË_advd©a_£¬ch
(
ušt8_t
 cÚ¡ * 
p_’coded_d©a
,

616 
ušt16_t
 
d©a_Ën
,

617 
ušt16_t
 * 
p_off£t
,

618 
ušt8_t
 
ad_ty³
)

620 ià((
p_’coded_d©a
 =ğ
NULL
è|| (
p_off£t
 == NULL))

625 
ušt16_t
 
i
 = 0;

627 ((
i
 < *
p_off£t
è|| (
p_’coded_d©a
[˜+ 1] !ğ
ad_ty³
)è&& (˜< 
d©a_Ën
))

630 
i
 +ğ(
p_’coded_d©a
[i] + 1);

633 ià(
i
 >ğ
d©a_Ën
)

639 *
p_off£t
 = 
i
 + 2;

640  (
p_’coded_d©a
[
i
] - 1);

642 
	}
}

645 
ušt8_t
 * 
	$bË_advd©a_·r£
(
ušt8_t
 * 
p_’coded_d©a
,

646 
ušt16_t
 
d©a_Ën
,

647 
ušt8_t
 
ad_ty³
)

649 
ušt16_t
 
off£t
 = 0;

650 
ušt16_t
 
Ën
 = 
	`bË_advd©a_£¬ch
(
p_’coded_d©a
, 
d©a_Ën
, &
off£t
, 
ad_ty³
);

652 ià(
Ën
 == 0)

654  
NULL
;

658  &
p_’coded_d©a
[
off£t
];

660 
	}
}

663 
boŞ
 
	$bË_advd©a_Çme_fšd
(
ušt8_t
 cÚ¡ * 
p_’coded_d©a
,

664 
ušt16_t
 
d©a_Ën
,

665 cÚ¡ * 
p_rg‘_Çme
)

667 
ušt16_t
 
·r£d_Çme_Ën
;

668 
ušt8_t
 cÚ¡ * 
p_·r£d_Çme
;

669 
ušt16_t
 
d©a_off£t
 = 0;

671 ià(
p_rg‘_Çme
 =ğ
NULL
)

673  
çl£
;

677 
·r£d_Çme_Ën
 = 
	`bË_advd©a_£¬ch
(
p_’coded_d©a
,

678 
d©a_Ën
,

679 &
d©a_off£t
,

680 
BLE_GAP_AD_TYPE_COMPLETE_LOCAL_NAME
);

682 
p_·r£d_Çme
 = &
p_’coded_d©a
[
d©a_off£t
];

684 iàĞ(
d©a_off£t
 != 0)

685 && (
·r£d_Çme_Ën
 != 0)

686 && (
	`¡¾’
(
p_rg‘_Çme
è=ğ
·r£d_Çme_Ën
)

687 && (
	`memcmp
(
p_rg‘_Çme
, 
p_·r£d_Çme
, 
·r£d_Çme_Ën
) == 0))

689  
Œue
;

692  
çl£
;

693 
	}
}

696 
boŞ
 
	$bË_advd©a_shÜt_Çme_fšd
(
ušt8_t
 cÚ¡ * 
p_’coded_d©a
,

697 
ušt16_t
 
d©a_Ën
,

698 cÚ¡ * 
p_rg‘_Çme
,

699 
ušt8_t
 cÚ¡ 
shÜt_Çme_mš_Ën
)

701 
ušt16_t
 
·r£d_Çme_Ën
;

702 
ušt8_t
 cÚ¡ * 
p_·r£d_Çme
;

703 
ušt16_t
 
d©a_off£t
 = 0;

705 ià(
p_rg‘_Çme
 =ğ
NULL
)

707  
çl£
;

710 
·r£d_Çme_Ën
 = 
	`bË_advd©a_£¬ch
(
p_’coded_d©a
,

711 
d©a_Ën
,

712 &
d©a_off£t
,

713 
BLE_GAP_AD_TYPE_SHORT_LOCAL_NAME
);

715 
p_·r£d_Çme
 = &
p_’coded_d©a
[
d©a_off£t
];

717 iàĞ(
d©a_off£t
 != 0)

718 && (
·r£d_Çme_Ën
 != 0)

719 && (
·r£d_Çme_Ën
 >ğ
shÜt_Çme_mš_Ën
)

720 && (
·r£d_Çme_Ën
 < 
	`¡¾’
(
p_rg‘_Çme
))

721 && (
	`memcmp
(
p_rg‘_Çme
, 
p_·r£d_Çme
, 
·r£d_Çme_Ën
) == 0))

723  
Œue
;

726  
çl£
;

727 
	}
}

730 
boŞ
 
	$bË_advd©a_uuid_fšd
(
ušt8_t
 cÚ¡ * 
p_’coded_d©a
,

731 
ušt16_t
 
d©a_Ën
,

732 
bË_uuid_t
 cÚ¡ * 
p_rg‘_uuid
)

735 
»t_code_t
 
”r_code
;

736 
ušt16_t
 
d©a_off£t
 = 0;

737 
ušt8_t
 
¿w_uuid_Ën
 = 
UUID128_SIZE
;

738 
ušt8_t
 cÚ¡ * 
p_·r£d_uuid
;

739 
ušt16_t
 
·r£d_uuid_Ën
 = 
d©a_Ën
;

740 
ušt8_t
 
¿w_uuid
[
UUID128_SIZE
];

741 
ušt8_t
 
ad_ty³s
[
N_AD_TYPES
];

743 
”r_code
 = 
	`sd_bË_uuid_’code
(
p_rg‘_uuid
, &
¿w_uuid_Ën
, 
¿w_uuid
);

745 ià((
p_’coded_d©a
 =ğ
NULL
è|| (
”r_code
 !ğ
NRF_SUCCESS
))

748  
çl£
;

751 
¿w_uuid_Ën
)

753 
UUID16_SIZE
:

754 
ad_ty³s
[0] = 
BLE_GAP_AD_TYPE_16BIT_SERVICE_UUID_COMPLETE
;

755 
ad_ty³s
[1] = 
BLE_GAP_AD_TYPE_16BIT_SERVICE_UUID_MORE_AVAILABLE
;

758 
UUID32_SIZE
:

760 
ad_ty³s
[0] = 
BLE_GAP_AD_TYPE_32BIT_SERVICE_UUID_COMPLETE
;

761 
ad_ty³s
[1] = 
BLE_GAP_AD_TYPE_32BIT_SERVICE_UUID_MORE_AVAILABLE
;

764 
UUID128_SIZE
:

765 
ad_ty³s
[0] = 
BLE_GAP_AD_TYPE_128BIT_SERVICE_UUID_COMPLETE
;

766 
ad_ty³s
[1] = 
BLE_GAP_AD_TYPE_128BIT_SERVICE_UUID_MORE_AVAILABLE
;

770  
çl£
;

773 
ušt8_t
 
i
 = 0; (˜< 
N_AD_TYPES
è&& (
d©a_off£t
 == 0); i++)

775 
·r£d_uuid_Ën
 = 
	`bË_advd©a_£¬ch
(
p_’coded_d©a
, 
d©a_Ën
, &
d©a_off£t
, 
ad_ty³s
[
i
]);

778 ià(
d©a_off£t
 == 0)

781  
çl£
;

784 
p_·r£d_uuid
 = &
p_’coded_d©a
[
d©a_off£t
];

787 
ušt16_t
 
li¡_off£t
 = 0;†i¡_off£ˆ< 
·r£d_uuid_Ën
;†i¡_off£ˆ+ğ
¿w_uuid_Ën
)

789 ià(
	`memcmp
(&
p_·r£d_uuid
[
li¡_off£t
], 
¿w_uuid
, 
¿w_uuid_Ën
) == 0)

791  
Œue
;

796  
çl£
;

797 
	}
}

800 
boŞ
 
	$bË_advd©a_­³¬ªû_fšd
(
ušt8_t
 cÚ¡ * 
p_’coded_d©a
,

801 
ušt16_t
 
d©a_Ën
,

802 
ušt16_t
 cÚ¡ * 
p_rg‘_­³¬ªû
)

804 
ušt16_t
 
d©a_off£t
 = 0;

805 
ušt8_t
 
­³¬ªû_Ën
;

806 
ušt16_t
 
decoded_­³¬ªû
;

808 
­³¬ªû_Ën
 = 
	`bË_advd©a_£¬ch
(
p_’coded_d©a
, 
d©a_Ën
, &
d©a_off£t
, 
BLE_GAP_AD_TYPE_APPEARANCE
);

810 iàĞ(
d©a_off£t
 == 0)

811 || (
p_rg‘_­³¬ªû
 =ğ
NULL
)

812 || (
­³¬ªû_Ën
 == 0))

815  
çl£
;

818 
decoded_­³¬ªû
 = 
	`ušt16_decode
(&
p_’coded_d©a
[
d©a_off£t
]);

820 ià(
decoded_­³¬ªû
 =ğ*
p_rg‘_­³¬ªû
)

822  
Œue
;

826  
çl£
;

827 
	}
}

	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\ble\common\ble_conn_params.c

40 
	~"sdk_commÚ.h
"

41 #ià
NRF_MODULE_ENABLED
(
NRF_BLE_CONN_PARAMS
)

42 
	~<¡dlib.h
>

43 
	~"Äf.h
"

44 
	~"sdk_”rÜs.h
"

45 
	~"bË_hci.h
"

46 
	~"bË_”r.h
"

47 
	~"bË_cÚn_·¿ms.h
"

48 
	~"bË_¤v_commÚ.h
"

49 
	~"bË_cÚn_¡©e.h
"

50 
	~"Äf_sdh_bË.h
"

51 
	~"­p_tim”.h
"

52 
	~"­p_ut.h
"

55 
	#NRF_BLE_CONN_PARAMS_INSTANCE_COUNT
 
NRF_SDH_BLE_PERIPHERAL_LINK_COUNT


56 

	)

57 #ià(
NRF_BLE_CONN_PARAMS_INSTANCE_COUNT
 < 1)

58 #”rÜ 
Inv®id
 
NRF_SDH_BLE_PERIPHERAL_LINK_COUNT
 
v®ue
. 
S‘
 
™
 
š
 
SDK
 
cÚfig
 (
Äf_sdh_bË
).

65 
ušt16_t
 
	mcÚn_hªdË
;

66 
­p_tim”_id_t
 
	mtim”_id
;

67 
ušt8_t
 
	mupd©e_couÁ
;

68 
ušt8_t
 
	m·¿ms_ok
;

69 
bË_g­_cÚn_·¿ms_t
 
	m´eã¼ed_cÚn_·¿ms
;

70 } 
	tbË_cÚn_·¿ms_š¡ªû_t
;

72 
­p_tim”_t
 
	gm_tim”_d©a
[
NRF_BLE_CONN_PARAMS_INSTANCE_COUNT
] = {{{0}}};

73 
bË_cÚn_·¿ms_š¡ªû_t
 
	gm_cÚn_·¿ms_š¡ªûs
[
NRF_BLE_CONN_PARAMS_INSTANCE_COUNT
] = {{0}};

74 
bË_cÚn_·¿ms_š™_t
 
	gm_cÚn_·¿ms_cÚfig
;

75 
bË_g­_cÚn_·¿ms_t
 
	gm_´eã¼ed_cÚn_·¿ms
;

85 
bË_cÚn_·¿ms_š¡ªû_t
 * 
	$š¡ªû_g‘
(
ušt16_t
 
cÚn_hªdË
)

88 
ušt32_t
 
i
 = 0; i < 
NRF_BLE_CONN_PARAMS_INSTANCE_COUNT
; i++)

90 ià(
m_cÚn_·¿ms_š¡ªûs
[
i
].
cÚn_hªdË
 == conn_handle)

92  &
m_cÚn_·¿ms_š¡ªûs
[
i
];

96  
NULL
;

97 
	}
}

105 
__INLINE
 
	$š¡ªû_şaim
(
bË_cÚn_·¿ms_š¡ªû_t
 * 
p_š¡ªû
, 
ušt16_t
 
cÚn_hªdË
)

107 
p_š¡ªû
->
cÚn_hªdË
 = conn_handle;

108 
p_š¡ªû
->
upd©e_couÁ
 = 0;

109 
p_š¡ªû
->
´eã¼ed_cÚn_·¿ms
 = 
m_´eã¼ed_cÚn_·¿ms
;

110 
	}
}

117 
__INLINE
 
	$š¡ªû_ä“
(
bË_cÚn_·¿ms_š¡ªû_t
 * 
p_š¡ªû
)

119 
p_š¡ªû
->
cÚn_hªdË
 = 
BLE_CONN_HANDLE_INVALID
;

120 
	}
}

134 
boŞ
 
	$is_cÚn_·¿ms_ok
(
bË_g­_cÚn_·¿ms_t
 cÚ¡ * 
p_´eã¼ed_cÚn_·¿ms
,

135 
bË_g­_cÚn_·¿ms_t
 cÚ¡ * 
p_aùu®_cÚn_·¿ms
,

136 
ušt16_t
 
max_¦ave_Ï‹ncy_”r
,

137 
ušt16_t
 
max_sup_timeout_”r
)

139 
ušt32_t
 
max_®lowed_¦
 = 
p_´eã¼ed_cÚn_·¿ms
->
¦ave_Ï‹ncy
 + 
max_¦ave_Ï‹ncy_”r
;

140 
ušt32_t
 
mš_®lowed_¦
 = 
p_´eã¼ed_cÚn_·¿ms
->
¦ave_Ï‹ncy


141 - 
	`MIN
(
max_¦ave_Ï‹ncy_”r
, 
p_´eã¼ed_cÚn_·¿ms
->
¦ave_Ï‹ncy
);

142 
ušt32_t
 
max_®lowed_to
 = 
p_´eã¼ed_cÚn_·¿ms
->
cÚn_sup_timeout
 + 
max_sup_timeout_”r
;

143 
ušt32_t
 
mš_®lowed_to
 = 
p_´eã¼ed_cÚn_·¿ms
->
cÚn_sup_timeout


144 - 
	`MIN
(
max_sup_timeout_”r
, 
p_´eã¼ed_cÚn_·¿ms
->
cÚn_sup_timeout
);

149 ià((
p_aùu®_cÚn_·¿ms
->
max_cÚn_š‹rv®
 < 
p_´eã¼ed_cÚn_·¿ms
->
mš_cÚn_š‹rv®
)

150 || (
p_aùu®_cÚn_·¿ms
->
max_cÚn_š‹rv®
 > 
p_´eã¼ed_cÚn_·¿ms
->max_conn_interval))

152  
çl£
;

156 ià((
p_aùu®_cÚn_·¿ms
->
¦ave_Ï‹ncy
 < 
mš_®lowed_¦
)

157 || (
p_aùu®_cÚn_·¿ms
->
¦ave_Ï‹ncy
 > 
max_®lowed_¦
))

159  
çl£
;

163 ià((
p_aùu®_cÚn_·¿ms
->
cÚn_sup_timeout
 < 
mš_®lowed_to
)

164 || (
p_aùu®_cÚn_·¿ms
->
cÚn_sup_timeout
 > 
max_®lowed_to
))

166  
çl£
;

169  
Œue
;

170 
	}
}

173 
	$£nd_”rÜ_evt
(
»t_code_t
 
”r_code
)

175 ià(
m_cÚn_·¿ms_cÚfig
.
”rÜ_hªdËr
 !ğ
NULL
)

177 
m_cÚn_·¿ms_cÚfig
.
	`”rÜ_hªdËr
(
”r_code
);

179 
	}
}

189 
boŞ
 
	$£nd_upd©e_»que¡
(
ušt16_t
 
cÚn_hªdË
, 
bË_g­_cÚn_·¿ms_t
 * 
p_Ãw_cÚn_·¿ms
)

191 
»t_code_t
 
”r_code
;

193 
”r_code
 = 
	`sd_bË_g­_cÚn_·¿m_upd©e
(
cÚn_hªdË
, 
p_Ãw_cÚn_·¿ms
);

194 ià((
”r_code
 !ğ
NRF_SUCCESS
è&& (”r_cod!ğ
NRF_ERROR_BUSY
))

196 
	`£nd_”rÜ_evt
(
”r_code
);

199  (
”r_code
 =ğ
NRF_SUCCESS
);

200 
	}
}

207 
	$upd©e_timeout_hªdËr
(* 
p_cÚ‹xt
)

209 
ušt32_t
 
cÚn_hªdË
 = (ušt32_t)
p_cÚ‹xt
;

210 
bË_cÚn_·¿ms_š¡ªû_t
 * 
p_š¡ªû
 = 
	`š¡ªû_g‘
(
cÚn_hªdË
);

212 ià(
p_š¡ªû
 !ğ
NULL
)

215 ià(
p_š¡ªû
->
upd©e_couÁ
 < 
m_cÚn_·¿ms_cÚfig
.
max_cÚn_·¿ms_upd©e_couÁ
)

217 
boŞ
 
upd©e_£Á
 = 
	`£nd_upd©e_»que¡
(
cÚn_hªdË
, &
p_š¡ªû
->
´eã¼ed_cÚn_·¿ms
);

218 ià(
upd©e_£Á
)

220 
p_š¡ªû
->
upd©e_couÁ
++;

225 
p_š¡ªû
->
upd©e_couÁ
 = 0;

228 ià(
m_cÚn_·¿ms_cÚfig
.
discÚÃù_Ú_ç
)

230 
»t_code_t
 
”r_code
;

232 
”r_code
 = 
	`sd_bË_g­_discÚÃù
(
cÚn_hªdË
, 
BLE_HCI_CONN_INTERVAL_UNACCEPTABLE
);

233 ià((
”r_code
 !ğ
NRF_SUCCESS
è&& (”r_cod!ğ
NRF_ERROR_INVALID_STATE
))

235 
	`£nd_”rÜ_evt
(
”r_code
);

240 ià(
m_cÚn_·¿ms_cÚfig
.
evt_hªdËr
 !ğ
NULL
)

242 
bË_cÚn_·¿ms_evt_t
 
evt
;

244 
evt
.
evt_ty³
 = 
BLE_CONN_PARAMS_EVT_FAILED
;

245 
evt
.
cÚn_hªdË
 = conn_handle;

246 
m_cÚn_·¿ms_cÚfig
.
	`evt_hªdËr
(&
evt
);

250 
	}
}

253 
»t_code_t
 
	$bË_cÚn_·¿ms_š™
(cÚ¡ 
bË_cÚn_·¿ms_š™_t
 * 
p_š™
)

255 
»t_code_t
 
”r_code
;

257 
	`VERIFY_PARAM_NOT_NULL
(
p_š™
);

259 
m_cÚn_·¿ms_cÚfig
 = *
p_š™
;

260 
m_cÚn_·¿ms_cÚfig
.
p_cÚn_·¿ms
 = &
m_´eã¼ed_cÚn_·¿ms
;

262 ià(
p_š™
->
p_cÚn_·¿ms
 !ğ
NULL
)

265 
”r_code
 = 
	`sd_bË_g­_µı_£t
(
p_š™
->
p_cÚn_·¿ms
);

266 ià(
”r_code
 !ğ
NRF_SUCCESS
)

268  
”r_code
;

270 
m_´eã¼ed_cÚn_·¿ms
 = *
p_š™
->
p_cÚn_·¿ms
;

275 
”r_code
 = 
	`sd_bË_g­_µı_g‘
(&
m_´eã¼ed_cÚn_·¿ms
);

276 ià(
”r_code
 !ğ
NRF_SUCCESS
)

278  
”r_code
;

283 
ušt32_t
 
i
 = 0; i < 
NRF_BLE_CONN_PARAMS_INSTANCE_COUNT
; i++)

285 
bË_cÚn_·¿ms_š¡ªû_t
 * 
p_š¡ªû
 = &
m_cÚn_·¿ms_š¡ªûs
[
i
];

287 
	`š¡ªû_ä“
(
p_š¡ªû
);

288 
p_š¡ªû
->
tim”_id
 = &
m_tim”_d©a
[
i
];

290 
”r_code
 = 
	`­p_tim”_ü—‹
(&
p_š¡ªû
->
tim”_id
,

291 
APP_TIMER_MODE_SINGLE_SHOT
,

292 
upd©e_timeout_hªdËr
);

293 ià(
”r_code
 !ğ
NRF_SUCCESS
)

295  
NRF_ERROR_INTERNAL
;

300  
NRF_SUCCESS
;

301 
	}
}

304 
»t_code_t
 
	$bË_cÚn_·¿ms_¡İ
()

306 
»t_code_t
 
”r_code
;

309 
ušt32_t
 
i
 = 0; i < 
NRF_BLE_CONN_PARAMS_INSTANCE_COUNT
; i++)

311 
”r_code
 = 
	`­p_tim”_¡İ
(
m_cÚn_·¿ms_š¡ªûs
[
i
].
tim”_id
);

312 
”r_code
)

314 
NRF_SUCCESS
:

318 
NRF_ERROR_INVALID_STATE
:

322 
NRF_ERROR_NO_MEM
:

323  
NRF_ERROR_BUSY
;

325 
NRF_ERROR_INVALID_PARAM
:

328  
NRF_ERROR_INTERNAL
;

332  
NRF_SUCCESS
;

333 
	}
}

341 
	$cÚn_·¿ms_ÃgÙŸtiÚ
(
ušt16_t
 
cÚn_hªdË
, 
bË_cÚn_·¿ms_š¡ªû_t
 * 
p_š¡ªû
)

344 ià(!
p_š¡ªû
->
·¿ms_ok
)

346 
»t_code_t
 
”r_code
;

347 
ušt32_t
 
timeout_ticks
;

349 ià(
p_š¡ªû
->
upd©e_couÁ
 == 0)

352 
timeout_ticks
 = 
m_cÚn_·¿ms_cÚfig
.
fœ¡_cÚn_·¿ms_upd©e_d–ay
;

356 
timeout_ticks
 = 
m_cÚn_·¿ms_cÚfig
.
Ãxt_cÚn_·¿ms_upd©e_d–ay
;

359 
”r_code
 = 
	`­p_tim”_¡¬t
(
p_š¡ªû
->
tim”_id
, 
timeout_ticks
, (*)(
ušt32_t
)
cÚn_hªdË
);

360 ià(
”r_code
 !ğ
NRF_SUCCESS
)

362 
	`£nd_”rÜ_evt
(
”r_code
);

367 
p_š¡ªû
->
upd©e_couÁ
 = 0;

370 ià(
m_cÚn_·¿ms_cÚfig
.
evt_hªdËr
 !ğ
NULL
)

372 
bË_cÚn_·¿ms_evt_t
 
evt
;

374 
evt
.
evt_ty³
 = 
BLE_CONN_PARAMS_EVT_SUCCEEDED
;

375 
evt
.
cÚn_hªdË
 = conn_handle;

376 
m_cÚn_·¿ms_cÚfig
.
	`evt_hªdËr
(&
evt
);

379 
	}
}

386 
	$Ú_cÚÃù
(
bË_evt_t
 cÚ¡ * 
p_bË_evt
)

388 
ušt8_t
 
rŞe
 = 
p_bË_evt
->
evt
.
g­_evt
.
·¿ms
.
cÚÃùed
.role;

389 
ušt16_t
 
cÚn_hªdË
 = 
p_bË_evt
->
evt
.
g­_evt
.conn_handle;

391 ià(
rŞe
 !ğ
BLE_GAP_ROLE_PERIPH
)

396 
bË_cÚn_·¿ms_š¡ªû_t
 * 
p_š¡ªû
 = 
	`š¡ªû_g‘
(
BLE_CONN_HANDLE_INVALID
);

398 ià(
p_š¡ªû
 =ğ
NULL
)

400 
	`£nd_”rÜ_evt
(
NRF_ERROR_NO_MEM
);

404 
	`š¡ªû_şaim
(
p_š¡ªû
, 
cÚn_hªdË
);

405 
p_š¡ªû
->
·¿ms_ok
 = 
	`is_cÚn_·¿ms_ok
(&p_š¡ªû->
´eã¼ed_cÚn_·¿ms
,

406 &
p_bË_evt
->
evt
.
g­_evt
.
·¿ms
.
cÚÃùed
.
cÚn_·¿ms
,

407 
NRF_BLE_CONN_PARAMS_MAX_SLAVE_LATENCY_DEVIATION
,

408 
NRF_BLE_CONN_PARAMS_MAX_SUPERVISION_TIMEOUT_DEVIATION
);

411 ià(
m_cÚn_·¿ms_cÚfig
.
¡¬t_Ú_nÙify_cccd_hªdË
 =ğ
BLE_GATT_HANDLE_INVALID
)

413 
	`cÚn_·¿ms_ÃgÙŸtiÚ
(
cÚn_hªdË
, 
p_š¡ªû
);

415 
	}
}

422 
	$Ú_discÚÃù
(
bË_evt_t
 cÚ¡ * 
p_bË_evt
)

424 
»t_code_t
 
”r_code
;

425 
ušt16_t
 
cÚn_hªdË
 = 
p_bË_evt
->
evt
.
g­_evt
.conn_handle;

426 
bË_cÚn_·¿ms_š¡ªû_t
 * 
p_š¡ªû
 = 
	`š¡ªû_g‘
(
cÚn_hªdË
);

428 ià(
p_š¡ªû
 !ğ
NULL
)

431 
”r_code
 = 
	`­p_tim”_¡İ
(
p_š¡ªû
->
tim”_id
);

432 ià(
”r_code
 !ğ
NRF_SUCCESS
)

434 
	`£nd_”rÜ_evt
(
”r_code
);

437 
	`š¡ªû_ä“
(
p_š¡ªû
);

439 
	}
}

448 
	$Ú_wr™e
(
bË_evt_t
 cÚ¡ * 
p_bË_evt
)

450 
bË_g©ts_evt_wr™e_t
 cÚ¡ * 
p_evt_wr™e
 = &
p_bË_evt
->
evt
.
g©ts_evt
.
·¿ms
.
wr™e
;

454 (
p_evt_wr™e
->
hªdË
 =ğ
m_cÚn_·¿ms_cÚfig
.
¡¬t_Ú_nÙify_cccd_hªdË
)

456 (
p_evt_wr™e
->
Ën
 == 2)

459 
ušt16_t
 
cÚn_hªdË
 = 
p_bË_evt
->
evt
.
g­_evt
.conn_handle;

460 
bË_cÚn_·¿ms_š¡ªû_t
 * 
p_š¡ªû
 = 
	`š¡ªû_g‘
(
cÚn_hªdË
);

462 ià(
p_š¡ªû
 !ğ
NULL
)

465 ià(
	`bË_¤v_is_nÙifiÿtiÚ_’abËd
(
p_evt_wr™e
->
d©a
))

468 
	`cÚn_·¿ms_ÃgÙŸtiÚ
(
cÚn_hªdË
, 
p_š¡ªû
);

472 
»t_code_t
 
”r_code
;

475 
”r_code
 = 
	`­p_tim”_¡İ
(
p_š¡ªû
->
tim”_id
);

476 ià(
”r_code
 !ğ
NRF_SUCCESS
)

478 
	`£nd_”rÜ_evt
(
”r_code
);

483 
	}
}

493 
	$Ú_cÚn_·¿ms_upd©e
(
bË_evt_t
 cÚ¡ * 
p_bË_evt
)

495 
ušt16_t
 
cÚn_hªdË
 = 
p_bË_evt
->
evt
.
g­_evt
.conn_handle;

496 
bË_cÚn_·¿ms_š¡ªû_t
 * 
p_š¡ªû
 = 
	`š¡ªû_g‘
(
cÚn_hªdË
);

498 ià(
p_š¡ªû
 !ğ
NULL
)

500 
p_š¡ªû
->
·¿ms_ok
 = 
	`is_cÚn_·¿ms_ok
(

501 &
p_š¡ªû
->
´eã¼ed_cÚn_·¿ms
,

502 &
p_bË_evt
->
evt
.
g­_evt
.
·¿ms
.
cÚn_·¿m_upd©e
.
cÚn_·¿ms
,

503 
NRF_BLE_CONN_PARAMS_MAX_SLAVE_LATENCY_DEVIATION
,

504 
NRF_BLE_CONN_PARAMS_MAX_SUPERVISION_TIMEOUT_DEVIATION
);

506 
	`cÚn_·¿ms_ÃgÙŸtiÚ
(
cÚn_hªdË
, 
p_š¡ªû
);

508 
	}
}

517 
	$bË_evt_hªdËr
(
bË_evt_t
 cÚ¡ * 
p_bË_evt
, * 
p_cÚ‹xt
)

519 
p_bË_evt
->
h—d”
.
evt_id
)

521 
BLE_GAP_EVT_CONNECTED
:

522 
	`Ú_cÚÃù
(
p_bË_evt
);

525 
BLE_GAP_EVT_DISCONNECTED
:

526 
	`Ú_discÚÃù
(
p_bË_evt
);

529 
BLE_GATTS_EVT_WRITE
:

530 
	`Ú_wr™e
(
p_bË_evt
);

533 
BLE_GAP_EVT_CONN_PARAM_UPDATE
:

534 
	`Ú_cÚn_·¿ms_upd©e
(
p_bË_evt
);

541 
	}
}

544 
»t_code_t
 
	$bË_cÚn_·¿ms_chªge_cÚn_·¿ms
(
ušt16_t
 
cÚn_hªdË
,

545 
bË_g­_cÚn_·¿ms_t
 * 
p_Ãw_·¿ms
)

547 
»t_code_t
 
”r_code
 = 
BLE_ERROR_INVALID_CONN_HANDLE
;

548 
bË_cÚn_·¿ms_š¡ªû_t
 * 
p_š¡ªû
 = 
	`š¡ªû_g‘
(
cÚn_hªdË
);

550 ià(
p_Ãw_·¿ms
 =ğ
NULL
)

552 
p_Ãw_·¿ms
 = &
m_´eã¼ed_cÚn_·¿ms
;

555 ià(
p_š¡ªû
 !ğ
NULL
)

558 
”r_code
 = 
	`sd_bË_g­_cÚn_·¿m_upd©e
(
cÚn_hªdË
, 
p_Ãw_·¿ms
);

559 ià(
”r_code
 =ğ
NRF_SUCCESS
)

561 
p_š¡ªû
->
·¿ms_ok
 = 
çl£
;

562 
p_š¡ªû
->
upd©e_couÁ
 = 1;

563 
p_š¡ªû
->
´eã¼ed_cÚn_·¿ms
 = *
p_Ãw_·¿ms
;

567  
”r_code
;

568 
	}
}

570 
NRF_SDH_BLE_OBSERVER
(
m_bË_ob£rv”
, 
BLE_CONN_PARAMS_BLE_OBSERVER_PRIO
, 
bË_evt_hªdËr
, 
NULL
);

	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\ble\common\ble_conn_state.c

40 
	~"bË_cÚn_¡©e.h
"

41 
	~<¡dboŞ.h
>

42 
	~<¡dšt.h
>

43 
	~<¡ršg.h
>

44 
	~"bË.h
"

45 
	~"Äf_©æags.h
"

46 
	~"­p_”rÜ.h
"

47 
	~"Äf_sdh_bË.h
"

48 
	~"­p_ut_¶©fÜm.h
"

52 
	#DEFAULT_FLAG_COLLECTION_COUNT
 5

	)

53 
	#TOTAL_FLAG_COLLECTION_COUNT
 (
DEFAULT_FLAG_COLLECTION_COUNT
 \

54 + 
BLE_CONN_STATE_USER_FLAG_COUNT
è

	)

60 
Äf_©æags_t
 
	mv®id_æags
;

61 
Äf_©æags_t
 
	mcÚÃùed_æags
;

62 
Äf_©æags_t
 
	mûÁ¿l_æags
;

63 
Äf_©æags_t
 
	m’üy±ed_æags
;

64 
Äf_©æags_t
 
	mm™m_´Ùeùed_æags
;

65 
Äf_©æags_t
 
	mu£r_æags
[
BLE_CONN_STATE_USER_FLAG_COUNT
];

66 } 
	tbË_cÚn_¡©e_æag_cŞËùiÚs_t
;

69 
	gANON_UNIONS_ENABLE
;

75 
Äf_©æags_t
 
	macquœed_æags
;

78 
bË_cÚn_¡©e_æag_cŞËùiÚs_t
 
	mæags
;

79 
Äf_©æags_t
 
	mæag_¬¿y
[
TOTAL_FLAG_COLLECTION_COUNT
];

81 } 
	tbË_cÚn_¡©e_t
;

83 
	gANON_UNIONS_DISABLE
;

86 
bË_cÚn_¡©e_t
 
	gm_bcs
 = {0};

91 
	$bcs_š‹º®_¡©e_»£t
()

93 
	`mem£t
Ğ&
m_bcs
, 0, (
bË_cÚn_¡©e_t
) );

94 
	}
}

97 
bË_cÚn_¡©e_cÚn_hªdË_li¡_t
 
	$cÚn_hªdË_li¡_g‘
(
Äf_©æags_t
 
æags
)

99 
bË_cÚn_¡©e_cÚn_hªdË_li¡_t
 
cÚn_hªdË_li¡
;

100 
cÚn_hªdË_li¡
.
Ën
 = 0;

102 ià(
æags
 != 0)

104 
ušt32_t
 
i
 = 0; i < 
BLE_CONN_STATE_MAX_CONNECTIONS
; i++)

106 ià(
	`Äf_©æags_g‘
(&
æags
, 
i
))

108 
cÚn_hªdË_li¡
.
cÚn_hªdËs
[cÚn_hªdË_li¡.
Ën
++] = 
i
;

113  
cÚn_hªdË_li¡
;

114 
	}
}

117 
ušt32_t
 
	$aùive_æag_couÁ
(
Äf_©æags_t
 
æags
)

119 
ušt32_t
 
£t_æag_couÁ
 = 0;

121 
ušt32_t
 
i
 = 0; i < 
BLE_CONN_STATE_MAX_CONNECTIONS
; i++)

123 ià(
	`Äf_©æags_g‘
(&
æags
, 
i
))

125 
£t_æag_couÁ
 += 1;

128  
£t_æag_couÁ
;

129 
	}
}

140 
boŞ
 
	$»cÜd_aùiv©e
(
ušt16_t
 
cÚn_hªdË
)

142 ià(
cÚn_hªdË
 >ğ
BLE_CONN_STATE_MAX_CONNECTIONS
)

144  
çl£
;

146 
	`Äf_©æags_£t
(&
m_bcs
.
æags
.
cÚÃùed_æags
, 
cÚn_hªdË
);

147 
	`Äf_©æags_£t
(&
m_bcs
.
æags
.
v®id_æags
, 
cÚn_hªdË
);

148  
Œue
;

149 
	}
}

156 
	$»cÜd_šv®id©e
(
ušt16_t
 
cÚn_hªdË
)

158 
ušt32_t
 
i
 = 0; i < 
TOTAL_FLAG_COLLECTION_COUNT
; i++)

160 
	`Äf_©æags_ş—r
(&
m_bcs
.
æag_¬¿y
[
i
], 
cÚn_hªdË
);

162 
	}
}

169 
	$»cÜd_£t_discÚÃùed
(
ušt16_t
 
cÚn_hªdË
)

171 
	`Äf_©æags_ş—r
(&
m_bcs
.
æags
.
cÚÃùed_æags
, 
cÚn_hªdË
);

172 
	}
}

178 
	$»cÜd_purge_discÚÃùed
()

180 
Äf_©æags_t
 
discÚÃùed_æags
 = ~
m_bcs
.
æags
.
cÚÃùed_æags
;

181 
bË_cÚn_¡©e_cÚn_hªdË_li¡_t
 
discÚÃùed_li¡
;

183 
	`UNUSED_RETURN_VALUE
(
	`Äf_©omic_u32_ªd
(&
discÚÃùed_æags
, 
m_bcs
.
æags
.
v®id_æags
));

184 
discÚÃùed_li¡
 = 
	`cÚn_hªdË_li¡_g‘
(
discÚÃùed_æags
);

186 
ušt32_t
 
i
 = 0; i < 
discÚÃùed_li¡
.
Ën
; i++)

188 
	`»cÜd_šv®id©e
(
discÚÃùed_li¡
.
cÚn_hªdËs
[
i
]);

190 
	}
}

199 
boŞ
 
	$u£r_æag_is_acquœed
(
bË_cÚn_¡©e_u£r_æag_id_t
 
æag_id
)

201  
	`Äf_©æags_g‘
(&
m_bcs
.
acquœed_æags
, 
æag_id
);

202 
	}
}

205 
	$bË_cÚn_¡©e_š™
()

207 
	`bcs_š‹º®_¡©e_»£t
();

208 
	}
}

216 
	$bË_evt_hªdËr
(
bË_evt_t
 cÚ¡ * 
p_bË_evt
, * 
p_cÚ‹xt
)

218 
ušt16_t
 
cÚn_hªdË
 = 
p_bË_evt
->
evt
.
g­_evt
.conn_handle;

219 
p_bË_evt
->
h—d”
.
evt_id
)

221 
BLE_GAP_EVT_CONNECTED
:

222 
	`»cÜd_purge_discÚÃùed
();

224 iàĞ!
	`»cÜd_aùiv©e
(
cÚn_hªdË
) )

227 
	`APP_ERROR_HANDLER
(
NRF_ERROR_NO_MEM
);

229 ià((
p_bË_evt
->
evt
.
g­_evt
.
·¿ms
.
cÚÃùed
.
rŞe
 !ğ
BLE_GAP_ROLE_PERIPH
))

232 
	`Äf_©æags_£t
(&
m_bcs
.
æags
.
ûÁ¿l_æags
, 
cÚn_hªdË
);

237 
BLE_GAP_EVT_DISCONNECTED
:

238 
	`»cÜd_£t_discÚÃùed
(
cÚn_hªdË
);

241 
BLE_GAP_EVT_CONN_SEC_UPDATE
:

243 
boŞ
 
’üy±ed
 = (
p_bË_evt
->
evt
.
g­_evt
.
·¿ms
.
cÚn_£c_upd©e
.
cÚn_£c
.
£c_mode
.
lv
 > 1);

244 
boŞ
 
m™m
 = (
p_bË_evt
->
evt
.
g­_evt
.
·¿ms
.
cÚn_£c_upd©e
.
cÚn_£c
.
£c_mode
.
lv
 > 2);

246 ià(
’üy±ed
)

248 
	`Äf_©æags_£t
(&
m_bcs
.
æags
.
’üy±ed_æags
, 
cÚn_hªdË
);

249 ià(
m™m
)

251 
	`Äf_©æags_£t
(&
m_bcs
.
æags
.
m™m_´Ùeùed_æags
, 
cÚn_hªdË
);

255 
	`Äf_©æags_ş—r
(&
m_bcs
.
æags
.
m™m_´Ùeùed_æags
, 
cÚn_hªdË
);

260 
	`Äf_©æags_ş—r
(&
m_bcs
.
æags
.
’üy±ed_æags
, 
cÚn_hªdË
);

261 
	`Äf_©æags_ş—r
(&
m_bcs
.
æags
.
m™m_´Ùeùed_æags
, 
cÚn_hªdË
);

266 
	}
}

268 
NRF_SDH_BLE_OBSERVER
(
m_bË_evt_ob£rv”
, 
BLE_CONN_STATE_BLE_OBSERVER_PRIO
, 
bË_evt_hªdËr
, 
NULL
);

271 
boŞ
 
	$bË_cÚn_¡©e_v®id
(
ušt16_t
 
cÚn_hªdË
)

273 ià(
cÚn_hªdË
 >ğ
BLE_CONN_STATE_MAX_CONNECTIONS
)

275  
çl£
;

277  
	`Äf_©æags_g‘
(&
m_bcs
.
æags
.
v®id_æags
, 
cÚn_hªdË
);

278 
	}
}

281 
ušt8_t
 
	$bË_cÚn_¡©e_rŞe
(
ušt16_t
 
cÚn_hªdË
)

283 
ušt8_t
 
rŞe
 = 
BLE_GAP_ROLE_INVALID
;

285 ià(
	`bË_cÚn_¡©e_v®id
(
cÚn_hªdË
))

287 #ià!
	`defšed
 (
S112
)

288 
boŞ
 
ûÁ¿l
 = 
	`Äf_©æags_g‘
(&
m_bcs
.
æags
.
ûÁ¿l_æags
, 
cÚn_hªdË
);

289 
rŞe
 = 
ûÁ¿l
 ? 
BLE_GAP_ROLE_CENTRAL
 : 
BLE_GAP_ROLE_PERIPH
;

291 
rŞe
 = 
BLE_GAP_ROLE_PERIPH
;

295  
rŞe
;

296 
	}
}

299 
bË_cÚn_¡©e_¡©us_t
 
	$bË_cÚn_¡©e_¡©us
(
ušt16_t
 
cÚn_hªdË
)

301 
bË_cÚn_¡©e_¡©us_t
 
cÚn_¡©us
 = 
BLE_CONN_STATUS_INVALID
;

303 ià(
	`bË_cÚn_¡©e_v®id
(
cÚn_hªdË
))

305 
boŞ
 
cÚÃùed
 = 
	`Äf_©æags_g‘
(&
m_bcs
.
æags
.
cÚÃùed_æags
, 
cÚn_hªdË
);

306 
cÚn_¡©us
 = 
cÚÃùed
 ? 
BLE_CONN_STATUS_CONNECTED
 : 
BLE_CONN_STATUS_DISCONNECTED
;

309  
cÚn_¡©us
;

310 
	}
}

313 
boŞ
 
	$bË_cÚn_¡©e_’üy±ed
(
ušt16_t
 
cÚn_hªdË
)

315 ià(
	`bË_cÚn_¡©e_v®id
(
cÚn_hªdË
))

317  
	`Äf_©æags_g‘
(&
m_bcs
.
æags
.
’üy±ed_æags
, 
cÚn_hªdË
);

319  
çl£
;

320 
	}
}

323 
boŞ
 
	$bË_cÚn_¡©e_m™m_´Ùeùed
(
ušt16_t
 
cÚn_hªdË
)

325 ià(
	`bË_cÚn_¡©e_v®id
(
cÚn_hªdË
))

327  
	`Äf_©æags_g‘
(&
m_bcs
.
æags
.
m™m_´Ùeùed_æags
, 
cÚn_hªdË
);

329  
çl£
;

330 
	}
}

333 
ušt32_t
 
	$bË_cÚn_¡©e_cÚn_couÁ
()

335  
	`aùive_æag_couÁ
(
m_bcs
.
æags
.
cÚÃùed_æags
);

336 
	}
}

339 
ušt32_t
 
	$bË_cÚn_¡©e_ûÁ¿l_cÚn_couÁ
()

341 
Äf_©æags_t
 
ûÁ¿l_cÚn_æags
 = 
m_bcs
.
æags
.
ûÁ¿l_æags
;

342 
	`UNUSED_RETURN_VALUE
(
	`Äf_©omic_u32_ªd
(&
ûÁ¿l_cÚn_æags
, 
m_bcs
.
æags
.
cÚÃùed_æags
));

344  
	`aùive_æag_couÁ
(
ûÁ¿l_cÚn_æags
);

345 
	}
}

348 
ušt32_t
 
	$bË_cÚn_¡©e_³rh”®_cÚn_couÁ
()

350 
Äf_©æags_t
 
³rh”®_cÚn_æags
 = ~
m_bcs
.
æags
.
ûÁ¿l_æags
;

351 
	`UNUSED_RETURN_VALUE
(
	`Äf_©omic_u32_ªd
(&
³rh”®_cÚn_æags
, 
m_bcs
.
æags
.
cÚÃùed_æags
));

353  
	`aùive_æag_couÁ
(
³rh”®_cÚn_æags
);

354 
	}
}

357 
bË_cÚn_¡©e_cÚn_hªdË_li¡_t
 
	$bË_cÚn_¡©e_cÚn_hªdËs
()

359  
	`cÚn_hªdË_li¡_g‘
(
m_bcs
.
æags
.
v®id_æags
);

360 
	}
}

363 
bË_cÚn_¡©e_cÚn_hªdË_li¡_t
 
	$bË_cÚn_¡©e_ûÁ¿l_hªdËs
()

365 
Äf_©æags_t
 
ûÁ¿l_cÚn_æags
 = 
m_bcs
.
æags
.
ûÁ¿l_æags
;

366 
	`UNUSED_RETURN_VALUE
(
	`Äf_©omic_u32_ªd
(&
ûÁ¿l_cÚn_æags
, 
m_bcs
.
æags
.
cÚÃùed_æags
));

368  
	`cÚn_hªdË_li¡_g‘
(
ûÁ¿l_cÚn_æags
);

369 
	}
}

372 
bË_cÚn_¡©e_cÚn_hªdË_li¡_t
 
	$bË_cÚn_¡©e_³rh_hªdËs
()

374 
Äf_©æags_t
 
³rh”®_cÚn_æags
 = ~
m_bcs
.
æags
.
ûÁ¿l_æags
;

375 
	`UNUSED_RETURN_VALUE
(
	`Äf_©omic_u32_ªd
(&
³rh”®_cÚn_æags
, 
m_bcs
.
æags
.
cÚÃùed_æags
));

377  
	`cÚn_hªdË_li¡_g‘
(
³rh”®_cÚn_æags
);

378 
	}
}

381 
ušt16_t
 
	$bË_cÚn_¡©e_cÚn_idx
(
ušt16_t
 
cÚn_hªdË
)

383 ià(
	`bË_cÚn_¡©e_v®id
(
cÚn_hªdË
))

385  
cÚn_hªdË
;

389  
BLE_CONN_STATE_MAX_CONNECTIONS
;

391 
	}
}

394 
bË_cÚn_¡©e_u£r_æag_id_t
 
	$bË_cÚn_¡©e_u£r_æag_acquœe
()

396 
ušt32_t
 
acquœed_æag
 = 
	`Äf_©æags_fšd_ªd_£t_æag
(&
m_bcs
.
acquœed_æags
,

397 
BLE_CONN_STATE_USER_FLAG_COUNT
);

399 ià(
acquœed_æag
 =ğ
BLE_CONN_STATE_USER_FLAG_COUNT
)

401  
BLE_CONN_STATE_USER_FLAG_INVALID
;

403  (
bË_cÚn_¡©e_u£r_æag_id_t
)
acquœed_æag
;

404 
	}
}

407 
boŞ
 
	$bË_cÚn_¡©e_u£r_æag_g‘
(
ušt16_t
 
cÚn_hªdË
, 
bË_cÚn_¡©e_u£r_æag_id_t
 
æag_id
)

409 ià(
	`u£r_æag_is_acquœed
(
æag_id
è&& 
	`bË_cÚn_¡©e_v®id
(
cÚn_hªdË
))

411  
	`Äf_©æags_g‘
(&
m_bcs
.
æags
.
u£r_æags
[
æag_id
], 
cÚn_hªdË
);

415  
çl£
;

417 
	}
}

420 
	$bË_cÚn_¡©e_u£r_æag_£t
(
ušt16_t
 
cÚn_hªdË
,

421 
bË_cÚn_¡©e_u£r_æag_id_t
 
æag_id
,

422 
boŞ
 
v®ue
)

424 ià(
	`u£r_æag_is_acquœed
(
æag_id
è&& 
	`bË_cÚn_¡©e_v®id
(
cÚn_hªdË
))

426 ià(
v®ue
)

428 
	`Äf_©æags_£t
(&
m_bcs
.
æags
.
u£r_æags
[
æag_id
], 
cÚn_hªdË
);

432 
	`Äf_©æags_ş—r
(&
m_bcs
.
æags
.
u£r_æags
[
æag_id
], 
cÚn_hªdË
);

435 
	}
}

438 
ušt32_t
 
	$fÜ_—ch_£t_æag
(
Äf_©æags_t
 
æags
,

439 
bË_cÚn_¡©e_u£r_funùiÚ_t
 
u£r_funùiÚ
,

440 * 
p_cÚ‹xt
)

442 ià(
u£r_funùiÚ
 =ğ
NULL
)

447 
ušt32_t
 
ÿÎ_couÁ
 = 0;

449 ià(
æags
 != 0)

451 
ušt32_t
 
i
 = 0; i < 
BLE_CONN_STATE_MAX_CONNECTIONS
; i++)

453 ià(
	`Äf_©æags_g‘
(&
æags
, 
i
))

455 
	`u£r_funùiÚ
(
i
, 
p_cÚ‹xt
);

456 
ÿÎ_couÁ
 += 1;

460  
ÿÎ_couÁ
;

461 
	}
}

464 
ušt32_t
 
	$bË_cÚn_¡©e_fÜ_—ch_cÚÃùed
(
bË_cÚn_¡©e_u£r_funùiÚ_t
 
u£r_funùiÚ
,

465 * 
p_cÚ‹xt
)

467  
	`fÜ_—ch_£t_æag
(
m_bcs
.
æags
.
cÚÃùed_æags
, 
u£r_funùiÚ
, 
p_cÚ‹xt
);

468 
	}
}

471 
ušt32_t
 
	$bË_cÚn_¡©e_fÜ_—ch_£t_u£r_æag
(
bË_cÚn_¡©e_u£r_æag_id_t
 
æag_id
,

472 
bË_cÚn_¡©e_u£r_funùiÚ_t
 
u£r_funùiÚ
,

473 * 
p_cÚ‹xt
)

475 ià(!
	`u£r_æag_is_acquœed
(
æag_id
))

480  
	`fÜ_—ch_£t_æag
(
m_bcs
.
æags
.
u£r_æags
[
æag_id
], 
u£r_funùiÚ
, 
p_cÚ‹xt
);

481 
	}
}

	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\ble\common\ble_srv_common.c

45 
	~"bË_¤v_commÚ.h
"

46 
	~<¡ršg.h
>

47 
	~"nÜdic_commÚ.h
"

48 
	~"­p_”rÜ.h
"

49 
	~"bË.h
"

51 
boŞ
 
	$bË_¤v_is_nÙifiÿtiÚ_’abËd
(
ušt8_t
 cÚ¡ * 
p_’coded_d©a
)

53 
ušt16_t
 
cccd_v®ue
 = 
	`ušt16_decode
(
p_’coded_d©a
);

54  ((
cccd_v®ue
 & 
BLE_GATT_HVX_NOTIFICATION
) != 0);

55 
	}
}

57 
boŞ
 
	$bË_¤v_is_šdiÿtiÚ_’abËd
(
ušt8_t
 cÚ¡ * 
p_’coded_d©a
)

59 
ušt16_t
 
cccd_v®ue
 = 
	`ušt16_decode
(
p_’coded_d©a
);

60  ((
cccd_v®ue
 & 
BLE_GATT_HVX_INDICATION
) != 0);

61 
	}
}

63 
ušt8_t
 
	$bË_¤v_»pÜt_»f_’code
(
ušt8_t
 * 
p_’coded_bufãr
,

64 cÚ¡ 
bË_¤v_»pÜt_»f_t
 * 
p_»pÜt_»f
)

66 
ušt8_t
 
Ën
 = 0;

68 
p_’coded_bufãr
[
Ën
++] = 
p_»pÜt_»f
->
»pÜt_id
;

69 
p_’coded_bufãr
[
Ën
++] = 
p_»pÜt_»f
->
»pÜt_ty³
;

71 
	`APP_ERROR_CHECK_BOOL
(
Ën
 =ğ
BLE_SRV_ENCODED_REPORT_REF_LEN
);

72  
Ën
;

73 
	}
}

76 
	$bË_¤v_ascii_to_utf8
(
bË_¤v_utf8_¡r_t
 * 
p_utf8
, * 
p_ascii
)

78 
p_utf8
->
Ëngth
 = (
ušt16_t
)
	`¡¾’
(
p_ascii
);

79 
p_utf8
->
p_¡r
 = (
ušt8_t
 *)
p_ascii
;

80 
	}
}

90 
šlše
 
	$£t_£cur™y_»q
(
£cur™y_»q_t
 
Ëv–
, 
bË_g­_cÚn_£c_mode_t
 * 
p_³rm
)

94 
	`BLE_GAP_CONN_SEC_MODE_SET_NO_ACCESS
(
p_³rm
);

95 
Ëv–
)

97 
SEC_NO_ACCESS
:

98 
	`BLE_GAP_CONN_SEC_MODE_SET_NO_ACCESS
(
p_³rm
);

100 
SEC_OPEN
:

101 
	`BLE_GAP_CONN_SEC_MODE_SET_OPEN
(
p_³rm
);

103 
SEC_JUST_WORKS
:

104 
	`BLE_GAP_CONN_SEC_MODE_SET_ENC_NO_MITM
(
p_³rm
);

106 
SEC_MITM
:

107 
	`BLE_GAP_CONN_SEC_MODE_SET_ENC_WITH_MITM
(
p_³rm
);

109 
SEC_SIGNED
:

110 
	`BLE_GAP_CONN_SEC_MODE_SET_SIGNED_NO_MITM
(
p_³rm
);

112 
SEC_SIGNED_MITM
:

113 
	`BLE_GAP_CONN_SEC_MODE_SET_SIGNED_WITH_MITM
(
p_³rm
);

117 
	}
}

120 
ušt32_t
 
	$ch¬aù”i¡ic_add
(
ušt16_t
 
£rviû_hªdË
,

121 
bË_add_ch¬_·¿ms_t
 * 
p_ch¬_´İs
,

122 
bË_g©ts_ch¬_hªdËs_t
 * 
p_ch¬_hªdË
)

124 
bË_g©ts_ch¬_md_t
 
ch¬_md
;

125 
bË_g©ts_©Œ_t
 
©Œ_ch¬_v®ue
;

126 
bË_uuid_t
 
ch¬_uuid
;

127 
bË_g©ts_©Œ_md_t
 
©Œ_md
;

128 
bË_g©ts_©Œ_md_t
 
u£r_desü_©Œ_md
;

129 
bË_g©ts_©Œ_md_t
 
cccd_md
;

131 ià(
p_ch¬_´İs
->
uuid_ty³
 == 0)

133 
ch¬_uuid
.
ty³
 = 
BLE_UUID_TYPE_BLE
;

137 
ch¬_uuid
.
ty³
 = 
p_ch¬_´İs
->
uuid_ty³
;

139 
ch¬_uuid
.
uuid
 = 
p_ch¬_´İs
->uuid;

141 
	`mem£t
(&
©Œ_md
, 0, (
bË_g©ts_©Œ_md_t
));

142 
	`£t_£cur™y_»q
(
p_ch¬_´İs
->
»ad_acûss
, &
©Œ_md
.
»ad_³rm
);

143 
	`£t_£cur™y_»q
(
p_ch¬_´İs
->
wr™e_acûss
, & 
©Œ_md
.
wr™e_³rm
);

144 
©Œ_md
.
rd_auth
 = (
p_ch¬_´İs
->
is_deã»d_»ad
 ? 1 : 0);

145 
©Œ_md
.
wr_auth
 = (
p_ch¬_´İs
->
is_deã»d_wr™e
 ? 1 : 0);

146 
©Œ_md
.
vËn
 = (
p_ch¬_´İs
->
is_v¬_Ën
 ? 1 : 0);

147 
©Œ_md
.
vloc
 = (
p_ch¬_´İs
->
is_v®ue_u£r
 ? 
BLE_GATTS_VLOC_USER
 : 
BLE_GATTS_VLOC_STACK
);

150 
	`mem£t
(&
ch¬_md
, 0, (
bË_g©ts_ch¬_md_t
));

151 ià((
p_ch¬_´İs
->
ch¬_´İs
.
nÙify
 =ğ1)||Õ_ch¬_´İs->ch¬_´İs.
šdiÿ‹
 == 1))

154 
	`mem£t
(&
cccd_md
, 0, (cccd_md));

155 
	`£t_£cur™y_»q
(
p_ch¬_´İs
->
cccd_wr™e_acûss
, &
cccd_md
.
wr™e_³rm
);

156 
	`BLE_GAP_CONN_SEC_MODE_SET_OPEN
(&
cccd_md
.
»ad_³rm
);

158 
cccd_md
.
vloc
 = 
BLE_GATTS_VLOC_STACK
;

160 
ch¬_md
.
p_cccd_md
 = &
cccd_md
;

162 
ch¬_md
.
ch¬_´İs
 = 
p_ch¬_´İs
->char_props;

163 
ch¬_md
.
ch¬_ext_´İs
 = 
p_ch¬_´İs
->char_ext_props;

165 
	`mem£t
(&
©Œ_ch¬_v®ue
, 0, (
bË_g©ts_©Œ_t
));

166 
©Œ_ch¬_v®ue
.
p_uuid
 = &
ch¬_uuid
;

167 
©Œ_ch¬_v®ue
.
p_©Œ_md
 = &
©Œ_md
;

168 
©Œ_ch¬_v®ue
.
max_Ën
 = 
p_ch¬_´İs
->max_len;

169 ià(
p_ch¬_´İs
->
p_š™_v®ue
 !ğ
NULL
)

171 
©Œ_ch¬_v®ue
.
š™_Ën
 = 
p_ch¬_´İs
->init_len;

172 
©Œ_ch¬_v®ue
.
p_v®ue
 = 
p_ch¬_´İs
->
p_š™_v®ue
;

174 ià(
p_ch¬_´İs
->
p_u£r_desü
 !ğ
NULL
)

176 
	`mem£t
(&
u£r_desü_©Œ_md
, 0, (
bË_g©ts_©Œ_md_t
));

177 
ch¬_md
.
ch¬_u£r_desc_max_size
 = 
p_ch¬_´İs
->
p_u£r_desü
->
max_size
;

178 
ch¬_md
.
ch¬_u£r_desc_size
 = 
p_ch¬_´İs
->
p_u£r_desü
->
size
;

179 
ch¬_md
.
p_ch¬_u£r_desc
 = 
p_ch¬_´İs
->
p_u£r_desü
->p_char_user_desc;

181 
ch¬_md
.
p_u£r_desc_md
 = &
u£r_desü_©Œ_md
;

183 
	`£t_£cur™y_»q
(
p_ch¬_´İs
->
p_u£r_desü
->
»ad_acûss
, &
u£r_desü_©Œ_md
.
»ad_³rm
);

184 
	`£t_£cur™y_»q
(
p_ch¬_´İs
->
p_u£r_desü
->
wr™e_acûss
, &
u£r_desü_©Œ_md
.
wr™e_³rm
);

186 
u£r_desü_©Œ_md
.
rd_auth
 = (
p_ch¬_´İs
->
p_u£r_desü
->
is_deã»d_»ad
 ? 1 : 0);

187 
u£r_desü_©Œ_md
.
wr_auth
 = (
p_ch¬_´İs
->
p_u£r_desü
->
is_deã»d_wr™e
 ? 1 : 0);

188 
u£r_desü_©Œ_md
.
vËn
 = (
p_ch¬_´İs
->
p_u£r_desü
->
is_v¬_Ën
 ? 1 : 0);

189 
u£r_desü_©Œ_md
.
vloc
 = (
p_ch¬_´İs
->
p_u£r_desü
->
is_v®ue_u£r
 ? 
BLE_GATTS_VLOC_USER
 : 
BLE_GATTS_VLOC_STACK
);

191 ià(
p_ch¬_´İs
->
p_´e£Á©iÚ_fÜm©
 !ğ
NULL
)

193 
ch¬_md
.
p_ch¬_pf
 = 
p_ch¬_´İs
->
p_´e£Á©iÚ_fÜm©
;

195  
	`sd_bË_g©ts_ch¬aù”i¡ic_add
(
£rviû_hªdË
,

196 &
ch¬_md
,

197 &
©Œ_ch¬_v®ue
,

198 
p_ch¬_hªdË
);

199 
	}
}

202 
ušt32_t
 
	$desütÜ_add
(
ušt16_t
 
ch¬_hªdË
,

203 
bË_add_desü_·¿ms_t
 * 
p_desü_´İs
,

204 
ušt16_t
 * 
p_desü_hªdË
)

206 
bË_g©ts_©Œ_t
 
desü_·¿ms
;

207 
bË_uuid_t
 
desc_uuid
;

208 
bË_g©ts_©Œ_md_t
 
©Œ_md
;

210 
	`mem£t
(&
desü_·¿ms
, 0, (descr_params));

211 ià(
p_desü_´İs
->
uuid_ty³
 == 0)

213 
desc_uuid
.
ty³
 = 
BLE_UUID_TYPE_BLE
;

217 
desc_uuid
.
ty³
 = 
p_desü_´İs
->
uuid_ty³
;

219 
desc_uuid
.
uuid
 = 
p_desü_´İs
->uuid;

220 
desü_·¿ms
.
p_uuid
 = &
desc_uuid
;

222 
	`£t_£cur™y_»q
(
p_desü_´İs
->
»ad_acûss
, &
©Œ_md
.
»ad_³rm
);

223 
	`£t_£cur™y_»q
(
p_desü_´İs
->
wr™e_acûss
,&
©Œ_md
.
wr™e_³rm
);

225 
©Œ_md
.
rd_auth
 = (
p_desü_´İs
->
is_deã»d_»ad
 ? 1 : 0);

226 
©Œ_md
.
wr_auth
 = (
p_desü_´İs
->
is_deã»d_wr™e
 ? 1 : 0);

227 
©Œ_md
.
vËn
 = (
p_desü_´İs
->
is_v¬_Ën
 ? 1 : 0);

228 
©Œ_md
.
vloc
 = (
p_desü_´İs
->
is_v®ue_u£r
 ? 
BLE_GATTS_VLOC_USER
 : 
BLE_GATTS_VLOC_STACK
);

229 
desü_·¿ms
.
p_©Œ_md
 = &
©Œ_md
;

231 
desü_·¿ms
.
š™_Ën
 = 
p_desü_´İs
->init_len;

232 
desü_·¿ms
.
š™_offs
 = 
p_desü_´İs
->init_offs;

233 
desü_·¿ms
.
max_Ën
 = 
p_desü_´İs
->max_len;

234 
desü_·¿ms
.
p_v®ue
 = 
p_desü_´İs
->p_value;

236  
	`sd_bË_g©ts_desütÜ_add
(
ch¬_hªdË
, &
desü_·¿ms
, 
p_desü_hªdË
);

237 
	}
}

	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\ble\nrf_ble_gatt\nrf_ble_gatt.c

41 
	~"sdk_commÚ.h
"

42 #ià
NRF_MODULE_ENABLED
(
NRF_BLE_GATT
)

44 
	~"Äf_bË_g©t.h
"

46 
	#NRF_LOG_MODULE_NAME
 
Äf_bË_g©t


	)

47 
	~"Äf_log.h
"

48 
NRF_LOG_MODULE_REGISTER
();

50 
	~"Äf_¡»¼Ü.h
"

52 
	#BLE_GAP_DATA_LENGTH_DEFAULT
 27

53 
	#BLE_GAP_DATA_LENGTH_MAX
 251

54 

	)

56 
STATIC_ASSERT
(
NRF_SDH_BLE_GAP_DATA_LENGTH
 < 252);

60 
	$lšk_š™
(
Äf_bË_g©t_lšk_t
 * 
p_lšk
)

62 
p_lšk
->
©t_mtu_desœed
 = 
NRF_SDH_BLE_GATT_MAX_MTU_SIZE
;

63 
p_lšk
->
©t_mtu_efãùive
 = 
BLE_GATT_ATT_MTU_DEFAULT
;

64 
p_lšk
->
©t_mtu_exchªge_³ndšg
 = 
çl£
;

65 
p_lšk
->
©t_mtu_exchªge_»que¡ed
 = 
çl£
;

66 #ià!
	`defšed
 (
S112
)

67 
p_lšk
->
d©a_Ëngth_desœed
 = 
NRF_SDH_BLE_GAP_DATA_LENGTH
;

68 
p_lšk
->
d©a_Ëngth_efãùive
 = 
BLE_GAP_DATA_LENGTH_DEFAULT
;

70 
	}
}

73 #ià!
defšed
 (
S112
)

74 
»t_code_t
 
	$d©a_Ëngth_upd©e
(
ušt16_t
 
cÚn_hªdË
, ušt16_ˆ
d©a_Ëngth
)

76 
	`NRF_LOG_DEBUG
("Updating data†engtho %u on connection 0x%x.",

77 
d©a_Ëngth
, 
cÚn_hªdË
);

79 
bË_g­_d©a_Ëngth_·¿ms_t
 cÚ¡ 
dÍ
 =

81 .
max_rx_où‘s
 = 
d©a_Ëngth
,

82 .
max_tx_où‘s
 = 
d©a_Ëngth
,

83 .
max_rx_time_us
 = 
BLE_GAP_DATA_LENGTH_AUTO
,

84 .
max_tx_time_us
 = 
BLE_GAP_DATA_LENGTH_AUTO
,

87 
bË_g­_d©a_Ëngth_lim™©iÚ_t
 
dÎ
 = {0};

89 
»t_code_t
 
”r_code
 = 
	`sd_bË_g­_d©a_Ëngth_upd©e
(
cÚn_hªdË
, &
dÍ
, &
dÎ
);

90 ià(
”r_code
 !ğ
NRF_SUCCESS
)

92 
	`NRF_LOG_ERROR
("sd_ble_gap_data_length_update() (request) on connection 0x%x„eturned %s.",

93 
cÚn_hªdË
, 
	`Äf_¡»¼Ü_g‘
(
”r_code
));

95 iàĞ(
dÎ
.
tx_·ylßd_lim™ed_où‘s
 != 0)

96 || (
dÎ
.
rx_·ylßd_lim™ed_où‘s
 != 0))

98 
	`NRF_LOG_ERROR
("The„equested TX/RX…acket†ength isoo†ong by %u/%u octets.",

99 
dÎ
.
tx_·ylßd_lim™ed_où‘s
, dÎ.
rx_·ylßd_lim™ed_où‘s
);

102 ià(
dÎ
.
tx_rx_time_lim™ed_us
 != 0)

104 
	`NRF_LOG_ERROR
("The„equested combination of TX‡nd RX…acket†engths "

106 
dÎ
.
tx_rx_time_lim™ed_us
);

110  
”r_code
;

111 
	}
}

122 
	$Ú_cÚÃùed_evt
(
Äf_bË_g©t_t
 * 
p_g©t
, 
bË_evt_t
 cÚ¡ * 
p_bË_evt
)

124 
»t_code_t
 
”r_code
;

125 
ušt16_t
 
cÚn_hªdË
 = 
p_bË_evt
->
evt
.
commÚ_evt
.conn_handle;

126 
Äf_bË_g©t_lšk_t
 * 
p_lšk
 = &
p_g©t
->
lšks
[
cÚn_hªdË
];

129 #ià!
	`defšed
 (
S112
)

130 
p_lšk
->
d©a_Ëngth_desœed
 = 
p_g©t
->
d©a_Ëngth
;

133 
p_bË_evt
->
evt
.
g­_evt
.
·¿ms
.
cÚÃùed
.
rŞe
)

135 
BLE_GAP_ROLE_PERIPH
:

136 
p_lšk
->
©t_mtu_desœed
 = 
p_g©t
->
©t_mtu_desœed_³rh
;

139 #ià!
	`defšed
 (
S112
)

140 
BLE_GAP_ROLE_CENTRAL
:

141 
p_lšk
->
©t_mtu_desœed
 = 
p_g©t
->
©t_mtu_desœed_ûÁ¿l
;

151 ià(
p_lšk
->
©t_mtu_desœed
 >…_lšk->
©t_mtu_efãùive
)

153 
	`NRF_LOG_DEBUG
("Requestingo update ATT MTUo %u bytes on connection 0x%x.",

154 
p_lšk
->
©t_mtu_desœed
, 
cÚn_hªdË
);

156 
”r_code
 = 
	`sd_bË_g©tc_exchªge_mtu_»que¡
(
cÚn_hªdË
, 
p_lšk
->
©t_mtu_desœed
);

158 ià(
”r_code
 =ğ
NRF_SUCCESS
)

160 
p_lšk
->
©t_mtu_exchªge_»que¡ed
 = 
Œue
;

162 ià(
”r_code
 =ğ
NRF_ERROR_BUSY
)

164 
p_lšk
->
©t_mtu_exchªge_³ndšg
 = 
Œue
;

165 
	`NRF_LOG_DEBUG
("sd_ble_gattc_exchange_mtu_request()"

166 " oÀcÚÃùiÚ 0x%x„‘uºed busy, wÈ»Œy.", 
cÚn_hªdË
);

170 
	`NRF_LOG_ERROR
("sd_ble_gattc_exchange_mtu_request()„eturned %s.",

171 
	`Äf_¡»¼Ü_g‘
(
”r_code
));

175 #ià!
	`defšed
 (
S112
)

177 ià(
p_lšk
->
d©a_Ëngth_desœed
 >…_lšk->
d©a_Ëngth_efãùive
)

179 (è
	`d©a_Ëngth_upd©e
(
cÚn_hªdË
, 
p_lšk
->
d©a_Ëngth_desœed
);

182 
	}
}

185 
	$Ú_discÚÃùed_evt
(
Äf_bË_g©t_t
 * 
p_g©t
, 
bË_evt_t
 cÚ¡ * 
p_bË_evt
)

188 
	`lšk_š™
(&
p_g©t
->
lšks
[
p_bË_evt
->
evt
.
g­_evt
.
cÚn_hªdË
]);

189 
	}
}

201 
	$Ú_exchªge_mtu_r¥_evt
(
Äf_bË_g©t_t
 * 
p_g©t
, 
bË_evt_t
 cÚ¡ * 
p_bË_evt
)

203 
ušt16_t
 
cÚn_hªdË
 = 
p_bË_evt
->
evt
.
g©tc_evt
.conn_handle;

204 
ušt16_t
 
£rv”_rx_mtu
 = 
p_bË_evt
->
evt
.
g©tc_evt
.
·¿ms
.
exchªge_mtu_r¥
.server_rx_mtu;

206 
Äf_bË_g©t_lšk_t
 * 
p_lšk
 = &
p_g©t
->
lšks
[
cÚn_hªdË
];

210 
p_lšk
->
©t_mtu_efãùive
 = 
	`MIN
(
£rv”_rx_mtu
,…_lšk->
©t_mtu_desœed
);

211 
p_lšk
->
©t_mtu_efãùive
 = 
	`MAX
Õ_lšk->©t_mtu_efãùive, 
BLE_GATT_ATT_MTU_DEFAULT
);

213 
	`NRF_LOG_DEBUG
("ATT MTU updatedo %u bytes on connection 0x%x (response).",

214 
p_lšk
->
©t_mtu_efãùive
, 
cÚn_hªdË
);

218 ià((
p_g©t
->
evt_hªdËr
 !ğ
NULL
è&& (
p_lšk
->
©t_mtu_exchªge_»que¡ed
))

220 
Äf_bË_g©t_evt_t
 cÚ¡ 
evt
 =

222 .
evt_id
 = 
NRF_BLE_GATT_EVT_ATT_MTU_UPDATED
,

223 .
cÚn_hªdË
 = conn_handle,

224 .
·¿ms
.
©t_mtu_efãùive
 = 
p_lšk
->att_mtu_effective,

227 
p_g©t
->
	`evt_hªdËr
Õ_g©t, &
evt
);

230 
p_lšk
->
©t_mtu_exchªge_»que¡ed
 = 
çl£
;

231 
p_lšk
->
©t_mtu_exchªge_³ndšg
 = 
çl£
;

232 
	}
}

240 
	$Ú_exchªge_mtu_»que¡_evt
(
Äf_bË_g©t_t
 * 
p_g©t
, 
bË_evt_t
 cÚ¡ * 
p_bË_evt
)

242 
»t_code_t
 
”r_code
;

243 
ušt16_t
 
cÚn_hªdË
 = 
p_bË_evt
->
evt
.
g©ts_evt
.conn_handle;

244 
ušt16_t
 
ş›Á_mtu
 = 
p_bË_evt
->
evt
.
g©ts_evt
.
·¿ms
.
exchªge_mtu_»que¡
.
ş›Á_rx_mtu
;

246 
Äf_bË_g©t_lšk_t
 * 
p_lšk
 = &
p_g©t
->
lšks
[
cÚn_hªdË
];

248 
	`NRF_LOG_DEBUG
("Peer on connection 0x%x„equested‡n ATT MTU of %u bytes.",

249 
cÚn_hªdË
, 
ş›Á_mtu
);

251 
ş›Á_mtu
 = 
	`MAX
(ş›Á_mtu, 
BLE_GATT_ATT_MTU_DEFAULT
);

252 
p_lšk
->
©t_mtu_efãùive
 = 
	`MIN
(
ş›Á_mtu
,…_lšk->
©t_mtu_desœed
);

253 
p_lšk
->
©t_mtu_exchªge_³ndšg
 = 
çl£
;

255 
	`NRF_LOG_DEBUG
("Updating ATT MTUo %u bytes (desired: %u) on connection 0x%x.",

256 
p_lšk
->
©t_mtu_efãùive
,…_lšk->
©t_mtu_desœed
, 
cÚn_hªdË
);

258 
”r_code
 = 
	`sd_bË_g©ts_exchªge_mtu_»¶y
(
cÚn_hªdË
, 
p_lšk
->
©t_mtu_desœed
);

260 ià(
”r_code
 !ğ
NRF_SUCCESS
)

262 
	`NRF_LOG_ERROR
("sd_bË_g©ts_exchªge_mtu_»¶y(è»tuºed %s.", 
	`Äf_¡»¼Ü_g‘
(
”r_code
));

268 ià(
p_lšk
->
©t_mtu_exchªge_»que¡ed
)

274 ià(
p_g©t
->
evt_hªdËr
 !ğ
NULL
)

276 
Äf_bË_g©t_evt_t
 cÚ¡ 
evt
 =

278 .
evt_id
 = 
NRF_BLE_GATT_EVT_ATT_MTU_UPDATED
,

279 .
cÚn_hªdË
 = conn_handle,

280 .
·¿ms
.
©t_mtu_efãùive
 = 
p_lšk
->att_mtu_effective,

283 
p_g©t
->
	`evt_hªdËr
Õ_g©t, &
evt
);

285 
	}
}

295 #ià!
defšed
 (
S112
)

296 
	$Ú_d©a_Ëngth_upd©e_evt
(
Äf_bË_g©t_t
 * 
p_g©t
, 
bË_evt_t
 cÚ¡ * 
p_bË_evt
)

298 
bË_g­_evt_t
 cÚ¡ 
g­_evt
 = 
p_bË_evt
->
evt
.gap_evt;

299 
ušt16_t
 cÚ¡ 
cÚn_hªdË
 = 
g­_evt
.conn_handle;

303 
p_g©t
->
lšks
[
cÚn_hªdË
].
d©a_Ëngth_efãùive
 =

304 
g­_evt
.
·¿ms
.
d©a_Ëngth_upd©e
.
efãùive_·¿ms
.
max_tx_où‘s
;

306 
	`NRF_LOG_DEBUG
("Data†ength updatedo %u on connection 0x%0x.",

307 
p_g©t
->
lšks
[
cÚn_hªdË
].
d©a_Ëngth_efãùive
,

308 
cÚn_hªdË
);

310 
	`NRF_LOG_DEBUG
("max_rx_octets: %u",

311 
g­_evt
.
·¿ms
.
d©a_Ëngth_upd©e
.
efãùive_·¿ms
.
max_rx_où‘s
);

312 
	`NRF_LOG_DEBUG
("max_tx_octets: %u",

313 
g­_evt
.
·¿ms
.
d©a_Ëngth_upd©e
.
efãùive_·¿ms
.
max_tx_où‘s
);

314 
	`NRF_LOG_DEBUG
("max_rx_time: %u",

315 
g­_evt
.
·¿ms
.
d©a_Ëngth_upd©e
.
efãùive_·¿ms
.
max_rx_time_us
);

316 
	`NRF_LOG_DEBUG
("max_tx_time: %u",

317 
g­_evt
.
·¿ms
.
d©a_Ëngth_upd©e
.
efãùive_·¿ms
.
max_tx_time_us
);

319 ià(
p_g©t
->
evt_hªdËr
 !ğ
NULL
)

321 
Äf_bË_g©t_evt_t
 cÚ¡ 
evt
 =

323 .
evt_id
 = 
NRF_BLE_GATT_EVT_DATA_LENGTH_UPDATED
,

324 .
cÚn_hªdË
 = conn_handle,

325 .
·¿ms
.
d©a_Ëngth
 = 
p_g©t
->
lšks
[
cÚn_hªdË
].
d©a_Ëngth_efãùive
,

328 
p_g©t
->
	`evt_hªdËr
Õ_g©t, &
evt
);

330 
	}
}

348 
	$Ú_d©a_Ëngth_upd©e_»que¡_evt
(
Äf_bË_g©t_t
 * 
p_g©t
, 
bË_evt_t
 cÚ¡ * 
p_bË_evt
)

350 
bË_g­_evt_t
 cÚ¡ * 
p_g­_evt
 = &
p_bË_evt
->
evt
.
g­_evt
;

351 
Äf_bË_g©t_lšk_t
 * 
p_lšk
 = &
p_g©t
->
lšks
[
p_g­_evt
->
cÚn_hªdË
];

354 
ušt8_t
 cÚ¡ 
d©a_Ëngth_»que¡ed
 =

355 
p_g­_evt
->
·¿ms
.
d©a_Ëngth_upd©e_»que¡
.
³”_·¿ms
.
max_tx_où‘s
;

357 
	`NRF_LOG_DEBUG
("Peer on connection 0x%x„equested‡ data†ength of %u bytes.",

358 
p_g­_evt
->
cÚn_hªdË
, 
d©a_Ëngth_»que¡ed
);

360 
ušt8_t
 cÚ¡ 
d©a_Ëngth_efãùive
 = 
	`MIN
(
p_lšk
->
d©a_Ëngth_desœed
, 
d©a_Ëngth_»que¡ed
);

362 (è
	`d©a_Ëngth_upd©e
(
p_g­_evt
->
cÚn_hªdË
, 
d©a_Ëngth_efãùive
);

363 
	}
}

367 
»t_code_t
 
	$Äf_bË_g©t_š™
(
Äf_bË_g©t_t
 * 
p_g©t
, 
Äf_bË_g©t_evt_hªdËr_t
 
evt_hªdËr
)

369 
	`VERIFY_PARAM_NOT_NULL
(
p_g©t
);

371 
p_g©t
->
evt_hªdËr
 =ƒvt_handler;

372 
p_g©t
->
©t_mtu_desœed_³rh
 = 
NRF_SDH_BLE_GATT_MAX_MTU_SIZE
;

373 
p_g©t
->
©t_mtu_desœed_ûÁ¿l
 = 
NRF_SDH_BLE_GATT_MAX_MTU_SIZE
;

374 
p_g©t
->
d©a_Ëngth
 = 
NRF_SDH_BLE_GAP_DATA_LENGTH
;

376 
ušt32_t
 
i
 = 0; i < 
NRF_BLE_GATT_LINK_COUNT
; i++)

378 
	`lšk_š™
(&
p_g©t
->
lšks
[
i
]);

381  
NRF_SUCCESS
;

382 
	}
}

385 
»t_code_t
 
	$Äf_bË_g©t_©t_mtu_³rh_£t
(
Äf_bË_g©t_t
 * 
p_g©t
, 
ušt16_t
 
desœed_mtu
)

387 
	`VERIFY_PARAM_NOT_NULL
(
p_g©t
);

389 ià((
desœed_mtu
 < 
BLE_GATT_ATT_MTU_DEFAULT
è|| (desœed_mtu > 
NRF_SDH_BLE_GATT_MAX_MTU_SIZE
))

391  
NRF_ERROR_INVALID_PARAM
;

394 
p_g©t
->
©t_mtu_desœed_³rh
 = 
desœed_mtu
;

395  
NRF_SUCCESS
;

396 
	}
}

399 
»t_code_t
 
	$Äf_bË_g©t_©t_mtu_ûÁ¿l_£t
(
Äf_bË_g©t_t
 * 
p_g©t
, 
ušt16_t
 
desœed_mtu
)

401 
	`VERIFY_PARAM_NOT_NULL
(
p_g©t
);

403 ià((
desœed_mtu
 < 
BLE_GATT_ATT_MTU_DEFAULT
è|| (desœed_mtu > 
NRF_SDH_BLE_GATT_MAX_MTU_SIZE
))

405  
NRF_ERROR_INVALID_PARAM
;

408 
p_g©t
->
©t_mtu_desœed_ûÁ¿l
 = 
desœed_mtu
;

409  
NRF_SUCCESS
;

410 
	}
}

413 
ušt16_t
 
	$Äf_bË_g©t_eff_mtu_g‘
(
Äf_bË_g©t_t
 cÚ¡ * 
p_g©t
, 
ušt16_t
 
cÚn_hªdË
)

415 ià((
p_g©t
 =ğ
NULL
è|| (
cÚn_hªdË
 >ğ
NRF_BLE_GATT_LINK_COUNT
))

420  
p_g©t
->
lšks
[
cÚn_hªdË
].
©t_mtu_efãùive
;

421 
	}
}

423 #ià!
defšed
 (
S112
)

424 
»t_code_t
 
	$Äf_bË_g©t_d©a_Ëngth_£t
(
Äf_bË_g©t_t
 * 
p_g©t
,

425 
ušt16_t
 
cÚn_hªdË
,

426 
ušt8_t
 
d©a_Ëngth
)

428 ià(
p_g©t
 =ğ
NULL
)

430  
NRF_ERROR_NULL
;

434 iàĞ(
d©a_Ëngth
 > 
BLE_GAP_DATA_LENGTH_MAX
)

435 || (
d©a_Ëngth
 < 
BLE_GAP_DATA_LENGTH_DEFAULT
))

437  
NRF_ERROR_INVALID_PARAM
;

440 ià(
cÚn_hªdË
 =ğ
BLE_CONN_HANDLE_INVALID
)

443 
p_g©t
->
d©a_Ëngth
 = data_length;

444  
NRF_SUCCESS
;

447 ià(
cÚn_hªdË
 >ğ
NRF_BLE_GATT_LINK_COUNT
)

449  
NRF_ERROR_INVALID_PARAM
;

453 
p_g©t
->
lšks
[
cÚn_hªdË
].
d©a_Ëngth_desœed
 = 
d©a_Ëngth
;

455  
	`d©a_Ëngth_upd©e
(
cÚn_hªdË
, 
d©a_Ëngth
);

456 
	}
}

459 
»t_code_t
 
	$Äf_bË_g©t_d©a_Ëngth_g‘
(
Äf_bË_g©t_t
 cÚ¡ * 
p_g©t
,

460 
ušt16_t
 
cÚn_hªdË
,

461 
ušt8_t
 * 
p_d©a_Ëngth
)

463 ià((
p_g©t
 =ğ
NULL
è|| (
p_d©a_Ëngth
 == NULL))

465  
NRF_ERROR_NULL
;

468 ià(
cÚn_hªdË
 =ğ
BLE_CONN_HANDLE_INVALID
)

470 *
p_d©a_Ëngth
 = 
p_g©t
->
d©a_Ëngth
;

471  
NRF_SUCCESS
;

474 ià(
cÚn_hªdË
 >ğ
NRF_BLE_GATT_LINK_COUNT
)

476  
NRF_ERROR_INVALID_PARAM
;

479 *
p_d©a_Ëngth
 = 
p_g©t
->
lšks
[
cÚn_hªdË
].
d©a_Ëngth_efãùive
;

480  
NRF_SUCCESS
;

481 
	}
}

485 
	$Äf_bË_g©t_Ú_bË_evt
(
bË_evt_t
 cÚ¡ * 
p_bË_evt
, * 
p_cÚ‹xt
)

487 
Äf_bË_g©t_t
 * 
p_g©t
 = (Äf_bË_g©t_ˆ*)
p_cÚ‹xt
;

488 
ušt16_t
 
cÚn_hªdË
 = 
p_bË_evt
->
evt
.
commÚ_evt
.conn_handle;

490 ià(
cÚn_hªdË
 >ğ
NRF_BLE_GATT_LINK_COUNT
)

495 
p_bË_evt
->
h—d”
.
evt_id
)

497 
BLE_GAP_EVT_CONNECTED
:

498 
	`Ú_cÚÃùed_evt
(
p_g©t
, 
p_bË_evt
);

501 
BLE_GAP_EVT_DISCONNECTED
:

502 
	`Ú_discÚÃùed_evt
(
p_g©t
, 
p_bË_evt
);

505 
BLE_GATTC_EVT_EXCHANGE_MTU_RSP
:

506 
	`Ú_exchªge_mtu_r¥_evt
(
p_g©t
, 
p_bË_evt
);

509 
BLE_GATTS_EVT_EXCHANGE_MTU_REQUEST
:

510 
	`Ú_exchªge_mtu_»que¡_evt
(
p_g©t
, 
p_bË_evt
);

513 #ià!
	`defšed
 (
S112
)

514 
BLE_GAP_EVT_DATA_LENGTH_UPDATE
:

515 
	`Ú_d©a_Ëngth_upd©e_evt
(
p_g©t
, 
p_bË_evt
);

518 
BLE_GAP_EVT_DATA_LENGTH_UPDATE_REQUEST
:

519 
	`Ú_d©a_Ëngth_upd©e_»que¡_evt
(
p_g©t
, 
p_bË_evt
);

527 ià(
p_g©t
->
lšks
[
cÚn_hªdË
].
©t_mtu_exchªge_³ndšg
)

529 
»t_code_t
 
”r_code
;

531 
”r_code
 = 
	`sd_bË_g©tc_exchªge_mtu_»que¡
(
cÚn_hªdË
,

532 
p_g©t
->
lšks
[
cÚn_hªdË
].
©t_mtu_desœed
);

534 ià(
”r_code
 =ğ
NRF_SUCCESS
)

536 
p_g©t
->
lšks
[
cÚn_hªdË
].
©t_mtu_exchªge_³ndšg
 = 
çl£
;

537 
p_g©t
->
lšks
[
cÚn_hªdË
].
©t_mtu_exchªge_»que¡ed
 = 
Œue
;

539 
	`NRF_LOG_DEBUG
("Requestingo update ATT MTUo %u bytes on connection 0x%x (retry).",

540 
p_g©t
->
lšks
[
cÚn_hªdË
].
©t_mtu_desœed
, conn_handle);

542 ià(
”r_code
 !ğ
NRF_ERROR_BUSY
)

544 
	`NRF_LOG_ERROR
("sd_ble_gattc_exchange_mtu_request()„eturned %s.",

545 
	`Äf_¡»¼Ü_g‘
(
”r_code
));

548 
	}
}

	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\ble\nrf_ble_qwr\nrf_ble_qwr.c

40 
	~"sdk_commÚ.h
"

41 #ià
NRF_MODULE_ENABLED
(
NRF_BLE_QWR
)

42 
	~<¡dlib.h
>

43 
	~"Äf_bË_qwr.h
"

44 
	~"bË.h
"

45 
	~"bË_¤v_commÚ.h
"

48 
	#NRF_BLE_QWR_INITIALIZED
 0xDE

49 
	#MODULE_INITIALIZED
 (
p_qwr
->
š™Ÿlized
 =ğ
NRF_BLE_QWR_INITIALIZED
)

	)

50 
	~"sdk_maüos.h
"

52 
»t_code_t
 
	$Äf_bË_qwr_š™
(
Äf_bË_qwr_t
 * 
p_qwr
,

53 
Äf_bË_qwr_š™_t
 cÚ¡ * 
p_qwr_š™
)

55 
	`VERIFY_PARAM_NOT_NULL
(
p_qwr
);

56 
	`VERIFY_PARAM_NOT_NULL
(
p_qwr_š™
);

57 ià(
MODULE_INITIALIZED
)

59  
NRF_ERROR_INVALID_STATE
;

62 
p_qwr
->
”rÜ_hªdËr
 = 
p_qwr_š™
->error_handler;

63 
p_qwr
->
š™Ÿlized
 = 
NRF_BLE_QWR_INITIALIZED
;

64 
p_qwr
->
cÚn_hªdË
 = 
BLE_CONN_HANDLE_INVALID
;

65 #ià(
NRF_BLE_QWR_MAX_ATTR
 > 0)

66 
	`mem£t
(
p_qwr
->
©Œ_hªdËs
, 0, (p_qwr->attr_handles));

67 
p_qwr
->
nb_»gi¡”ed_©Œ
 = 0;

68 
p_qwr
->
is_u£r_mem_»¶y_³ndšg
 = 
çl£
;

69 
p_qwr
->
mem_bufãr
 = 
p_qwr_š™
->mem_buffer;

70 
p_qwr
->
ÿÎback
 = 
p_qwr_š™
->callback;

71 
p_qwr
->
nb_wr™‹n_hªdËs
 = 0;

73  
NRF_SUCCESS
;

74 
	}
}

77 #ià(
NRF_BLE_QWR_MAX_ATTR
 > 0)

78 
»t_code_t
 
	$Äf_bË_qwr_©Œ_»gi¡”
(
Äf_bË_qwr_t
 * 
p_qwr
, 
ušt16_t
 
©Œ_hªdË
)

80 
	`VERIFY_PARAM_NOT_NULL
(
p_qwr
);

81 
	`VERIFY_MODULE_INITIALIZED
();

83 ià((
p_qwr
->
nb_»gi¡”ed_©Œ
 =ğ
NRF_BLE_QWR_MAX_ATTR
)

84 || (
p_qwr
->
mem_bufãr
.
p_mem
 =ğ
NULL
)

85 || (
p_qwr
->
mem_bufãr
.
Ën
 == 0))

87  (
NRF_ERROR_NO_MEM
);

90 ià(
©Œ_hªdË
 =ğ
BLE_GATT_HANDLE_INVALID
)

92  
NRF_ERROR_INVALID_PARAM
;

95 
p_qwr
->
©Œ_hªdËs
[p_qwr->
nb_»gi¡”ed_©Œ
] = 
©Œ_hªdË
;

96 
p_qwr
->
nb_»gi¡”ed_©Œ
++;

98  
NRF_SUCCESS
;

99 
	}
}

102 
»t_code_t
 
	$Äf_bË_qwr_v®ue_g‘
(
Äf_bË_qwr_t
 * 
p_qwr
,

103 
ušt16_t
 
©Œ_hªdË
,

104 
ušt8_t
 * 
p_mem
,

105 
ušt16_t
 * 
p_Ën
)

107 
	`VERIFY_PARAM_NOT_NULL
(
p_qwr
);

108 
	`VERIFY_PARAM_NOT_NULL
(
p_mem
);

109 
	`VERIFY_PARAM_NOT_NULL
(
p_Ën
);

110 
	`VERIFY_MODULE_INITIALIZED
();

112 
ušt16_t
 
i
 = 0;

113 
ušt16_t
 
hªdË
 = 
BLE_GATT_HANDLE_INVALID
;

114 
ušt16_t
 
v®_Ën
 = 0;

115 
ušt16_t
 
v®_off£t
 = 0;

116 
ušt16_t
 
cur_Ën
 = 0;

120 
hªdË
 = 
	`ušt16_decode
(&(
p_qwr
->
mem_bufãr
.
p_mem
[
i
]));

122 ià(
hªdË
 =ğ
BLE_GATT_HANDLE_INVALID
)

127 
i
 +ğ(
ušt16_t
);

128 
v®_off£t
 = 
	`ušt16_decode
(&(
p_qwr
->
mem_bufãr
.
p_mem
[
i
]));

129 
i
 +ğ(
ušt16_t
);

130 
v®_Ën
 = 
	`ušt16_decode
(&(
p_qwr
->
mem_bufãr
.
p_mem
[
i
]));

131 
i
 +ğ(
ušt16_t
);

133 ià(
hªdË
 =ğ
©Œ_hªdË
)

135 
cur_Ën
 = 
v®_off£t
 + 
v®_Ën
;

136 ià(
cur_Ën
 <ğ*
p_Ën
)

138 
	`memıy
((
p_mem
 + 
v®_off£t
), &(
p_qwr
->
mem_bufãr
.p_mem[
i
]), 
v®_Ën
);

142  
NRF_ERROR_NO_MEM
;

146 
i
 +ğ
v®_Ën
;

148 
i
 < 
p_qwr
->
mem_bufãr
.
Ën
);

150 *
p_Ën
 = 
cur_Ën
;

151  
NRF_SUCCESS
;

152 
	}
}

156 
»t_code_t
 
	$Äf_bË_qwr_cÚn_hªdË_assign
(
Äf_bË_qwr_t
 * 
p_qwr
,

157 
ušt16_t
 
cÚn_hªdË
)

159 
	`VERIFY_PARAM_NOT_NULL
(
p_qwr
);

160 
	`VERIFY_MODULE_INITIALIZED
();

161 
p_qwr
->
cÚn_hªdË
 = conn_handle;

162  
NRF_SUCCESS
;

163 
	}
}

170 
	$u£r_mem_»¶y
(
Äf_bË_qwr_t
 * 
p_qwr
)

172 ià(
p_qwr
->
is_u£r_mem_»¶y_³ndšg
)

174 
»t_code_t
 
”r_code
;

175 #ià(
NRF_BLE_QWR_MAX_ATTR
 == 0)

176 
”r_code
 = 
	`sd_bË_u£r_mem_»¶y
(
p_qwr
->
cÚn_hªdË
, 
NULL
);

178 
”r_code
 = 
	`sd_bË_u£r_mem_»¶y
(
p_qwr
->
cÚn_hªdË
, &p_qwr->
mem_bufãr
);

180 ià(
”r_code
 =ğ
NRF_SUCCESS
)

182 
p_qwr
->
is_u£r_mem_»¶y_³ndšg
 = 
çl£
;

184 ià(
”r_code
 =ğ
NRF_ERROR_BUSY
)

186 
p_qwr
->
is_u£r_mem_»¶y_³ndšg
 = 
Œue
;

190 
p_qwr
->
	`”rÜ_hªdËr
(
”r_code
);

193 
	}
}

201 
	$Ú_u£r_mem_»que¡
(
Äf_bË_qwr_t
 * 
p_qwr
,

202 
bË_commÚ_evt_t
 cÚ¡ * 
p_commÚ_evt
)

204 ià((
p_commÚ_evt
->
·¿ms
.
u£r_mem_»que¡
.
ty³
 =ğ
BLE_USER_MEM_TYPE_GATTS_QUEUED_WRITES
) &&

205 (
p_commÚ_evt
->
cÚn_hªdË
 =ğ
p_qwr
->conn_handle))

207 
p_qwr
->
is_u£r_mem_»¶y_³ndšg
 = 
Œue
;

208 
	`u£r_mem_»¶y
(
p_qwr
);

210 
	}
}

218 
	$Ú_u£r_mem_»Ëa£
(
Äf_bË_qwr_t
 * 
p_qwr
,

219 
bË_commÚ_evt_t
 cÚ¡ * 
p_commÚ_evt
)

221 #ià(
NRF_BLE_QWR_MAX_ATTR
 > 0)

222 ià((
p_commÚ_evt
->
·¿ms
.
u£r_mem_»Ëa£
.
ty³
 =ğ
BLE_USER_MEM_TYPE_GATTS_QUEUED_WRITES
) &&

223 (
p_commÚ_evt
->
cÚn_hªdË
 =ğ
p_qwr
->conn_handle))

226 
p_qwr
->
nb_wr™‹n_hªdËs
 = 0;

229 
	}
}

232 #ià(
NRF_BLE_QWR_MAX_ATTR
 > 0)

238 
	$Ú_´•¬e_wr™e
(
Äf_bË_qwr_t
 * 
p_qwr
,

239 
bË_g©ts_evt_wr™e_t
 cÚ¡ * 
p_evt_wr™e
)

241 
ušt32_t
 
”r_code
;

242 
bË_g©ts_rw_authÜize_»¶y_·¿ms_t
 
auth_»¶y
;

243 
	`mem£t
(&
auth_»¶y
, 0, (auth_reply));

245 
auth_»¶y
.
·¿ms
.
wr™e
.
g©t_¡©us
 = 
NRF_BLE_QWR_REJ_REQUEST_ERR_CODE
;

246 
auth_»¶y
.
ty³
 = 
BLE_GATTS_AUTHORIZE_TYPE_WRITE
;

248 
ušt32_t
 
i
;

250 
i
 = 0; i < 
p_qwr
->
nb_wr™‹n_hªdËs
; i++)

252 ià(
p_qwr
->
wr™‹n_©Œ_hªdËs
[
i
] =ğ
p_evt_wr™e
->
hªdË
)

254 
auth_»¶y
.
·¿ms
.
wr™e
.
g©t_¡©us
 = 
BLE_GATT_STATUS_SUCCESS
;

259 ià(
auth_»¶y
.
·¿ms
.
wr™e
.
g©t_¡©us
 !ğ
BLE_GATT_STATUS_SUCCESS
)

261 
i
 = 0; i < 
p_qwr
->
nb_»gi¡”ed_©Œ
; i++)

263 ià(
p_qwr
->
©Œ_hªdËs
[
i
] =ğ
p_evt_wr™e
->
hªdË
)

265 
auth_»¶y
.
·¿ms
.
wr™e
.
g©t_¡©us
 = 
BLE_GATT_STATUS_SUCCESS
;

266 
p_qwr
->
wr™‹n_©Œ_hªdËs
[p_qwr->
nb_wr™‹n_hªdËs
++] = 
p_evt_wr™e
->
hªdË
;

272 
”r_code
 = 
	`sd_bË_g©ts_rw_authÜize_»¶y
(
p_qwr
->
cÚn_hªdË
, &
auth_»¶y
);

273 ià(
”r_code
 !ğ
NRF_SUCCESS
)

276 
p_qwr
->
nb_wr™‹n_hªdËs
 = 0;

279 
p_qwr
->
	`”rÜ_hªdËr
(
”r_code
);

282 
	}
}

290 
	$Ú_execu‹_wr™e
(
Äf_bË_qwr_t
 * 
p_qwr
,

291 
bË_g©ts_evt_wr™e_t
 cÚ¡ * 
p_evt_wr™e
)

293 
ušt32_t
 
”r_code
;

294 
bË_g©ts_rw_authÜize_»¶y_·¿ms_t
 
auth_»¶y
;

295 
	`mem£t
(&
auth_»¶y
, 0, (auth_reply));

297 
auth_»¶y
.
·¿ms
.
wr™e
.
g©t_¡©us
 = 
BLE_GATT_STATUS_SUCCESS
;

298 
auth_»¶y
.
ty³
 = 
BLE_GATTS_AUTHORIZE_TYPE_WRITE
;

300 ià(
p_qwr
->
nb_wr™‹n_hªdËs
 == 0)

302 
auth_»¶y
.
·¿ms
.
wr™e
.
g©t_¡©us
 = 
NRF_BLE_QWR_REJ_REQUEST_ERR_CODE
;

303 
”r_code
 = 
	`sd_bË_g©ts_rw_authÜize_»¶y
(
p_qwr
->
cÚn_hªdË
, &
auth_»¶y
);

304 ià(
”r_code
 !ğ
NRF_SUCCESS
)

307 
p_qwr
->
	`”rÜ_hªdËr
(
”r_code
);

312 
ušt16_t
 
i
 = 0; i < 
p_qwr
->
nb_wr™‹n_hªdËs
; i++)

314 
Äf_bË_qwr_evt_t
 
evt
;

315 
ušt16_t
 
»t_v®
;

317 
evt
.
evt_ty³
 = 
NRF_BLE_QWR_EVT_AUTH_REQUEST
;

318 
evt
.
©Œ_hªdË
 = 
p_qwr
->
wr™‹n_©Œ_hªdËs
[
i
];

319 
»t_v®
 = 
p_qwr
->
	`ÿÎback
Õ_qwr, &
evt
);

320 ià(
»t_v®
 !ğ
BLE_GATT_STATUS_SUCCESS
)

322 
auth_»¶y
.
·¿ms
.
wr™e
.
g©t_¡©us
 = 
»t_v®
;

326 
”r_code
 = 
	`sd_bË_g©ts_rw_authÜize_»¶y
(
p_qwr
->
cÚn_hªdË
, &
auth_»¶y
);

327 ià(
”r_code
 !ğ
NRF_SUCCESS
)

330 
p_qwr
->
	`”rÜ_hªdËr
(
”r_code
);

334 ià(
auth_»¶y
.
·¿ms
.
wr™e
.
g©t_¡©us
 =ğ
BLE_GATT_STATUS_SUCCESS
)

336 
ušt16_t
 
i
 = 0; i < 
p_qwr
->
nb_wr™‹n_hªdËs
; i++)

338 
Äf_bË_qwr_evt_t
 
evt
;

339 
evt
.
evt_ty³
 = 
NRF_BLE_QWR_EVT_EXECUTE_WRITE
;

340 
evt
.
©Œ_hªdË
 = 
p_qwr
->
wr™‹n_©Œ_hªdËs
[
i
];

342 
p_qwr
->
	`ÿÎback
Õ_qwr, &
evt
);

345 
auth_»¶y
.
·¿ms
.
wr™e
.
g©t_¡©us
 = 
BLE_GATT_STATUS_SUCCESS
;

348 
p_qwr
->
nb_wr™‹n_hªdËs
 = 0;

349 
	}
}

357 
	$Ú_ÿnûl_wr™e
(
Äf_bË_qwr_t
 * 
p_qwr
,

358 
bË_g©ts_evt_wr™e_t
 cÚ¡ * 
p_evt_wr™e
)

360 
ušt32_t
 
”r_code
;

361 
bË_g©ts_rw_authÜize_»¶y_·¿ms_t
 
auth_»¶y
;

362 
	`mem£t
(&
auth_»¶y
, 0, (auth_reply));

364 
auth_»¶y
.
ty³
 = 
BLE_GATTS_AUTHORIZE_TYPE_WRITE
;

365 
auth_»¶y
.
·¿ms
.
wr™e
.
g©t_¡©us
 = 
BLE_GATT_STATUS_SUCCESS
;

367 
”r_code
 = 
	`sd_bË_g©ts_rw_authÜize_»¶y
(
p_qwr
->
cÚn_hªdË
, &
auth_»¶y
);

368 ià(
”r_code
 !ğ
NRF_SUCCESS
)

371 
p_qwr
->
	`”rÜ_hªdËr
(
”r_code
);

373 
p_qwr
->
nb_wr™‹n_hªdËs
 = 0;

374 
	}
}

382 
	$Ú_rw_authÜize_»que¡
(
Äf_bË_qwr_t
 * 
p_qwr
,

383 
bË_g©ts_evt_t
 cÚ¡ * 
p_g©ts_evt
)

385 ià(
p_g©ts_evt
->
cÚn_hªdË
 !ğ
p_qwr
->conn_handle)

390 
bË_g©ts_evt_rw_authÜize_»que¡_t
 cÚ¡ * 
p_auth_»q
 = &
p_g©ts_evt
->
·¿ms
.
authÜize_»que¡
;

392 ià(
p_auth_»q
->
ty³
 !ğ
BLE_GATTS_AUTHORIZE_TYPE_WRITE
)

397 #ià(
NRF_BLE_QWR_MAX_ATTR
 == 0)

399 ià((
p_auth_»q
->
»que¡
.
wr™e
.
İ
 !ğ
BLE_GATTS_OP_PREP_WRITE_REQ
) &&

400 (
p_auth_»q
->
»que¡
.
wr™e
.
İ
 !ğ
BLE_GATTS_OP_EXEC_WRITE_REQ_NOW
) &&

401 (
p_auth_»q
->
»que¡
.
wr™e
.
İ
 !ğ
BLE_GATTS_OP_EXEC_WRITE_REQ_CANCEL
))

407 
bË_g©ts_rw_authÜize_»¶y_·¿ms_t
 
auth_»¶y
 = {0};

409 
auth_»¶y
.
ty³
 = 
BLE_GATTS_AUTHORIZE_TYPE_WRITE
;

410 
auth_»¶y
.
·¿ms
.
wr™e
.
g©t_¡©us
 = 
NRF_BLE_QWR_REJ_REQUEST_ERR_CODE
;

411 ià(
p_auth_»q
->
»que¡
.
wr™e
.
İ
 =ğ
BLE_GATTS_OP_EXEC_WRITE_REQ_CANCEL
)

413 
auth_»¶y
.
·¿ms
.
wr™e
.
g©t_¡©us
 = 
BLE_GATT_STATUS_SUCCESS
;

416 
»t_code_t
 
”r_code
 = 
	`sd_bË_g©ts_rw_authÜize_»¶y
(
p_g©ts_evt
->
cÚn_hªdË
, &
auth_»¶y
);

417 ià(
”r_code
 !ğ
NRF_SUCCESS
)

420 
p_qwr
->
	`”rÜ_hªdËr
(
”r_code
);

423 
p_auth_»q
->
»que¡
.
wr™e
.
İ
)

425 
BLE_GATTS_OP_PREP_WRITE_REQ
:

426 
	`Ú_´•¬e_wr™e
(
p_qwr
, &
p_auth_»q
->
»que¡
.
wr™e
);

429 
BLE_GATTS_OP_EXEC_WRITE_REQ_NOW
:

430 
	`Ú_execu‹_wr™e
(
p_qwr
, &
p_auth_»q
->
»que¡
.
wr™e
);

433 
BLE_GATTS_OP_EXEC_WRITE_REQ_CANCEL
:

434 
	`Ú_ÿnûl_wr™e
(
p_qwr
, &
p_auth_»q
->
»que¡
.
wr™e
);

442 
	}
}

445 
	$Äf_bË_qwr_Ú_bË_evt
(
bË_evt_t
 cÚ¡ * 
p_bË_evt
, * 
p_cÚ‹xt
)

447 
	`VERIFY_PARAM_NOT_NULL_VOID
(
p_cÚ‹xt
);

448 
	`VERIFY_PARAM_NOT_NULL_VOID
(
p_bË_evt
);

450 
Äf_bË_qwr_t
 * 
p_qwr
 = (Äf_bË_qwr_ˆ*)
p_cÚ‹xt
;

452 
	`VERIFY_MODULE_INITIALIZED_VOID
();

454 ià(
p_bË_evt
->
evt
.
commÚ_evt
.
cÚn_hªdË
 =ğ
p_qwr
->conn_handle)

456 
	`u£r_mem_»¶y
(
p_qwr
);

459 
p_bË_evt
->
h—d”
.
evt_id
)

461 
BLE_EVT_USER_MEM_REQUEST
:

462 
	`Ú_u£r_mem_»que¡
(
p_qwr
, &
p_bË_evt
->
evt
.
commÚ_evt
);

465 
BLE_EVT_USER_MEM_RELEASE
:

466 
	`Ú_u£r_mem_»Ëa£
(
p_qwr
, &
p_bË_evt
->
evt
.
commÚ_evt
);

469 
BLE_GATTS_EVT_RW_AUTHORIZE_REQUEST
:

470 
	`Ú_rw_authÜize_»que¡
(
p_qwr
, &
p_bË_evt
->
evt
.
g©ts_evt
);

473 
BLE_GAP_EVT_DISCONNECTED
:

474 ià(
p_bË_evt
->
evt
.
g­_evt
.
cÚn_hªdË
 =ğ
p_qwr
->conn_handle)

476 
p_qwr
->
cÚn_hªdË
 = 
BLE_CONN_HANDLE_INVALID
;

477 #ià(
NRF_BLE_QWR_MAX_ATTR
 > 0)

478 
p_qwr
->
nb_wr™‹n_hªdËs
 = 0;

487 
	}
}

	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\ble\peer_manager\gatt_cache_manager.c

40 
	~"sdk_commÚ.h
"

41 #ià
NRF_MODULE_ENABLED
(
PEER_MANAGER
)

42 
	~"g©t_ÿche_mªag”.h
"

44 
	~"bË_g­.h
"

45 
	~"bË_”r.h
"

46 
	~"bË_cÚn_¡©e.h
"

47 
	~"³”_mªag”_ty³s.h
"

48 
	~"³”_mªag”_š‹º®.h
"

49 
	~"id_mªag”.h
"

50 
	~"g©ts_ÿche_mªag”.h
"

51 
	~"³”_d©aba£.h
"

52 
	~"pm_mu‹x.h
"

56 
	#GCM_EVENT_HANDLERS_CNT
 ((
m_evt_hªdËrs
è/ (m_evt_hªdËrs[0]))

	)

59 
pm_gcm_evt_hªdËr
(
pm_evt_t
 * 
p_gcm_evt
);

63 
pm_evt_hªdËr_š‹º®_t
 
	gm_evt_hªdËrs
[] =

65 
pm_gcm_evt_hªdËr


68 
boŞ
 
	gm_moduË_š™Ÿlized
;

69 
ušt8_t
 
	gm_db_upd©e_š_´og»ss_mu‹x
;

70 
bË_cÚn_¡©e_u£r_æag_id_t
 
	gm_æag_loÿl_db_upd©e_³ndšg
;

71 
bË_cÚn_¡©e_u£r_æag_id_t
 
	gm_æag_loÿl_db_­¶y_³ndšg
;

72 
bË_cÚn_¡©e_u£r_æag_id_t
 
	gm_æag_£rviû_chªged_³ndšg
;

73 
bË_cÚn_¡©e_u£r_æag_id_t
 
	gm_æag_£rviû_chªged_£Á
;

75 #ifdeà
PM_SERVICE_CHANGED_ENABLED


76 
STATIC_ASSERT
(
PM_SERVICE_CHANGED_ENABLED
 || !
NRF_SDH_BLE_SERVICE_CHANGED
,

79 
	#PM_SERVICE_CHANGED_ENABLED
 1

	)

86 
	$š‹º®_¡©e_»£t
()

88 
m_moduË_š™Ÿlized
 = 
çl£
;

89 
	}
}

92 
	$evt_£nd
(
pm_evt_t
 * 
p_gcm_evt
)

94 
p_gcm_evt
->
³”_id
 = 
	`im_³”_id_g‘_by_cÚn_hªdË
Õ_gcm_evt->
cÚn_hªdË
);

96 
ušt32_t
 
i
 = 0; i < 
GCM_EVENT_HANDLERS_CNT
; i++)

98 
m_evt_hªdËrs
[
i
](
p_gcm_evt
);

100 
	}
}

110 
boŞ
 
	$cccd_wr™‹n
(
bË_g©ts_evt_wr™e_t
 cÚ¡ * 
p_wr™e_evt
)

112  ( (
p_wr™e_evt
->
İ
 =ğ
BLE_GATTS_OP_WRITE_REQ
)

113 && (
p_wr™e_evt
->
uuid
.
ty³
 =ğ
BLE_UUID_TYPE_BLE
)

114 && (
p_wr™e_evt
->
uuid
.uuid =ğ
BLE_UUID_DESCRIPTOR_CLIENT_CHAR_CONFIG
)

116 
	}
}

124 
	$£nd_uÃx³ùed_”rÜ
(
ušt16_t
 
cÚn_hªdË
, 
»t_code_t
 
”r_code
)

126 
pm_evt_t
 
”rÜ_evt
 =

128 .
evt_id
 = 
PM_EVT_ERROR_UNEXPECTED
,

129 .
cÚn_hªdË
 = conn_handle,

130 .
·¿ms
 =

132 .
”rÜ_uÃx³ùed
 =

134 .
”rÜ
 = 
”r_code
,

138 
	`evt_£nd
(&
”rÜ_evt
);

139 
	}
}

150 
	$loÿl_db_­¶y_š_evt
(
ušt16_t
 
cÚn_hªdË
)

152 
boŞ
 
£t_´oûdu»_as_³ndšg
 = 
çl£
;

153 
»t_code_t
 
”r_code
;

154 
pm_evt_t
 
ev’t
 =

156 .
cÚn_hªdË
 = conn_handle,

159 ià(
cÚn_hªdË
 =ğ
BLE_CONN_HANDLE_INVALID
)

164 
”r_code
 = 
	`gscm_loÿl_db_ÿche_­¶y
(
cÚn_hªdË
);

166 
”r_code
)

168 
NRF_SUCCESS
:

169 
ev’t
.
evt_id
 = 
PM_EVT_LOCAL_DB_CACHE_APPLIED
;

171 
	`evt_£nd
(&
ev’t
);

174 
NRF_ERROR_BUSY
:

175 
£t_´oûdu»_as_³ndšg
 = 
Œue
;

178 
NRF_ERROR_INVALID_DATA
:

179 
ev’t
.
evt_id
 = 
PM_EVT_LOCAL_DB_CACHE_APPLY_FAILED
;

181 
	`evt_£nd
(&
ev’t
);

184 
BLE_ERROR_INVALID_CONN_HANDLE
:

189 
	`£nd_uÃx³ùed_”rÜ
(
cÚn_hªdË
, 
”r_code
);

193 
	`bË_cÚn_¡©e_u£r_æag_£t
(
cÚn_hªdË
, 
m_æag_loÿl_db_­¶y_³ndšg
, 
£t_´oûdu»_as_³ndšg
);

194 
	}
}

204 
__INLINE
 
	$loÿl_db_upd©e
(
ušt16_t
 
cÚn_hªdË
, 
boŞ
 
upd©e
)

206 
	`bË_cÚn_¡©e_u£r_æag_£t
(
cÚn_hªdË
, 
m_æag_loÿl_db_upd©e_³ndšg
, 
upd©e
);

207 
	}
}

218 
boŞ
 
	$loÿl_db_upd©e_š_evt
(
ušt16_t
 
cÚn_hªdË
)

220 
boŞ
 
£t_´oûdu»_as_³ndšg
 = 
çl£
;

221 
boŞ
 
sucûss
 = 
çl£
;

222 
»t_code_t
 
”r_code
 = 
	`gscm_loÿl_db_ÿche_upd©e
(
cÚn_hªdË
);

224 
”r_code
)

226 
NRF_SUCCESS
:

227 
sucûss
 = 
Œue
;

230 
BLE_ERROR_INVALID_CONN_HANDLE
:

234 
NRF_ERROR_BUSY
:

235 
£t_´oûdu»_as_³ndšg
 = 
Œue
;

238 
NRF_ERROR_STORAGE_FULL
:

240 
pm_evt_t
 
ev’t
 =

242 .
evt_id
 = 
PM_EVT_STORAGE_FULL
,

243 .
cÚn_hªdË
 = conn_handle,

246 
	`evt_£nd
(&
ev’t
);

251 
	`£nd_uÃx³ùed_”rÜ
(
cÚn_hªdË
, 
”r_code
);

255 
	`loÿl_db_upd©e
(
cÚn_hªdË
, 
£t_´oûdu»_as_³ndšg
);

257  
sucûss
;

258 
	}
}

260 #ià
PM_SERVICE_CHANGED_ENABLED


269 
	$£rviû_chªged_£nd_š_evt
(
ušt16_t
 
cÚn_hªdË
)

271 
boŞ
 
sc_³ndšg_¡©e
 = 
Œue
;

272 
boŞ
 
sc_£Á_¡©e
 = 
çl£
;

273 
»t_code_t
 
”r_code
 = 
	`gscm_£rviû_chªged_šd_£nd
(
cÚn_hªdË
);

275 
”r_code
)

277 
NRF_SUCCESS
:

279 
pm_evt_t
 
ev’t
 =

281 .
evt_id
 = 
PM_EVT_SERVICE_CHANGED_IND_SENT
,

282 .
cÚn_hªdË
 = conn_handle,

285 
sc_£Á_¡©e
 = 
Œue
;

287 
	`evt_£nd
(&
ev’t
);

291 
NRF_ERROR_BUSY
:

295 
NRF_ERROR_INVALID_STATE
:

299 
NRF_ERROR_NOT_SUPPORTED
:

301 
sc_³ndšg_¡©e
 = 
çl£
;

302 
	`gscm_db_chªge_nÙifiÿtiÚ_dÚe
(
	`im_³”_id_g‘_by_cÚn_hªdË
(
cÚn_hªdË
));

305 
BLE_ERROR_GATTS_SYS_ATTR_MISSING
:

306 
	`loÿl_db_­¶y_š_evt
(
cÚn_hªdË
);

309 
BLE_ERROR_INVALID_CONN_HANDLE
:

314 
	`£nd_uÃx³ùed_”rÜ
(
cÚn_hªdË
, 
”r_code
);

318 
	`bË_cÚn_¡©e_u£r_æag_£t
(
cÚn_hªdË
, 
m_æag_£rviû_chªged_³ndšg
, 
sc_³ndšg_¡©e
);

319 
	`bË_cÚn_¡©e_u£r_æag_£t
(
cÚn_hªdË
, 
m_æag_£rviû_chªged_£Á
, 
sc_£Á_¡©e
);

320 
	}
}

323 
	$­¶y_³ndšg_hªdË
(
ušt16_t
 
cÚn_hªdË
, * 
p_cÚ‹xt
)

325 
	`UNUSED_PARAMETER
(
p_cÚ‹xt
);

326 
	`loÿl_db_­¶y_š_evt
(
cÚn_hªdË
);

327 
	}
}

330 
__INLINE
 
	$­¶y_³ndšg_æags_check
()

332 
	`UNUSED_RETURN_VALUE
(
	`bË_cÚn_¡©e_fÜ_—ch_£t_u£r_æag
(
m_æag_loÿl_db_­¶y_³ndšg
,

333 
­¶y_³ndšg_hªdË
,

334 
NULL
));

335 
	}
}

338 
	$db_upd©e_³ndšg_hªdË
(
ušt16_t
 
cÚn_hªdË
, * 
p_cÚ‹xt
)

340 
	`UNUSED_PARAMETER
(
p_cÚ‹xt
);

341 ià(
	`pm_mu‹x_lock
(&
m_db_upd©e_š_´og»ss_mu‹x
, 0))

343 ià(
	`loÿl_db_upd©e_š_evt
(
cÚn_hªdË
))

350 
	`pm_mu‹x_uÆock
(&
m_db_upd©e_š_´og»ss_mu‹x
, 0);

353 
	}
}

356 
__INLINE
 
	$upd©e_³ndšg_æags_check
()

358 
	`UNUSED_RETURN_VALUE
(
	`bË_cÚn_¡©e_fÜ_—ch_£t_u£r_æag
(
m_æag_loÿl_db_upd©e_³ndšg
,

359 
db_upd©e_³ndšg_hªdË
,

360 
NULL
));

361 
	}
}

364 #ià
PM_SERVICE_CHANGED_ENABLED


365 
	$sc_£nd_³ndšg_hªdË
(
ušt16_t
 
cÚn_hªdË
, * 
p_cÚ‹xt
)

367 
	`UNUSED_PARAMETER
(
p_cÚ‹xt
);

368 ià(!
	`bË_cÚn_¡©e_u£r_æag_g‘
(
cÚn_hªdË
, 
m_æag_£rviû_chªged_£Á
))

370 
	`£rviû_chªged_£nd_š_evt
(
cÚn_hªdË
);

372 
	}
}

375 
__INLINE
 
	$£rviû_chªged_³ndšg_æags_check
()

377 
	`UNUSED_RETURN_VALUE
(
	`bË_cÚn_¡©e_fÜ_—ch_£t_u£r_æag
(
m_æag_£rviû_chªged_³ndšg
,

378 
sc_£nd_³ndšg_hªdË
,

379 
NULL
));

380 
	}
}

389 
	$gcm_im_evt_hªdËr
(
pm_evt_t
 * 
p_ev’t
)

391 
p_ev’t
->
evt_id
)

393 
PM_EVT_BONDED_PEER_CONNECTED
:

394 
	`loÿl_db_­¶y_š_evt
(
p_ev’t
->
cÚn_hªdË
);

395 #ià(
PM_SERVICE_CHANGED_ENABLED
 == 1)

396 ià(
	`gscm_£rviû_chªged_šd_Ãeded
(
p_ev’t
->
cÚn_hªdË
))

398 
	`bË_cÚn_¡©e_u£r_æag_£t
(
p_ev’t
->
cÚn_hªdË
, 
m_æag_£rviû_chªged_³ndšg
, 
Œue
);

405 
	}
}

413 
	$gcm_pdb_evt_hªdËr
(
pm_evt_t
 * 
p_ev’t
)

415 iàĞ
p_ev’t
->
evt_id
 =ğ
PM_EVT_PEER_DATA_UPDATE_SUCCEEDED


416 && 
p_ev’t
->
·¿ms
.
³”_d©a_upd©e_sucûeded
.
aùiÚ
 =ğ
PM_PEER_DATA_OP_UPDATE
)

418 
p_ev’t
->
·¿ms
.
³”_d©a_upd©e_sucûeded
.
d©a_id
)

420 
PM_PEER_DATA_ID_BONDING
:

422 
ušt16_t
 
cÚn_hªdË
 = 
	`im_cÚn_hªdË_g‘
(
p_ev’t
->
³”_id
);

424 ià(
cÚn_hªdË
 !ğ
BLE_CONN_HANDLE_INVALID
)

426 
	`loÿl_db_upd©e
(
cÚn_hªdË
, 
Œue
);

431 #ià
PM_SERVICE_CHANGED_ENABLED


432 
PM_PEER_DATA_ID_SERVICE_CHANGED_PENDING
:

434 
»t_code_t
 
”r_code
;

435 
pm_³”_d©a_æash_t
 
³”_d©a
;

437 
”r_code
 = 
	`pdb_³”_d©a_±r_g‘
(
p_ev’t
->
³”_id
,

438 
PM_PEER_DATA_ID_SERVICE_CHANGED_PENDING
,

439 &
³”_d©a
);

441 ià(
”r_code
 =ğ
NRF_SUCCESS
)

443 ià(*
³”_d©a
.
p_£rviû_chªged_³ndšg
)

445 
ušt16_t
 
cÚn_hªdË
 = 
	`im_cÚn_hªdË_g‘
(
p_ev’t
->
³”_id
);

446 ià(
cÚn_hªdË
 !ğ
BLE_CONN_HANDLE_INVALID
)

448 
	`bË_cÚn_¡©e_u£r_æag_£t
(
cÚn_hªdË
, 
m_æag_£rviû_chªged_³ndšg
, 
Œue
);

449 
	`£rviû_chªged_³ndšg_æags_check
();

457 
PM_PEER_DATA_ID_GATT_LOCAL
:

458 
	`pm_mu‹x_uÆock
(&
m_db_upd©e_š_´og»ss_mu‹x
, 0);

468 
	`upd©e_³ndšg_æags_check
();

469 
	}
}

472 
»t_code_t
 
	$gcm_š™
()

474 
	`NRF_PM_DEBUG_CHECK
(!
m_moduË_š™Ÿlized
);

476 
	`š‹º®_¡©e_»£t
();

478 
m_æag_loÿl_db_upd©e_³ndšg
 = 
	`bË_cÚn_¡©e_u£r_æag_acquœe
();

479 
m_æag_loÿl_db_­¶y_³ndšg
 = 
	`bË_cÚn_¡©e_u£r_æag_acquœe
();

480 
m_æag_£rviû_chªged_³ndšg
 = 
	`bË_cÚn_¡©e_u£r_æag_acquœe
();

481 
m_æag_£rviû_chªged_£Á
 = 
	`bË_cÚn_¡©e_u£r_æag_acquœe
();

483 ià((
m_æag_loÿl_db_upd©e_³ndšg
 =ğ
BLE_CONN_STATE_USER_FLAG_INVALID
)

484 || (
m_æag_loÿl_db_­¶y_³ndšg
 =ğ
BLE_CONN_STATE_USER_FLAG_INVALID
)

485 || (
m_æag_£rviû_chªged_³ndšg
 =ğ
BLE_CONN_STATE_USER_FLAG_INVALID
)

486 || (
m_æag_£rviû_chªged_£Á
 =ğ
BLE_CONN_STATE_USER_FLAG_INVALID
)

489  
NRF_ERROR_INTERNAL
;

492 
	`pm_mu‹x_š™
(&
m_db_upd©e_š_´og»ss_mu‹x
, 1);

494 
m_moduË_š™Ÿlized
 = 
Œue
;

496  
NRF_SUCCESS
;

497 
	}
}

504 
	$gcm_bË_evt_hªdËr
(
bË_evt_t
 cÚ¡ * 
p_bË_evt
)

506 
ušt16_t
 
cÚn_hªdË
 = 
p_bË_evt
->
evt
.
g©ts_evt
.conn_handle;

508 
p_bË_evt
->
h—d”
.
evt_id
)

510 
BLE_GATTS_EVT_SYS_ATTR_MISSING
:

511 
	`loÿl_db_­¶y_š_evt
(
cÚn_hªdË
);

514 #ià
PM_SERVICE_CHANGED_ENABLED


515 
BLE_GATTS_EVT_SC_CONFIRM
:

517 
pm_evt_t
 
ev’t
 =

519 .
evt_id
 = 
PM_EVT_SERVICE_CHANGED_IND_CONFIRMED
,

520 .
³”_id
 = 
	`im_³”_id_g‘_by_cÚn_hªdË
(
cÚn_hªdË
),

521 .
cÚn_hªdË
 = conn_handle,

524 
	`gscm_db_chªge_nÙifiÿtiÚ_dÚe
(
ev’t
.
³”_id
);

526 
	`bË_cÚn_¡©e_u£r_æag_£t
(
cÚn_hªdË
, 
m_æag_£rviû_chªged_£Á
, 
çl£
);

527 
	`bË_cÚn_¡©e_u£r_æag_£t
(
cÚn_hªdË
, 
m_æag_£rviû_chªged_³ndšg
, 
çl£
);

528 
	`evt_£nd
(&
ev’t
);

533 
BLE_GATTS_EVT_WRITE
:

534 ià(
	`cccd_wr™‹n
(&
p_bË_evt
->
evt
.
g©ts_evt
.
·¿ms
.
wr™e
))

536 
	`loÿl_db_upd©e
(
cÚn_hªdË
, 
Œue
);

537 
	`upd©e_³ndšg_æags_check
();

542 
	`­¶y_³ndšg_æags_check
();

543 #ià
PM_SERVICE_CHANGED_ENABLED


544 
	`£rviû_chªged_³ndšg_æags_check
();

546 
	}
}

549 
»t_code_t
 
	$gcm_loÿl_db_ÿche_upd©e
(
ušt16_t
 
cÚn_hªdË
)

551 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

553 
	`loÿl_db_upd©e
(
cÚn_hªdË
, 
Œue
);

554 
	`upd©e_³ndšg_æags_check
();

556  
NRF_SUCCESS
;

557 
	}
}

560 #ià
PM_SERVICE_CHANGED_ENABLED


561 
	$gcm_loÿl_d©aba£_has_chªged
()

563 
	`gscm_loÿl_d©aba£_has_chªged
();

565 
bË_cÚn_¡©e_cÚn_hªdË_li¡_t
 
cÚn_hªdËs
 = 
	`bË_cÚn_¡©e_cÚn_hªdËs
();

567 
ušt16_t
 
i
 = 0; i < 
cÚn_hªdËs
.
Ën
; i++)

569 ià(
	`im_³”_id_g‘_by_cÚn_hªdË
(
cÚn_hªdËs
.cÚn_hªdËs[
i
]è=ğ
PM_PEER_ID_INVALID
)

571 
	`bË_cÚn_¡©e_u£r_æag_£t
(
cÚn_hªdËs
.cÚn_hªdËs[
i
], 
m_æag_£rviû_chªged_³ndšg
, 
Œue
);

575 
	`£rviû_chªged_³ndšg_æags_check
();

576 
	}
}

	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\ble\peer_manager\gatts_cache_manager.c

40 
	~"sdk_commÚ.h
"

41 #ià
NRF_MODULE_ENABLED
(
PEER_MANAGER
)

42 
	~"g©ts_ÿche_mªag”.h
"

44 
	~<¡ršg.h
>

45 
	~"bË_g­.h
"

46 
	~"bË_”r.h
"

47 
	~"³”_mªag”_ty³s.h
"

48 
	~"³”_mªag”_š‹º®.h
"

49 
	~"³”_d©aba£.h
"

50 
	~"id_mªag”.h
"

54 
	#SYS_ATTR_SYS
 (
BLE_GATTS_SYS_ATTR_FLAG_SYS_SRVCS
)

	)

55 
	#SYS_ATTR_USR
 (
BLE_GATTS_SYS_ATTR_FLAG_USR_SRVCS
)

	)

56 
	#SYS_ATTR_BOTH
 (
SYS_ATTR_SYS
 | 
SYS_ATTR_USR
)

	)

58 
boŞ
 
	gm_moduË_š™Ÿlized
;

59 
pm_³”_id_t
 
	gm_cu¼’t_sc_¡Üe_³”_id
;

64 
	$š‹º®_¡©e_»£t
()

66 
m_moduË_š™Ÿlized
 = 
çl£
;

67 
m_cu¼’t_sc_¡Üe_³”_id
 = 
PM_PEER_ID_INVALID
;

70 
	`UNUSED_VARIABLE
(
m_cu¼’t_sc_¡Üe_³”_id
);

71 
	}
}

74 #ià!
defšed
(
PM_SERVICE_CHANGED_ENABLED
) || (PM_SERVICE_CHANGED_ENABLED == 1)

81 
	$£rviû_chªged_³ndšg_£t
()

83 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

85 
»t_code_t
 
”r_code
;

87 cÚ¡ 
ušt32_t
 
£rviû_chªged_³ndšg
 = 
Œue
;

90 
pm_³”_d©a_cÚ¡_t
 
³”_d©a
 =

92 .
d©a_id
 = 
PM_PEER_DATA_ID_SERVICE_CHANGED_PENDING
,

93 .
Ëngth_wÜds
 = 
	`PM_SC_STATE_N_WORDS
(),

94 .
p_£rviû_chªged_³ndšg
 = (
boŞ
*)&
£rviû_chªged_³ndšg
,

98 
”r_code
 = 
	`pdb_¿w_¡Üe
(
m_cu¼’t_sc_¡Üe_³”_id
, &
³”_d©a
, 
NULL
);

99 (
m_cu¼’t_sc_¡Üe_³”_id
 !ğ
PM_PEER_ID_INVALID
è&& (
”r_code
 !ğ
NRF_ERROR_BUSY
))

101 
m_cu¼’t_sc_¡Üe_³”_id
 = 
	`pdb_Ãxt_³”_id_g‘
(m_current_sc_store_peer_id);

102 
”r_code
 = 
	`pdb_¿w_¡Üe
(
m_cu¼’t_sc_¡Üe_³”_id
, &
³”_d©a
, 
NULL
);

104 
	}
}

114 
	$gscm_pdb_evt_hªdËr
(
pm_evt_t
 * 
p_ev’t
)

116 ià(
m_cu¼’t_sc_¡Üe_³”_id
 !ğ
PM_PEER_ID_INVALID
)

118 
	`£rviû_chªged_³ndšg_£t
();

120 
	}
}

124 
»t_code_t
 
	$gscm_š™
()

126 
	`NRF_PM_DEBUG_CHECK
(!
m_moduË_š™Ÿlized
);

128 
	`š‹º®_¡©e_»£t
();

129 
m_moduË_š™Ÿlized
 = 
Œue
;

131  
NRF_SUCCESS
;

132 
	}
}

135 
»t_code_t
 
	$gscm_loÿl_db_ÿche_upd©e
(
ušt16_t
 
cÚn_hªdË
)

137 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

139 
pm_³”_id_t
 
³”_id
 = 
	`im_³”_id_g‘_by_cÚn_hªdË
(
cÚn_hªdË
);

140 
»t_code_t
 
”r_code
;

142 ià(
³”_id
 =ğ
PM_PEER_ID_INVALID
)

144  
BLE_ERROR_INVALID_CONN_HANDLE
;

148 
pm_³”_d©a_t
 
³”_d©a
;

149 
ušt16_t
 
n_bufs
 = 1;

150 
boŞ
 
»Œy_w™h_bigg”_bufãr
 = 
çl£
;

154 
»Œy_w™h_bigg”_bufãr
 = 
çl£
;

156 
”r_code
 = 
	`pdb_wr™e_buf_g‘
(
³”_id
, 
PM_PEER_DATA_ID_GATT_LOCAL
, 
n_bufs
++, &
³”_d©a
);

157 ià(
”r_code
 =ğ
NRF_SUCCESS
)

159 
pm_³”_d©a_loÿl_g©t_db_t
 * 
p_loÿl_g©t_db
 = 
³”_d©a
.p_local_gatt_db;

161 
p_loÿl_g©t_db
->
æags
 = 
SYS_ATTR_BOTH
;

163 
”r_code
 = 
	`sd_bË_g©ts_sys_©Œ_g‘
(
cÚn_hªdË
, &
p_loÿl_g©t_db
->
d©a
[0], &p_loÿl_g©t_db->
Ën
,…_loÿl_g©t_db->
æags
);

165 ià(
”r_code
 =ğ
NRF_SUCCESS
)

167 
”r_code
 = 
	`pdb_wr™e_buf_¡Üe
(
³”_id
, 
PM_PEER_DATA_ID_GATT_LOCAL
,…eer_id);

171 ià(
”r_code
 =ğ
NRF_ERROR_DATA_SIZE
)

174 
»Œy_w™h_bigg”_bufãr
 = 
Œue
;

176 ià(
”r_code
 =ğ
NRF_ERROR_NOT_FOUND
)

179 
”r_code
 = 
NRF_SUCCESS
;

182 
»t_code_t
 
”r_code_»Ëa£
 = 
	`pdb_wr™e_buf_»Ëa£
(
³”_id
, 
PM_PEER_DATA_ID_GATT_LOCAL
);

183 ià(
”r_code_»Ëa£
 !ğ
NRF_SUCCESS
)

185 
”r_code
 = 
NRF_ERROR_INTERNAL
;

189 ià(
”r_code
 =ğ
NRF_ERROR_INVALID_PARAM
)

192 
”r_code
 = 
NRF_ERROR_DATA_SIZE
;

194 } 
»Œy_w™h_bigg”_bufãr
);

197  
”r_code
;

198 
	}
}

201 
»t_code_t
 
	$gscm_loÿl_db_ÿche_­¶y
(
ušt16_t
 
cÚn_hªdË
)

203 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

205 
pm_³”_id_t
 
³”_id
 = 
	`im_³”_id_g‘_by_cÚn_hªdË
(
cÚn_hªdË
);

206 
»t_code_t
 
”r_code
;

207 
pm_³”_d©a_æash_t
 
³”_d©a
;

208 
ušt8_t
 cÚ¡ * 
p_sys_©Œ_d©a
 = 
NULL
;

209 
ušt16_t
 
sys_©Œ_Ën
 = 0;

210 
ušt32_t
 
sys_©Œ_æags
 = (
SYS_ATTR_BOTH
);

211 
boŞ
 
®l_©Œibu‹s_­¶›d
 = 
Œue
;

213 ià(
³”_id
 !ğ
PM_PEER_ID_INVALID
)

215 
”r_code
 = 
	`pdb_³”_d©a_±r_g‘
(
³”_id
, 
PM_PEER_DATA_ID_GATT_LOCAL
, &
³”_d©a
);

216 ià(
”r_code
 =ğ
NRF_SUCCESS
)

218 
pm_³”_d©a_loÿl_g©t_db_t
 cÚ¡ * 
p_loÿl_g©t_db
;

220 
p_loÿl_g©t_db
 = 
³”_d©a
.p_local_gatt_db;

221 
p_sys_©Œ_d©a
 = 
p_loÿl_g©t_db
->
d©a
;

222 
sys_©Œ_Ën
 = 
p_loÿl_g©t_db
->
Ën
;

223 
sys_©Œ_æags
 = 
p_loÿl_g©t_db
->
æags
;

229 
”r_code
 = 
	`sd_bË_g©ts_sys_©Œ_£t
(
cÚn_hªdË
, 
p_sys_©Œ_d©a
, 
sys_©Œ_Ën
, 
sys_©Œ_æags
);

231 ià(
”r_code
 =ğ
NRF_ERROR_NO_MEM
)

233 
”r_code
 = 
NRF_ERROR_BUSY
;

235 ià(
”r_code
 =ğ
NRF_ERROR_INVALID_STATE
)

237 
”r_code
 = 
NRF_SUCCESS
;

239 ià(
”r_code
 =ğ
NRF_ERROR_INVALID_DATA
)

241 
®l_©Œibu‹s_­¶›d
 = 
çl£
;

243 ià(
sys_©Œ_æags
 & 
SYS_ATTR_USR
)

246 
sys_©Œ_æags
 = 
SYS_ATTR_SYS
;

248 ià(
p_sys_©Œ_d©a
 || 
sys_©Œ_Ën
)

251 
p_sys_©Œ_d©a
 = 
NULL
;

252 
sys_©Œ_Ën
 = 0;

253 
sys_©Œ_æags
 = 
SYS_ATTR_BOTH
;

257 
”r_code
 = 
NRF_ERROR_INTERNAL
;

260 } 
”r_code
 =ğ
NRF_ERROR_INVALID_DATA
);

262 ià(!
®l_©Œibu‹s_­¶›d
)

264 
”r_code
 = 
NRF_ERROR_INVALID_DATA
;

267  
”r_code
;

268 
	}
}

270 #ià!
defšed
(
PM_SERVICE_CHANGED_ENABLED
) || (PM_SERVICE_CHANGED_ENABLED == 1)

271 
	$gscm_loÿl_d©aba£_has_chªged
()

273 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

274 
m_cu¼’t_sc_¡Üe_³”_id
 = 
	`pdb_Ãxt_³”_id_g‘
(
PM_PEER_ID_INVALID
);

275 
	`£rviû_chªged_³ndšg_£t
();

276 
	}
}

279 
boŞ
 
	$gscm_£rviû_chªged_šd_Ãeded
(
ušt16_t
 
cÚn_hªdË
)

281 
»t_code_t
 
”r_code
;

282 
boŞ
 
£rviû_chªged_¡©e
;

283 
pm_³”_d©a_æash_t
 
³”_d©a
;

285 
³”_d©a
.
p_£rviû_chªged_³ndšg
 = &
£rviû_chªged_¡©e
;

286 
pm_³”_id_t
 
³”_id
 = 
	`im_³”_id_g‘_by_cÚn_hªdË
(
cÚn_hªdË
);

288 
”r_code
 = 
	`pdb_³”_d©a_±r_g‘
(
³”_id
, 
PM_PEER_DATA_ID_SERVICE_CHANGED_PENDING
, &
³”_d©a
);

290 ià(
”r_code
 !ğ
NRF_SUCCESS
)

292  
çl£
;

295  *
³”_d©a
.
p_£rviû_chªged_³ndšg
;

296 
	}
}

299 
»t_code_t
 
	$gscm_£rviû_chªged_šd_£nd
(
ušt16_t
 
cÚn_hªdË
)

301 
ušt16_t
 
¡¬t_hªdË
;

302 cÚ¡ 
ušt16_t
 
’d_hªdË
 = 0xFFFF;

303 
»t_code_t
 
”r_code
;

305 
”r_code
 = 
	`sd_bË_g©ts_š™Ÿl_u£r_hªdË_g‘
(&
¡¬t_hªdË
);

307 ià(
”r_code
 !ğ
NRF_SUCCESS
)

309  
NRF_ERROR_INTERNAL
;

314 
”r_code
 = 
	`sd_bË_g©ts_£rviû_chªged
(
cÚn_hªdË
, 
¡¬t_hªdË
, 
’d_hªdË
);

315 ià(
”r_code
 =ğ
BLE_ERROR_INVALID_ATTR_HANDLE
)

317 
¡¬t_hªdË
 += 1;

319 } 
”r_code
 =ğ
BLE_ERROR_INVALID_ATTR_HANDLE
);

321  
”r_code
;

322 
	}
}

325 
	$gscm_db_chªge_nÙifiÿtiÚ_dÚe
(
pm_³”_id_t
 
³”_id
)

327 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

330 cÚ¡ 
ušt32_t
 
£rviû_chªged_³ndšg
 = 
çl£
;

333 
pm_³”_d©a_cÚ¡_t
 
³”_d©a
 =

335 .
d©a_id
 = 
PM_PEER_DATA_ID_SERVICE_CHANGED_PENDING
,

336 .
Ëngth_wÜds
 = 
	`PM_SC_STATE_N_WORDS
(),

337 .
p_£rviû_chªged_³ndšg
 = (
boŞ
*)&
£rviû_chªged_³ndšg
,

343 (è
	`pdb_¿w_¡Üe
(
³”_id
, &
³”_d©a
, 
NULL
);

345 
	}
}

	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\ble\peer_manager\id_manager.c

40 
	~"sdk_commÚ.h
"

41 #ià
NRF_MODULE_ENABLED
(
PEER_MANAGER
)

42 
	~"id_mªag”.h
"

44 
	~<¡ršg.h
>

45 
	~"bË.h
"

46 
	~"bË_g­.h
"

47 
	~"bË_”r.h
"

48 
	~"bË_cÚn_¡©e.h
"

49 
	~"³”_mªag”_ty³s.h
"

50 
	~"³”_d©aba£.h
"

51 
	~"³”_d©a_¡Üage.h
"

52 
	~"Äf_soc.h
"

55 
	#IM_MAX_CONN_HANDLES
 (20)

	)

56 
	#IM_NO_INVALID_CONN_HANDLES
 (0xFF)

	)

57 
	#IM_ADDR_CLEARTEXT_LENGTH
 (3)

	)

58 
	#IM_ADDR_CIPHERTEXT_LENGTH
 (3)

	)

61 
	#IM_EVENT_HANDLERS_CNT
 ((
m_evt_hªdËrs
è/ (m_evt_hªdËrs[0]))

	)

65 
pm_im_evt_hªdËr
(
pm_evt_t
 * 
p_ev’t
);

66 
gcm_im_evt_hªdËr
(
pm_evt_t
 * 
p_ev’t
);

70 
pm_evt_hªdËr_š‹º®_t
 cÚ¡ 
	gm_evt_hªdËrs
[] =

72 
pm_im_evt_hªdËr
,

73 
gcm_im_evt_hªdËr


79 
pm_³”_id_t
 
	m³”_id
;

80 
ušt16_t
 
	mcÚn_hªdË
;

81 
bË_g­_addr_t
 
	m³”_add»ss
;

82 } 
	tim_cÚÃùiÚ_t
;

84 
boŞ
 
	gm_moduË_š™Ÿlized
;

85 
im_cÚÃùiÚ_t
 
	gm_cÚÃùiÚs
[
IM_MAX_CONN_HANDLES
];

86 
bË_cÚn_¡©e_u£r_æag_id_t
 
	gm_cÚn_¡©e_u£r_æag_id
;

88 
ušt8_t
 
	gm_wli¡ed_³”_út
;

89 
pm_³”_id_t
 
	gm_wli¡ed_³”s
[
BLE_GAP_WHITELIST_ADDR_MAX_COUNT
];

92 
	$š‹º®_¡©e_»£t
()

94 
m_cÚn_¡©e_u£r_æag_id
 = 
BLE_CONN_STATE_USER_FLAG_INVALID
;

96 
ušt32_t
 
i
 = 0; i < 
IM_MAX_CONN_HANDLES
; i++)

98 
m_cÚÃùiÚs
[
i
].
cÚn_hªdË
 = 
BLE_CONN_HANDLE_INVALID
;

100 
	}
}

107 
	$evt_£nd
(
pm_evt_t
 * 
p_ev’t
)

109 
ušt32_t
 
i
 = 0; i < 
IM_EVENT_HANDLERS_CNT
; i++)

111 
m_evt_hªdËrs
[
i
](
p_ev’t
);

113 
	}
}

124 
ušt8_t
 
	$g‘_ä“_cÚÃùiÚ
()

126 
ušt32_t
 
i
 = 0; i < 
IM_MAX_CONN_HANDLES
; i++)

130 ià(!
	`bË_cÚn_¡©e_u£r_æag_g‘
(
m_cÚÃùiÚs
[
i
].
cÚn_hªdË
, 
m_cÚn_¡©e_u£r_æag_id
))

132  
i
;

136  
IM_NO_INVALID_CONN_HANDLES
;

137 
	}
}

147 
ušt8_t
 
	$g‘_cÚÃùiÚ_by_cÚn_hªdË
(
ušt16_t
 
cÚn_hªdË
)

149 ià(
	`bË_cÚn_¡©e_u£r_æag_g‘
(
cÚn_hªdË
, 
m_cÚn_¡©e_u£r_æag_id
))

151 
ušt32_t
 
i
 = 0; i < 
IM_MAX_CONN_HANDLES
; i++)

153 ià(
m_cÚÃùiÚs
[
i
].
cÚn_hªdË
 == conn_handle)

155  
i
;

160  
IM_NO_INVALID_CONN_HANDLES
;

161 
	}
}

172 
ušt8_t
 
	$Ãw_cÚÃùiÚ
(
ušt16_t
 
cÚn_hªdË
, 
bË_g­_addr_t
 * 
p_bË_addr
)

174 
ušt8_t
 
cÚn_šdex
 = 
IM_NO_INVALID_CONN_HANDLES
;

176 ià((
p_bË_addr
 !ğ
NULL
è&& (
cÚn_hªdË
 !ğ
BLE_CONN_HANDLE_INVALID
))

178 
	`bË_cÚn_¡©e_u£r_æag_£t
(
cÚn_hªdË
, 
m_cÚn_¡©e_u£r_æag_id
, 
Œue
);

180 
cÚn_šdex
 = 
	`g‘_cÚÃùiÚ_by_cÚn_hªdË
(
cÚn_hªdË
);

181 ià(
cÚn_šdex
 =ğ
IM_NO_INVALID_CONN_HANDLES
)

183 
cÚn_šdex
 = 
	`g‘_ä“_cÚÃùiÚ
();

186 ià(
cÚn_šdex
 !ğ
IM_NO_INVALID_CONN_HANDLES
)

188 
m_cÚÃùiÚs
[
cÚn_šdex
].
cÚn_hªdË
 = conn_handle;

189 
m_cÚÃùiÚs
[
cÚn_šdex
].
³”_id
 = 
PM_PEER_ID_INVALID
;

190 
m_cÚÃùiÚs
[
cÚn_šdex
].
³”_add»ss
 = *
p_bË_addr
;

193  
cÚn_šdex
;

194 
	}
}

206 
boŞ
 
	$is_v®id_œk
(
bË_g­_œk_t
 cÚ¡ * 
p_œk
)

208 
	`NRF_PM_DEBUG_CHECK
(
p_œk
 !ğ
NULL
);

210 
ušt32_t
 
i
 = 0; i < 
BLE_GAP_SEC_KEY_LEN
; i++)

212 ià(
p_œk
->
œk
[
i
] != 0)

214  
Œue
;

217  
çl£
;

218 
	}
}

231 
boŞ
 
	$addr_com·»
(
bË_g­_addr_t
 cÚ¡ * 
p_addr1
, bË_g­_addr_ˆcÚ¡ * 
p_addr2
)

234 ià((
p_addr1
 =ğ
NULL
è|| (
p_addr2
 == NULL))

236  
çl£
;

240 ià(
p_addr1
->
addr_ty³
 !ğ
p_addr2
->addr_type)

242  
çl£
;

246  (
	`memcmp
(
p_addr1
->
addr
, 
p_addr2
->addr, 
BLE_GAP_ADDR_LEN
) == 0);

247 
	}
}

250 
	$im_bË_evt_hªdËr
(
bË_evt_t
 cÚ¡ * 
bË_evt
)

252 
bË_g­_evt_t
 
g­_evt
;

253 
pm_³”_id_t
 
bÚded_m©chšg_³”_id
;

255 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

257 ià(
bË_evt
->
h—d”
.
evt_id
 !ğ
BLE_GAP_EVT_CONNECTED
)

263 
g­_evt
 = 
bË_evt
->
evt
.gap_evt;

264 
bÚded_m©chšg_³”_id
 = 
PM_PEER_ID_INVALID
;

266 iàĞ
g­_evt
.
·¿ms
.
cÚÃùed
.
³”_addr
.
addr_ty³


267 !ğ
BLE_GAP_ADDR_TYPE_RANDOM_PRIVATE_NON_RESOLVABLE
)

275 
pm_³”_id_t
 
³”_id
;

276 
pm_³”_d©a_æash_t
 
³”_d©a
;

278 
	`pds_³”_d©a_™”©e_´•¬e
();

280 
g­_evt
.
·¿ms
.
cÚÃùed
.
³”_addr
.
addr_ty³
)

282 
BLE_GAP_ADDR_TYPE_PUBLIC
:

283 
BLE_GAP_ADDR_TYPE_RANDOM_STATIC
:

285 
	`pds_³”_d©a_™”©e
(
PM_PEER_DATA_ID_BONDING
, &
³”_id
, &
³”_d©a
))

287 ià(
	`addr_com·»
(&
g­_evt
.
·¿ms
.
cÚÃùed
.
³”_addr
,

288 &
³”_d©a
.
p_bÚdšg_d©a
->
³”_bË_id
.
id_addr_šfo
))

290 
bÚded_m©chšg_³”_id
 = 
³”_id
;

297 
BLE_GAP_ADDR_TYPE_RANDOM_PRIVATE_RESOLVABLE
:

299 
	`pds_³”_d©a_™”©e
(
PM_PEER_DATA_ID_BONDING
, &
³”_id
, &
³”_d©a
))

301 ià(
	`im_add»ss_»sŞve
(&
g­_evt
.
·¿ms
.
cÚÃùed
.
³”_addr
,

302 &
³”_d©a
.
p_bÚdšg_d©a
->
³”_bË_id
.
id_šfo
))

304 
bÚded_m©chšg_³”_id
 = 
³”_id
;

312 
	`NRF_PM_DEBUG_CHECK
(
çl£
);

317 
ušt8_t
 
Ãw_šdex
 = 
	`Ãw_cÚÃùiÚ
(
g­_evt
.
cÚn_hªdË
,

318 &
g­_evt
.
·¿ms
.
cÚÃùed
.
³”_addr
);

319 
	`UNUSED_VARIABLE
(
Ãw_šdex
);

321 ià(
bÚded_m©chšg_³”_id
 !ğ
PM_PEER_ID_INVALID
)

323 
	`im_Ãw_³”_id
(
g­_evt
.
cÚn_hªdË
, 
bÚded_m©chšg_³”_id
);

326 
pm_evt_t
 
im_evt
;

327 
im_evt
.
cÚn_hªdË
 = 
g­_evt
.conn_handle;

328 
im_evt
.
³”_id
 = 
bÚded_m©chšg_³”_id
;

329 
im_evt
.
evt_id
 = 
PM_EVT_BONDED_PEER_CONNECTED
;

330 
	`evt_£nd
(&
im_evt
);

332 
	}
}

343 
boŞ
 
	$im_is_du¶iÿ‹_bÚdšg_d©a
(
pm_³”_d©a_bÚdšg_t
 cÚ¡ * 
p_bÚdšg_d©a1
,

344 
pm_³”_d©a_bÚdšg_t
 cÚ¡ * 
p_bÚdšg_d©a2
)

346 
	`NRF_PM_DEBUG_CHECK
(
p_bÚdšg_d©a1
 !ğ
NULL
);

347 
	`NRF_PM_DEBUG_CHECK
(
p_bÚdšg_d©a2
 !ğ
NULL
);

349 
bË_g­_addr_t
 cÚ¡ * 
p_addr1
 = &
p_bÚdšg_d©a1
->
³”_bË_id
.
id_addr_šfo
;

350 
bË_g­_addr_t
 cÚ¡ * 
p_addr2
 = &
p_bÚdšg_d©a2
->
³”_bË_id
.
id_addr_šfo
;

352 
boŞ
 
du¶iÿ‹_œk
 = ((
	`memcmp
(
p_bÚdšg_d©a1
->
³”_bË_id
.
id_šfo
.
œk
,

353 
p_bÚdšg_d©a2
->
³”_bË_id
.
id_šfo
.
œk
,

354 
BLE_GAP_SEC_KEY_LEN
) == 0)

355 && 
	`is_v®id_œk
(&
p_bÚdšg_d©a1
->
³”_bË_id
.
id_šfo
)

356 && 
	`is_v®id_œk
(&
p_bÚdšg_d©a2
->
³”_bË_id
.
id_šfo
));

358 
boŞ
 
du¶iÿ‹_addr
 = 
	`addr_com·»
(
p_addr1
, 
p_addr2
);

360 
boŞ
 
id_addrs
 = ((
p_addr1
->
addr_ty³
 !ğ
BLE_GAP_ADDR_TYPE_RANDOM_PRIVATE_RESOLVABLE
)

361 && (
p_addr1
->
addr_ty³
 !ğ
BLE_GAP_ADDR_TYPE_RANDOM_PRIVATE_NON_RESOLVABLE
)

362 && (
p_addr2
->
addr_ty³
 !ğ
BLE_GAP_ADDR_TYPE_RANDOM_PRIVATE_RESOLVABLE
)

363 && (
p_addr2
->
addr_ty³
 !ğ
BLE_GAP_ADDR_TYPE_RANDOM_PRIVATE_NON_RESOLVABLE
));

365  (
du¶iÿ‹_addr
 && 
id_addrs
è|| (
du¶iÿ‹_œk
 && !id_addrs);

366 
	}
}

369 
pm_³”_id_t
 
	$im_fšd_du¶iÿ‹_bÚdšg_d©a
(
pm_³”_d©a_bÚdšg_t
 cÚ¡ * 
p_bÚdšg_d©a
,

370 
pm_³”_id_t
 
³”_id_sk
)

372 
pm_³”_id_t
 
³”_id
;

373 
pm_³”_d©a_æash_t
 
³”_d©a_du¶iÿ‹
;

375 
	`NRF_PM_DEBUG_CHECK
(
p_bÚdšg_d©a
 !ğ
NULL
);

377 
	`pds_³”_d©a_™”©e_´•¬e
();

379 
	`pds_³”_d©a_™”©e
(
PM_PEER_DATA_ID_BONDING
, &
³”_id
, &
³”_d©a_du¶iÿ‹
))

381 iàĞ(
³”_id
 !ğ
³”_id_sk
)

382 && 
	`im_is_du¶iÿ‹_bÚdšg_d©a
(
p_bÚdšg_d©a
,

383 
³”_d©a_du¶iÿ‹
.
p_bÚdšg_d©a
))

385  
³”_id
;

388  
PM_PEER_ID_INVALID
;

389 
	}
}

392 
»t_code_t
 
	$im_š™
()

394 
	`NRF_PM_DEBUG_CHECK
(!
m_moduË_š™Ÿlized
);

396 
	`š‹º®_¡©e_»£t
();

398 
m_cÚn_¡©e_u£r_æag_id
 = 
	`bË_cÚn_¡©e_u£r_æag_acquœe
();

399 ià(
m_cÚn_¡©e_u£r_æag_id
 =ğ
BLE_CONN_STATE_USER_FLAG_INVALID
)

401  
NRF_ERROR_INTERNAL
;

404 
m_moduË_š™Ÿlized
 = 
Œue
;

406  
NRF_SUCCESS
;

407 
	}
}

410 
pm_³”_id_t
 
	$im_³”_id_g‘_by_cÚn_hªdË
(
ušt16_t
 
cÚn_hªdË
)

412 
ušt8_t
 
cÚn_šdex
;

414 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

416 
cÚn_šdex
 = 
	`g‘_cÚÃùiÚ_by_cÚn_hªdË
(
cÚn_hªdË
);

418 ià(
cÚn_šdex
 !ğ
IM_NO_INVALID_CONN_HANDLES
)

420  
m_cÚÃùiÚs
[
cÚn_šdex
].
³”_id
;

423  
PM_PEER_ID_INVALID
;

424 
	}
}

427 
»t_code_t
 
	$im_bË_addr_g‘
(
ušt16_t
 
cÚn_hªdË
, 
bË_g­_addr_t
 * 
p_bË_addr
)

429 
ušt8_t
 
cÚn_šdex
;

431 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

432 
	`NRF_PM_DEBUG_CHECK
(
p_bË_addr
 !ğ
NULL
);

434 
cÚn_šdex
 = 
	`g‘_cÚÃùiÚ_by_cÚn_hªdË
(
cÚn_hªdË
);

436 ià(
cÚn_šdex
 !ğ
IM_NO_INVALID_CONN_HANDLES
)

438 *
p_bË_addr
 = 
m_cÚÃùiÚs
[
cÚn_šdex
].
³”_add»ss
;

439  
NRF_SUCCESS
;

442  
NRF_ERROR_NOT_FOUND
;

443 
	}
}

446 
boŞ
 
	$im_ma¡”_ids_com·»
(
bË_g­_ma¡”_id_t
 cÚ¡ * 
p_ma¡”_id1
,

447 
bË_g­_ma¡”_id_t
 cÚ¡ * 
p_ma¡”_id2
)

449 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

450 
	`NRF_PM_DEBUG_CHECK
(
p_ma¡”_id1
 !ğ
NULL
);

451 
	`NRF_PM_DEBUG_CHECK
(
p_ma¡”_id2
 !ğ
NULL
);

453 ià(!
	`im_ma¡”_id_is_v®id
(
p_ma¡”_id1
))

455  
çl£
;

458 ià(
p_ma¡”_id1
->
ediv
 !ğ
p_ma¡”_id2
->ediv)

460  
çl£
;

463  (
	`memcmp
(
p_ma¡”_id1
->
¿nd
, 
p_ma¡”_id2
->¿nd, 
BLE_GAP_SEC_RAND_LEN
) == 0);

464 
	}
}

467 
pm_³”_id_t
 
	$im_³”_id_g‘_by_ma¡”_id
(
bË_g­_ma¡”_id_t
 cÚ¡ * 
p_ma¡”_id
)

469 
pm_³”_id_t
 
³”_id
;

470 
pm_³”_d©a_æash_t
 
³”_d©a
;

472 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

473 
	`NRF_PM_DEBUG_CHECK
(
p_ma¡”_id
 !ğ
NULL
);

475 
	`pds_³”_d©a_™”©e_´•¬e
();

478 
	`pds_³”_d©a_™”©e
(
PM_PEER_DATA_ID_BONDING
, &
³”_id
, &
³”_d©a
))

480 ià(
	`im_ma¡”_ids_com·»
(
p_ma¡”_id
, &
³”_d©a
.
p_bÚdšg_d©a
->
own_Ék
.
ma¡”_id
) ||

481 
	`im_ma¡”_ids_com·»
(
p_ma¡”_id
, &
³”_d©a
.
p_bÚdšg_d©a
->
³”_Ék
.
ma¡”_id
))

484  
³”_id
;

489  
PM_PEER_ID_INVALID
;

490 
	}
}

493 
ušt16_t
 
	$im_cÚn_hªdË_g‘
(
pm_³”_id_t
 
³”_id
)

495 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

497 
ušt32_t
 
i
 = 0; i < 
IM_MAX_CONN_HANDLES
; i++)

499 ià(
³”_id
 =ğ
m_cÚÃùiÚs
[
i
].peer_id)

501  
m_cÚÃùiÚs
[
i
].
cÚn_hªdË
;

504  
BLE_CONN_HANDLE_INVALID
;

505 
	}
}

508 
boŞ
 
	$im_ma¡”_id_is_v®id
(
bË_g­_ma¡”_id_t
 cÚ¡ * 
p_ma¡”_id
)

510 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

512 ià(
p_ma¡”_id
->
ediv
 != 0)

514  
Œue
;

517 
ušt32_t
 
i
 = 0; i < 
BLE_GAP_SEC_RAND_LEN
; i++)

519 ià(
p_ma¡”_id
->
¿nd
[
i
] != 0)

521  
Œue
;

524  
çl£
;

525 
	}
}

533 
	$³”_id_£t
(
ušt16_t
 
cÚn_hªdË
, 
pm_³”_id_t
 
³”_id
)

535 
ušt8_t
 
cÚn_šdex
 = 
	`g‘_cÚÃùiÚ_by_cÚn_hªdË
(
cÚn_hªdË
);

536 ià(
cÚn_šdex
 !ğ
IM_NO_INVALID_CONN_HANDLES
)

538 
m_cÚÃùiÚs
[
cÚn_šdex
].
³”_id
 =…eer_id;

540 
	}
}

543 
	$im_Ãw_³”_id
(
ušt16_t
 
cÚn_hªdË
, 
pm_³”_id_t
 
³”_id
)

545 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

547 
	`³”_id_£t
(
cÚn_hªdË
, 
³”_id
);

548 
	}
}

551 
»t_code_t
 
	$im_³”_ä“
(
pm_³”_id_t
 
³”_id
)

553 
ušt16_t
 
cÚn_hªdË
;

554 
»t_code_t
 
»t
;

556 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

558 
cÚn_hªdË
 = 
	`im_cÚn_hªdË_g‘
(
³”_id
);

559 
»t
 = 
	`pdb_³”_ä“
(
³”_id
);

561 ià((
cÚn_hªdË
 !ğ
BLE_CONN_HANDLE_INVALID
è&& (
»t
 =ğ
NRF_SUCCESS
))

563 
	`³”_id_£t
(
cÚn_hªdË
, 
PM_PEER_ID_INVALID
);

565  
»t
;

566 
	}
}

571 
»t_code_t
 
	$³”s_id_keys_g‘
(
pm_³”_id_t
 cÚ¡ * 
p_³”s
,

572 
ušt32_t
 
³”_út
,

573 
bË_g­_addr_t
 * 
p_g­_addrs
,

574 
ušt32_t
 * 
p_addr_út
,

575 
bË_g­_œk_t
 * 
p_g­_œks
,

576 
ušt32_t
 * 
p_œk_út
)

578 
»t_code_t
 
»t
;

580 
pm_³”_d©a_bÚdšg_t
 
bÚd_d©a
;

581 
pm_³”_d©a_t
 
³”_d©a
;

583 
ušt32_t
 cÚ¡ 
buf_size
 = (
bÚd_d©a
);

585 
boŞ
 
cİy_addrs
 = 
çl£
;

586 
boŞ
 
cİy_œks
 = 
çl£
;

588 
	`NRF_PM_DEBUG_CHECK
(
p_³”s
 !ğ
NULL
);

591 
	`NRF_PM_DEBUG_CHECK
((
p_g­_addrs
 !ğ
NULL
è|| (
p_g­_œks
 != NULL));

593 ià((
p_g­_addrs
 !ğ
NULL
è&& (
p_addr_út
 != NULL))

595 
	`NRF_PM_DEBUG_CHECK
((*
p_addr_út
è>ğ
³”_út
);

597 
cİy_addrs
 = 
Œue
;

598 *
p_addr_út
 = 0;

601 ià((
p_g­_œks
 !ğ
NULL
è&& (
p_œk_út
 != NULL))

603 
	`NRF_PM_DEBUG_CHECK
((*
p_œk_út
è>ğ
³”_út
);

605 
cİy_œks
 = 
Œue
;

606 *
p_œk_út
 = 0;

609 
	`mem£t
(&
³”_d©a
, 0x00, (peer_data));

610 
³”_d©a
.
p_bÚdšg_d©a
 = &
bÚd_d©a
;

614 
ušt32_t
 
i
 = 0; i < 
³”_út
; i++)

616 
	`mem£t
(&
bÚd_d©a
, 0x00, (bond_data));

619 
»t
 = 
	`pds_³”_d©a_»ad
(
p_³”s
[
i
], 
PM_PEER_DATA_ID_BONDING
,

620 &
³”_d©a
, &
buf_size
);

622 ià((
»t
 =ğ
NRF_ERROR_NOT_FOUND
è|| (»ˆ=ğ
NRF_ERROR_INVALID_PARAM
))

625  
NRF_ERROR_NOT_FOUND
;

628 
ušt8_t
 cÚ¡ 
addr_ty³
 = 
bÚd_d©a
.
³”_bË_id
.
id_addr_šfo
.addr_type;

630 ià((
addr_ty³
 !ğ
BLE_GAP_ADDR_TYPE_PUBLIC
) &&

631 (
addr_ty³
 !ğ
BLE_GAP_ADDR_TYPE_RANDOM_STATIC
))

634  
BLE_ERROR_GAP_INVALID_BLE_ADDR
;

638 ià(
cİy_addrs
)

640 
	`memıy
(&
p_g­_addrs
[
i
], &
bÚd_d©a
.
³”_bË_id
.
id_addr_šfo
, (
bË_g­_addr_t
));

641 (*
p_addr_út
)++;

645 ià(
cİy_œks
)

647 
	`memıy
(&
p_g­_œks
[
i
], 
bÚd_d©a
.
³”_bË_id
.
id_šfo
.
œk
, 
BLE_GAP_SEC_KEY_LEN
);

648 (*
p_œk_út
)++;

652  
NRF_SUCCESS
;

653 
	}
}

656 
»t_code_t
 
	$im_deviû_id’t™›s_li¡_£t
(
pm_³”_id_t
 cÚ¡ * 
p_³”s
,

657 
ušt32_t
 
³”_út
)

659 
»t_code_t
 
»t
;

660 
pm_³”_d©a_t
 
³”_d©a
;

661 
pm_³”_d©a_bÚdšg_t
 
bÚd_d©a
;

663 
bË_g­_id_key_t
 
keys
[
BLE_GAP_DEVICE_IDENTITIES_MAX_COUNT
];

664 
bË_g­_id_key_t
 cÚ¡ * 
key_±rs
[
BLE_GAP_DEVICE_IDENTITIES_MAX_COUNT
];

666 ià((
p_³”s
 =ğ
NULL
è|| (
³”_út
 == 0))

669  
	`sd_bË_g­_deviû_id’t™›s_£t
(
NULL
, NULL, 0);

672 
³”_d©a
.
p_bÚdšg_d©a
 = &
bÚd_d©a
;

673 
ušt32_t
 cÚ¡ 
buf_size
 = (
bÚd_d©a
);

675 
	`mem£t
(
keys
, 0x00, (keys));

676 
ušt32_t
 
i
 = 0; i < 
BLE_GAP_DEVICE_IDENTITIES_MAX_COUNT
; i++)

678 
key_±rs
[
i
] = &
keys
[i];

681 
ušt32_t
 
i
 = 0; i < 
³”_út
; i++)

683 
	`mem£t
(&
bÚd_d©a
, 0x00, (bond_data));

686 
»t
 = 
	`pds_³”_d©a_»ad
(
p_³”s
[
i
], 
PM_PEER_DATA_ID_BONDING
,

687 &
³”_d©a
, &
buf_size
);

689 ià((
»t
 =ğ
NRF_ERROR_NOT_FOUND
è|| (»ˆ=ğ
NRF_ERROR_INVALID_PARAM
))

692  
NRF_ERROR_NOT_FOUND
;

695 
ušt8_t
 cÚ¡ 
addr_ty³
 = 
bÚd_d©a
.
³”_bË_id
.
id_addr_šfo
.addr_type;

697 ià((
addr_ty³
 !ğ
BLE_GAP_ADDR_TYPE_PUBLIC
) &&

698 (
addr_ty³
 !ğ
BLE_GAP_ADDR_TYPE_RANDOM_STATIC
))

701  
BLE_ERROR_GAP_INVALID_BLE_ADDR
;

705 
	`memıy
(&
keys
[
i
], &
bÚd_d©a
.
³”_bË_id
, (
bË_g­_id_key_t
));

708  
	`sd_bË_g­_deviû_id’t™›s_£t
(
key_±rs
, 
NULL
, 
³”_út
);

709 
	}
}

712 
»t_code_t
 
	$im_id_addr_£t
(
bË_g­_addr_t
 cÚ¡ * 
p_addr
)

714  
	`sd_bË_g­_addr_£t
(
p_addr
);

715 
	}
}

718 
»t_code_t
 
	$im_id_addr_g‘
(
bË_g­_addr_t
 * 
p_addr
)

720 
	`NRF_PM_DEBUG_CHECK
(
p_addr
 !ğ
NULL
);

722  
	`sd_bË_g­_addr_g‘
(
p_addr
);

723 
	}
}

726 
»t_code_t
 
	$im_´ivacy_£t
(
pm_´ivacy_·¿ms_t
 cÚ¡ * 
p_´ivacy_·¿ms
)

728  
	`sd_bË_g­_´ivacy_£t
(
p_´ivacy_·¿ms
);

729 
	}
}

732 
»t_code_t
 
	$im_´ivacy_g‘
(
pm_´ivacy_·¿ms_t
 * 
p_´ivacy_·¿ms
)

734  
	`sd_bË_g­_´ivacy_g‘
(
p_´ivacy_·¿ms
);

735 
	}
}

741 
»t_code_t
 
	$im_wh™–i¡_g‘
(
bË_g­_addr_t
 * 
p_addrs
,

742 
ušt32_t
 * 
p_addr_út
,

743 
bË_g­_œk_t
 * 
p_œks
,

744 
ušt32_t
 * 
p_œk_út
)

747 
	`NRF_PM_DEBUG_CHECK
((
p_addrs
 !ğ
NULL
è|| (
p_œks
 != NULL));

748 
	`NRF_PM_DEBUG_CHECK
((
p_addr_út
 !ğ
NULL
è|| (
p_œk_út
 != NULL));

750 ià(((
p_addr_út
 !ğ
NULL
è&& (
m_wli¡ed_³”_út
 > *p_addr_cnt)) ||

751 ((
p_œk_út
 !ğ
NULL
è&& (
m_wli¡ed_³”_út
 > *p_irk_cnt)))

754  
NRF_ERROR_NO_MEM
;

760  
	`³”s_id_keys_g‘
(
m_wli¡ed_³”s
, 
m_wli¡ed_³”_út
,

761 
p_addrs
, 
p_addr_út
,

762 
p_œks
, 
p_œk_út
);

763 
	}
}

771 
»t_code_t
 
	$im_wh™–i¡_£t
(
pm_³”_id_t
 cÚ¡ * 
p_³”s
,

772 
ušt32_t
 
³”_út
)

775 
	`mem£t
(
m_wli¡ed_³”s
, 0x00, (m_wlisted_peers));

777 ià((
p_³”s
 =ğ
NULL
è|| (
³”_út
 == 0))

780 
m_wli¡ed_³”_út
 = 0;

784  
	`sd_bË_g­_wh™–i¡_£t
(
NULL
, 0);

790 
m_wli¡ed_³”_út
 = 
³”_út
;

791 
	`memıy
(
m_wli¡ed_³”s
, 
p_³”s
, (
pm_³”_id_t
è* 
³”_út
);

793 
»t_code_t
 
»t
;

794 
ušt32_t
 
wli¡_addr_út
 = 0;

796 
bË_g­_addr_t
 cÚ¡ * 
addr_±rs
[
BLE_GAP_WHITELIST_ADDR_MAX_COUNT
];

797 
bË_g­_addr_t
 
addrs
[
BLE_GAP_WHITELIST_ADDR_MAX_COUNT
];

799 
	`mem£t
(
addrs
, 0x00, (addrs));

802 
»t
 = 
	`³”s_id_keys_g‘
(
p_³”s
, 
³”_út
, 
addrs
, &
wli¡_addr_út
, 
NULL
, NULL);

804 ià(
»t
 !ğ
NRF_SUCCESS
)

808  
»t
;

811 
ušt32_t
 
i
 = 0; i < 
BLE_GAP_WHITELIST_ADDR_MAX_COUNT
; i++)

813 
addr_±rs
[
i
] = &
addrs
[i];

818  
	`sd_bË_g­_wh™–i¡_£t
(
addr_±rs
, 
³”_út
);

819 
	}
}

845 
	$ah
(
ušt8_t
 cÚ¡ * 
p_k
, ušt8_ˆcÚ¡ * 
p_r
, ušt8_ˆ* 
p_loÿl_hash
)

847 
Äf_ecb_h®_d©a_t
 
ecb_h®_d©a
;

849 
ušt32_t
 
i
 = 0; i < 
SOC_ECB_KEY_LENGTH
; i++)

851 
ecb_h®_d©a
.
key
[
i
] = 
p_k
[
SOC_ECB_KEY_LENGTH
 - 1 - i];

854 
	`mem£t
(
ecb_h®_d©a
.
ş—¹ext
, 0, 
SOC_ECB_KEY_LENGTH
 - 
IM_ADDR_CLEARTEXT_LENGTH
);

856 
ušt32_t
 
i
 = 0; i < 
IM_ADDR_CLEARTEXT_LENGTH
; i++)

858 
ecb_h®_d©a
.
ş—¹ext
[
SOC_ECB_KEY_LENGTH
 - 1 - 
i
] = 
p_r
[i];

862 (è
	`sd_ecb_block_’üy±
(&
ecb_h®_d©a
);

864 
ušt32_t
 
i
 = 0; i < 
IM_ADDR_CIPHERTEXT_LENGTH
; i++)

866 
p_loÿl_hash
[
i
] = 
ecb_h®_d©a
.
ch”‹xt
[
SOC_ECB_KEY_LENGTH
 - 1 - i];

868 
	}
}

871 
boŞ
 
	$im_add»ss_»sŞve
(
bË_g­_addr_t
 cÚ¡ * 
p_addr
, 
bË_g­_œk_t
 cÚ¡ * 
p_œk
)

873 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

875 
ušt8_t
 
hash
[
IM_ADDR_CIPHERTEXT_LENGTH
];

876 
ušt8_t
 
loÿl_hash
[
IM_ADDR_CIPHERTEXT_LENGTH
];

877 
ušt8_t
 
´ªd
[
IM_ADDR_CLEARTEXT_LENGTH
];

879 ià(
p_addr
->
addr_ty³
 !ğ
BLE_GAP_ADDR_TYPE_RANDOM_PRIVATE_RESOLVABLE
)

881  
çl£
;

884 
	`memıy
(
hash
, 
p_addr
->
addr
, 
IM_ADDR_CIPHERTEXT_LENGTH
);

885 
	`memıy
(
´ªd
, &
p_addr
->
addr
[
IM_ADDR_CIPHERTEXT_LENGTH
], 
IM_ADDR_CLEARTEXT_LENGTH
);

886 
	`ah
(
p_œk
->
œk
, 
´ªd
, 
loÿl_hash
);

888  (
	`memcmp
(
hash
, 
loÿl_hash
, 
IM_ADDR_CIPHERTEXT_LENGTH
) == 0);

889 
	}
}

	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\ble\peer_manager\peer_data_storage.c

40 
	~"sdk_commÚ.h
"

41 #ià
NRF_MODULE_ENABLED
(
PEER_MANAGER
)

42 
	~"³”_d©a_¡Üage.h
"

44 
	~<¡dšt.h
>

45 
	~<¡ršg.h
>

46 
	~"sdk_”rÜs.h
"

47 
	~"³”_mªag”_ty³s.h
"

48 
	~"³”_mªag”_š‹º®.h
"

49 
	~"³”_id.h
"

50 
	~"fds.h
"

54 
	#VERIFY_PEER_ID_IN_RANGE
(
id
è
	`VERIFY_FALSE
((id >ğ
PM_PEER_ID_N_AVAILABLE_IDS
), \

55 
NRF_ERROR_INVALID_PARAM
)

	)

58 
	#VERIFY_PEER_DATA_ID_IN_RANGE
(
id
è
	`VERIFY_TRUE
(
	`³”_d©a_id_is_v®id
(id), \

59 
NRF_ERROR_INVALID_PARAM
)

	)

62 
	#PDS_EVENT_HANDLERS_CNT
 ((
m_evt_hªdËrs
è/ (m_evt_hªdËrs[0]))

	)

66 
pdb_pds_evt_hªdËr
(
pm_evt_t
 *);

70 
pm_evt_hªdËr_š‹º®_t
 cÚ¡ 
	gm_evt_hªdËrs
[] =

72 
pdb_pds_evt_hªdËr
,

75 
boŞ
 
	gm_moduË_š™Ÿlized
 = 
çl£
;

76 vŞ©
boŞ
 
	gm_³”_d–‘e_deã¼ed
 = 
çl£
;

79 
fds_fšd_tok’_t
 
	gm_fds_áok
;

83 
	$pds_evt_£nd
(
pm_evt_t
 * 
p_ev’t
)

85 
p_ev’t
->
cÚn_hªdË
 = 
BLE_CONN_HANDLE_INVALID
;

87 
ušt32_t
 
i
 = 0; i < 
PDS_EVENT_HANDLERS_CNT
; i++)

89 
m_evt_hªdËrs
[
i
](
p_ev’t
);

91 
	}
}

95 
ušt16_t
 
	$³”_id_to_fe_id
(
pm_³”_id_t
 
³”_id
)

97  (
ušt16_t
)(
³”_id
 + 
PEER_ID_TO_FILE_ID
);

98 
	}
}

102 
pm_³”_id_t
 
	$fe_id_to_³”_id
(
ušt16_t
 
fe_id
)

104  (
pm_³”_id_t
)(
fe_id
 + 
FILE_ID_TO_PEER_ID
);

105 
	}
}

109 
ušt16_t
 
	$³”_d©a_id_to_»cÜd_key
(
pm_³”_d©a_id_t
 
³”_d©a_id
)

111  (
ušt16_t
)(
³”_d©a_id
 + 
DATA_ID_TO_RECORD_KEY
);

112 
	}
}

116 
pm_³”_d©a_id_t
 
	$»cÜd_key_to_³”_d©a_id
(
ušt16_t
 
»cÜd_key
)

118  (
pm_³”_d©a_id_t
)(
»cÜd_key
 + 
RECORD_KEY_TO_DATA_ID
);

119 
	}
}

123 
boŞ
 
	$fe_id_w™hš_pm_¿nge
(
ušt16_t
 
fe_id
)

125  ((
PDS_FIRST_RESERVED_FILE_ID
 <ğ
fe_id
)

126 && (
fe_id
 <ğ
PDS_LAST_RESERVED_FILE_ID
));

127 
	}
}

131 
boŞ
 
	$»cÜd_key_w™hš_pm_¿nge
(
ušt16_t
 
»cÜd_key
)

133  ((
PDS_FIRST_RESERVED_RECORD_KEY
 <ğ
»cÜd_key
)

134 && (
»cÜd_key
 <ğ
PDS_LAST_RESERVED_RECORD_KEY
));

135 
	}
}

138 
boŞ
 
	$³”_d©a_id_is_v®id
(
pm_³”_d©a_id_t
 
d©a_id
)

140  ((
d©a_id
 =ğ
PM_PEER_DATA_ID_BONDING
) ||

141 (
d©a_id
 =ğ
PM_PEER_DATA_ID_SERVICE_CHANGED_PENDING
) ||

142 (
d©a_id
 =ğ
PM_PEER_DATA_ID_GATT_LOCAL
) ||

143 (
d©a_id
 =ğ
PM_PEER_DATA_ID_GATT_REMOTE
) ||

144 (
d©a_id
 =ğ
PM_PEER_DATA_ID_PEER_RANK
) ||

145 (
d©a_id
 =ğ
PM_PEER_DATA_ID_APPLICATION
));

146 
	}
}

154 
	$£nd_uÃx³ùed_”rÜ
(
pm_³”_id_t
 
³”_id
, 
»t_code_t
 
”r_code
)

156 
pm_evt_t
 
”rÜ_evt
 =

158 .
evt_id
 = 
PM_EVT_ERROR_UNEXPECTED
,

159 .
³”_id
 =…eer_id,

160 .
·¿ms
 =

162 .
”rÜ_uÃx³ùed
 =

164 .
”rÜ
 = 
”r_code
,

168 
	`pds_evt_£nd
(&
”rÜ_evt
);

169 
	}
}

174 
	$³”_d©a_d–‘e_´oûss
()

176 
»t_code_t
 
»t
;

177 
pm_³”_id_t
 
³”_id
;

178 
ušt16_t
 
fe_id
;

179 
fds_»cÜd_desc_t
 
desc
;

180 
fds_fšd_tok’_t
 
áok
;

182 
m_³”_d–‘e_deã¼ed
 = 
çl£
;

184 
	`mem£t
(&
áok
, 0x00, (
fds_fšd_tok’_t
));

185 
³”_id
 = 
	`³”_id_g‘_Ãxt_d–‘ed
(
PM_PEER_ID_INVALID
);

187  (
³”_id
 !ğ
PM_PEER_ID_INVALID
)

188 && (
	`fds_»cÜd_fšd_š_fe
(
	`³”_id_to_fe_id
(
³”_id
), &
desc
, &
áok
)

189 =ğ
FDS_ERR_NOT_FOUND
))

191 
	`³”_id_ä“
(
³”_id
);

192 
³”_id
 = 
	`³”_id_g‘_Ãxt_d–‘ed
(peer_id);

195 ià(
³”_id
 !ğ
PM_PEER_ID_INVALID
)

197 
fe_id
 = 
	`³”_id_to_fe_id
(
³”_id
);

198 
»t
 = 
	`fds_fe_d–‘e
(
fe_id
);

200 ià(
»t
 =ğ
FDS_ERR_NO_SPACE_IN_QUEUES
)

202 
m_³”_d–‘e_deã¼ed
 = 
Œue
;

204 ià(
»t
 !ğ
FDS_SUCCESS
)

206 
	`£nd_uÃx³ùed_”rÜ
(
³”_id
, 
»t
);

209 
	}
}

212 
»t_code_t
 
	$³”_d©a_fšd
(
pm_³”_id_t
 
³”_id
,

213 
pm_³”_d©a_id_t
 
d©a_id
,

214 
fds_»cÜd_desc_t
 * cÚ¡ 
p_desc
)

216 
»t_code_t
 
»t
;

217 
fds_fšd_tok’_t
 
áok
;

219 
	`NRF_PM_DEBUG_CHECK
(
³”_id
 < 
PM_PEER_ID_N_AVAILABLE_IDS
);

220 
	`NRF_PM_DEBUG_CHECK
(
	`³”_d©a_id_is_v®id
(
d©a_id
));

221 
	`NRF_PM_DEBUG_CHECK
(
p_desc
 !ğ
NULL
);

223 
	`mem£t
(&
áok
, 0x00, (
fds_fšd_tok’_t
));

225 
ušt16_t
 
fe_id
 = 
	`³”_id_to_fe_id
(
³”_id
);

226 
ušt16_t
 
»cÜd_key
 = 
	`³”_d©a_id_to_»cÜd_key
(
d©a_id
);

228 
»t
 = 
	`fds_»cÜd_fšd
(
fe_id
, 
»cÜd_key
, 
p_desc
, &
áok
);

230 ià(
»t
 !ğ
FDS_SUCCESS
)

232  
NRF_ERROR_NOT_FOUND
;

235  
NRF_SUCCESS
;

236 
	}
}

239 
	$³”_ids_lßd
()

241 
fds_»cÜd_desc_t
 
»cÜd_desc
;

242 
fds_æash_»cÜd_t
 
»cÜd
;

243 
fds_fšd_tok’_t
 
áok
;

245 
	`mem£t
(&
áok
, 0x00, (
fds_fšd_tok’_t
));

247 
ušt16_t
 cÚ¡ 
»cÜd_key
 = 
	`³”_d©a_id_to_»cÜd_key
(
PM_PEER_DATA_ID_BONDING
);

249 
	`fds_»cÜd_fšd_by_key
(
»cÜd_key
, &
»cÜd_desc
, &
áok
è=ğ
FDS_SUCCESS
)

251 
pm_³”_id_t
 
³”_id
;

255 ()
	`fds_»cÜd_İ’
(&
»cÜd_desc
, &
»cÜd
);

256 
³”_id
 = 
	`fe_id_to_³”_id
(
»cÜd
.
p_h—d”
->
fe_id
);

257 ()
	`fds_»cÜd_şo£
(&
»cÜd_desc
);

259 ()
	`³”_id_®loÿ‹
(
³”_id
);

261 
	}
}

264 
	$fds_evt_hªdËr
(
fds_evt_t
 cÚ¡ * cÚ¡ 
p_fds_evt
)

266 
pm_evt_t
 
pds_evt
 =

268 .
³”_id
 = 
	`fe_id_to_³”_id
(
p_fds_evt
->
wr™e
.
fe_id
)

271 
p_fds_evt
->
id
)

273 
FDS_EVT_WRITE
:

274 
FDS_EVT_UPDATE
:

275 
FDS_EVT_DEL_RECORD
:

276 iàĞ
	`fe_id_w™hš_pm_¿nge
(
p_fds_evt
->
wr™e
.
fe_id
)

277 || 
	`»cÜd_key_w™hš_pm_¿nge
(
p_fds_evt
->
wr™e
.
»cÜd_key
))

279 
pds_evt
.
·¿ms
.
³”_d©a_upd©e_sucûeded
.
d©a_id


280 ğ
	`»cÜd_key_to_³”_d©a_id
(
p_fds_evt
->
wr™e
.
»cÜd_key
);

281 
pds_evt
.
·¿ms
.
³”_d©a_upd©e_sucûeded
.
aùiÚ


282 ğ(
p_fds_evt
->
id
 =ğ
FDS_EVT_DEL_RECORD
è? 
PM_PEER_DATA_OP_DELETE


283 : 
PM_PEER_DATA_OP_UPDATE
;

284 
pds_evt
.
·¿ms
.
³”_d©a_upd©e_sucûeded
.
tok’
 = 
p_fds_evt
->
wr™e
.
»cÜd_id
;

286 ià(
p_fds_evt
->
»suÉ
 =ğ
FDS_SUCCESS
)

288 
pds_evt
.
evt_id
 = 
PM_EVT_PEER_DATA_UPDATE_SUCCEEDED
;

289 
pds_evt
.
·¿ms
.
³”_d©a_upd©e_sucûeded
.
æash_chªged
 = 
Œue
;

293 
pds_evt
.
evt_id
 = 
PM_EVT_PEER_DATA_UPDATE_FAILED
;

294 
pds_evt
.
·¿ms
.
³”_d©a_upd©e_çed
.
”rÜ
 = 
p_fds_evt
->
»suÉ
;

297 
	`pds_evt_£nd
(&
pds_evt
);

301 
FDS_EVT_DEL_FILE
:

302 iàĞ
	`fe_id_w™hš_pm_¿nge
(
p_fds_evt
->
d–
.
fe_id
)

303 && (
p_fds_evt
->
d–
.
»cÜd_key
 =ğ
FDS_RECORD_KEY_DIRTY
))

305 ià(
p_fds_evt
->
»suÉ
 =ğ
FDS_SUCCESS
)

307 
pds_evt
.
evt_id
 = 
PM_EVT_PEER_DELETE_SUCCEEDED
;

308 
	`³”_id_ä“
(
pds_evt
.
³”_id
);

312 
pds_evt
.
evt_id
 = 
PM_EVT_PEER_DELETE_FAILED
;

315 
m_³”_d–‘e_deã¼ed
 = 
Œue
;

317 
	`pds_evt_£nd
(&
pds_evt
);

321 
FDS_EVT_GC
:

322 
pds_evt
.
evt_id
 = 
PM_EVT_FLASH_GARBAGE_COLLECTED
;

323 
pds_evt
.
³”_id
 = 
PM_PEER_ID_INVALID
;

325 
	`pds_evt_£nd
(&
pds_evt
);

333 ià(
m_³”_d–‘e_deã¼ed
)

335 
	`³”_d©a_d–‘e_´oûss
();

337 
	}
}

340 
»t_code_t
 
	$pds_š™
()

342 
»t_code_t
 
»t
;

345 
	`NRF_PM_DEBUG_CHECK
(!
m_moduË_š™Ÿlized
);

347 
»t
 = 
	`fds_»gi¡”
(
fds_evt_hªdËr
);

348 ià(
»t
 !ğ
NRF_SUCCESS
)

350  
NRF_ERROR_INTERNAL
;

353 
»t
 = 
	`fds_š™
();

354 ià(
»t
 !ğ
NRF_SUCCESS
)

356  
NRF_ERROR_STORAGE_FULL
;

359 
	`³”_id_š™
();

360 
	`³”_ids_lßd
();

362 
m_moduË_š™Ÿlized
 = 
Œue
;

364  
NRF_SUCCESS
;

365 
	}
}

368 
»t_code_t
 
	$pds_³”_d©a_»ad
(
pm_³”_id_t
 
³”_id
,

369 
pm_³”_d©a_id_t
 
d©a_id
,

370 
pm_³”_d©a_t
 * cÚ¡ 
p_d©a
,

371 
ušt32_t
 cÚ¡ * cÚ¡ 
p_buf_Ën
)

373 
»t_code_t
 
»t
;

374 
fds_»cÜd_desc_t
 
»c_desc
;

375 
fds_æash_»cÜd_t
 
»c_æash
;

377 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

378 
	`NRF_PM_DEBUG_CHECK
(
p_d©a
 !ğ
NULL
);

380 
	`VERIFY_PEER_ID_IN_RANGE
(
³”_id
);

381 
	`VERIFY_PEER_DATA_ID_IN_RANGE
(
d©a_id
);

383 
»t
 = 
	`³”_d©a_fšd
(
³”_id
, 
d©a_id
, &
»c_desc
);

385 ià(
»t
 !ğ
NRF_SUCCESS
)

387  
NRF_ERROR_NOT_FOUND
;

391 
»t
 = 
	`fds_»cÜd_İ’
(&
»c_desc
, &
»c_æash
);

393 ià(
»t
 !ğ
NRF_SUCCESS
)

395  
NRF_ERROR_NOT_FOUND
;

398 
p_d©a
->
d©a_id
 = data_id;

399 
p_d©a
->
Ëngth_wÜds
 = 
»c_æash
.
p_h—d”
->length_words;

403 ià(
p_buf_Ën
 =ğ
NULL
)

408 
p_d©a
->
p_®l_d©a
 = (*)
»c_æash
.p_data;

412 
ušt32_t
 cÚ¡ 
d©a_Ën_by‹s
 = (
p_d©a
->
Ëngth_wÜds
 * (uint32_t));

414 ià((*
p_buf_Ën
è>ğ
d©a_Ën_by‹s
)

416 
	`memıy
(
p_d©a
->
p_®l_d©a
, 
»c_æash
.p_d©a, 
d©a_Ën_by‹s
);

420  
NRF_ERROR_NO_MEM
;

425 ()
	`fds_»cÜd_şo£
(&
»c_desc
);

427  
NRF_SUCCESS
;

428 
	}
}

431 
	$pds_³”_d©a_™”©e_´•¬e
()

433 
	`mem£t
(&
m_fds_áok
, 0x00, (
fds_fšd_tok’_t
));

434 
	}
}

437 
boŞ
 
	$pds_³”_d©a_™”©e
(
pm_³”_d©a_id_t
 
d©a_id
,

438 
pm_³”_id_t
 * cÚ¡ 
p_³”_id
,

439 
pm_³”_d©a_æash_t
 * cÚ¡ 
p_d©a
)

441 
»t_code_t
 
»t
;

442 
ušt16_t
 
»c_key
;

443 
fds_»cÜd_desc_t
 
»c_desc
;

444 
fds_æash_»cÜd_t
 
»c_æash
;

446 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

447 
	`NRF_PM_DEBUG_CHECK
(
p_³”_id
 !ğ
NULL
);

448 
	`NRF_PM_DEBUG_CHECK
(
p_d©a
 !ğ
NULL
);

450 
	`VERIFY_PEER_DATA_ID_IN_RANGE
(
d©a_id
);

452 
»c_key
 = 
	`³”_d©a_id_to_»cÜd_key
(
d©a_id
);

454 ià(
	`fds_»cÜd_fšd_by_key
(
»c_key
, &
»c_desc
, &
m_fds_áok
è!ğ
NRF_SUCCESS
)

456  
çl£
;

459 
»t
 = 
	`fds_»cÜd_İ’
(&
»c_desc
, &
»c_æash
);

461 ià(
»t
 !ğ
NRF_SUCCESS
)

466  
çl£
;

469 
p_d©a
->
d©a_id
 = data_id;

470 
p_d©a
->
Ëngth_wÜds
 = 
»c_æash
.
p_h—d”
->length_words;

471 
p_d©a
->
p_®l_d©a
 = 
»c_æash
.p_data;

473 *
p_³”_id
 = 
	`fe_id_to_³”_id
(
»c_æash
.
p_h—d”
->
fe_id
);

475 ()
	`fds_»cÜd_şo£
(&
»c_desc
);

477  
Œue
;

478 
	}
}

481 
»t_code_t
 
	$pds_¥aû_»£rve
(
pm_³”_d©a_cÚ¡_t
 cÚ¡ * 
p_³”_d©a
,

482 
pm_´•¬e_tok’_t
 * 
p_´•¬e_tok’
)

484 
»t_code_t
 
»t
;

486 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

487 
	`NRF_PM_DEBUG_CHECK
(
p_³”_d©a
 !ğ
NULL
);

488 
	`NRF_PM_DEBUG_CHECK
(
p_´•¬e_tok’
 !ğ
NULL
);

490 
	`VERIFY_PEER_DATA_ID_IN_RANGE
(
p_³”_d©a
->
d©a_id
);

492 
»t
 = 
	`fds_»£rve
((
fds_»£rve_tok’_t
*)
p_´•¬e_tok’
, 
p_³”_d©a
->
Ëngth_wÜds
);

494 
»t
)

496 
FDS_SUCCESS
:

497  
NRF_SUCCESS
;

499 
FDS_ERR_RECORD_TOO_LARGE
:

500  
NRF_ERROR_INVALID_LENGTH
;

502 
FDS_ERR_NO_SPACE_IN_FLASH
:

503  
NRF_ERROR_STORAGE_FULL
;

506  
NRF_ERROR_INTERNAL
;

508 
	}
}

511 
»t_code_t
 
	$pds_¥aû_»£rve_ÿnûl
(
pm_´•¬e_tok’_t
 
´•¬e_tok’
)

513 
»t_code_t
 
»t
;

515 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

516 
	`NRF_PM_DEBUG_CHECK
(
´•¬e_tok’
 !ğ
PDS_PREPARE_TOKEN_INVALID
);

518 
»t
 = 
	`fds_»£rve_ÿnûl
((
fds_»£rve_tok’_t
*)&
´•¬e_tok’
);

520 ià(
»t
 !ğ
FDS_SUCCESS
)

522  
NRF_ERROR_INTERNAL
;

525  
NRF_SUCCESS
;

526 
	}
}

529 
»t_code_t
 
	$pds_³”_d©a_¡Üe
(
pm_³”_id_t
 
³”_id
,

530 
pm_³”_d©a_cÚ¡_t
 cÚ¡ * 
p_³”_d©a
,

531 
pm_´•¬e_tok’_t
 
´•¬e_tok’
,

532 
pm_¡Üe_tok’_t
 * 
p_¡Üe_tok’
)

534 
»t_code_t
 
»t
;

535 
fds_»cÜd_t
 
»c
;

536 
fds_»cÜd_desc_t
 
»c_desc
;

538 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

539 
	`NRF_PM_DEBUG_CHECK
(
p_³”_d©a
 !ğ
NULL
);

541 
	`VERIFY_PEER_ID_IN_RANGE
(
³”_id
);

542 
	`VERIFY_PEER_DATA_ID_IN_RANGE
(
p_³”_d©a
->
d©a_id
);

545 
»c
.
fe_id
 = 
	`³”_id_to_fe_id
(
³”_id
);

546 
»c
.
key
 = 
	`³”_d©a_id_to_»cÜd_key
(
p_³”_d©a
->
d©a_id
);

547 
»c
.
d©a
.
p_d©a
 = (*)
p_³”_d©a
->
p_®l_d©a
;

548 
»c
.
d©a
.
Ëngth_wÜds
 = 
p_³”_d©a
->length_words;

550 
»t
 = 
	`³”_d©a_fšd
(
³”_id
, 
p_³”_d©a
->
d©a_id
, &
»c_desc
);

552 ià(
»t
 =ğ
NRF_ERROR_NOT_FOUND
)

555 ià(
´•¬e_tok’
 =ğ
PDS_PREPARE_TOKEN_INVALID
)

558 
»t
 = 
	`fds_»cÜd_wr™e
(&
»c_desc
, &
»c
);

563 
»t
 = 
	`fds_»cÜd_wr™e_»£rved
(&
»c_desc
, &
»c
, (
fds_»£rve_tok’_t
*)&
´•¬e_tok’
);

568 ià(
´•¬e_tok’
 !ğ
PDS_PREPARE_TOKEN_INVALID
)

570 ()
	`fds_»£rve_ÿnûl
((
fds_»£rve_tok’_t
*)&
´•¬e_tok’
);

574 
»t
 = 
	`fds_»cÜd_upd©e
(&
»c_desc
, &
»c
);

577 
»t
)

579 
FDS_SUCCESS
:

580 ià(
p_¡Üe_tok’
 !ğ
NULL
)

583 ()
	`fds_»cÜd_id_äom_desc
(&
»c_desc
, (
ušt32_t
*)
p_¡Üe_tok’
);

585  
NRF_SUCCESS
;

587 
FDS_ERR_BUSY
:

588 
FDS_ERR_NO_SPACE_IN_QUEUES
:

589  
NRF_ERROR_BUSY
;

591 
FDS_ERR_NO_SPACE_IN_FLASH
:

592  
NRF_ERROR_STORAGE_FULL
;

595  
NRF_ERROR_INTERNAL
;

597 
	}
}

600 
»t_code_t
 
	$pds_³”_d©a_d–‘e
(
pm_³”_id_t
 
³”_id
, 
pm_³”_d©a_id_t
 
d©a_id
)

602 
»t_code_t
 
»t
;

603 
fds_»cÜd_desc_t
 
»cÜd_desc
;

605 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

607 
	`VERIFY_PEER_ID_IN_RANGE
(
³”_id
);

608 
	`VERIFY_PEER_DATA_ID_IN_RANGE
(
d©a_id
);

610 
»t
 = 
	`³”_d©a_fšd
(
³”_id
, 
d©a_id
, &
»cÜd_desc
);

612 ià(
»t
 !ğ
NRF_SUCCESS
)

614  
NRF_ERROR_NOT_FOUND
;

617 
»t
 = 
	`fds_»cÜd_d–‘e
(&
»cÜd_desc
);

619 
»t
)

621 
FDS_SUCCESS
:

622  
NRF_SUCCESS
;

624 
FDS_ERR_NO_SPACE_IN_QUEUES
:

625  
NRF_ERROR_BUSY
;

628  
NRF_ERROR_INTERNAL
;

630 
	}
}

633 
pm_³”_id_t
 
	$pds_³”_id_®loÿ‹
()

635 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

636  
	`³”_id_®loÿ‹
(
PM_PEER_ID_INVALID
);

637 
	}
}

640 
»t_code_t
 
	$pds_³”_id_ä“
(
pm_³”_id_t
 
³”_id
)

642 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

643 
	`VERIFY_PEER_ID_IN_RANGE
(
³”_id
);

645 ()
	`³”_id_d–‘e
(
³”_id
);

646 
	`³”_d©a_d–‘e_´oûss
();

648  
NRF_SUCCESS
;

649 
	}
}

652 
boŞ
 
	$pds_³”_id_is_®loÿ‹d
(
pm_³”_id_t
 
³”_id
)

654 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

655  
	`³”_id_is_®loÿ‹d
(
³”_id
);

656 
	}
}

659 
pm_³”_id_t
 
	$pds_Ãxt_³”_id_g‘
(
pm_³”_id_t
 
´ev_³”_id
)

661 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

662  
	`³”_id_g‘_Ãxt_u£d
(
´ev_³”_id
);

663 
	}
}

666 
pm_³”_id_t
 
	$pds_Ãxt_d–‘ed_³”_id_g‘
(
pm_³”_id_t
 
´ev_³”_id
)

668 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

669  
	`³”_id_g‘_Ãxt_d–‘ed
(
´ev_³”_id
);

670 
	}
}

673 
ušt32_t
 
	$pds_³”_couÁ_g‘
()

675 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

676  
	`³”_id_n_ids
();

677 
	}
}

	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\ble\peer_manager\peer_database.c

40 
	~"sdk_commÚ.h
"

41 #ià
NRF_MODULE_ENABLED
(
PEER_MANAGER
)

42 
	~"³”_d©aba£.h
"

44 
	~<¡ršg.h
>

45 
	~"³”_mªag”_ty³s.h
"

46 
	~"³”_mªag”_š‹º®.h
"

47 
	~"³”_d©a_¡Üage.h
"

48 
	~"pm_bufãr.h
"

56 
	#VERIFY_DATA_ID_WRITE_BUF
(
d©a_id
) \

59 ià(((
d©a_id
è!ğ
PM_PEER_DATA_ID_BONDING
è&& ((d©a_idè!ğ
PM_PEER_DATA_ID_GATT_LOCAL
)) \

61  
NRF_ERROR_INVALID_PARAM
; \

63 } 0)

	)

67 
	#PDB_EVENT_HANDLERS_CNT
 ((
m_evt_hªdËrs
è/ (m_evt_hªdËrs[0]))

	)

71 
pm_pdb_evt_hªdËr
(
pm_evt_t
 * 
p_ev’t
);

72 
sm_pdb_evt_hªdËr
(
pm_evt_t
 * 
p_ev’t
);

73 #ià!
defšed
(
PM_SERVICE_CHANGED_ENABLED
) || (PM_SERVICE_CHANGED_ENABLED == 1)

74 
gscm_pdb_evt_hªdËr
(
pm_evt_t
 * 
p_ev’t
);

76 
gcm_pdb_evt_hªdËr
(
pm_evt_t
 * 
p_ev’t
);

80 
pm_evt_hªdËr_š‹º®_t
 cÚ¡ 
	gm_evt_hªdËrs
[] =

82 
pm_pdb_evt_hªdËr
,

83 
sm_pdb_evt_hªdËr
,

84 #ià!
defšed
(
PM_SERVICE_CHANGED_ENABLED
) || (PM_SERVICE_CHANGED_ENABLED == 1)

85 
gscm_pdb_evt_hªdËr
,

87 
gcm_pdb_evt_hªdËr
,

96 
pm_³”_id_t
 
	m³”_id
;

97 
pm_³”_d©a_id_t
 
	md©a_id
;

98 
pm_´•¬e_tok’_t
 
	m´•¬e_tok’
;

99 
pm_¡Üe_tok’_t
 
	m¡Üe_tok’
;

100 
ušt8_t
 
	mn_bufs
;

101 
ušt8_t
 
	mbufãr_block_id
;

102 
ušt8_t
 
	m¡Üe_æash_fuÎ
 : 1;

103 
ušt8_t
 
	m¡Üe_busy
 : 1;

104 } 
	tpdb_bufãr_»cÜd_t
;

107 
boŞ
 
	gm_moduË_š™Ÿlized
;

108 
pm_bufãr_t
 
	gm_wr™e_bufãr
;

109 
pdb_bufãr_»cÜd_t
 
	gm_wr™e_bufãr_»cÜds
[
PM_FLASH_BUFFERS
];

110 
boŞ
 
	gm_³ndšg_¡Üe
 = 
çl£
;

118 
	$wr™e_bufãr_»cÜd_šv®id©e
(
pdb_bufãr_»cÜd_t
 * 
p_»cÜd
)

120 
p_»cÜd
->
³”_id
 = 
PM_PEER_ID_INVALID
;

121 
p_»cÜd
->
d©a_id
 = 
PM_PEER_DATA_ID_INVALID
;

122 
p_»cÜd
->
bufãr_block_id
 = 
PM_BUFFER_INVALID_ID
;

123 
p_»cÜd
->
¡Üe_busy
 = 
çl£
;

124 
p_»cÜd
->
¡Üe_æash_fuÎ
 = 
çl£
;

125 
p_»cÜd
->
n_bufs
 = 0;

126 
p_»cÜd
->
´•¬e_tok’
 = 
PDS_PREPARE_TOKEN_INVALID
;

127 
p_»cÜd
->
¡Üe_tok’
 = 
PM_STORE_TOKEN_INVALID
;

128 
	}
}

138 
pdb_bufãr_»cÜd_t
 * 
	$wr™e_bufãr_»cÜd_fšd_Ãxt
(
pm_³”_id_t
 
³”_id
, 
ušt32_t
 * 
p_šdex
)

140 
ušt32_t
 
i
 = *
p_šdex
; i < 
PM_FLASH_BUFFERS
; i++)

142 ià((
m_wr™e_bufãr_»cÜds
[
i
].
³”_id
 ==…eer_id))

144 *
p_šdex
 = 
i
;

145  &
m_wr™e_bufãr_»cÜds
[
i
];

148  
NULL
;

149 
	}
}

159 
pdb_bufãr_»cÜd_t
 * 
	$wr™e_bufãr_»cÜd_fšd
(
pm_³”_id_t
 
³”_id
,

160 
pm_³”_d©a_id_t
 
d©a_id
)

162 
ušt32_t
 
šdex
 = 0;

163 
pdb_bufãr_»cÜd_t
 * 
p_»cÜd
 = 
	`wr™e_bufãr_»cÜd_fšd_Ãxt
(
³”_id
, &
šdex
);

165 (
p_»cÜd
 !ğ
NULL
è&& ( (p_»cÜd->
d©a_id
 != data_id)

166 || (
p_»cÜd
->
¡Üe_busy
)

167 || (
p_»cÜd
->
¡Üe_æash_fuÎ
)

168 || (
p_»cÜd
->
¡Üe_tok’
 !ğ
PM_STORE_TOKEN_INVALID
)))

170 
šdex
++;

171 
p_»cÜd
 = 
	`wr™e_bufãr_»cÜd_fšd_Ãxt
(
³”_id
, &
šdex
);

174  
p_»cÜd
;

175 
	}
}

184 
pdb_bufãr_»cÜd_t
 * 
	$wr™e_bufãr_»cÜd_fšd_¡Üed
(
pm_¡Üe_tok’_t
 
¡Üe_tok’
)

186 
i
 = 0; i < 
PM_FLASH_BUFFERS
; i++)

188 ià(
m_wr™e_bufãr_»cÜds
[
i
].
¡Üe_tok’
 == store_token)

190  &
m_wr™e_bufãr_»cÜds
[
i
];

193  
NULL
;

194 
	}
}

201 
pdb_bufãr_»cÜd_t
 * 
	$wr™e_bufãr_»cÜd_fšd_unu£d
()

203  
	`wr™e_bufãr_»cÜd_fšd
(
PM_PEER_ID_INVALID
, 
PM_PEER_DATA_ID_INVALID
);

204 
	}
}

215 
	$wr™e_bufãr_»cÜd_»Ëa£
(
pdb_bufãr_»cÜd_t
 * 
p_wr™e_bufãr_»cÜd
)

217 
ušt32_t
 
i
 = 0; i < 
p_wr™e_bufãr_»cÜd
->
n_bufs
; i++)

219 
	`pm_bufãr_»Ëa£
(&
m_wr™e_bufãr
, 
p_wr™e_bufãr_»cÜd
->
bufãr_block_id
 + 
i
);

222 
	`wr™e_bufãr_»cÜd_šv®id©e
(
p_wr™e_bufãr_»cÜd
);

223 
	}
}

232 
	$wr™e_bufãr_»cÜd_acquœe
(
pdb_bufãr_»cÜd_t
 ** 
µ_wr™e_bufãr_»cÜd
,

233 
pm_³”_id_t
 
³”_id
,

234 
pm_³”_d©a_id_t
 
d©a_id
)

236 ià(
µ_wr™e_bufãr_»cÜd
 =ğ
NULL
)

240 *
µ_wr™e_bufãr_»cÜd
 = 
	`wr™e_bufãr_»cÜd_fšd_unu£d
();

241 ià(*
µ_wr™e_bufãr_»cÜd
 =ğ
NULL
)

246 (*
µ_wr™e_bufãr_»cÜd
)->
³”_id
 =…eer_id;

247 (*
µ_wr™e_bufãr_»cÜd
)->
d©a_id
 = data_id;

248 
	}
}

255 
	$pdb_evt_£nd
(
pm_evt_t
 * 
p_ev’t
)

257 
ušt32_t
 
i
 = 0; i < 
PDB_EVENT_HANDLERS_CNT
; i++)

259 
m_evt_hªdËrs
[
i
](
p_ev’t
);

261 
	}
}

268 
	$š‹º®_¡©e_»£t
()

270 
ušt32_t
 
i
 = 0; i < 
PM_FLASH_BUFFERS
; i++)

272 
	`wr™e_bufãr_»cÜd_šv®id©e
(&
m_wr™e_bufãr_»cÜds
[
i
]);

274 
	}
}

277 
	$³”_d©a_pošt_to_bufãr
(
pm_³”_d©a_t
 * 
p_³”_d©a
, 
pm_³”_d©a_id_t
 
d©a_id
, 
ušt8_t
 * 
p_bufãr_memÜy
, 
ušt16_t
 
n_bufs
)

279 
ušt16_t
 
n_by‹s
 = 
n_bufs
 * 
PDB_WRITE_BUF_SIZE
;

280 
p_³”_d©a
->
d©a_id
 = data_id;

282 
p_³”_d©a
->
p_®l_d©a
 = (
pm_³”_d©a_bÚdšg_t
 *)
p_bufãr_memÜy
;

283 
p_³”_d©a
->
Ëngth_wÜds
 = 
	`BYTES_TO_WORDS
(
n_by‹s
);

284 
	}
}

287 
	$³”_d©a_cÚ¡_pošt_to_bufãr
(
pm_³”_d©a_cÚ¡_t
 * 
p_³”_d©a
, 
pm_³”_d©a_id_t
 
d©a_id
, 
ušt8_t
 * 
p_bufãr_memÜy
, 
ušt32_t
 
n_bufs
)

289 
	`³”_d©a_pošt_to_bufãr
((
pm_³”_d©a_t
*)
p_³”_d©a
, 
d©a_id
, 
p_bufãr_memÜy
, 
n_bufs
);

290 
	}
}

293 
	$wr™e_buf_Ëngth_wÜds_£t
(
pm_³”_d©a_cÚ¡_t
 * 
p_³”_d©a
)

295 
p_³”_d©a
->
d©a_id
)

297 
PM_PEER_DATA_ID_BONDING
:

298 
p_³”_d©a
->
Ëngth_wÜds
 = 
	`PM_BONDING_DATA_N_WORDS
();

300 
PM_PEER_DATA_ID_SERVICE_CHANGED_PENDING
:

301 
p_³”_d©a
->
Ëngth_wÜds
 = 
	`PM_SC_STATE_N_WORDS
();

303 
PM_PEER_DATA_ID_PEER_RANK
:

304 
p_³”_d©a
->
Ëngth_wÜds
 = 
	`PM_USAGE_INDEX_N_WORDS
();

306 
PM_PEER_DATA_ID_GATT_LOCAL
:

307 
p_³”_d©a
->
Ëngth_wÜds
 = 
	`PM_LOCAL_DB_N_WORDS
Õ_³”_d©a->
p_loÿl_g©t_db
->
Ën
);

313 
	}
}

331 
»t_code_t
 
	$wr™e_buf_¡Üe
(
pdb_bufãr_»cÜd_t
 * 
p_wr™e_bufãr_»cÜd
)

333 
»t_code_t
 
”r_code
 = 
NRF_SUCCESS
;

334 
pm_³”_d©a_cÚ¡_t
 
³”_d©a
 = {.
d©a_id
 = 
p_wr™e_bufãr_»cÜd
->data_id};

335 
ušt8_t
 * 
p_bufãr_memÜy
;

337 
p_bufãr_memÜy
 = 
	`pm_bufãr_±r_g‘
(&
m_wr™e_bufãr
, 
p_wr™e_bufãr_»cÜd
->
bufãr_block_id
);

338 ià(
p_bufãr_memÜy
 =ğ
NULL
)

340  
NRF_ERROR_INTERNAL
;

343 
	`³”_d©a_cÚ¡_pošt_to_bufãr
(&
³”_d©a
,

344 
p_wr™e_bufãr_»cÜd
->
d©a_id
,

345 
p_bufãr_memÜy
,

346 
p_wr™e_bufãr_»cÜd
->
n_bufs
);

347 
	`wr™e_buf_Ëngth_wÜds_£t
(&
³”_d©a
);

349 
”r_code
 = 
	`pds_³”_d©a_¡Üe
(
p_wr™e_bufãr_»cÜd
->
³”_id
,

350 &
³”_d©a
,

351 
p_wr™e_bufãr_»cÜd
->
´•¬e_tok’
,

352 &
p_wr™e_bufãr_»cÜd
->
¡Üe_tok’
);

355 
”r_code
)

357 
NRF_SUCCESS
:

358 
p_wr™e_bufãr_»cÜd
->
¡Üe_busy
 = 
çl£
;

359 
p_wr™e_bufãr_»cÜd
->
¡Üe_æash_fuÎ
 = 
çl£
;

362 
NRF_ERROR_BUSY
:

363 
p_wr™e_bufãr_»cÜd
->
¡Üe_busy
 = 
Œue
;

364 
p_wr™e_bufãr_»cÜd
->
¡Üe_æash_fuÎ
 = 
çl£
;

365 
m_³ndšg_¡Üe
 = 
Œue
;

367 
”r_code
 = 
NRF_SUCCESS
;

370 
NRF_ERROR_STORAGE_FULL
:

371 
p_wr™e_bufãr_»cÜd
->
¡Üe_busy
 = 
çl£
;

372 
p_wr™e_bufãr_»cÜd
->
¡Üe_æash_fuÎ
 = 
Œue
;

373 
m_³ndšg_¡Üe
 = 
Œue
;

376 
NRF_ERROR_INVALID_PARAM
:

381 
”r_code
 = 
NRF_ERROR_INTERNAL
;

385  
”r_code
;

386 
	}
}

395 
boŞ
 
	$wr™e_buf_¡Üe_š_ev’t
(
pdb_bufãr_»cÜd_t
 * 
p_wr™e_bufãr_»cÜd
)

397 
»t_code_t
 
”r_code
;

398 
pm_evt_t
 
ev’t
;

400 
”r_code
 = 
	`wr™e_buf_¡Üe
(
p_wr™e_bufãr_»cÜd
);

401 ià(
”r_code
 !ğ
NRF_SUCCESS
)

403 
ev’t
.
cÚn_hªdË
 = 
BLE_CONN_HANDLE_INVALID
;

404 
ev’t
.
³”_id
 = 
p_wr™e_bufãr_»cÜd
->peer_id;

406 ià(
”r_code
 =ğ
NRF_ERROR_STORAGE_FULL
)

408 
ev’t
.
evt_id
 = 
PM_EVT_STORAGE_FULL
;

412 
ev’t
.
evt_id
 = 
PM_EVT_ERROR_UNEXPECTED
;

413 
ev’t
.
·¿ms
.
”rÜ_uÃx³ùed
.
”rÜ
 = 
”r_code
;

416 
	`pdb_evt_£nd
(&
ev’t
);

418  
çl£
;

421  
Œue
;

422 
	}
}

431 
	$»©‹m±_´evious_İ”©iÚs
(
boŞ
 
»Œy_æash_fuÎ
)

433 
boŞ
 
found_³ndšg_İ”©iÚ
 = 
çl£
;

435 ià(!
m_³ndšg_¡Üe
)

440 
ušt32_t
 
i
 = 0; i < 
PM_FLASH_BUFFERS
; i++)

442 ià((
m_wr™e_bufãr_»cÜds
[
i
].
¡Üe_busy
)

443 || (
m_wr™e_bufãr_»cÜds
[
i
].
¡Üe_æash_fuÎ
 && 
»Œy_æash_fuÎ
))

445 
found_³ndšg_İ”©iÚ
 = 
Œue
;

447 
boŞ
 
sucûss
 = 
	`wr™e_buf_¡Üe_š_ev’t
(&
m_wr™e_bufãr_»cÜds
[
i
]);

449 ià(!
sucûss
)

456 ià(!
found_³ndšg_İ”©iÚ
)

460 
m_³ndšg_¡Üe
 = 
çl£
;

462 
	}
}

470 
	$pdb_pds_evt_hªdËr
(
pm_evt_t
 * 
p_ev’t
)

472 
pdb_bufãr_»cÜd_t
 * 
p_wr™e_bufãr_»cÜd
;

473 
boŞ
 
evt_£nd
 = 
Œue
;

474 
boŞ
 
»Œy_æash_fuÎ
 = 
çl£
;

476 
p_wr™e_bufãr_»cÜd
 = 
	`wr™e_bufãr_»cÜd_fšd_¡Üed
(
p_ev’t
->
·¿ms
.
³”_d©a_upd©e_sucûeded
.
tok’
);

478 
p_ev’t
->
evt_id
)

480 
PM_EVT_PEER_DATA_UPDATE_SUCCEEDED
:

481 iàĞ(
p_ev’t
->
·¿ms
.
³”_d©a_upd©e_sucûeded
.
aùiÚ
 =ğ
PM_PEER_DATA_OP_UPDATE
)

482 && (
p_wr™e_bufãr_»cÜd
 !ğ
NULL
))

485 
	`wr™e_bufãr_»cÜd_»Ëa£
(
p_wr™e_bufãr_»cÜd
);

489 
PM_EVT_PEER_DATA_UPDATE_FAILED
:

490 iàĞ(
p_ev’t
->
·¿ms
.
³”_d©a_upd©e_sucûeded
.
aùiÚ
 =ğ
PM_PEER_DATA_OP_UPDATE
)

491 && (
p_wr™e_bufãr_»cÜd
 !ğ
NULL
))

494 
p_wr™e_bufãr_»cÜd
->
¡Üe_tok’
 = 
PM_STORE_TOKEN_INVALID
;

495 
p_wr™e_bufãr_»cÜd
->
¡Üe_busy
 = 
Œue
;

496 
m_³ndšg_¡Üe
 = 
Œue
;

497 
evt_£nd
 = 
çl£
;

501 
PM_EVT_FLASH_GARBAGE_COLLECTED
:

502 
»Œy_æash_fuÎ
 = 
Œue
;

509 ià(
evt_£nd
)

512 
	`pdb_evt_£nd
(
p_ev’t
);

515 
	`»©‹m±_´evious_İ”©iÚs
(
»Œy_æash_fuÎ
);

516 
	}
}

519 
»t_code_t
 
	$pdb_š™
()

521 
»t_code_t
 
»t
;

523 
	`NRF_PM_DEBUG_CHECK
(!
m_moduË_š™Ÿlized
);

525 
	`š‹º®_¡©e_»£t
();

527 
	`PM_BUFFER_INIT
(&
m_wr™e_bufãr
, 
PM_FLASH_BUFFERS
, 
PDB_WRITE_BUF_SIZE
, 
»t
);

529 ià(
»t
 !ğ
NRF_SUCCESS
)

531  
NRF_ERROR_INTERNAL
;

534 
m_moduË_š™Ÿlized
 = 
Œue
;

536  
NRF_SUCCESS
;

537 
	}
}

540 
pm_³”_id_t
 
	$pdb_³”_®loÿ‹
()

542 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

543  
	`pds_³”_id_®loÿ‹
();

544 
	}
}

547 
»t_code_t
 
	$pdb_³”_ä“
(
pm_³”_id_t
 
³”_id
)

549 
»t_code_t
 
”r_code_š
 = 
NRF_SUCCESS
;

550 
»t_code_t
 
”r_code_out
 = 
NRF_SUCCESS
;

552 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

554 
ušt32_t
 
šdex
 = 0;

555 
pdb_bufãr_»cÜd_t
 * 
p_»cÜd
 = 
	`wr™e_bufãr_»cÜd_fšd_Ãxt
(
³”_id
, &
šdex
);

557 
p_»cÜd
 !ğ
NULL
)

559 
”r_code_š
 = 
	`pdb_wr™e_buf_»Ëa£
(
³”_id
, 
p_»cÜd
->
d©a_id
);

561 iàĞ(
”r_code_š
 !ğ
NRF_SUCCESS
)

562 && (
”r_code_š
 !ğ
NRF_ERROR_NOT_FOUND
))

564 
”r_code_out
 = 
NRF_ERROR_INTERNAL
;

567 
šdex
++;

568 
p_»cÜd
 = 
	`wr™e_bufãr_»cÜd_fšd_Ãxt
(
³”_id
, &
šdex
);

571 ià(
”r_code_out
 =ğ
NRF_SUCCESS
)

573 
”r_code_š
 = 
	`pds_³”_id_ä“
(
³”_id
);

575 ià(
”r_code_š
 =ğ
NRF_SUCCESS
)

579 ià(
”r_code_š
 =ğ
NRF_ERROR_INVALID_PARAM
)

581 
”r_code_out
 = 
NRF_ERROR_INVALID_PARAM
;

585 
”r_code_out
 = 
NRF_ERROR_INTERNAL
;

589  
”r_code_out
;

590 
	}
}

593 
»t_code_t
 
	$pdb_³”_d©a_±r_g‘
(
pm_³”_id_t
 
³”_id
,

594 
pm_³”_d©a_id_t
 
d©a_id
,

595 
pm_³”_d©a_æash_t
 * cÚ¡ 
p_³”_d©a
)

597 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

598 
	`NRF_PM_DEBUG_CHECK
(
p_³”_d©a
 !ğ
NULL
);

601  
	`pds_³”_d©a_»ad
(
³”_id
, 
d©a_id
, (
pm_³”_d©a_t
*)
p_³”_d©a
, 
NULL
);

602 
	}
}

606 
»t_code_t
 
	$pdb_wr™e_buf_g‘
(
pm_³”_id_t
 
³”_id
,

607 
pm_³”_d©a_id_t
 
d©a_id
,

608 
ušt32_t
 
n_bufs
,

609 
pm_³”_d©a_t
 * 
p_³”_d©a
)

611 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

613 
	`VERIFY_PARAM_NOT_NULL
(
p_³”_d©a
);

614 
	`VERIFY_DATA_ID_WRITE_BUF
(
d©a_id
);

616 iàĞ(
n_bufs
 == 0)

617 || (
n_bufs
 > 
PM_FLASH_BUFFERS
)

618 || !
	`pds_³”_id_is_®loÿ‹d
(
³”_id
))

620  
NRF_ERROR_INVALID_PARAM
;

623 
pdb_bufãr_»cÜd_t
 * 
p_wr™e_bufãr_»cÜd
;

624 
ušt8_t
 * 
p_bufãr_memÜy
;

625 
boŞ
 
Ãw_»cÜd
 = 
çl£
;

627 
p_wr™e_bufãr_»cÜd
 = 
	`wr™e_bufãr_»cÜd_fšd
(
³”_id
, 
d©a_id
);

629 ià(
p_wr™e_bufãr_»cÜd
 =ğ
NULL
)

632 
	`wr™e_bufãr_»cÜd_acquœe
(&
p_wr™e_bufãr_»cÜd
, 
³”_id
, 
d©a_id
);

633 ià(
p_wr™e_bufãr_»cÜd
 =ğ
NULL
)

635  
NRF_ERROR_BUSY
;

638 ià(
p_wr™e_bufãr_»cÜd
->
n_bufs
 !=‚_bufs)

641  
NRF_ERROR_FORBIDDEN
;

644 ià(
p_wr™e_bufãr_»cÜd
->
bufãr_block_id
 =ğ
PM_BUFFER_INVALID_ID
)

646 
p_wr™e_bufãr_»cÜd
->
bufãr_block_id
 = 
	`pm_bufãr_block_acquœe
(&
m_wr™e_bufãr
, 
n_bufs
);

648 ià(
p_wr™e_bufãr_»cÜd
->
bufãr_block_id
 =ğ
PM_BUFFER_INVALID_ID
)

650 
	`wr™e_bufãr_»cÜd_šv®id©e
(
p_wr™e_bufãr_»cÜd
);

651  
NRF_ERROR_BUSY
;

654 
Ãw_»cÜd
 = 
Œue
;

657 
p_wr™e_bufãr_»cÜd
->
n_bufs
 =‚_bufs;

659 
p_bufãr_memÜy
 = 
	`pm_bufãr_±r_g‘
(&
m_wr™e_bufãr
, 
p_wr™e_bufãr_»cÜd
->
bufãr_block_id
);

661 ià(
p_bufãr_memÜy
 =ğ
NULL
)

663  
NRF_ERROR_INTERNAL
;

666 
	`³”_d©a_pošt_to_bufãr
(
p_³”_d©a
, 
d©a_id
, 
p_bufãr_memÜy
, 
n_bufs
);

667 ià(
Ãw_»cÜd
 && (
d©a_id
 =ğ
PM_PEER_DATA_ID_GATT_LOCAL
))

669 
p_³”_d©a
->
p_loÿl_g©t_db
->
Ën
 = 
	`PM_LOCAL_DB_LEN
Õ_³”_d©a->
Ëngth_wÜds
);

672  
NRF_SUCCESS
;

673 
	}
}

676 
»t_code_t
 
	$pdb_wr™e_buf_»Ëa£
(
pm_³”_id_t
 
³”_id
, 
pm_³”_d©a_id_t
 
d©a_id
)

678 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

680 
»t_code_t
 
”r_code
 = 
NRF_SUCCESS
;

681 
pdb_bufãr_»cÜd_t
 * 
p_wr™e_bufãr_»cÜd
;

682 
p_wr™e_bufãr_»cÜd
 = 
	`wr™e_bufãr_»cÜd_fšd
(
³”_id
, 
d©a_id
);

684 ià(
p_wr™e_bufãr_»cÜd
 =ğ
NULL
)

686  
NRF_ERROR_NOT_FOUND
;

689 ià(
p_wr™e_bufãr_»cÜd
->
´•¬e_tok’
 !ğ
PDS_PREPARE_TOKEN_INVALID
)

691 
”r_code
 = 
	`pds_¥aû_»£rve_ÿnûl
(
p_wr™e_bufãr_»cÜd
->
´•¬e_tok’
);

692 ià(
”r_code
 !ğ
NRF_SUCCESS
)

694 
”r_code
 = 
NRF_ERROR_INTERNAL
;

698 
	`wr™e_bufãr_»cÜd_»Ëa£
(
p_wr™e_bufãr_»cÜd
);

700  
”r_code
;

701 
	}
}

704 
»t_code_t
 
	$pdb_wr™e_buf_¡Üe_´•¬e
(
pm_³”_id_t
 
³”_id
, 
pm_³”_d©a_id_t
 
d©a_id
)

706 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

708 
	`VERIFY_DATA_ID_WRITE_BUF
(
d©a_id
);

710 
»t_code_t
 
”r_code
 = 
NRF_SUCCESS
;

711 
pdb_bufãr_»cÜd_t
 * 
p_wr™e_bufãr_»cÜd
;

712 
p_wr™e_bufãr_»cÜd
 = 
	`wr™e_bufãr_»cÜd_fšd
(
³”_id
, 
d©a_id
);

714 ià(
p_wr™e_bufãr_»cÜd
 =ğ
NULL
)

716  
NRF_ERROR_NOT_FOUND
;

719 ià(
p_wr™e_bufãr_»cÜd
->
´•¬e_tok’
 =ğ
PDS_PREPARE_TOKEN_INVALID
)

721 
ušt8_t
 * 
p_bufãr_memÜy
 = 
	`pm_bufãr_±r_g‘
(&
m_wr™e_bufãr
,

722 
p_wr™e_bufãr_»cÜd
->
bufãr_block_id
);

723 
pm_³”_d©a_cÚ¡_t
 
³”_d©a
 = {.
d©a_id
 = data_id};

725 ià(
p_bufãr_memÜy
 =ğ
NULL
)

727  
NRF_ERROR_INTERNAL
;

730 
	`³”_d©a_cÚ¡_pošt_to_bufãr
(&
³”_d©a
, 
d©a_id
, 
p_bufãr_memÜy
, 
p_wr™e_bufãr_»cÜd
->
n_bufs
);

732 
	`wr™e_buf_Ëngth_wÜds_£t
(&
³”_d©a
);

734 
”r_code
 = 
	`pds_¥aû_»£rve
(&
³”_d©a
, &
p_wr™e_bufãr_»cÜd
->
´•¬e_tok’
);

735 ià(
”r_code
 =ğ
NRF_ERROR_INVALID_LENGTH
)

737  
NRF_ERROR_INTERNAL
;

741  
”r_code
;

742 
	}
}

745 
»t_code_t
 
	$pdb_wr™e_buf_¡Üe
(
pm_³”_id_t
 
³”_id
,

746 
pm_³”_d©a_id_t
 
d©a_id
,

747 
pm_³”_id_t
 
Ãw_³”_id
)

749 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

751 
	`VERIFY_DATA_ID_WRITE_BUF
(
d©a_id
);

753 
pdb_bufãr_»cÜd_t
 * 
p_wr™e_bufãr_»cÜd
 = 
	`wr™e_bufãr_»cÜd_fšd
(
³”_id
, 
d©a_id
);

755 ià(
p_wr™e_bufãr_»cÜd
 =ğ
NULL
)

757  
NRF_ERROR_NOT_FOUND
;

760 
p_wr™e_bufãr_»cÜd
->
³”_id
 = 
Ãw_³”_id
;

761 
p_wr™e_bufãr_»cÜd
->
d©a_id
 = data_id;

762  
	`wr™e_buf_¡Üe
(
p_wr™e_bufãr_»cÜd
);

763 
	}
}

766 
»t_code_t
 
	$pdb_ş—r
(
pm_³”_id_t
 
³”_id
, 
pm_³”_d©a_id_t
 
d©a_id
)

768 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

769  
	`pds_³”_d©a_d–‘e
(
³”_id
, 
d©a_id
);

770 
	}
}

773 
ušt32_t
 
	$pdb_n_³”s
()

775 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

776  
	`pds_³”_couÁ_g‘
();

777 
	}
}

780 
pm_³”_id_t
 
	$pdb_Ãxt_³”_id_g‘
(
pm_³”_id_t
 
´ev_³”_id
)

782 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

783  
	`pds_Ãxt_³”_id_g‘
(
´ev_³”_id
);

784 
	}
}

787 
pm_³”_id_t
 
	$pdb_Ãxt_d–‘ed_³”_id_g‘
(
pm_³”_id_t
 
´ev_³”_id
)

789 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

790  
	`pds_Ãxt_d–‘ed_³”_id_g‘
(
´ev_³”_id
);

791 
	}
}

794 
»t_code_t
 
	$pdb_³”_d©a_lßd
(
pm_³”_id_t
 
³”_id
,

795 
pm_³”_d©a_id_t
 
d©a_id
,

796 
pm_³”_d©a_t
 * cÚ¡ 
p_³”_d©a
)

798 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

799 
	`NRF_PM_DEBUG_CHECK
(
p_³”_d©a
 !ğ
NULL
);

802 
ušt32_t
 cÚ¡ 
d©a_Ën_by‹s
 = (
p_³”_d©a
->
Ëngth_wÜds
 * (uint32_t));

803  
	`pds_³”_d©a_»ad
(
³”_id
, 
d©a_id
, 
p_³”_d©a
, &
d©a_Ën_by‹s
);

804 
	}
}

807 
»t_code_t
 
	$pdb_¿w_¡Üe
(
pm_³”_id_t
 
³”_id
,

808 
pm_³”_d©a_cÚ¡_t
 * 
p_³”_d©a
,

809 
pm_¡Üe_tok’_t
 * 
p_¡Üe_tok’
)

811 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

812  
	`pds_³”_d©a_¡Üe
(
³”_id
, 
p_³”_d©a
, 
PDS_PREPARE_TOKEN_INVALID
, 
p_¡Üe_tok’
);

813 
	}
}

	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\ble\peer_manager\peer_id.c

40 
	~"sdk_commÚ.h
"

41 #ià
NRF_MODULE_ENABLED
(
PEER_MANAGER
)

42 
	~"³”_id.h
"

44 
	~<¡dšt.h
>

45 
	~<¡ršg.h
>

46 
	~"sdk_”rÜs.h
"

47 
	~"³”_mªag”_ty³s.h
"

48 
	~"pm_mu‹x.h
"

53 
ušt8_t
 
	mu£d_³”_ids
[
MUTEX_STORAGE_SIZE
(
PM_PEER_ID_N_AVAILABLE_IDS
)];

54 
ušt8_t
 
	md–‘ed_³”_ids
[
MUTEX_STORAGE_SIZE
(
PM_PEER_ID_N_AVAILABLE_IDS
)];

55 } 
	tpi_t
;

58 
pi_t
 
	gm_pi
 = {{0}, {0}};

61 
	$š‹º®_¡©e_»£t
(
pi_t
 * 
p_pi
)

63 
	`mem£t
(
p_pi
, 0, (
pi_t
));

64 
	}
}

67 
	$³”_id_š™
()

69 
	`š‹º®_¡©e_»£t
(&
m_pi
);

70 
	`pm_mu‹x_š™
(
m_pi
.
u£d_³”_ids
, 
PM_PEER_ID_N_AVAILABLE_IDS
);

71 
	`pm_mu‹x_š™
(
m_pi
.
d–‘ed_³”_ids
, 
PM_PEER_ID_N_AVAILABLE_IDS
);

72 
	}
}

75 
pm_³”_id_t
 
	$şaim
(
pm_³”_id_t
 
³”_id
, 
ušt8_t
 * 
mu‹x_group
)

77 
pm_³”_id_t
 
®loÿ‹d_³”_id
 = 
PM_PEER_ID_INVALID
;

78 ià(
³”_id
 =ğ
PM_PEER_ID_INVALID
)

80 
®loÿ‹d_³”_id
 = 
	`pm_mu‹x_lock_fœ¡_avaabË
(
mu‹x_group
, 
PM_PEER_ID_N_AVAILABLE_IDS
);

81 ià(
®loÿ‹d_³”_id
 =ğ
PM_PEER_ID_N_AVAILABLE_IDS
)

83 
®loÿ‹d_³”_id
 = 
PM_PEER_ID_INVALID
;

86 ià(
³”_id
 < 
PM_PEER_ID_N_AVAILABLE_IDS
)

88 
boŞ
 
lock_sucûss
 = 
	`pm_mu‹x_lock
(
mu‹x_group
, 
³”_id
);

89 
®loÿ‹d_³”_id
 = 
lock_sucûss
 ? 
³”_id
 : 
PM_PEER_ID_INVALID
;

91  
®loÿ‹d_³”_id
;

92 
	}
}

95 
	$»Ëa£
(
pm_³”_id_t
 
³”_id
, 
ušt8_t
 * 
mu‹x_group
)

97 ià(
³”_id
 < 
PM_PEER_ID_N_AVAILABLE_IDS
)

99 
	`pm_mu‹x_uÆock
(
mu‹x_group
, 
³”_id
);

101 
	}
}

104 
pm_³”_id_t
 
	$³”_id_®loÿ‹
(
pm_³”_id_t
 
³”_id
)

106  
	`şaim
(
³”_id
, 
m_pi
.
u£d_³”_ids
);

107 
	}
}

110 
boŞ
 
	$³”_id_d–‘e
(
pm_³”_id_t
 
³”_id
)

112 
pm_³”_id_t
 
d–‘ed_³”_id
;

114 ià(
³”_id
 =ğ
PM_PEER_ID_INVALID
)

116  
çl£
;

119 
d–‘ed_³”_id
 = 
	`şaim
(
³”_id
, 
m_pi
.
d–‘ed_³”_ids
);

121  (
d–‘ed_³”_id
 =ğ
³”_id
);

122 
	}
}

125 
	$³”_id_ä“
(
pm_³”_id_t
 
³”_id
)

127 
	`»Ëa£
(
³”_id
, 
m_pi
.
u£d_³”_ids
);

128 
	`»Ëa£
(
³”_id
, 
m_pi
.
d–‘ed_³”_ids
);

129 
	}
}

132 
boŞ
 
	$³”_id_is_®loÿ‹d
(
pm_³”_id_t
 
³”_id
)

134 ià(
³”_id
 < 
PM_PEER_ID_N_AVAILABLE_IDS
)

136  
	`pm_mu‹x_lock_¡©us_g‘
(
m_pi
.
u£d_³”_ids
, 
³”_id
);

138  
çl£
;

139 
	}
}

142 
boŞ
 
	$³”_id_is_d–‘ed
(
pm_³”_id_t
 
³”_id
)

144 ià(
³”_id
 < 
PM_PEER_ID_N_AVAILABLE_IDS
)

146  
	`pm_mu‹x_lock_¡©us_g‘
(
m_pi
.
d–‘ed_³”_ids
, 
³”_id
);

148  
çl£
;

149 
	}
}

152 
pm_³”_id_t
 
	$Ãxt_id_g‘
(
pm_³”_id_t
 
´ev_³”_id
, 
ušt8_t
 * 
mu‹x_group
)

154 
pm_³”_id_t
 
i
 = (
´ev_³”_id
 =ğ
PM_PEER_ID_INVALID
) ? 0 : (prev_peer_id + 1);

155 ; 
i
 < 
PM_PEER_ID_N_AVAILABLE_IDS
; i++)

157 ià(
	`pm_mu‹x_lock_¡©us_g‘
(
mu‹x_group
, 
i
))

159  
i
;

163  
PM_PEER_ID_INVALID
;

164 
	}
}

167 
pm_³”_id_t
 
	$³”_id_g‘_Ãxt_u£d
(
pm_³”_id_t
 
³”_id
)

169 
³”_id
 = 
	`Ãxt_id_g‘
Õ“r_id, 
m_pi
.
u£d_³”_ids
);

171 
³”_id
 !ğ
PM_PEER_ID_INVALID
)

173 ià(!
	`³”_id_is_d–‘ed
(
³”_id
))

175  
³”_id
;

178 
³”_id
 = 
	`Ãxt_id_g‘
Õ“r_id, 
m_pi
.
u£d_³”_ids
);

181  
³”_id
;

182 
	}
}

185 
pm_³”_id_t
 
	$³”_id_g‘_Ãxt_d–‘ed
(
pm_³”_id_t
 
´ev_³”_id
)

187  
	`Ãxt_id_g‘
(
´ev_³”_id
, 
m_pi
.
d–‘ed_³”_ids
);

188 
	}
}

191 
ušt32_t
 
	$³”_id_n_ids
()

193 
ušt32_t
 
n_ids
 = 0;

195 
pm_³”_id_t
 
i
 = 0; i < 
PM_PEER_ID_N_AVAILABLE_IDS
; i++)

197 
n_ids
 +ğ
	`pm_mu‹x_lock_¡©us_g‘
(
m_pi
.
u£d_³”_ids
, 
i
);

200  
n_ids
;

201 
	}
}

	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\ble\peer_manager\peer_manager.c

40 
	~"sdk_commÚ.h
"

41 #ià
NRF_MODULE_ENABLED
(
PEER_MANAGER
)

42 
	~"bË_”r.h
"

43 
	~"³”_mªag”.h
"

44 
	~<¡ršg.h
>

45 
	~"£cur™y_mªag”.h
"

46 
	~"£cur™y_di¥©ch”.h
"

47 
	~"g©t_ÿche_mªag”.h
"

48 
	~"g©ts_ÿche_mªag”.h
"

49 
	~"³”_d©aba£.h
"

50 
	~"³”_d©a_¡Üage.h
"

51 
	~"id_mªag”.h
"

52 
	~"bË_cÚn_¡©e.h
"

53 
	~"³”_mªag”_š‹º®.h
"

54 
	~"Äf_sdh_bË.h
"

56 #iâdeà
PM_PEER_RANKS_ENABLED


57 
	#PM_PEER_RANKS_ENABLED
 1

	)

60 
	#MODULE_INITIALIZED
 (
m_moduË_š™Ÿlized
è

	)

63 
boŞ
 
	gm_moduË_š™Ÿlized
;

64 
boŞ
 
	gm_³”_¿nk_š™Ÿlized
;

65 
boŞ
 
	gm_d–‘šg_®l
;

66 
pm_¡Üe_tok’_t
 
	gm_³”_¿nk_tok’
;

67 
ušt32_t
 
	gm_cu¼’t_highe¡_³”_¿nk
;

68 
pm_³”_id_t
 
	gm_highe¡_¿nked_³”
;

69 
pm_evt_hªdËr_t
 
	gm_evt_hªdËrs
[
PM_MAX_REGISTRANTS
];

70 
ušt8_t
 
	gm_n_»gi¡¿Ás
;

77 
	$evt_£nd
(
pm_evt_t
 cÚ¡ * 
p_pm_evt
)

79 
i
 = 0; i < 
m_n_»gi¡¿Ás
; i++)

81 
m_evt_hªdËrs
[
i
](
p_pm_evt
);

83 
	}
}

86 #ià
PM_PEER_RANKS_ENABLED
 == 1

89 
	$¿nk_v¬s_upd©e
()

91 
»t_code_t
 
”r_code
 = 
	`pm_³”_¿nks_g‘
(&
m_highe¡_¿nked_³”
,

92 &
m_cu¼’t_highe¡_³”_¿nk
,

93 
NULL
,

94 
NULL
);

96 
m_³”_¿nk_š™Ÿlized
 = ((
”r_code
 =ğ
NRF_SUCCESS
è|| (”r_cod=ğ
NRF_ERROR_NOT_FOUND
));

97 
	}
}

106 
	$pm_pdb_evt_hªdËr
(
pm_evt_t
 * 
p_pdb_evt
)

108 
boŞ
 
£nd_evt
 = 
Œue
;

110 
p_pdb_evt
->
cÚn_hªdË
 = 
	`im_cÚn_hªdË_g‘
Õ_pdb_evt->
³”_id
);

112 
p_pdb_evt
->
evt_id
)

114 #ià
PM_PEER_RANKS_ENABLED
 == 1

115 
PM_EVT_PEER_DATA_UPDATE_SUCCEEDED
:

116 ià(
p_pdb_evt
->
·¿ms
.
³”_d©a_upd©e_sucûeded
.
aùiÚ
 =ğ
PM_PEER_DATA_OP_UPDATE
)

118 iàĞ(
m_³”_¿nk_tok’
 !ğ
PM_STORE_TOKEN_INVALID
)

119 && (
m_³”_¿nk_tok’
 =ğ
p_pdb_evt
->
·¿ms
.
³”_d©a_upd©e_sucûeded
.
tok’
))

121 
m_³”_¿nk_tok’
 = 
PM_STORE_TOKEN_INVALID
;

122 
m_highe¡_¿nked_³”
 = 
p_pdb_evt
->
³”_id
;

124 
p_pdb_evt
->
·¿ms
.
³”_d©a_upd©e_sucûeded
.
tok’
 = 
PM_STORE_TOKEN_INVALID
;

126 iàĞ
m_³”_¿nk_š™Ÿlized


127 && (
p_pdb_evt
->
³”_id
 =ğ
m_highe¡_¿nked_³”
)

128 && (
p_pdb_evt
->
·¿ms
.
³”_d©a_upd©e_sucûeded
.
d©a_id


129 =ğ
PM_PEER_DATA_ID_PEER_RANK
))

132 
	`¿nk_v¬s_upd©e
();

135 ià(
p_pdb_evt
->
·¿ms
.
³”_d©a_upd©e_sucûeded
.
aùiÚ
 =ğ
PM_PEER_DATA_OP_DELETE
)

137 iàĞ
m_³”_¿nk_š™Ÿlized


138 && (
p_pdb_evt
->
³”_id
 =ğ
m_highe¡_¿nked_³”
)

139 && (
p_pdb_evt
->
·¿ms
.
³”_d©a_upd©e_sucûeded
.
d©a_id
 =ğ
PM_PEER_DATA_ID_PEER_RANK
))

142 
	`¿nk_v¬s_upd©e
();

147 
PM_EVT_PEER_DATA_UPDATE_FAILED
:

148 ià(
p_pdb_evt
->
·¿ms
.
³”_d©a_upd©e_sucûeded
.
aùiÚ
 =ğ
PM_PEER_DATA_OP_UPDATE
)

150 iàĞ(
m_³”_¿nk_tok’
 !ğ
PM_STORE_TOKEN_INVALID
)

151 && (
m_³”_¿nk_tok’
 =ğ
p_pdb_evt
->
·¿ms
.
³”_d©a_upd©e_çed
.
tok’
))

153 
m_³”_¿nk_tok’
 = 
PM_STORE_TOKEN_INVALID
;

154 
m_cu¼’t_highe¡_³”_¿nk
 -= 1;

156 
p_pdb_evt
->
·¿ms
.
³”_d©a_upd©e_sucûeded
.
tok’
 = 
PM_STORE_TOKEN_INVALID
;

162 
PM_EVT_PEER_DELETE_SUCCEEDED
:

164 ià(
m_d–‘šg_®l


165 && (
	`pdb_Ãxt_³”_id_g‘
(
PM_PEER_ID_INVALID
) == PM_PEER_ID_INVALID)

166 && (
	`pdb_Ãxt_d–‘ed_³”_id_g‘
(
PM_PEER_ID_INVALID
) == PM_PEER_ID_INVALID))

169 
m_d–‘šg_®l
 = 
çl£
;

171 
pm_evt_t
 
pm_d–‘e_®l_evt
;

172 
	`mem£t
(&
pm_d–‘e_®l_evt
, 0, (
pm_evt_t
));

173 
pm_d–‘e_®l_evt
.
evt_id
 = 
PM_EVT_PEERS_DELETE_SUCCEEDED
;

174 
pm_d–‘e_®l_evt
.
³”_id
 = 
PM_PEER_ID_INVALID
;

175 
pm_d–‘e_®l_evt
.
cÚn_hªdË
 = 
BLE_CONN_HANDLE_INVALID
;

177 
£nd_evt
 = 
çl£
;

180 
	`evt_£nd
(
p_pdb_evt
);

181 
	`evt_£nd
(&
pm_d–‘e_®l_evt
);

184 #ià
PM_PEER_RANKS_ENABLED
 == 1

185 ià(
m_³”_¿nk_š™Ÿlized
 && (
p_pdb_evt
->
³”_id
 =ğ
m_highe¡_¿nked_³”
))

188 
	`¿nk_v¬s_upd©e
();

193 
PM_EVT_PEER_DELETE_FAILED
:

194 ià(
m_d–‘šg_®l
)

198 
m_d–‘šg_®l
 = 
çl£
;

200 
pm_evt_t
 
pm_d–‘e_®l_evt
;

201 
	`mem£t
(&
pm_d–‘e_®l_evt
, 0, (
pm_evt_t
));

202 
pm_d–‘e_®l_evt
.
evt_id
 = 
PM_EVT_PEERS_DELETE_FAILED
;

203 
pm_d–‘e_®l_evt
.
³”_id
 = 
PM_PEER_ID_INVALID
;

204 
pm_d–‘e_®l_evt
.
cÚn_hªdË
 = 
BLE_CONN_HANDLE_INVALID
;

205 
pm_d–‘e_®l_evt
.
·¿ms
.
³”s_d–‘e_çed_evt
.
”rÜ


206 ğ
p_pdb_evt
->
·¿ms
.
³”_d–‘e_çed
.
”rÜ
;

208 
£nd_evt
 = 
çl£
;

211 
	`evt_£nd
(
p_pdb_evt
);

212 
	`evt_£nd
(&
pm_d–‘e_®l_evt
);

221 ià(
£nd_evt
)

224 
	`evt_£nd
(
p_pdb_evt
);

226 
	}
}

234 
	$pm_sm_evt_hªdËr
(
pm_evt_t
 * 
p_sm_evt
)

236 
	`VERIFY_PARAM_NOT_NULL_VOID
(
p_sm_evt
);

239 
	`evt_£nd
(
p_sm_evt
);

240 
	}
}

248 
	$pm_gcm_evt_hªdËr
(
pm_evt_t
 * 
p_gcm_evt
)

251 
	`evt_£nd
(
p_gcm_evt
);

252 
	}
}

260 
	$pm_im_evt_hªdËr
(
pm_evt_t
 * 
p_im_evt
)

263 
	`evt_£nd
(
p_im_evt
);

264 
	}
}

272 
	$bË_evt_hªdËr
(
bË_evt_t
 cÚ¡ * 
p_bË_evt
, * 
p_cÚ‹xt
)

274 
	`VERIFY_MODULE_INITIALIZED_VOID
();

276 
	`im_bË_evt_hªdËr
(
p_bË_evt
);

277 
	`sm_bË_evt_hªdËr
(
p_bË_evt
);

278 
	`gcm_bË_evt_hªdËr
(
p_bË_evt
);

279 
	}
}

281 
NRF_SDH_BLE_OBSERVER
(
m_bË_evt_ob£rv”
, 
PM_BLE_OBSERVER_PRIO
, 
bË_evt_hªdËr
, 
NULL
);

286 
	$š‹º®_¡©e_»£t
()

288 
m_highe¡_¿nked_³”
 = 
PM_PEER_ID_INVALID
;

289 
m_³”_¿nk_tok’
 = 
PM_STORE_TOKEN_INVALID
;

290 
	}
}

293 
»t_code_t
 
	$pm_š™
()

295 
»t_code_t
 
”r_code
;

297 
”r_code
 = 
	`pds_š™
();

298 ià(
”r_code
 !ğ
NRF_SUCCESS
)

300  
NRF_ERROR_INTERNAL
;

303 
”r_code
 = 
	`pdb_š™
();

304 ià(
”r_code
 !ğ
NRF_SUCCESS
)

306  
NRF_ERROR_INTERNAL
;

309 
”r_code
 = 
	`sm_š™
();

310 ià(
”r_code
 !ğ
NRF_SUCCESS
)

312  
NRF_ERROR_INTERNAL
;

315 
”r_code
 = 
	`smd_š™
();

316 ià(
”r_code
 !ğ
NRF_SUCCESS
)

318  
NRF_ERROR_INTERNAL
;

321 
”r_code
 = 
	`gcm_š™
();

322 ià(
”r_code
 !ğ
NRF_SUCCESS
)

324  
NRF_ERROR_INTERNAL
;

327 
”r_code
 = 
	`gscm_š™
();

328 ià(
”r_code
 !ğ
NRF_SUCCESS
)

330  
NRF_ERROR_INTERNAL
;

333 
”r_code
 = 
	`im_š™
();

334 ià(
”r_code
 !ğ
NRF_SUCCESS
)

336  
NRF_ERROR_INTERNAL
;

339 
	`š‹º®_¡©e_»£t
();

341 
m_³”_¿nk_š™Ÿlized
 = 
çl£
;

342 
m_moduË_š™Ÿlized
 = 
Œue
;

345 
	`UNUSED_VARIABLE
(
m_³”_¿nk_š™Ÿlized
);

346 
	`UNUSED_VARIABLE
(
m_³”_¿nk_tok’
);

347 
	`UNUSED_VARIABLE
(
m_cu¼’t_highe¡_³”_¿nk
);

348 
	`UNUSED_VARIABLE
(
m_highe¡_¿nked_³”
);

350  
NRF_SUCCESS
;

351 
	}
}

354 
»t_code_t
 
	$pm_»gi¡”
(
pm_evt_hªdËr_t
 
ev’t_hªdËr
)

356 
	`VERIFY_MODULE_INITIALIZED
();

358 ià(
m_n_»gi¡¿Ás
 >ğ
PM_MAX_REGISTRANTS
)

360  
NRF_ERROR_NO_MEM
;

363 
m_evt_hªdËrs
[
m_n_»gi¡¿Ás
] = 
ev’t_hªdËr
;

364 
m_n_»gi¡¿Ás
 += 1;

366  
NRF_SUCCESS
;

367 
	}
}

370 
»t_code_t
 
	$pm_£c_·¿ms_£t
(
bË_g­_£c_·¿ms_t
 * 
p_£c_·¿ms
)

372 
	`VERIFY_MODULE_INITIALIZED
();

374 
»t_code_t
 
”r_code
;

376 
”r_code
 = 
	`sm_£c_·¿ms_£t
(
p_£c_·¿ms
);

380  
”r_code
;

381 
	}
}

384 
»t_code_t
 
	$pm_cÚn_£cu»
(
ušt16_t
 
cÚn_hªdË
, 
boŞ
 
fÜû_»·œšg
)

386 
	`VERIFY_MODULE_INITIALIZED
();

388 
»t_code_t
 
”r_code
;

390 
”r_code
 = 
	`sm_lšk_£cu»
(
cÚn_hªdË
, 
fÜû_»·œšg
);

392 ià(
”r_code
 =ğ
NRF_ERROR_INVALID_STATE
)

394 
”r_code
 = 
NRF_ERROR_BUSY
;

397  
”r_code
;

398 
	}
}

401 
	$pm_cÚn_£c_cÚfig_»¶y
(
ušt16_t
 
cÚn_hªdË
, 
pm_cÚn_£c_cÚfig_t
 * 
p_cÚn_£c_cÚfig
)

403 ià(
p_cÚn_£c_cÚfig
 !ğ
NULL
)

405 
	`sm_cÚn_£c_cÚfig_»¶y
(
cÚn_hªdË
, 
p_cÚn_£c_cÚfig
);

407 
	}
}

410 
»t_code_t
 
	$pm_cÚn_£c_·¿ms_»¶y
(
ušt16_t
 
cÚn_hªdË
,

411 
bË_g­_£c_·¿ms_t
 * 
p_£c_·¿ms
,

412 cÚ¡ * 
p_cÚ‹xt
)

414 
	`VERIFY_MODULE_INITIALIZED
();

416  
	`sm_£c_·¿ms_»¶y
(
cÚn_hªdË
, 
p_£c_·¿ms
, 
p_cÚ‹xt
);

417 
	}
}

420 
	$pm_loÿl_d©aba£_has_chªged
()

422 #ià!
	`defšed
(
PM_SERVICE_CHANGED_ENABLED
) || (PM_SERVICE_CHANGED_ENABLED == 1)

423 
	`VERIFY_MODULE_INITIALIZED_VOID
();

425 
	`gcm_loÿl_d©aba£_has_chªged
();

427 
	}
}

430 
»t_code_t
 
	$pm_id_addr_£t
(
bË_g­_addr_t
 cÚ¡ * 
p_addr
)

432 
	`VERIFY_MODULE_INITIALIZED
();

433  
	`im_id_addr_£t
(
p_addr
);

434 
	}
}

437 
»t_code_t
 
	$pm_id_addr_g‘
(
bË_g­_addr_t
 * 
p_addr
)

439 
	`VERIFY_MODULE_INITIALIZED
();

440 
	`VERIFY_PARAM_NOT_NULL
(
p_addr
);

441  
	`im_id_addr_g‘
(
p_addr
);

442 
	}
}

445 
»t_code_t
 
	$pm_´ivacy_£t
(
pm_´ivacy_·¿ms_t
 cÚ¡ * 
p_´ivacy_·¿ms
)

447 
	`VERIFY_MODULE_INITIALIZED
();

448 
	`VERIFY_PARAM_NOT_NULL
(
p_´ivacy_·¿ms
);

449  
	`im_´ivacy_£t
(
p_´ivacy_·¿ms
);

450 
	}
}

453 
»t_code_t
 
	$pm_´ivacy_g‘
(
pm_´ivacy_·¿ms_t
 * 
p_´ivacy_·¿ms
)

455 
	`VERIFY_MODULE_INITIALIZED
();

456 
	`VERIFY_PARAM_NOT_NULL
(
p_´ivacy_·¿ms
);

457 
	`VERIFY_PARAM_NOT_NULL
(
p_´ivacy_·¿ms
->
p_deviû_œk
);

458  
	`im_´ivacy_g‘
(
p_´ivacy_·¿ms
);

459 
	}
}

462 
boŞ
 
	$pm_add»ss_»sŞve
(
bË_g­_addr_t
 cÚ¡ * 
p_addr
, 
bË_g­_œk_t
 cÚ¡ * 
p_œk
)

464 
	`VERIFY_MODULE_INITIALIZED
();

466 ià((
p_addr
 =ğ
NULL
è|| (
p_œk
 == NULL))

468  
çl£
;

472  
	`im_add»ss_»sŞve
(
p_addr
, 
p_œk
);

474 
	}
}

477 
»t_code_t
 
	$pm_wh™–i¡_£t
(
pm_³”_id_t
 cÚ¡ * 
p_³”s
,

478 
ušt32_t
 
³”_út
)

480 
	`VERIFY_MODULE_INITIALIZED
();

481  
	`im_wh™–i¡_£t
(
p_³”s
, 
³”_út
);

482 
	}
}

485 
»t_code_t
 
	$pm_wh™–i¡_g‘
(
bË_g­_addr_t
 * 
p_addrs
,

486 
ušt32_t
 * 
p_addr_út
,

487 
bË_g­_œk_t
 * 
p_œks
,

488 
ušt32_t
 * 
p_œk_út
)

490 
	`VERIFY_MODULE_INITIALIZED
();

492 ià(((
p_addrs
 =ğ
NULL
è&& (
p_œks
 == NULL)) ||

493 ((
p_addrs
 !ğ
NULL
è&& (
p_addr_út
 == NULL)) ||

494 ((
p_œks
 !ğ
NULL
è&& (
p_œk_út
 == NULL)))

497  
NRF_ERROR_NULL
;

500  
	`im_wh™–i¡_g‘
(
p_addrs
, 
p_addr_út
, 
p_œks
, 
p_œk_út
);

501 
	}
}

504 
»t_code_t
 
	$pm_deviû_id’t™›s_li¡_£t
(
pm_³”_id_t
 cÚ¡ * 
p_³”s
,

505 
ušt32_t
 
³”_út
)

507 
	`VERIFY_MODULE_INITIALIZED
();

508  
	`im_deviû_id’t™›s_li¡_£t
(
p_³”s
, 
³”_út
);

509 
	}
}

512 
»t_code_t
 
	$pm_cÚn_£c_¡©us_g‘
(
ušt16_t
 
cÚn_hªdË
, 
pm_cÚn_£c_¡©us_t
 * 
p_cÚn_£c_¡©us
)

514 
	`VERIFY_MODULE_INITIALIZED
();

515 
	`VERIFY_PARAM_NOT_NULL
(
p_cÚn_£c_¡©us
);

517 
bË_cÚn_¡©e_¡©us_t
 
¡©us
 = 
	`bË_cÚn_¡©e_¡©us
(
cÚn_hªdË
);

519 ià(
¡©us
 =ğ
BLE_CONN_STATUS_INVALID
)

521  
BLE_ERROR_INVALID_CONN_HANDLE
;

524 
p_cÚn_£c_¡©us
->
cÚÃùed
 = (
¡©us
 =ğ
BLE_CONN_STATUS_CONNECTED
);

525 
p_cÚn_£c_¡©us
->
bÚded
 = (
	`im_³”_id_g‘_by_cÚn_hªdË
(
cÚn_hªdË
è!ğ
PM_PEER_ID_INVALID
);

526 
p_cÚn_£c_¡©us
->
’üy±ed
 = 
	`bË_cÚn_¡©e_’üy±ed
(
cÚn_hªdË
);

527 
p_cÚn_£c_¡©us
->
m™m_´Ùeùed
 = 
	`bË_cÚn_¡©e_m™m_´Ùeùed
(
cÚn_hªdË
);

528  
NRF_SUCCESS
;

529 
	}
}

532 
»t_code_t
 
	$pm_Ësc_public_key_£t
(
bË_g­_Ësc_p256_pk_t
 * 
p_public_key
)

534 
	`VERIFY_MODULE_INITIALIZED
();

535  
	`sm_Ësc_public_key_£t
(
p_public_key
);

536 
	}
}

539 
»t_code_t
 
	$pm_cÚn_hªdË_g‘
(
pm_³”_id_t
 
³”_id
, 
ušt16_t
 * 
p_cÚn_hªdË
)

541 
	`VERIFY_MODULE_INITIALIZED
();

542 
	`VERIFY_PARAM_NOT_NULL
(
p_cÚn_hªdË
);

543 *
p_cÚn_hªdË
 = 
	`im_cÚn_hªdË_g‘
(
³”_id
);

544  
NRF_SUCCESS
;

545 
	}
}

548 
»t_code_t
 
	$pm_³”_id_g‘
(
ušt16_t
 
cÚn_hªdË
, 
pm_³”_id_t
 * 
p_³”_id
)

550 
	`VERIFY_MODULE_INITIALIZED
();

551 
	`VERIFY_PARAM_NOT_NULL
(
p_³”_id
);

552 *
p_³”_id
 = 
	`im_³”_id_g‘_by_cÚn_hªdË
(
cÚn_hªdË
);

553  
NRF_SUCCESS
;

554 
	}
}

557 
ušt32_t
 
	$pm_³”_couÁ
()

559 ià(!
MODULE_INITIALIZED
)

563  
	`pdb_n_³”s
();

564 
	}
}

567 
pm_³”_id_t
 
	$pm_Ãxt_³”_id_g‘
(
pm_³”_id_t
 
´ev_³”_id
)

569 ià(!
MODULE_INITIALIZED
)

571  
PM_PEER_ID_INVALID
;

573  
	`pdb_Ãxt_³”_id_g‘
(
´ev_³”_id
);

574 
	}
}

577 
»t_code_t
 
	$pm_³”_d©a_lßd
(
pm_³”_id_t
 
³”_id
,

578 
pm_³”_d©a_id_t
 
d©a_id
,

579 * 
p_d©a
,

580 
ušt16_t
 * 
p_Ëngth
)

582 
	`VERIFY_MODULE_INITIALIZED
();

583 
	`VERIFY_PARAM_NOT_NULL
(
p_d©a
);

584 
	`VERIFY_PARAM_NOT_NULL
(
p_Ëngth
);

585 ià(
	`ALIGN_NUM
(4, *
p_Ëngth
) != *p_length)

587  
NRF_ERROR_INVALID_PARAM
;

590 
pm_³”_d©a_t
 
³”_d©a
;

591 
	`mem£t
(&
³”_d©a
, 0, (peer_data));

592 
³”_d©a
.
Ëngth_wÜds
 = 
	`BYTES_TO_WORDS
(*
p_Ëngth
);

593 
³”_d©a
.
d©a_id
 = data_id;

594 
³”_d©a
.
p_®l_d©a
 = 
p_d©a
;

596 
»t_code_t
 
”r_code
 = 
	`pdb_³”_d©a_lßd
(
³”_id
, 
d©a_id
, &
³”_d©a
);

598 *
p_Ëngth
 = 
³”_d©a
.
Ëngth_wÜds
 * 
BYTES_PER_WORD
;

600  
”r_code
;

601 
	}
}

604 
»t_code_t
 
	$pm_³”_d©a_bÚdšg_lßd
(
pm_³”_id_t
 
³”_id
,

605 
pm_³”_d©a_bÚdšg_t
 * 
p_d©a
)

607 
ušt16_t
 
Ëngth
 = (
pm_³”_d©a_bÚdšg_t
);

608  
	`pm_³”_d©a_lßd
(
³”_id
,

609 
PM_PEER_DATA_ID_BONDING
,

610 
p_d©a
,

611 &
Ëngth
);

612 
	}
}

615 
»t_code_t
 
	$pm_³”_d©a_»mÙe_db_lßd
(
pm_³”_id_t
 
³”_id
,

616 
bË_g©t_db_¤v_t
 * 
p_d©a
,

617 
ušt16_t
 * 
p_Ëngth
)

619  
	`pm_³”_d©a_lßd
(
³”_id
,

620 
PM_PEER_DATA_ID_GATT_REMOTE
,

621 
p_d©a
,

622 
p_Ëngth
);

623 
	}
}

626 
»t_code_t
 
	$pm_³”_d©a_­p_d©a_lßd
(
pm_³”_id_t
 
³”_id
,

627 * 
p_d©a
,

628 
ušt16_t
 * 
p_Ëngth
)

630  
	`pm_³”_d©a_lßd
(
³”_id
,

631 
PM_PEER_DATA_ID_APPLICATION
,

632 
p_d©a
,

633 
p_Ëngth
);

634 
	}
}

637 
»t_code_t
 
	$pm_³”_d©a_¡Üe
(
pm_³”_id_t
 
³”_id
,

638 
pm_³”_d©a_id_t
 
d©a_id
,

639 cÚ¡ * 
p_d©a
,

640 
ušt16_t
 
Ëngth
,

641 
pm_¡Üe_tok’_t
 * 
p_tok’
)

643 
	`VERIFY_MODULE_INITIALIZED
();

644 
	`VERIFY_PARAM_NOT_NULL
(
p_d©a
);

645 ià(
	`ALIGN_NUM
(4, 
Ëngth
) !=†ength)

647  
NRF_ERROR_INVALID_PARAM
;

650 ià(
d©a_id
 =ğ
PM_PEER_DATA_ID_BONDING
)

652 
pm_³”_id_t
 
du¶_³”_id
;

653 
du¶_³”_id
 = 
	`im_fšd_du¶iÿ‹_bÚdšg_d©a
((
pm_³”_d©a_bÚdšg_t
 *è
p_d©a
, 
³”_id
);

655 ià(
du¶_³”_id
 !ğ
PM_PEER_ID_INVALID
)

657  
NRF_ERROR_FORBIDDEN
;

661 
pm_³”_d©a_æash_t
 
³”_d©a
;

662 
	`mem£t
(&
³”_d©a
, 0, (peer_data));

663 
³”_d©a
.
Ëngth_wÜds
 = 
	`BYTES_TO_WORDS
(
Ëngth
);

664 
³”_d©a
.
d©a_id
 = data_id;

665 
³”_d©a
.
p_®l_d©a
 = 
p_d©a
;

667  
	`pdb_¿w_¡Üe
(
³”_id
, &
³”_d©a
, 
p_tok’
);

668 
	}
}

671 
»t_code_t
 
	$pm_³”_d©a_bÚdšg_¡Üe
(
pm_³”_id_t
 
³”_id
,

672 
pm_³”_d©a_bÚdšg_t
 cÚ¡ * 
p_d©a
,

673 
pm_¡Üe_tok’_t
 * 
p_tok’
)

675  
	`pm_³”_d©a_¡Üe
(
³”_id
,

676 
PM_PEER_DATA_ID_BONDING
,

677 
p_d©a
,

678 
	`ALIGN_NUM
(4, (
pm_³”_d©a_bÚdšg_t
)),

679 
p_tok’
);

680 
	}
}

683 
»t_code_t
 
	$pm_³”_d©a_»mÙe_db_¡Üe
(
pm_³”_id_t
 
³”_id
,

684 
bË_g©t_db_¤v_t
 cÚ¡ * 
p_d©a
,

685 
ušt16_t
 
Ëngth
,

686 
pm_¡Üe_tok’_t
 * 
p_tok’
)

688  
	`pm_³”_d©a_¡Üe
(
³”_id
,

689 
PM_PEER_DATA_ID_GATT_REMOTE
,

690 
p_d©a
,

691 
Ëngth
,

692 
p_tok’
);

693 
	}
}

696 
»t_code_t
 
	$pm_³”_d©a_­p_d©a_¡Üe
(
pm_³”_id_t
 
³”_id
,

697 cÚ¡ * 
p_d©a
,

698 
ušt16_t
 
Ëngth
,

699 
pm_¡Üe_tok’_t
 * 
p_tok’
)

701  
	`pm_³”_d©a_¡Üe
(
³”_id
,

702 
PM_PEER_DATA_ID_APPLICATION
,

703 
p_d©a
,

704 
Ëngth
,

705 
p_tok’
);

706 
	}
}

709 
»t_code_t
 
	$pm_³”_d©a_d–‘e
(
pm_³”_id_t
 
³”_id
, 
pm_³”_d©a_id_t
 
d©a_id
)

711 
	`VERIFY_MODULE_INITIALIZED
();

713 ià(
d©a_id
 =ğ
PM_PEER_DATA_ID_BONDING
)

715  
NRF_ERROR_INVALID_PARAM
;

718  
	`pdb_ş—r
(
³”_id
, 
d©a_id
);

719 
	}
}

722 
»t_code_t
 
	$pm_³”_Ãw
(
pm_³”_id_t
 * 
p_Ãw_³”_id
,

723 
pm_³”_d©a_bÚdšg_t
 * 
p_bÚdšg_d©a
,

724 
pm_¡Üe_tok’_t
 * 
p_tok’
)

726 
»t_code_t
 
”r_code
;

727 
pm_³”_id_t
 
³”_id
;

728 
pm_³”_d©a_æash_t
 
³”_d©a
;

730 
	`VERIFY_MODULE_INITIALIZED
();

731 
	`VERIFY_PARAM_NOT_NULL
(
p_bÚdšg_d©a
);

732 
	`VERIFY_PARAM_NOT_NULL
(
p_Ãw_³”_id
);

734 
	`mem£t
(&
³”_d©a
, 0, (
pm_³”_d©a_æash_t
));

737 
	`pds_³”_d©a_™”©e_´•¬e
();

740 
	`pds_³”_d©a_™”©e
(
PM_PEER_DATA_ID_BONDING
, &
³”_id
, &
³”_d©a
))

742 ià(
	`im_is_du¶iÿ‹_bÚdšg_d©a
(
p_bÚdšg_d©a
, 
³”_d©a
.p_bonding_data))

744 *
p_Ãw_³”_id
 = 
³”_id
;

745  
NRF_SUCCESS
;

751 *
p_Ãw_³”_id
 = 
	`pdb_³”_®loÿ‹
();

753 ià(*
p_Ãw_³”_id
 =ğ
PM_PEER_ID_INVALID
)

755  
NRF_ERROR_NO_MEM
;

758 
	`mem£t
(&
³”_d©a
, 0, (
pm_³”_d©a_æash_t
));

760 
³”_d©a
.
d©a_id
 = 
PM_PEER_DATA_ID_BONDING
;

761 
³”_d©a
.
p_bÚdšg_d©a
 =…_bonding_data;

762 
³”_d©a
.
Ëngth_wÜds
 = 
	`BYTES_TO_WORDS
((
pm_³”_d©a_bÚdšg_t
));

764 
”r_code
 = 
	`pdb_¿w_¡Üe
(*
p_Ãw_³”_id
, &
³”_d©a
, 
p_tok’
);

766 ià(
”r_code
 !ğ
NRF_SUCCESS
)

768 ià(
	`im_³”_ä“
(*
p_Ãw_³”_id
è!ğ
NRF_SUCCESS
)

770  
NRF_ERROR_INTERNAL
;

776  
”r_code
;

779  
NRF_SUCCESS
;

780 
	}
}

783 
»t_code_t
 
	$pm_³”_d–‘e
(
pm_³”_id_t
 
³”_id
)

785 
	`VERIFY_MODULE_INITIALIZED
();

787  
	`im_³”_ä“
(
³”_id
);

788 
	}
}

791 
»t_code_t
 
	$pm_³”s_d–‘e
()

793 
	`VERIFY_MODULE_INITIALIZED
();

795 
m_d–‘šg_®l
 = 
Œue
;

797 
pm_³”_id_t
 
cu¼’t_³”_id
 = 
	`pdb_Ãxt_³”_id_g‘
(
PM_PEER_ID_INVALID
);

799 ià(
cu¼’t_³”_id
 =ğ
PM_PEER_ID_INVALID
)

802 
m_d–‘šg_®l
 = 
çl£
;

804 
pm_evt_t
 
pm_d–‘e_®l_evt
;

805 
	`mem£t
(&
pm_d–‘e_®l_evt
, 0, (
pm_evt_t
));

806 
pm_d–‘e_®l_evt
.
evt_id
 = 
PM_EVT_PEERS_DELETE_SUCCEEDED
;

807 
pm_d–‘e_®l_evt
.
³”_id
 = 
PM_PEER_ID_INVALID
;

808 
pm_d–‘e_®l_evt
.
cÚn_hªdË
 = 
BLE_CONN_HANDLE_INVALID
;

810 
	`evt_£nd
(&
pm_d–‘e_®l_evt
);

813 
cu¼’t_³”_id
 !ğ
PM_PEER_ID_INVALID
)

815 
»t_code_t
 
”r_code
 = 
	`pm_³”_d–‘e
(
cu¼’t_³”_id
);

816 ià(
”r_code
 !ğ
NRF_SUCCESS
)

818  
NRF_ERROR_INTERNAL
;

821 
cu¼’t_³”_id
 = 
	`pdb_Ãxt_³”_id_g‘
(current_peer_id);

824  
NRF_SUCCESS
;

825 
	}
}

828 
»t_code_t
 
	$pm_³”_¿nks_g‘
(
pm_³”_id_t
 * 
p_highe¡_¿nked_³”
,

829 
ušt32_t
 * 
p_highe¡_¿nk
,

830 
pm_³”_id_t
 * 
p_lowe¡_¿nked_³”
,

831 
ušt32_t
 * 
p_lowe¡_¿nk
)

833 #ià
PM_PEER_RANKS_ENABLED
 == 0

834  
NRF_ERROR_NOT_SUPPORTED
;

836 
	`VERIFY_MODULE_INITIALIZED
();

838 
pm_³”_id_t
 
³”_id
 = 
	`pdb_Ãxt_³”_id_g‘
(
PM_PEER_ID_INVALID
);

839 
ušt32_t
 
³”_¿nk
 = 0;

841 
pm_³”_d©a_t
 
³”_d©a
 = {.
Ëngth_wÜds
 = 
	`BYTES_TO_WORDS
((
³”_¿nk
)),

842 .
p_³”_¿nk
 = &
³”_¿nk
};

844 
»t_code_t
 
”r_code
 = 
	`pdb_³”_d©a_lßd
(
³”_id
, 
PM_PEER_DATA_ID_PEER_RANK
, &
³”_d©a
);

845 
ušt32_t
 
highe¡_¿nk
 = 0;

846 
ušt32_t
 
lowe¡_¿nk
 = 0xFFFFFFFF;

847 
pm_³”_id_t
 
highe¡_¿nked_³”
 = 
PM_PEER_ID_INVALID
;

848 
pm_³”_id_t
 
lowe¡_¿nked_³”
 = 
PM_PEER_ID_INVALID
;

850 ià(
”r_code
 =ğ
NRF_ERROR_INVALID_PARAM
)

853  
NRF_ERROR_NOT_FOUND
;

856 (
”r_code
 =ğ
NRF_SUCCESS
è|| (”r_cod=ğ
NRF_ERROR_NOT_FOUND
))

858 ià(
”r_code
 =ğ
NRF_ERROR_NOT_FOUND
)

860 
³”_¿nk
 = 0;

862 ià(
³”_¿nk
 >ğ
highe¡_¿nk
)

864 
highe¡_¿nk
 = 
³”_¿nk
;

865 
highe¡_¿nked_³”
 = 
³”_id
;

867 ià(
³”_¿nk
 < 
lowe¡_¿nk
)

869 
lowe¡_¿nk
 = 
³”_¿nk
;

870 
lowe¡_¿nked_³”
 = 
³”_id
;

872 
³”_id
 = 
	`pdb_Ãxt_³”_id_g‘
(peer_id);

873 
”r_code
 = 
	`pdb_³”_d©a_lßd
(
³”_id
, 
PM_PEER_DATA_ID_PEER_RANK
, &
³”_d©a
);

875 ià(
³”_id
 =ğ
PM_PEER_ID_INVALID
)

877 
”r_code
 = 
NRF_SUCCESS
;

878 ià(
p_highe¡_¿nked_³”
 !ğ
NULL
)

880 *
p_highe¡_¿nked_³”
 = 
highe¡_¿nked_³”
;

882 ià(
p_highe¡_¿nk
 !ğ
NULL
)

884 *
p_highe¡_¿nk
 = 
highe¡_¿nk
;

886 ià(
p_lowe¡_¿nked_³”
 !ğ
NULL
)

888 *
p_lowe¡_¿nked_³”
 = 
lowe¡_¿nked_³”
;

890 ià(
p_lowe¡_¿nk
 !ğ
NULL
)

892 *
p_lowe¡_¿nk
 = 
lowe¡_¿nk
;

897 
”r_code
 = 
NRF_ERROR_INTERNAL
;

899  
”r_code
;

901 
	}
}

904 #ià
PM_PEER_RANKS_ENABLED
 == 1

907 
	$¿nk_š™
()

909 
	`¿nk_v¬s_upd©e
();

910 
	}
}

914 
»t_code_t
 
	$pm_³”_¿nk_highe¡
(
pm_³”_id_t
 
³”_id
)

916 #ià
PM_PEER_RANKS_ENABLED
 == 0

917  
NRF_ERROR_NOT_SUPPORTED
;

919 
	`VERIFY_MODULE_INITIALIZED
();

921 
»t_code_t
 
”r_code
;

923 
pm_³”_d©a_æash_t
 
³”_d©a
 = {.
Ëngth_wÜds
 = 
	`BYTES_TO_WORDS
((
m_cu¼’t_highe¡_³”_¿nk
)),

924 .
d©a_id
 = 
PM_PEER_DATA_ID_PEER_RANK
,

925 .
p_³”_¿nk
 = &
m_cu¼’t_highe¡_³”_¿nk
};

929 ià(!
m_³”_¿nk_š™Ÿlized
)

931 
	`¿nk_š™
();

934 ià(!
m_³”_¿nk_š™Ÿlized
 || (
m_³”_¿nk_tok’
 !ğ
PM_STORE_TOKEN_INVALID
))

936 
”r_code
 = 
NRF_ERROR_BUSY
;

940 ià((
³”_id
 =ğ
m_highe¡_¿nked_³”
è&& (
m_cu¼’t_highe¡_³”_¿nk
 > 0))

942 
pm_evt_t
 
pm_evt
;

945 
”r_code
 = 
NRF_SUCCESS
;

947 
	`mem£t
(&
pm_evt
, 0, (pm_evt));

948 
pm_evt
.
evt_id
 = 
PM_EVT_PEER_DATA_UPDATE_SUCCEEDED
;

949 
pm_evt
.
cÚn_hªdË
 = 
	`im_cÚn_hªdË_g‘
(
³”_id
);

950 
pm_evt
.
³”_id
 =…eer_id;

951 
pm_evt
.
·¿ms
.
³”_d©a_upd©e_sucûeded
.
d©a_id
 = 
PM_PEER_DATA_ID_PEER_RANK
;

952 
pm_evt
.
·¿ms
.
³”_d©a_upd©e_sucûeded
.
aùiÚ
 = 
PM_PEER_DATA_OP_UPDATE
;

953 
pm_evt
.
·¿ms
.
³”_d©a_upd©e_sucûeded
.
tok’
 = 
PM_STORE_TOKEN_INVALID
;

954 
pm_evt
.
·¿ms
.
³”_d©a_upd©e_sucûeded
.
æash_chªged
 = 
çl£
;

956 
	`evt_£nd
(&
pm_evt
);

960 ià(
m_cu¼’t_highe¡_³”_¿nk
 =ğ
UINT32_MAX
)

962 
”r_code
 = 
NRF_ERROR_RESOURCES
;

966 
m_cu¼’t_highe¡_³”_¿nk
 += 1;

967 
”r_code
 = 
	`pdb_¿w_¡Üe
(
³”_id
, &
³”_d©a
, &
m_³”_¿nk_tok’
);

968 ià(
”r_code
 !ğ
NRF_SUCCESS
)

970 
m_³”_¿nk_tok’
 = 
PM_STORE_TOKEN_INVALID
;

971 
m_cu¼’t_highe¡_³”_¿nk
 -= 1;

973 ià((
”r_code
 !ğ
NRF_ERROR_BUSY
è&& (”r_cod!ğ
NRF_ERROR_STORAGE_FULL
))

974 
”r_code
 = 
NRF_ERROR_INTERNAL
;

980  
”r_code
;

982 
	}
}

	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\ble\peer_manager\pm_buffer.c

40 
	~"sdk_commÚ.h
"

41 #ià
NRF_MODULE_ENABLED
(
PEER_MANAGER
)

42 
	~"pm_bufãr.h
"

44 
	~<¡dboŞ.h
>

45 
	~<¡ršg.h
>

46 
	~"Äf_”rÜ.h
"

47 
	~"pm_mu‹x.h
"

50 
	#BUFFER_IS_VALID
(
p_bufãr
è(Õ_bufã¸!ğ
NULL
) \

51 && (
p_bufãr
->
p_memÜy
 !ğ
NULL
) \

52 && (
p_bufãr
->
p_mu‹x
 !ğ
NULL
))

	)

56 
»t_code_t
 
	$pm_bufãr_š™
(
pm_bufãr_t
 * 
p_bufãr
,

57 
ušt8_t
 * 
p_bufãr_memÜy
,

58 
ušt32_t
 
bufãr_memÜy_size
,

59 
ušt8_t
 * 
p_mu‹x_memÜy
,

60 
ušt32_t
 
mu‹x_memÜy_size
,

61 
ušt32_t
 
n_blocks
,

62 
ušt32_t
 
block_size
)

64 iàĞ(
p_bufãr
 !ğ
NULL
)

65 && (
p_bufãr_memÜy
 !ğ
NULL
)

66 && (
p_mu‹x_memÜy
 !ğ
NULL
)

67 && (
bufãr_memÜy_size
 >ğ(
n_blocks
 * 
block_size
))

68 && (
mu‹x_memÜy_size
 >ğ
	`MUTEX_STORAGE_SIZE
(
n_blocks
))

69 && (
n_blocks
 != 0)

70 && (
block_size
 != 0))

72 
p_bufãr
->
p_memÜy
 = 
p_bufãr_memÜy
;

73 
p_bufãr
->
p_mu‹x
 = 
p_mu‹x_memÜy
;

74 
p_bufãr
->
n_blocks
 =‚_blocks;

75 
p_bufãr
->
block_size
 = block_size;

76 
	`pm_mu‹x_š™
(
p_bufãr
->
p_mu‹x
, 
n_blocks
);

78  
NRF_SUCCESS
;

82  
NRF_ERROR_INVALID_PARAM
;

84 
	}
}

87 
ušt8_t
 
	$pm_bufãr_block_acquœe
(
pm_bufãr_t
 * 
p_bufãr
, 
ušt32_t
 
n_blocks
)

89 ià(!
	`BUFFER_IS_VALID
(
p_bufãr
))

91  ( 
PM_BUFFER_INVALID_ID
 );

94 
ušt8_t
 
fœ¡_locked_mu‹x
 = 
PM_BUFFER_INVALID_ID
;

96 
ušt8_t
 
i
 = 0; i < 
p_bufãr
->
n_blocks
; i++)

98 ià(
	`pm_mu‹x_lock
(
p_bufãr
->
p_mu‹x
, 
i
))

100 ià(
fœ¡_locked_mu‹x
 =ğ
PM_BUFFER_INVALID_ID
)

102 
fœ¡_locked_mu‹x
 = 
i
;

104 ià((
i
 - 
fœ¡_locked_mu‹x
 + 1è=ğ
n_blocks
)

106  
fœ¡_locked_mu‹x
;

109 ià(
fœ¡_locked_mu‹x
 !ğ
PM_BUFFER_INVALID_ID
)

111 
ušt8_t
 
j
 = 
fœ¡_locked_mu‹x
; j < 
i
; j++)

113 
	`pm_bufãr_»Ëa£
(
p_bufãr
, 
j
);

115 
fœ¡_locked_mu‹x
 = 
PM_BUFFER_INVALID_ID
;

119  ( 
PM_BUFFER_INVALID_ID
 );

120 
	}
}

123 
ušt8_t
 * 
	$pm_bufãr_±r_g‘
(
pm_bufãr_t
 * 
p_bufãr
, 
ušt8_t
 
id
)

125 ià(!
	`BUFFER_IS_VALID
(
p_bufãr
))

127  ( 
NULL
 );

130 iàĞ(
id
 !ğ
PM_BUFFER_INVALID_ID
)

131 && 
	`pm_mu‹x_lock_¡©us_g‘
(
p_bufãr
->
p_mu‹x
, 
id
) )

133  ( &
p_bufãr
->
p_memÜy
[
id
 *…_bufãr->
block_size
] );

137  ( 
NULL
 );

139 
	}
}

142 
	$pm_bufãr_»Ëa£
(
pm_bufãr_t
 * 
p_bufãr
, 
ušt8_t
 
id
)

144 iàĞ
	`BUFFER_IS_VALID
(
p_bufãr
)

145 && (
id
 !ğ
PM_BUFFER_INVALID_ID
)

146 && 
	`pm_mu‹x_lock_¡©us_g‘
(
p_bufãr
->
p_mu‹x
, 
id
))

148 
	`pm_mu‹x_uÆock
(
p_bufãr
->
p_mu‹x
, 
id
);

150 
	}
}

	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\ble\peer_manager\pm_mutex.c

40 
	~"sdk_commÚ.h
"

41 #ià
NRF_MODULE_ENABLED
(
PEER_MANAGER
)

42 
	~"pm_mu‹x.h
"

44 
	~<¡dboŞ.h
>

45 
	~<¡ršg.h
>

46 
	~"Äf_”rÜ.h
"

47 
	~"­p_ut_¶©fÜm.h
"

59 
boŞ
 
	$lock_by_mask
(
ušt8_t
 * 
p_mu‹x
, ušt8_ˆ
mu‹x_mask
)

61 
boŞ
 
sucûss
 = 
çl£
;

63 iàĞ(*
p_mu‹x
 & 
mu‹x_mask
) == 0 )

65 
	`CRITICAL_REGION_ENTER
();

66 iàĞ(*
p_mu‹x
 & 
mu‹x_mask
) == 0 )

68 *
p_mu‹x
 |ğ
mu‹x_mask
;

70 
sucûss
 = 
Œue
;

72 
	`CRITICAL_REGION_EXIT
();

75  ( 
sucûss
 );

76 
	}
}

79 
	$pm_mu‹x_š™
(
ušt8_t
 * 
p_mu‹x
, 
ušt16_t
 
mu‹x_size
)

81 ià(
p_mu‹x
 !ğ
NULL
)

83 
	`mem£t
(&
p_mu‹x
[0], 0, 
	`MUTEX_STORAGE_SIZE
(
mu‹x_size
));

85 
	}
}

88 
boŞ
 
	$pm_mu‹x_lock
(
ušt8_t
 * 
p_mu‹x
, 
ušt16_t
 
mu‹x_id
)

90 ià(
p_mu‹x
 !ğ
NULL
)

92  ( 
	`lock_by_mask
(&(
p_mu‹x
[
mu‹x_id
 >> 3]), (1 << (mutex_id & 0x07))) );

96  
çl£
;

98 
	}
}

101 
	$pm_mu‹x_uÆock
(
ušt8_t
 * 
p_mu‹x
, 
ušt16_t
 
mu‹x_id
)

103 
ušt8_t
 
mu‹x_ba£
 = 
mu‹x_id
 >> 3;

104 
ušt8_t
 
mu‹x_mask
 = (1 << (
mu‹x_id
 & 0x07));

106 ià((
p_mu‹x
 !ğ
NULL
)

107 && (
p_mu‹x
[
mu‹x_ba£
] & 
mu‹x_mask
))

109 
	`CRITICAL_REGION_ENTER
();

110 
p_mu‹x
[
mu‹x_ba£
] &ğ~
mu‹x_mask
;

111 
	`CRITICAL_REGION_EXIT
();

113 
	}
}

116 
ušt16_t
 
	$pm_mu‹x_lock_fœ¡_avaabË
(
ušt8_t
 * 
p_mu‹x
, 
ušt16_t
 
mu‹x_size
)

118 ià(
p_mu‹x
 !ğ
NULL
)

120  
ušt16_t
 
i
 = 0; i < 
mu‹x_size
; i++ )

122 iàĞ
	`lock_by_mask
(&(
p_mu‹x
[
i
 >> 3]), 1 << (i & 0x07)) )

124  ( 
i
 );

129  ( 
mu‹x_size
 );

130 
	}
}

133 
boŞ
 
	$pm_mu‹x_lock_¡©us_g‘
(
ušt8_t
 * 
p_mu‹x
, 
ušt16_t
 
mu‹x_id
)

135 ià(
p_mu‹x
 !ğ
NULL
)

137  ( (
p_mu‹x
[
mu‹x_id
 >> 3] & (1 << (mutex_id & 0x07))) );

141  
Œue
;

143 
	}
}

	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\ble\peer_manager\security_dispatcher.c

40 
	~"sdk_commÚ.h
"

41 #ià
NRF_MODULE_ENABLED
(
PEER_MANAGER
)

42 
	~"£cur™y_di¥©ch”.h
"

44 
	~<¡ršg.h
>

45 
	~"bË.h
"

46 
	~"bË_g­.h
"

47 
	~"bË_”r.h
"

48 
	~"bË_cÚn_¡©e.h
"

49 
	~"³”_mªag”_ty³s.h
"

50 
	~"³”_d©aba£.h
"

51 
	~"id_mªag”.h
"

53 #iâdeà
PM_CENTRAL_ENABLED


54 
	#PM_CENTRAL_ENABLED
 1

	)

58 
	#SMD_EVENT_HANDLERS_CNT
 ((
m_evt_hªdËrs
è/ (m_evt_hªdËrs[0]))

	)

60 
STATIC_ASSERT
((
NRF_SDH_BLE_CENTRAL_LINK_COUNT
 =ğ0è|| 
PM_CENTRAL_ENABLED
,

64 
sm_smd_evt_hªdËr
(
pm_evt_t
 * 
p_ev’t
);

68 
pm_evt_hªdËr_š‹º®_t
 cÚ¡ 
	gm_evt_hªdËrs
[] =

70 
sm_smd_evt_hªdËr


73 
boŞ
 
	gm_moduË_š™Ÿlized
;

75 
bË_cÚn_¡©e_u£r_æag_id_t
 
	gm_æag_£c_´oc
 = 
BLE_CONN_STATE_USER_FLAG_INVALID
;

76 
bË_cÚn_¡©e_u£r_æag_id_t
 
	gm_æag_£c_´oc_·œšg
 = 
BLE_CONN_STATE_USER_FLAG_INVALID
;

77 
bË_cÚn_¡©e_u£r_æag_id_t
 
	gm_æag_£c_´oc_bÚdšg
 = 
BLE_CONN_STATE_USER_FLAG_INVALID
;

78 
bË_cÚn_¡©e_u£r_æag_id_t
 
	gm_æag_£c_´oc_Ãw_³”
 = 
BLE_CONN_STATE_USER_FLAG_INVALID
;

79 
bË_cÚn_¡©e_u£r_æag_id_t
 
	gm_æag_®low_»·œšg
 = 
BLE_CONN_STATE_USER_FLAG_INVALID
;

81 
bË_g­_Ësc_p256_pk_t
 
	gm_³”_pk
;

84 
__INLINE
 
boŞ
 
	$£c_´oûdu»
(
ušt16_t
 
cÚn_hªdË
)

86  
	`bË_cÚn_¡©e_u£r_æag_g‘
(
cÚn_hªdË
, 
m_æag_£c_´oc
);

87 
	}
}

89 
__INLINE
 
boŞ
 
	$·œšg
(
ušt16_t
 
cÚn_hªdË
)

91  
	`bË_cÚn_¡©e_u£r_æag_g‘
(
cÚn_hªdË
, 
m_æag_£c_´oc_·œšg
);

92 
	}
}

94 
__INLINE
 
boŞ
 
	$bÚdšg
(
ušt16_t
 
cÚn_hªdË
)

96  
	`bË_cÚn_¡©e_u£r_æag_g‘
(
cÚn_hªdË
, 
m_æag_£c_´oc_bÚdšg
);

97 
	}
}

99 
__INLINE
 
boŞ
 
	$³”_ü—‹d
(
ušt16_t
 
cÚn_hªdË
)

101  
	`bË_cÚn_¡©e_u£r_æag_g‘
(
cÚn_hªdË
, 
m_æag_£c_´oc_Ãw_³”
);

102 
	}
}

104 
__INLINE
 
boŞ
 
	$®low_»·œšg
(
ušt16_t
 
cÚn_hªdË
)

106  
	`bË_cÚn_¡©e_u£r_æag_g‘
(
cÚn_hªdË
, 
m_æag_®low_»·œšg
);

107 
	}
}

114 
	$evt_£nd
(
pm_evt_t
 * 
p_ev’t
)

116 
p_ev’t
->
³”_id
 = 
	`im_³”_id_g‘_by_cÚn_hªdË
Õ_ev’t->
cÚn_hªdË
);

118 
ušt32_t
 
i
 = 0; i < 
SMD_EVENT_HANDLERS_CNT
; i++)

120 
m_evt_hªdËrs
[
i
](
p_ev’t
);

122 
	}
}

130 
	$£c_¡¬t_£nd
(
ušt16_t
 
cÚn_hªdË
,

131 
pm_cÚn_£c_´oûdu»_t
 
´oûdu»
)

133 
pm_evt_t
 
evt
 =

135 .
evt_id
 = 
PM_EVT_CONN_SEC_START
,

136 .
cÚn_hªdË
 = conn_handle,

137 .
·¿ms
 = {.
cÚn_£c_¡¬t
 = {.
´oûdu»
 =…rocedure}}

139 
	`evt_£nd
(&
evt
);

140 
	}
}

148 
	$£nd_uÃx³ùed_”rÜ
(
ušt16_t
 
cÚn_hªdË
, 
»t_code_t
 
”r_code
)

150 
pm_evt_t
 
”rÜ_evt
 =

152 .
evt_id
 = 
PM_EVT_ERROR_UNEXPECTED
,

153 .
cÚn_hªdË
 = conn_handle,

154 .
·¿ms
 =

156 .
”rÜ_uÃx³ùed
 =

158 .
”rÜ
 = 
”r_code
,

162 
	`evt_£nd
(&
”rÜ_evt
);

163 
	}
}

173 
	$cÚn_£c_çu»
(
ušt16_t
 
cÚn_hªdË
,

174 
pm_cÚn_£c_´oûdu»_t
 
´oûdu»
,

175 
pm_£c_”rÜ_code_t
 
”rÜ
,

176 
ušt8_t
 
”rÜ_¤c
)

178 
pm_evt_t
 
evt
 =

180 .
evt_id
 = 
PM_EVT_CONN_SEC_FAILED
,

181 .
cÚn_hªdË
 = conn_handle,

182 .
·¿ms
 =

184 .
cÚn_£c_çed
 =

186 .
´oûdu»
 =…rocedure,

187 .
”rÜ
 =ƒrror,

188 .
”rÜ_¤c
 =ƒrror_src,

193 
	`bË_cÚn_¡©e_u£r_æag_£t
(
cÚn_hªdË
, 
m_æag_£c_´oc
, 
çl£
);

195 
	`evt_£nd
(&
evt
);

197 
	}
}

207 
	$·œšg_çu»
(
ušt16_t
 
cÚn_hªdË
,

208 
pm_£c_”rÜ_code_t
 
”rÜ
,

209 
ušt8_t
 
”rÜ_¤c
)

211 
»t_code_t
 
”r_code
 = 
NRF_SUCCESS
;

212 
pm_³”_id_t
 
³”_id
 = 
	`im_³”_id_g‘_by_cÚn_hªdË
(
cÚn_hªdË
);

213 
pm_cÚn_£c_´oûdu»_t
 
´oûdu»
 = 
	`bÚdšg
(
cÚn_hªdË
è? 
PM_CONN_SEC_PROCEDURE_BONDING


214 : 
PM_CONN_SEC_PROCEDURE_PAIRING
;

216 ià(
	`³”_ü—‹d
(
cÚn_hªdË
))

220 
”r_code
 = 
	`im_³”_ä“
(
³”_id
);

221 
	`UNUSED_VARIABLE
(
”r_code
);

223 if(
³”_id
 !ğ
PM_PEER_ID_INVALID
)

225 
”r_code
 = 
	`pdb_wr™e_buf_»Ëa£
(
³”_id
, 
PM_PEER_DATA_ID_BONDING
);

226 ià((
”r_code
 !ğ
NRF_SUCCESS
è&& (”r_cod!ğ
NRF_ERROR_NOT_FOUND
 ))

228 
	`£nd_uÃx³ùed_”rÜ
(
cÚn_hªdË
, 
”r_code
);

232 
	`cÚn_£c_çu»
(
cÚn_hªdË
, 
´oûdu»
, 
”rÜ
, 
”rÜ_¤c
);

235 
	}
}

244 
__INLINE
 
	$’üy±iÚ_çu»
(
ušt16_t
 
cÚn_hªdË
,

245 
pm_£c_”rÜ_code_t
 
”rÜ
,

246 
ušt8_t
 
”rÜ_¤c
)

248 
	`cÚn_£c_çu»
(
cÚn_hªdË
, 
PM_CONN_SEC_PROCEDURE_ENCRYPTION
, 
”rÜ
, 
”rÜ_¤c
);

251 
	}
}

260 
	$lšk_£cu»_çu»
(
ušt16_t
 
cÚn_hªdË
,

261 
pm_£c_”rÜ_code_t
 
”rÜ
,

262 
ušt8_t
 
”rÜ_¤c
)

264 ià(
	`£c_´oûdu»
(
cÚn_hªdË
))

266 ià(
	`·œšg
(
cÚn_hªdË
))

268 
	`·œšg_çu»
(
cÚn_hªdË
, 
”rÜ
, 
”rÜ_¤c
);

272 
	`’üy±iÚ_çu»
(
cÚn_hªdË
, 
”rÜ
, 
”rÜ_¤c
);

275 
	}
}

284 
	$£c_´oc_¡¬t
(
ušt16_t
 
cÚn_hªdË
,

285 
boŞ
 
sucûss
,

286 
pm_cÚn_£c_´oûdu»_t
 
´oûdu»
)

288 
	`bË_cÚn_¡©e_u£r_æag_£t
(
cÚn_hªdË
, 
m_æag_£c_´oc
, 
sucûss
);

289 ià(
sucûss
)

291 
	`bË_cÚn_¡©e_u£r_æag_£t
(
cÚn_hªdË
,

292 
m_æag_£c_´oc_·œšg
,

293 (
´oûdu»
 !ğ
PM_CONN_SEC_PROCEDURE_ENCRYPTION
));

294 
	`bË_cÚn_¡©e_u£r_æag_£t
(
cÚn_hªdË
,

295 
m_æag_£c_´oc_bÚdšg
,

296 (
´oûdu»
 =ğ
PM_CONN_SEC_PROCEDURE_BONDING
));

297 
	`bË_cÚn_¡©e_u£r_æag_£t
(
cÚn_hªdË
, 
m_æag_£c_´oc_Ãw_³”
, 
çl£
);

298 
	`£c_¡¬t_£nd
(
cÚn_hªdË
, 
´oûdu»
);

300 
	}
}

311 
	$£c_´oc_hou£k“pšg
(
ušt16_t
 
cÚn_hªdË
,

312 
pm_³”_id_t
 
³”_id
,

313 
boŞ
 
sucûss
,

314 
boŞ
 
Ãw_³”_ü—‹d
)

316 ià(
sucûss
)

318 ià(
Ãw_³”_ü—‹d
)

320 
	`bË_cÚn_¡©e_u£r_æag_£t
(
cÚn_hªdË
, 
m_æag_£c_´oc_Ãw_³”
, 
Œue
);

321 
	`im_Ãw_³”_id
(
cÚn_hªdË
, 
³”_id
);

326 ià(
Ãw_³”_ü—‹d
)

328 
»t_code_t
 
”r_code
 = 
	`im_³”_ä“
(
³”_id
);

329 
	`UNUSED_VARIABLE
(
”r_code
);

332 
	}
}

340 
	$£c_šfo_»que¡_´oûss
(
bË_g­_evt_t
 cÚ¡ * 
p_g­_evt
)

342 
»t_code_t
 
”r_code
;

343 
bË_g­_’c_šfo_t
 cÚ¡ * 
p_’c_šfo
 = 
NULL
;

344 
pm_³”_d©a_æash_t
 
³”_d©a
;

345 
pm_³”_id_t
 
³”_id
 = 
	`im_³”_id_g‘_by_ma¡”_id
(

346 &
p_g­_evt
->
·¿ms
.
£c_šfo_»que¡
.
ma¡”_id
);

348 ià(
³”_id
 =ğ
PM_PEER_ID_INVALID
)

350 
³”_id
 = 
	`im_³”_id_g‘_by_cÚn_hªdË
(
p_g­_evt
->
cÚn_hªdË
);

356 
	`im_Ãw_³”_id
(
p_g­_evt
->
cÚn_hªdË
, 
³”_id
);

359 
	`£c_´oc_¡¬t
(
p_g­_evt
->
cÚn_hªdË
, 
Œue
, 
PM_CONN_SEC_PROCEDURE_ENCRYPTION
);

361 ià(
³”_id
 !ğ
PM_PEER_ID_INVALID
)

363 
”r_code
 = 
	`pdb_³”_d©a_±r_g‘
(
³”_id
, 
PM_PEER_DATA_ID_BONDING
, &
³”_d©a
);

365 ià(
”r_code
 =ğ
NRF_SUCCESS
)

368 
bË_g­_’c_key_t
 cÚ¡ * 
p_exi¡šg_key
 = &
³”_d©a
.
p_bÚdšg_d©a
->
own_Ék
;

370 iàĞ
p_exi¡šg_key
->
’c_šfo
.
Ësc


371 || (
	`im_ma¡”_ids_com·»
(&
p_exi¡šg_key
->
ma¡”_id
,

372 &
p_g­_evt
->
·¿ms
.
£c_šfo_»que¡
.
ma¡”_id
)))

374 
p_’c_šfo
 = &
p_exi¡šg_key
->
’c_šfo
;

379 
”r_code
 = 
	`sd_bË_g­_£c_šfo_»¶y
(
p_g­_evt
->
cÚn_hªdË
, 
p_’c_šfo
, 
NULL
, NULL);

381 ià(
”r_code
 !ğ
NRF_SUCCESS
)

383 
	`£c_´oc_hou£k“pšg
(
p_g­_evt
->
cÚn_hªdË
, 
³”_id
, 
çl£
, false);

384 
	`£nd_uÃx³ùed_”rÜ
(
p_g­_evt
->
cÚn_hªdË
, 
”r_code
);

386 ià(
p_’c_šfo
 =ğ
NULL
)

388 
	`£c_´oc_hou£k“pšg
(
p_g­_evt
->
cÚn_hªdË
, 
³”_id
, 
çl£
, false);

389 
	`’üy±iÚ_çu»
(
p_g­_evt
->
cÚn_hªdË
,

390 
PM_CONN_SEC_ERROR_PIN_OR_KEY_MISSING
,

391 
BLE_GAP_SEC_STATUS_SOURCE_LOCAL
);

395 
	}
}

402 
	$£nd_cÚfig_»q
(
ušt16_t
 
cÚn_hªdË
)

404 
pm_evt_t
 
evt
;

405 
	`mem£t
(&
evt
, 0, (evt));

407 
evt
.
evt_id
 = 
PM_EVT_CONN_SEC_CONFIG_REQ
;

408 
evt
.
cÚn_hªdË
 = conn_handle;

410 
	`evt_£nd
(&
evt
);

411 
	}
}

414 
	$smd_cÚn_£c_cÚfig_»¶y
(
ušt16_t
 
cÚn_hªdË
, 
pm_cÚn_£c_cÚfig_t
 * 
p_cÚn_£c_cÚfig
)

416 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

417 
	`NRF_PM_DEBUG_CHECK
(
p_cÚn_£c_cÚfig
 !ğ
NULL
);

419 
	`bË_cÚn_¡©e_u£r_æag_£t
(
cÚn_hªdË
,

420 
m_æag_®low_»·œšg
,

421 
p_cÚn_£c_cÚfig
->
®low_»·œšg
);

422 
	}
}

429 
	$discÚÃù_´oûss
(
bË_g­_evt_t
 cÚ¡ * 
p_g­_evt
)

431 
pm_£c_”rÜ_code_t
 
”rÜ
 = (
p_g­_evt
->
·¿ms
.
discÚÃùed
.
»asÚ


432 =ğ
BLE_HCI_CONN_TERMINATED_DUE_TO_MIC_FAILURE
)

433 ? 
PM_CONN_SEC_ERROR_MIC_FAILURE
 : 
PM_CONN_SEC_ERROR_DISCONNECT
;

435 
	`lšk_£cu»_çu»
(
p_g­_evt
->
cÚn_hªdË
, 
”rÜ
, 
BLE_GAP_SEC_STATUS_SOURCE_LOCAL
);

436 
	}
}

445 
	$£nd_·¿ms_»q
(
ušt16_t
 
cÚn_hªdË
, 
bË_g­_£c_·¿ms_t
 cÚ¡ * 
p_³”_·¿ms
)

447 
pm_evt_t
 
evt
 =

449 .
evt_id
 = 
PM_EVT_CONN_SEC_PARAMS_REQ
,

450 .
cÚn_hªdË
 = conn_handle,

451 .
·¿ms
 =

453 .
cÚn_£c_·¿ms_»q
 =

455 .
p_³”_·¿ms
 =…_peer_params

460 
	`evt_£nd
(&
evt
);

461 
	}
}

468 
	$£c_·¿ms_»que¡_´oûss
(
bË_g­_evt_t
 cÚ¡ * 
p_g­_evt
)

470 ià(
	`bË_cÚn_¡©e_rŞe
(
p_g­_evt
->
cÚn_hªdË
è=ğ
BLE_GAP_ROLE_PERIPH
)

472 
	`£c_´oc_¡¬t
(
p_g­_evt
->
cÚn_hªdË
,

473 
Œue
,

474 
p_g­_evt
->
·¿ms
.
£c_·¿ms_»que¡
.
³”_·¿ms
.
bÚd


475 ? 
PM_CONN_SEC_PROCEDURE_BONDING


476 : 
PM_CONN_SEC_PROCEDURE_PAIRING
);

479 
	`£nd_·¿ms_»q
(
p_g­_evt
->
cÚn_hªdË
, &p_g­_evt->
·¿ms
.
£c_·¿ms_»que¡
.
³”_·¿ms
);

481 
	}
}

489 
	$auth_¡©us_sucûss_´oûss
(
bË_g­_evt_t
 cÚ¡ * 
p_g­_evt
)

491 
»t_code_t
 
”r_code
 = 
NRF_SUCCESS
;

492 
ušt16_t
 
cÚn_hªdË
 = 
p_g­_evt
->conn_handle;

493 
pm_³”_id_t
 
³”_id
 = 
	`im_³”_id_g‘_by_cÚn_hªdË
(
cÚn_hªdË
);

494 
pm_³”_id_t
 
Ãw_³”_id
 = 
³”_id
;

495 
pm_³”_d©a_t
 
³”_d©a
;

496 
boŞ
 
d©a_¡Üed
 = 
çl£
;

498 
	`bË_cÚn_¡©e_u£r_æag_£t
(
cÚn_hªdË
, 
m_æag_£c_´oc
, 
çl£
);

500 ià(
p_g­_evt
->
·¿ms
.
auth_¡©us
.
bÚded
)

502 
pm_³”_id_t
 
du¶iÿ‹_³”_id
 = 
PM_PEER_ID_INVALID
;

503 
d©a_¡Üed
 = 
Œue
;

505 
”r_code
 = 
	`pdb_wr™e_buf_g‘
(
³”_id
, 
PM_PEER_DATA_ID_BONDING
, 1, &
³”_d©a
);

506 ià(
”r_code
 !ğ
NRF_SUCCESS
)

508 
	`£nd_uÃx³ùed_”rÜ
(
cÚn_hªdË
, 
”r_code
);

509 
d©a_¡Üed
 = 
çl£
;

513 
du¶iÿ‹_³”_id
 = 
	`im_fšd_du¶iÿ‹_bÚdšg_d©a
(
³”_d©a
.
p_bÚdšg_d©a
,

514 
PM_PEER_ID_INVALID
);

517 ià(
du¶iÿ‹_³”_id
 !ğ
PM_PEER_ID_INVALID
)

520 
Ãw_³”_id
 = 
du¶iÿ‹_³”_id
;

521 
	`im_Ãw_³”_id
(
cÚn_hªdË
, 
Ãw_³”_id
);

524 ià(!
	`®low_»·œšg
(
cÚn_hªdË
))

526 
	`£nd_cÚfig_»q
(
cÚn_hªdË
);

527 ià(!
	`®low_»·œšg
(
cÚn_hªdË
))

529 
d©a_¡Üed
 = 
çl£
;

534 ià(
d©a_¡Üed
)

536 
”r_code
 = 
	`pdb_wr™e_buf_¡Üe
(
³”_id
, 
PM_PEER_DATA_ID_BONDING
, 
Ãw_³”_id
);

537 ià(
”r_code
 !ğ
NRF_SUCCESS
)

540 
	`£nd_uÃx³ùed_”rÜ
(
cÚn_hªdË
, 
”r_code
);

541 
d©a_¡Üed
 = 
çl£
;

545 ià((
du¶iÿ‹_³”_id
 !ğ
PM_PEER_ID_INVALID
è&& 
	`³”_ü—‹d
(
cÚn_hªdË
))

549 
»t_code_t
 
”r_code_ä“
 = 
	`im_³”_ä“
(
³”_id
);

550 
	`UNUSED_VARIABLE
(
”r_code_ä“
);

553 ià(
	`³”_ü—‹d
(
cÚn_hªdË
))

555 
»t_code_t
 
”r_code_ä“
 = 
	`im_³”_ä“
(
³”_id
);

556 
	`UNUSED_VARIABLE
(
”r_code_ä“
);

563 
pm_evt_t
 
·œšg_sucûss_evt
;

565 
·œšg_sucûss_evt
.
evt_id
 = 
PM_EVT_CONN_SEC_SUCCEEDED
;

566 
·œšg_sucûss_evt
.
cÚn_hªdË
 = conn_handle;

567 
·œšg_sucûss_evt
.
·¿ms
.
cÚn_£c_sucûeded
.
´oûdu»
 = 
p_g­_evt
->·¿ms.
auth_¡©us
.
bÚded


568 ? 
PM_CONN_SEC_PROCEDURE_BONDING


569 : 
PM_CONN_SEC_PROCEDURE_PAIRING
;

570 
·œšg_sucûss_evt
.
·¿ms
.
cÚn_£c_sucûeded
.
d©a_¡Üed
 = data_stored;

572 
	`evt_£nd
(&
·œšg_sucûss_evt
);

575 
	}
}

583 
	$auth_¡©us_çu»_´oûss
(
bË_g­_evt_t
 cÚ¡ * 
p_g­_evt
)

585 
	`lšk_£cu»_çu»
(
p_g­_evt
->
cÚn_hªdË
,

586 
p_g­_evt
->
·¿ms
.
auth_¡©us
.auth_status,

587 
p_g­_evt
->
·¿ms
.
auth_¡©us
.
”rÜ_¤c
);

588 
	}
}

595 
	$auth_¡©us_´oûss
(
bË_g­_evt_t
 cÚ¡ * 
p_g­_evt
)

597 
p_g­_evt
->
·¿ms
.
auth_¡©us
.auth_status)

599 
BLE_GAP_SEC_STATUS_SUCCESS
:

600 
	`auth_¡©us_sucûss_´oûss
(
p_g­_evt
);

604 
	`auth_¡©us_çu»_´oûss
(
p_g­_evt
);

607 
	}
}

614 
	$cÚn_£c_upd©e_´oûss
(
bË_g­_evt_t
 cÚ¡ * 
p_g­_evt
)

616 ià(!
	`·œšg
(
p_g­_evt
->
cÚn_hªdË
))

620 ià(!
	`bË_cÚn_¡©e_’üy±ed
(
p_g­_evt
->
cÚn_hªdË
))

622 
	`’üy±iÚ_çu»
(
p_g­_evt
->
cÚn_hªdË
,

623 
PM_CONN_SEC_ERROR_PIN_OR_KEY_MISSING
,

624 
BLE_GAP_SEC_STATUS_SOURCE_REMOTE
);

628 
	`bË_cÚn_¡©e_u£r_æag_£t
(
p_g­_evt
->
cÚn_hªdË
, 
m_æag_£c_´oc
, 
çl£
);

630 
pm_evt_t
 
evt
;

632 
evt
.
evt_id
 = 
PM_EVT_CONN_SEC_SUCCEEDED
;

633 
evt
.
cÚn_hªdË
 = 
p_g­_evt
->conn_handle;

634 
evt
.
·¿ms
.
cÚn_£c_sucûeded
.
´oûdu»
 = 
PM_CONN_SEC_PROCEDURE_ENCRYPTION
;

635 
evt
.
·¿ms
.
cÚn_£c_sucûeded
.
d©a_¡Üed
 = 
çl£
;

637 
	`evt_£nd
(&
evt
);

640 
	}
}

647 
	$æag_id_š™
(
bË_cÚn_¡©e_u£r_æag_id_t
 * 
p_æag_id
)

649 ià(*
p_æag_id
 =ğ
BLE_CONN_STATE_USER_FLAG_INVALID
)

651 *
p_æag_id
 = 
	`bË_cÚn_¡©e_u£r_æag_acquœe
();

653 
	}
}

656 
»t_code_t
 
	$smd_š™
()

658 
	`NRF_PM_DEBUG_CHECK
(!
m_moduË_š™Ÿlized
);

660 
	`æag_id_š™
(&
m_æag_£c_´oc
);

661 
	`æag_id_š™
(&
m_æag_£c_´oc_·œšg
);

662 
	`æag_id_š™
(&
m_æag_£c_´oc_bÚdšg
);

663 
	`æag_id_š™
(&
m_æag_£c_´oc_Ãw_³”
);

664 
	`æag_id_š™
(&
m_æag_®low_»·œšg
);

666 ià((
m_æag_£c_´oc
 =ğ
BLE_CONN_STATE_USER_FLAG_INVALID
) ||

667 (
m_æag_£c_´oc_·œšg
 =ğ
BLE_CONN_STATE_USER_FLAG_INVALID
) ||

668 (
m_æag_£c_´oc_bÚdšg
 =ğ
BLE_CONN_STATE_USER_FLAG_INVALID
) ||

669 (
m_æag_£c_´oc_Ãw_³”
 =ğ
BLE_CONN_STATE_USER_FLAG_INVALID
) ||

670 (
m_æag_®low_»·œšg
 =ğ
BLE_CONN_STATE_USER_FLAG_INVALID
))

672  
NRF_ERROR_INTERNAL
;

675 
m_moduË_š™Ÿlized
 = 
Œue
;

677  
NRF_SUCCESS
;

678 
	}
}

695 
»t_code_t
 
	$£c_key£t_fl
(
ušt16_t
 
cÚn_hªdË
,

696 
pm_³”_id_t
 
³”_id
,

697 
ušt8_t
 
rŞe
,

698 
bË_g­_Ësc_p256_pk_t
 * 
p_public_key
,

699 
bË_g­_£c_key£t_t
 * 
p_£c_key£t
)

701 
»t_code_t
 
”r_code
;

702 
pm_³”_d©a_t
 
³”_d©a
;

704 ià(
p_£c_key£t
 =ğ
NULL
)

706  
NRF_ERROR_INTERNAL
;

710 
”r_code
 = 
	`pdb_wr™e_buf_g‘
(
³”_id
, 
PM_PEER_DATA_ID_BONDING
, 1, &
³”_d©a
);

712 ià(
”r_code
 =ğ
NRF_ERROR_BUSY
)

716 ià(
”r_code
 !ğ
NRF_SUCCESS
)

718 
”r_code
 = 
NRF_ERROR_INTERNAL
;

722 
	`mem£t
(
³”_d©a
.
p_bÚdšg_d©a
, 0, (
pm_³”_d©a_bÚdšg_t
));

724 
³”_d©a
.
p_bÚdšg_d©a
->
own_rŞe
 = 
rŞe
;

726 
p_£c_key£t
->
keys_own
.
p_’c_key
 = &
³”_d©a
.
p_bÚdšg_d©a
->
own_Ék
;

727 
p_£c_key£t
->
keys_own
.
p_pk
 = 
p_public_key
;

728 
p_£c_key£t
->
keys_³”
.
p_’c_key
 = &
³”_d©a
.
p_bÚdšg_d©a
->
³”_Ék
;

729 
p_£c_key£t
->
keys_³”
.
p_id_key
 = &
³”_d©a
.
p_bÚdšg_d©a
->
³”_bË_id
;

730 
p_£c_key£t
->
keys_³”
.
p_pk
 = &
m_³”_pk
;

734 
”r_code
 = 
	`im_bË_addr_g‘
(
cÚn_hªdË
, &
³”_d©a
.
p_bÚdšg_d©a
->
³”_bË_id
.
id_addr_šfo
);

735 ià(
”r_code
 !ğ
NRF_SUCCESS
)

737  
NRF_ERROR_INTERNAL
;

741 
”r_code
 = 
	`pdb_wr™e_buf_¡Üe_´•¬e
(
³”_id
, 
PM_PEER_DATA_ID_BONDING
);

742 ià(
”r_code
 =ğ
NRF_ERROR_NOT_FOUND
)

744  
NRF_ERROR_INTERNAL
;

748  
”r_code
;

749 
	}
}

752 
»t_code_t
 
	$smd_·¿ms_»¶y
(
ušt16_t
 
cÚn_hªdË
,

753 
bË_g­_£c_·¿ms_t
 * 
p_£c_·¿ms
,

754 
bË_g­_Ësc_p256_pk_t
 * 
p_public_key
)

756 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

758 
ušt8_t
 
rŞe
 = 
	`bË_cÚn_¡©e_rŞe
(
cÚn_hªdË
);

759 
pm_³”_id_t
 
³”_id
 = 
PM_PEER_ID_INVALID
;

760 
»t_code_t
 
”r_code
 = 
NRF_SUCCESS
;

761 
ušt8_t
 
£c_¡©us
 = 
BLE_GAP_SEC_STATUS_SUCCESS
;

762 
boŞ
 
Ãw_³”_ü—‹d
 = 
	`³”_ü—‹d
(
cÚn_hªdË
);

763 
bË_g­_£c_key£t_t
 
£c_key£t
;

765 
	`mem£t
(&
£c_key£t
, 0, (
bË_g­_£c_key£t_t
));

766 ià(
rŞe
 =ğ
BLE_GAP_ROLE_PERIPH
)

769 
	`bË_cÚn_¡©e_u£r_æag_£t
(
cÚn_hªdË
, 
m_æag_®low_»·œšg
, 
çl£
);

772 ià(
rŞe
 =ğ
BLE_GAP_ROLE_INVALID
)

774  
BLE_ERROR_INVALID_CONN_HANDLE
;

777 ià(
p_£c_·¿ms
 =ğ
NULL
)

780 
£c_¡©us
 = 
BLE_GAP_SEC_STATUS_PAIRING_NOT_SUPP
;

782 ià(!
p_£c_·¿ms
->
bÚd
)

786 
£c_key£t
.
keys_own
.
p_pk
 = 
p_public_key
;

787 
£c_key£t
.
keys_³”
.
p_pk
 = &
m_³”_pk
;

793 
³”_id
 = 
	`im_³”_id_g‘_by_cÚn_hªdË
(
cÚn_hªdË
);

795 ià(
³”_id
 =ğ
PM_PEER_ID_INVALID
)

798 
³”_id
 = 
	`pdb_³”_®loÿ‹
();

799 ià(
³”_id
 !ğ
PM_PEER_ID_INVALID
)

801 
Ãw_³”_ü—‹d
 = 
Œue
;

805 
”r_code
 = 
NRF_ERROR_INTERNAL
;

808 ià(
rŞe
 =ğ
BLE_GAP_ROLE_PERIPH
 && !
	`®low_»·œšg
(
cÚn_hªdË
))

812 
	`£nd_cÚfig_»q
(
cÚn_hªdË
);

813 ià(!
	`®low_»·œšg
(
cÚn_hªdË
))

816 
£c_¡©us
 = 
BLE_GAP_SEC_STATUS_PAIRING_NOT_SUPP
;

820 ià((
£c_¡©us
 !ğ
BLE_GAP_SEC_STATUS_PAIRING_NOT_SUPP
è&& (
”r_code
 =ğ
NRF_SUCCESS
))

822 
”r_code
 = 
	`£c_key£t_fl
(
cÚn_hªdË
, 
³”_id
, 
rŞe
, 
p_public_key
, &
£c_key£t
);

826 ià(
”r_code
 =ğ
NRF_SUCCESS
)

830 ià(
rŞe
 =ğ
BLE_GAP_ROLE_PERIPH
)

832 
”r_code
 = 
	`sd_bË_g­_£c_·¿ms_»¶y
(
cÚn_hªdË
, 
£c_¡©us
, 
p_£c_·¿ms
, &
£c_key£t
);

836 
”r_code
 = 
	`sd_bË_g­_£c_·¿ms_»¶y
(
cÚn_hªdË
, 
£c_¡©us
, 
NULL
, &
£c_key£t
);

840 
	`£c_´oc_hou£k“pšg
(
cÚn_hªdË
,

841 
³”_id
,

842 (
”r_code
 =ğ
NRF_SUCCESS
è&& (
£c_¡©us
 =ğ
BLE_GAP_SEC_STATUS_SUCCESS
),

843 
Ãw_³”_ü—‹d
);

845  
”r_code
;

846 
	}
}

849 #ià
PM_CENTRAL_ENABLED


852 
»t_code_t
 
	$lšk_£cu»_ûÁ¿l_’üy±iÚ
(
ušt16_t
 
cÚn_hªdË
,

853 
pm_³”_id_t
 
³”_id
)

855 
pm_³”_d©a_æash_t
 
³”_d©a
;

856 
»t_code_t
 
”r_code
;

857 
bË_g­_’c_key_t
 cÚ¡ * 
p_exi¡šg_key
 = 
NULL
;

858 
boŞ
 
Ësc
 = 
çl£
;

860 
”r_code
 = 
	`pdb_³”_d©a_±r_g‘
(
³”_id
, 
PM_PEER_DATA_ID_BONDING
, &
³”_d©a
);

862 ià(
”r_code
 =ğ
NRF_SUCCESS
)

865 
p_exi¡šg_key
 = &(
³”_d©a
.
p_bÚdšg_d©a
->
³”_Ék
);

867 
Ësc
 = 
³”_d©a
.
p_bÚdšg_d©a
->
own_Ék
.
’c_šfo
.lesc;

868 ià(
Ësc
)

871 
p_exi¡šg_key
 = &(
³”_d©a
.
p_bÚdšg_d©a
->
own_Ék
);

875 ià((
”r_code
 !ğ
NRF_SUCCESS
è&& (”r_cod!ğ
NRF_ERROR_NOT_FOUND
))

877 ià(
”r_code
 !ğ
NRF_ERROR_BUSY
)

880 
”r_code
 = 
NRF_ERROR_INTERNAL
;

883 ià(
p_exi¡šg_key
 =ğ
NULL
)

887 
”r_code
 = 
NRF_ERROR_BUSY
;

889 ià(!
Ësc
 && !
	`im_ma¡”_id_is_v®id
(&(
p_exi¡šg_key
->
ma¡”_id
)))

892 
”r_code
 = 
NRF_ERROR_INVALID_DATA
;

897 
”r_code
 = 
	`sd_bË_g­_’üy±
(
cÚn_hªdË
,

898 &(
p_exi¡šg_key
->
ma¡”_id
),

899 &(
p_exi¡šg_key
->
’c_šfo
));

902 
	`£c_´oc_¡¬t
(
cÚn_hªdË
, 
”r_code
 =ğ
NRF_SUCCESS
, 
PM_CONN_SEC_PROCEDURE_ENCRYPTION
);

903 
	`£c_´oc_hou£k“pšg
(
cÚn_hªdË
, 
³”_id
, (
”r_code
 =ğ
NRF_SUCCESS
), 
çl£
);

905  
”r_code
;

906 
	}
}

911 
»t_code_t
 
	$lšk_£cu»_ûÁ¿l_·œšg
(
ušt16_t
 
cÚn_hªdË
,

912 
pm_³”_id_t
 
³”_id
,

913 
bË_g­_£c_·¿ms_t
 * 
p_£c_·¿ms
)

915 
pm_cÚn_£c_´oûdu»_t
 
´oûdu»
 = 
PM_CONN_SEC_PROCEDURE_PAIRING
;

916 
boŞ
 
Ãw_³”_ü—‹d
 = 
çl£
;

917 
»t_code_t
 
”r_code
 = 
NRF_SUCCESS
;

918 
pm_³”_d©a_t
 
dummy_³”_d©a
;

920 ià(
p_£c_·¿ms
 =ğ
NULL
)

922 
”r_code
 = 
	`sd_bË_g­_auth’tiÿ‹
(
cÚn_hªdË
, 
NULL
);

926 ià(
p_£c_·¿ms
->
bÚd
)

928 
´oûdu»
 = 
PM_CONN_SEC_PROCEDURE_BONDING
;

930 ià(
³”_id
 =ğ
PM_PEER_ID_INVALID
)

933 
³”_id
 = 
	`pdb_³”_®loÿ‹
();

934 
Ãw_³”_ü—‹d
 = 
Œue
;

937 ià(
³”_id
 =ğ
PM_PEER_ID_INVALID
)

939 
”r_code
 = 
NRF_ERROR_INTERNAL
;

943 
”r_code
 = 
	`pdb_wr™e_buf_g‘
(
³”_id
, 
PM_PEER_DATA_ID_BONDING
, 1, &
dummy_³”_d©a
);

944 ià(
”r_code
 =ğ
NRF_SUCCESS
)

946 
”r_code
 = 
	`pdb_wr™e_buf_¡Üe_´•¬e
(
³”_id
, 
PM_PEER_DATA_ID_BONDING
);

951 ià(
”r_code
 =ğ
NRF_SUCCESS
)

953 
”r_code
 = 
	`sd_bË_g­_auth’tiÿ‹
(
cÚn_hªdË
, 
p_£c_·¿ms
);

956 ià(
”r_code
 !ğ
NRF_SUCCESS
)

958 
»t_code_t
 
”r_code_ä“
 = 
	`pdb_wr™e_buf_»Ëa£
(
³”_id
, 
PM_PEER_DATA_ID_BONDING
);

959 ià((
”r_code_ä“
 !ğ
NRF_SUCCESS
è&& (”r_code_ä“ !ğ
NRF_ERROR_NOT_FOUND
))

961 
”r_code
 = 
NRF_ERROR_INTERNAL
;

966 ià(
”r_code
 =ğ
NRF_ERROR_NO_MEM
)

969 
”r_code
 = 
NRF_ERROR_BUSY
;

972 
	`£c_´oc_¡¬t
(
cÚn_hªdË
, 
”r_code
 =ğ
NRF_SUCCESS
, 
´oûdu»
);

973 
	`£c_´oc_hou£k“pšg
(
cÚn_hªdË
, 
³”_id
, (
”r_code
 =ğ
NRF_SUCCESS
), 
Ãw_³”_ü—‹d
);

975  
”r_code
;

976 
	}
}

982 
»t_code_t
 
	$lšk_£cu»_ûÁ¿l
(
ušt16_t
 
cÚn_hªdË
,

983 
bË_g­_£c_·¿ms_t
 * 
p_£c_·¿ms
,

984 
boŞ
 
fÜû_»·œšg
)

986 
»t_code_t
 
”r_code
;

987 
pm_³”_id_t
 
³”_id
;

989 ià(
p_£c_·¿ms
 =ğ
NULL
)

991  
	`sd_bË_g­_auth’tiÿ‹
(
cÚn_hªdË
, 
NULL
);

995 
	`bË_cÚn_¡©e_u£r_æag_£t
(
cÚn_hªdË
, 
m_æag_®low_»·œšg
, 
fÜû_»·œšg
);

997 
³”_id
 = 
	`im_³”_id_g‘_by_cÚn_hªdË
(
cÚn_hªdË
);

999 ià((
³”_id
 !ğ
PM_PEER_ID_INVALID
è&& !
fÜû_»·œšg
)

1003 
”r_code
 = 
	`lšk_£cu»_ûÁ¿l_’üy±iÚ
(
cÚn_hªdË
, 
³”_id
);

1009 
”r_code
 = 
	`lšk_£cu»_ûÁ¿l_·œšg
(
cÚn_hªdË
, 
³”_id
, 
p_£c_·¿ms
);

1012  
”r_code
;

1013 
	}
}

1019 
	$£c_»que¡_´oûss
(
bË_g­_evt_t
 cÚ¡ * 
p_g­_evt
)

1021 
pm_evt_t
 
evt
 =

1023 .
evt_id
 = 
PM_EVT_SLAVE_SECURITY_REQ
,

1024 .
cÚn_hªdË
 = 
p_g­_evt
->conn_handle,

1025 .
·¿ms
 =

1027 .
¦ave_£cur™y_»q
 =

1029 .
bÚd
 = 
p_g­_evt
->
·¿ms
.
£c_»que¡
.bond,

1030 .
m™m
 = 
p_g­_evt
->
·¿ms
.
£c_»que¡
.mitm,

1034 
	`evt_£nd
(&
evt
);

1036 
	}
}

1042 
»t_code_t
 
	$lšk_£cu»_³rh”®
(
ušt16_t
 
cÚn_hªdË
, 
bË_g­_£c_·¿ms_t
 * 
p_£c_·¿ms
)

1044 
»t_code_t
 
”r_code
 = 
NRF_SUCCESS
;

1046 ià(
p_£c_·¿ms
 !ğ
NULL
)

1048 
”r_code
 = 
	`sd_bË_g­_auth’tiÿ‹
(
cÚn_hªdË
, 
p_£c_·¿ms
);

1051  
”r_code
;

1052 
	}
}

1055 
»t_code_t
 
	$smd_lšk_£cu»
(
ušt16_t
 
cÚn_hªdË
,

1056 
bË_g­_£c_·¿ms_t
 * 
p_£c_·¿ms
,

1057 
boŞ
 
fÜû_»·œšg
)

1059 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

1061 
ušt8_t
 
rŞe
 = 
	`bË_cÚn_¡©e_rŞe
(
cÚn_hªdË
);

1063 
rŞe
)

1065 #ià
PM_CENTRAL_ENABLED


1066 
BLE_GAP_ROLE_CENTRAL
:

1067  
	`lšk_£cu»_ûÁ¿l
(
cÚn_hªdË
, 
p_£c_·¿ms
, 
fÜû_»·œšg
);

1070 
BLE_GAP_ROLE_PERIPH
:

1071  
	`lšk_£cu»_³rh”®
(
cÚn_hªdË
, 
p_£c_·¿ms
);

1074  
BLE_ERROR_INVALID_CONN_HANDLE
;

1076 
	}
}

1079 
	$smd_bË_evt_hªdËr
(
bË_evt_t
 cÚ¡ * 
p_bË_evt
)

1081 
p_bË_evt
->
h—d”
.
evt_id
)

1083 
BLE_GAP_EVT_DISCONNECTED
:

1084 
	`discÚÃù_´oûss
(&(
p_bË_evt
->
evt
.
g­_evt
));

1087 
BLE_GAP_EVT_SEC_PARAMS_REQUEST
:

1088 
	`£c_·¿ms_»que¡_´oûss
(&(
p_bË_evt
->
evt
.
g­_evt
));

1091 
BLE_GAP_EVT_SEC_INFO_REQUEST
:

1092 
	`£c_šfo_»que¡_´oûss
(&(
p_bË_evt
->
evt
.
g­_evt
));

1095 #ià
PM_CENTRAL_ENABLED


1096 
BLE_GAP_EVT_SEC_REQUEST
:

1097 
	`£c_»que¡_´oûss
(&(
p_bË_evt
->
evt
.
g­_evt
));

1101 
BLE_GAP_EVT_AUTH_STATUS
:

1102 
	`auth_¡©us_´oûss
(&(
p_bË_evt
->
evt
.
g­_evt
));

1105 
BLE_GAP_EVT_CONN_SEC_UPDATE
:

1106 
	`cÚn_£c_upd©e_´oûss
(&(
p_bË_evt
->
evt
.
g­_evt
));

1109 
	}
}

	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\ble\peer_manager\security_manager.c

40 
	~"sdk_commÚ.h
"

41 #ià
NRF_MODULE_ENABLED
(
PEER_MANAGER
)

42 
	~"£cur™y_mªag”.h
"

44 
	~<¡ršg.h
>

45 
	~"bË_”r.h
"

46 
	~"£cur™y_di¥©ch”.h
"

47 
	~"³”_d©aba£.h
"

48 
	~"bË_cÚn_¡©e.h
"

49 
	~"id_mªag”.h
"

50 
	~"sdk_commÚ.h
"

54 
	#SM_EVENT_HANDLERS_CNT
 ((
m_evt_hªdËrs
è/ (m_evt_hªdËrs[0]))

	)

58 
pm_sm_evt_hªdËr
(
pm_evt_t
 * 
p_sm_evt
);

62 
pm_evt_hªdËr_š‹º®_t
 cÚ¡ 
	gm_evt_hªdËrs
[] =

64 
pm_sm_evt_hªdËr


71 
bË_g­_£c_·¿ms_t
 * 
	mp_£c_·¿ms
;

72 
bË_g­_£c_·¿ms_t
 
	m£c_·¿ms_mem
;

73 
boŞ
 
	m·¿ms_»¶y_ÿÎed
;

74 } 
	t£c_·¿ms_»¶y_cÚ‹xt_t
;

76 
boŞ
 
	gm_moduË_š™Ÿlized
;

78 
bË_g­_£c_·¿ms_t
 
	gm_£c_·¿ms
;

79 
bË_g­_£c_·¿ms_t
 * 
	gmp_£c_·¿ms
 = 
NULL
;

80 
boŞ
 
	gm_£c_·¿ms_£t
 = 
çl£
;

82 
bË_g­_Ësc_p256_pk_t
 * 
	gm_p_public_key
;

84 
bË_cÚn_¡©e_u£r_æag_id_t
 
	gm_æag_lšk_£cu»_³ndšg_busy
 = 
BLE_CONN_STATE_USER_FLAG_INVALID
;

85 
bË_cÚn_¡©e_u£r_æag_id_t
 
	gm_æag_lšk_£cu»_³ndšg_æash_fuÎ
 = 
BLE_CONN_STATE_USER_FLAG_INVALID
;

86 
bË_cÚn_¡©e_u£r_æag_id_t
 
	gm_æag_lšk_£cu»_fÜû_»·œšg
 = 
BLE_CONN_STATE_USER_FLAG_INVALID
;

87 
bË_cÚn_¡©e_u£r_æag_id_t
 
	gm_æag_lšk_£cu»_nuÎ_·¿ms
 = 
BLE_CONN_STATE_USER_FLAG_INVALID
;

88 
bË_cÚn_¡©e_u£r_æag_id_t
 
	gm_æag_·¿ms_»¶y_³ndšg_busy
 = 
BLE_CONN_STATE_USER_FLAG_INVALID
;

89 
bË_cÚn_¡©e_u£r_æag_id_t
 
	gm_æag_·¿ms_»¶y_³ndšg_æash_fuÎ
 = 
BLE_CONN_STATE_USER_FLAG_INVALID
;

96 
	$evt_£nd
(
pm_evt_t
 * 
p_ev’t
)

98 
ušt32_t
 
i
 = 0; i < 
SM_EVENT_HANDLERS_CNT
; i++)

100 
m_evt_hªdËrs
[
i
](
p_ev’t
);

102 
	}
}

113 
	$æags_£t_äom_”r_code
(
ušt16_t
 
cÚn_hªdË
, 
»t_code_t
 
”r_code
, 
boŞ
 
·¿ms_»¶y
)

115 
boŞ
 
æag_v®ue_æash_fuÎ
 = 
çl£
;

116 
boŞ
 
æag_v®ue_busy
 = 
çl£
;

118 ià((
”r_code
 =ğ
NRF_ERROR_STORAGE_FULL
))

120 
æag_v®ue_busy
 = 
çl£
;

121 
æag_v®ue_æash_fuÎ
 = 
Œue
;

123 ià(
”r_code
 =ğ
NRF_ERROR_BUSY
)

125 
æag_v®ue_busy
 = 
Œue
;

126 
æag_v®ue_æash_fuÎ
 = 
çl£
;

130 
æag_v®ue_busy
 = 
çl£
;

131 
æag_v®ue_æash_fuÎ
 = 
çl£
;

134 ià(
·¿ms_»¶y
)

136 
	`bË_cÚn_¡©e_u£r_æag_£t
(
cÚn_hªdË
,

137 
m_æag_·¿ms_»¶y_³ndšg_æash_fuÎ
,

138 
æag_v®ue_æash_fuÎ
);

139 
	`bË_cÚn_¡©e_u£r_æag_£t
(
cÚn_hªdË
,

140 
m_æag_·¿ms_»¶y_³ndšg_busy
,

141 
æag_v®ue_busy
);

142 
	`bË_cÚn_¡©e_u£r_æag_£t
(
cÚn_hªdË
,

143 
m_æag_lšk_£cu»_³ndšg_æash_fuÎ
,

144 
çl£
);

145 
	`bË_cÚn_¡©e_u£r_æag_£t
(
cÚn_hªdË
,

146 
m_æag_lšk_£cu»_³ndšg_busy
,

147 
çl£
);

151 
	`bË_cÚn_¡©e_u£r_æag_£t
(
cÚn_hªdË
,

152 
m_æag_lšk_£cu»_³ndšg_æash_fuÎ
,

153 
æag_v®ue_æash_fuÎ
);

154 
	`bË_cÚn_¡©e_u£r_æag_£t
(
cÚn_hªdË
,

155 
m_æag_lšk_£cu»_³ndšg_busy
,

156 
æag_v®ue_busy
);

158 
	}
}

170 
	$ev’ts_£nd_äom_”r_code
(
ušt16_t
 
cÚn_hªdË
,

171 
»t_code_t
 
”r_code
,

172 
bË_g­_£c_·¿ms_t
 * 
p_£c_·¿ms
)

174 ià((
”r_code
 !ğ
NRF_SUCCESS
è&& (”r_cod!ğ
NRF_ERROR_BUSY
è&& (”r_cod!ğ
NRF_ERROR_INVALID_STATE
))

176 
pm_evt_t
 
evt
 =

178 .
cÚn_hªdË
 = conn_handle,

179 .
³”_id
 = 
	`im_³”_id_g‘_by_cÚn_hªdË
(
cÚn_hªdË
),

181 ià(
”r_code
 =ğ
NRF_ERROR_TIMEOUT
)

183 
evt
.
evt_id
 = 
PM_EVT_CONN_SEC_FAILED
;

184 
evt
.
·¿ms
.
cÚn_£c_çed
.
´oûdu»
 = ((
p_£c_·¿ms
 !ğ
NULL
è&&…_£c_·¿ms->
bÚd
)

185 ? 
PM_CONN_SEC_PROCEDURE_BONDING


186 : 
PM_CONN_SEC_PROCEDURE_PAIRING
;

187 
evt
.
·¿ms
.
cÚn_£c_çed
.
”rÜ_¤c
 = 
BLE_GAP_SEC_STATUS_SOURCE_LOCAL
;

188 
evt
.
·¿ms
.
cÚn_£c_çed
.
”rÜ
 = 
PM_CONN_SEC_ERROR_SMP_TIMEOUT
;

190 ià(
”r_code
 =ğ
NRF_ERROR_STORAGE_FULL
)

192 
evt
.
evt_id
 = 
PM_EVT_STORAGE_FULL
;

196 
evt
.
evt_id
 = 
PM_EVT_ERROR_UNEXPECTED
;

197 
evt
.
·¿ms
.
”rÜ_uÃx³ùed
.
”rÜ
 = 
”r_code
;

199 
	`evt_£nd
(&
evt
);

201 
	}
}

211 
	$·¿ms_»q_£nd
(
ušt16_t
 
cÚn_hªdË
,

212 
bË_g­_£c_·¿ms_t
 cÚ¡ * 
p_³”_·¿ms
,

213 
£c_·¿ms_»¶y_cÚ‹xt_t
 * 
p_cÚ‹xt
)

215 
pm_evt_t
 
evt
;

216 
evt
.
evt_id
 = 
PM_EVT_CONN_SEC_PARAMS_REQ
;

217 
evt
.
cÚn_hªdË
 = conn_handle;

218 
evt
.
³”_id
 = 
	`im_³”_id_g‘_by_cÚn_hªdË
(
cÚn_hªdË
);

219 
evt
.
·¿ms
.
cÚn_£c_·¿ms_»q
.
p_³”_·¿ms
 =…_peer_params;

220 
evt
.
·¿ms
.
cÚn_£c_·¿ms_»q
.
p_cÚ‹xt
 =…_context;

222 
	`evt_£nd
(&
evt
);

223 
	}
}

230 
£c_·¿ms_»¶y_cÚ‹xt_t
 
	$Ãw_cÚ‹xt_g‘
()

232 
£c_·¿ms_»¶y_cÚ‹xt_t
 
Ãw_cÚ‹xt
 =

234 .
p_£c_·¿ms
 = 
mp_£c_·¿ms
,

235 .
·¿ms_»¶y_ÿÎed
 = 
çl£


237  
Ãw_cÚ‹xt
;

238 
	}
}

250 
»t_code_t
 
	$lšk_£cu»
(
ušt16_t
 
cÚn_hªdË
,

251 
boŞ
 
nuÎ_·¿ms
,

252 
boŞ
 
fÜû_»·œšg
,

253 
boŞ
 
£nd_ev’ts
)

255 
»t_code_t
 
”r_code
;

256 
»t_code_t
 
»tuº_”r_code
;

257 
bË_g­_£c_·¿ms_t
 * 
p_£c_·¿ms
;

259 ià(
nuÎ_·¿ms
)

261 
p_£c_·¿ms
 = 
NULL
;

265 
£c_·¿ms_»¶y_cÚ‹xt_t
 
cÚ‹xt
 = 
	`Ãw_cÚ‹xt_g‘
();

266 
	`·¿ms_»q_£nd
(
cÚn_hªdË
, 
NULL
, &
cÚ‹xt
);

267 
p_£c_·¿ms
 = 
cÚ‹xt
.p_sec_params;

269 ià(!
m_£c_·¿ms_£t
 && !
cÚ‹xt
.
·¿ms_»¶y_ÿÎed
)

272  
NRF_ERROR_NOT_FOUND
;

277 
”r_code
 = 
	`smd_lšk_£cu»
(
cÚn_hªdË
, 
p_£c_·¿ms
, 
fÜû_»·œšg
);

279 
	`æags_£t_äom_”r_code
(
cÚn_hªdË
, 
”r_code
, 
çl£
);

281 
”r_code
)

283 
NRF_ERROR_BUSY
:

284 
	`bË_cÚn_¡©e_u£r_æag_£t
(
cÚn_hªdË
, 
m_æag_lšk_£cu»_nuÎ_·¿ms
, 
nuÎ_·¿ms
);

285 
	`bË_cÚn_¡©e_u£r_æag_£t
(
cÚn_hªdË
, 
m_æag_lšk_£cu»_fÜû_»·œšg
, 
fÜû_»·œšg
);

286 
»tuº_”r_code
 = 
NRF_SUCCESS
;

288 
NRF_ERROR_STORAGE_FULL
:

289 
	`bË_cÚn_¡©e_u£r_æag_£t
(
cÚn_hªdË
, 
m_æag_lšk_£cu»_nuÎ_·¿ms
, 
nuÎ_·¿ms
);

290 
	`bË_cÚn_¡©e_u£r_æag_£t
(
cÚn_hªdË
, 
m_æag_lšk_£cu»_fÜû_»·œšg
, 
fÜû_»·œšg
);

292 
NRF_SUCCESS
:

293 
NRF_ERROR_TIMEOUT
:

294 
BLE_ERROR_INVALID_CONN_HANDLE
:

295 
NRF_ERROR_INVALID_STATE
:

296 
NRF_ERROR_INVALID_DATA
:

297 
»tuº_”r_code
 = 
”r_code
;

300 
»tuº_”r_code
 = 
NRF_ERROR_INTERNAL
;

304 ià(
£nd_ev’ts
)

306 
	`ev’ts_£nd_äom_”r_code
(
cÚn_hªdË
, 
”r_code
, 
p_£c_·¿ms
);

309  
»tuº_”r_code
;

310 
	}
}

318 
	$smd_·¿ms_»¶y_³rfÜm
(
ušt16_t
 
cÚn_hªdË
, 
bË_g­_£c_·¿ms_t
 cÚ¡ * 
p_³”_·¿ms
)

320 
»t_code_t
 
”r_code
;

321 
£c_·¿ms_»¶y_cÚ‹xt_t
 
cÚ‹xt
 = 
	`Ãw_cÚ‹xt_g‘
();

323 
	`·¿ms_»q_£nd
(
cÚn_hªdË
, 
p_³”_·¿ms
, &
cÚ‹xt
);

325 
”r_code
 = 
	`smd_·¿ms_»¶y
(
cÚn_hªdË
, 
cÚ‹xt
.
p_£c_·¿ms
, 
m_p_public_key
);

327 
	`æags_£t_äom_”r_code
(
cÚn_hªdË
, 
”r_code
, 
Œue
);

328 
	`ev’ts_£nd_äom_”r_code
(
cÚn_hªdË
, 
”r_code
, 
cÚ‹xt
.
p_£c_·¿ms
);

329 
	}
}

336 
__INLINE
 
	$·¿ms_»q_´oûss
(
pm_evt_t
 cÚ¡ * 
p_ev’t
)

338 
	`smd_·¿ms_»¶y_³rfÜm
(
p_ev’t
->
cÚn_hªdË
,…_ev’t->
·¿ms
.
cÚn_£c_·¿ms_»q
.
p_³”_·¿ms
);

339 
	}
}

346 
	$£c_»q_´oûss
(
pm_evt_t
 cÚ¡ * 
p_ev’t
)

348 
boŞ
 
nuÎ_·¿ms
 = 
çl£
;

349 ià(
mp_£c_·¿ms
 =ğ
NULL
)

351 
nuÎ_·¿ms
 = 
Œue
;

353 ià((
boŞ
)
m_£c_·¿ms
.
bÚd
 < (boŞ)
p_ev’t
->
·¿ms
.
¦ave_£cur™y_»q
.bond)

355 
nuÎ_·¿ms
 = 
Œue
;

357 ià((
boŞ
)
m_£c_·¿ms
.
m™m
 < (boŞ)
p_ev’t
->
·¿ms
.
¦ave_£cur™y_»q
.mitm)

359 
nuÎ_·¿ms
 = 
Œue
;

365 
»t_code_t
 
”r_code
 = 
	`lšk_£cu»
(
p_ev’t
->
cÚn_hªdË
, 
nuÎ_·¿ms
, 
çl£
, 
Œue
);

366 
	`UNUSED_VARIABLE
(
”r_code
);

368 
	}
}

375 
	$evt_fÜw¬d
(
pm_evt_t
 * 
p_ev’t
)

377 
	`evt_£nd
(
p_ev’t
);

378 
	}
}

386 
	$sm_smd_evt_hªdËr
(
pm_evt_t
 * 
p_ev’t
)

388 
p_ev’t
->
evt_id
)

390 
PM_EVT_CONN_SEC_PARAMS_REQ
:

391 
	`·¿ms_»q_´oûss
(
p_ev’t
);

393 
PM_EVT_SLAVE_SECURITY_REQ
:

394 
	`£c_»q_´oûss
(
p_ev’t
);

398 
	`evt_fÜw¬d
(
p_ev’t
);

401 
	}
}

406 
	$·¿ms_»¶y_³ndšg_hªdË
(
ušt16_t
 
cÚn_hªdË
, * 
p_cÚ‹xt
)

408 
	`UNUSED_PARAMETER
(
p_cÚ‹xt
);

409 
	`smd_·¿ms_»¶y_³rfÜm
(
cÚn_hªdË
, 
NULL
);

410 
	}
}

415 
	$lšk_£cu»_³ndšg_hªdË
(
ušt16_t
 
cÚn_hªdË
, * 
p_cÚ‹xt
)

417 
	`UNUSED_PARAMETER
(
p_cÚ‹xt
);

419 
boŞ
 
fÜû_»·œšg
 = 
	`bË_cÚn_¡©e_u£r_æag_g‘
(
cÚn_hªdË
, 
m_æag_lšk_£cu»_fÜû_»·œšg
);

420 
boŞ
 
nuÎ_·¿ms
 = 
	`bË_cÚn_¡©e_u£r_æag_g‘
(
cÚn_hªdË
, 
m_æag_lšk_£cu»_nuÎ_·¿ms
);

423 
»t_code_t
 
”r_code
 = 
	`lšk_£cu»
(
cÚn_hªdË
, 
nuÎ_·¿ms
, 
fÜû_»·œšg
, 
Œue
);

424 
	`UNUSED_VARIABLE
(
”r_code
);

425 
	}
}

433 
	$sm_pdb_evt_hªdËr
(
pm_evt_t
 * 
p_ev’t
)

435 
p_ev’t
->
evt_id
)

437 
PM_EVT_FLASH_GARBAGE_COLLECTED
:

438 (è
	`bË_cÚn_¡©e_fÜ_—ch_£t_u£r_æag
(
m_æag_·¿ms_»¶y_³ndšg_æash_fuÎ
,

439 
·¿ms_»¶y_³ndšg_hªdË
,

440 
NULL
);

441 (è
	`bË_cÚn_¡©e_fÜ_—ch_£t_u£r_æag
(
m_æag_lšk_£cu»_³ndšg_æash_fuÎ
,

442 
lšk_£cu»_³ndšg_hªdË
,

443 
NULL
);

445 
PM_EVT_PEER_DATA_UPDATE_SUCCEEDED
:

446 
PM_EVT_PEER_DATA_UPDATE_FAILED
:

447 
PM_EVT_PEER_DELETE_SUCCEEDED
:

448 
PM_EVT_PEER_DELETE_FAILED
:

449 (è
	`bË_cÚn_¡©e_fÜ_—ch_£t_u£r_æag
(
m_æag_·¿ms_»¶y_³ndšg_busy
,

450 
·¿ms_»¶y_³ndšg_hªdË
,

451 
NULL
);

452 (è
	`bË_cÚn_¡©e_fÜ_—ch_£t_u£r_æag
(
m_æag_lšk_£cu»_³ndšg_busy
,

453 
lšk_£cu»_³ndšg_hªdË
,

454 
NULL
);

460 
	}
}

467 
	$æag_id_š™
(
bË_cÚn_¡©e_u£r_æag_id_t
 * 
p_æag_id
)

469 ià(*
p_æag_id
 =ğ
BLE_CONN_STATE_USER_FLAG_INVALID
)

471 *
p_æag_id
 = 
	`bË_cÚn_¡©e_u£r_æag_acquœe
();

473 
	}
}

476 
»t_code_t
 
	$sm_š™
()

478 
	`NRF_PM_DEBUG_CHECK
(!
m_moduË_š™Ÿlized
);

480 
	`æag_id_š™
(&
m_æag_lšk_£cu»_³ndšg_busy
);

481 
	`æag_id_š™
(&
m_æag_lšk_£cu»_³ndšg_æash_fuÎ
);

482 
	`æag_id_š™
(&
m_æag_lšk_£cu»_fÜû_»·œšg
);

483 
	`æag_id_š™
(&
m_æag_lšk_£cu»_nuÎ_·¿ms
);

484 
	`æag_id_š™
(&
m_æag_·¿ms_»¶y_³ndšg_busy
);

485 
	`æag_id_š™
(&
m_æag_·¿ms_»¶y_³ndšg_æash_fuÎ
);

487 ià(
m_æag_·¿ms_»¶y_³ndšg_æash_fuÎ
 =ğ
BLE_CONN_STATE_USER_FLAG_INVALID
)

489  
NRF_ERROR_INTERNAL
;

492 
m_moduË_š™Ÿlized
 = 
Œue
;

494  
NRF_SUCCESS
;

495 
	}
}

498 
	$sm_bË_evt_hªdËr
(
bË_evt_t
 cÚ¡ * 
p_bË_evt
)

500 
	`NRF_PM_DEBUG_CHECK
(
p_bË_evt
 !ğ
NULL
);

502 
	`smd_bË_evt_hªdËr
(
p_bË_evt
);

503 (è
	`bË_cÚn_¡©e_fÜ_—ch_£t_u£r_æag
(
m_æag_lšk_£cu»_³ndšg_busy
,

504 
lšk_£cu»_³ndšg_hªdË
,

505 
NULL
);

506 
	}
}

515 
boŞ
 
	$£c_·¿ms_v”ify
(
bË_g­_£c_·¿ms_t
 * 
p_£c_·¿ms
)

518 ià(
p_£c_·¿ms
 =ğ
NULL
)

520  
çl£
;

524 ià(!
p_£c_·¿ms
->
m™m
 &&…_£c_·¿ms->
oob
)

526  
çl£
;

530 ià(
p_£c_·¿ms
->
io_ÿps
 > 
BLE_GAP_IO_CAPS_KEYBOARD_DISPLAY
)

532  
çl£
;

536 ià(
p_£c_·¿ms
->
m™m
 && (p_£c_·¿ms->
io_ÿps
 =ğ
BLE_GAP_IO_CAPS_NONE
è&& !p_£c_·¿ms->
oob
)

538  
çl£
;

542 ià(
p_£c_·¿ms
->
mš_key_size
 >…_£c_·¿ms->
max_key_size
)

544  
çl£
;

548 ià(
p_£c_·¿ms
->
mš_key_size
 < 7)

550  
çl£
;

554 ià(
p_£c_·¿ms
->
max_key_size
 > 16)

556  
çl£
;

560 ià(
p_£c_·¿ms
->
kdi¡_own
.
sign
 ||…_£c_·¿ms->
kdi¡_³”
.sign)

562  
çl£
;

566 ià(
p_£c_·¿ms
->
kdi¡_own
.
lšk
 ||…_£c_·¿ms->
kdi¡_³”
.link)

568  
çl£
;

572 ià(!
p_£c_·¿ms
->
bÚd
 && (…_£c_·¿ms->
kdi¡_own
.
’c


573 || 
p_£c_·¿ms
->
kdi¡_own
.
id


574 || 
p_£c_·¿ms
->
kdi¡_³”
.
’c


575 || 
p_£c_·¿ms
->
kdi¡_³”
.
id
))

577  
çl£
;

581 iàĞ
p_£c_·¿ms
->
bÚd


582 && !
p_£c_·¿ms
->
kdi¡_own
.
’c


583 && !
p_£c_·¿ms
->
kdi¡_own
.
id


584 && !
p_£c_·¿ms
->
kdi¡_³”
.
’c


585 && !
p_£c_·¿ms
->
kdi¡_³”
.
id
)

587  
çl£
;

590  
Œue
;

591 
	}
}

594 
»t_code_t
 
	$sm_£c_·¿ms_£t
(
bË_g­_£c_·¿ms_t
 * 
p_£c_·¿ms
)

596 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

598 ià(
p_£c_·¿ms
 =ğ
NULL
)

600 
mp_£c_·¿ms
 = 
NULL
;

601 
m_£c_·¿ms_£t
 = 
Œue
;

602  
NRF_SUCCESS
;

604 ià(
	`£c_·¿ms_v”ify
(
p_£c_·¿ms
))

606 
m_£c_·¿ms
 = *
p_£c_·¿ms
;

607 
mp_£c_·¿ms
 = &
m_£c_·¿ms
;

608 
m_£c_·¿ms_£t
 = 
Œue
;

609  
NRF_SUCCESS
;

613  
NRF_ERROR_INVALID_PARAM
;

615 
	}
}

618 
	$sm_cÚn_£c_cÚfig_»¶y
(
ušt16_t
 
cÚn_hªdË
, 
pm_cÚn_£c_cÚfig_t
 * 
p_cÚn_£c_cÚfig
)

620 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

621 
	`NRF_PM_DEBUG_CHECK
(
p_cÚn_£c_cÚfig
 !ğ
NULL
);

623 
	`smd_cÚn_£c_cÚfig_»¶y
(
cÚn_hªdË
, 
p_cÚn_£c_cÚfig
);

624 
	}
}

627 
»t_code_t
 
	$sm_£c_·¿ms_»¶y
(
ušt16_t
 
cÚn_hªdË
,

628 
bË_g­_£c_·¿ms_t
 * 
p_£c_·¿ms
,

629 cÚ¡ * 
p_cÚ‹xt
)

631 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

632 
	`VERIFY_PARAM_NOT_NULL
(
p_cÚ‹xt
);

634 
£c_·¿ms_»¶y_cÚ‹xt_t
 * 
p_£c_·¿ms_»¶y_cÚ‹xt
 = (£c_·¿ms_»¶y_cÚ‹xt_ˆ*)
p_cÚ‹xt
;

635 ià(
p_£c_·¿ms
 =ğ
NULL
)

638 
p_£c_·¿ms_»¶y_cÚ‹xt
->
p_£c_·¿ms
 = 
NULL
;

640 ià(
	`£c_·¿ms_v”ify
(
p_£c_·¿ms
))

643 
p_£c_·¿ms_»¶y_cÚ‹xt
->
£c_·¿ms_mem
 = *
p_£c_·¿ms
;

644 
p_£c_·¿ms_»¶y_cÚ‹xt
->
p_£c_·¿ms
 = &p_£c_·¿ms_»¶y_cÚ‹xt->
£c_·¿ms_mem
;

648  
NRF_ERROR_INVALID_PARAM
;

650 
p_£c_·¿ms_»¶y_cÚ‹xt
->
·¿ms_»¶y_ÿÎed
 = 
Œue
;

652  
NRF_SUCCESS
;

653 
	}
}

656 
»t_code_t
 
	$sm_Ësc_public_key_£t
(
bË_g­_Ësc_p256_pk_t
 * 
p_public_key
)

658 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

660 
m_p_public_key
 = 
p_public_key
;

662  
NRF_SUCCESS
;

663 
	}
}

666 
»t_code_t
 
	$sm_lšk_£cu»
(
ušt16_t
 
cÚn_hªdË
, 
boŞ
 
fÜû_»·œšg
)

668 
»t_code_t
 
»t
;

670 
	`NRF_PM_DEBUG_CHECK
(
m_moduË_š™Ÿlized
);

672 
»t
 = 
	`lšk_£cu»
(
cÚn_hªdË
, 
çl£
, 
fÜû_»·œšg
, false);

673  
»t
;

674 
	}
}

	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\boards\boards.c

40 
	~"bßrds.h
"

41 #ià
defšed
(
BOARDS_WITH_USB_DFU_TRIGGER
è&& defšed(
BOARD_PCA10059
)

42 
	~"Äf_dfu_Œigg”_usb.h
"

44 
	~<¡dšt.h
>

45 
	~<¡dboŞ.h
>

47 #ià
LEDS_NUMBER
 > 0

48 cÚ¡ 
ušt8_t
 
	gm_bßrd_Ëd_li¡
[
LEDS_NUMBER
] = 
LEDS_LIST
;

51 #ià
BUTTONS_NUMBER
 > 0

52 cÚ¡ 
ušt8_t
 
	gm_bßrd_bŠ_li¡
[
BUTTONS_NUMBER
] = 
BUTTONS_LIST
;

55 #ià
LEDS_NUMBER
 > 0

56 
boŞ
 
	$b¥_bßrd_Ëd_¡©e_g‘
(
ušt32_t
 
Ëd_idx
)

58 
	`ASSERT
(
Ëd_idx
 < 
LEDS_NUMBER
);

59 
boŞ
 
pš_£t
 = 
	`Äf_gpio_pš_out_»ad
(
m_bßrd_Ëd_li¡
[
Ëd_idx
]è? 
Œue
 : 
çl£
;

60  (
pš_£t
 =ğ(
LEDS_ACTIVE_STATE
 ? 
Œue
 : 
çl£
));

61 
	}
}

63 
	$b¥_bßrd_Ëd_Ú
(
ušt32_t
 
Ëd_idx
)

65 
	`ASSERT
(
Ëd_idx
 < 
LEDS_NUMBER
);

66 
	`Äf_gpio_pš_wr™e
(
m_bßrd_Ëd_li¡
[
Ëd_idx
], 
LEDS_ACTIVE_STATE
 ? 1 : 0);

67 
	}
}

69 
	$b¥_bßrd_Ëd_off
(
ušt32_t
 
Ëd_idx
)

71 
	`ASSERT
(
Ëd_idx
 < 
LEDS_NUMBER
);

72 
	`Äf_gpio_pš_wr™e
(
m_bßrd_Ëd_li¡
[
Ëd_idx
], 
LEDS_ACTIVE_STATE
 ? 0 : 1);

73 
	}
}

75 
	$b¥_bßrd_Ëds_off
()

77 
ušt32_t
 
i
;

78 
i
 = 0; i < 
LEDS_NUMBER
; ++i)

80 
	`b¥_bßrd_Ëd_off
(
i
);

82 
	}
}

84 
	$b¥_bßrd_Ëds_Ú
()

86 
ušt32_t
 
i
;

87 
i
 = 0; i < 
LEDS_NUMBER
; ++i)

89 
	`b¥_bßrd_Ëd_Ú
(
i
);

91 
	}
}

93 
	$b¥_bßrd_Ëd_šv”t
(
ušt32_t
 
Ëd_idx
)

95 
	`ASSERT
(
Ëd_idx
 < 
LEDS_NUMBER
);

96 
	`Äf_gpio_pš_toggË
(
m_bßrd_Ëd_li¡
[
Ëd_idx
]);

97 
	}
}

99 #ià
defšed
(
BOARD_PCA10059
)

104 
	$gpio_ouut_vŞge_£tup
()

107 ià((
NRF_UICR
->
REGOUT0
 & 
UICR_REGOUT0_VOUT_Msk
) ==

108 (
UICR_REGOUT0_VOUT_DEFAULT
 << 
UICR_REGOUT0_VOUT_Pos
))

110 
NRF_NVMC
->
CONFIG
 = 
NVMC_CONFIG_WEN_W’
;

111 
NRF_NVMC
->
READY
 =ğ
NVMC_READY_READY_Busy
){}

113 
NRF_UICR
->
REGOUT0
 = (NRF_UICR->REGOUT0 & ~((
ušt32_t
)
UICR_REGOUT0_VOUT_Msk
)) |

114 (
UICR_REGOUT0_VOUT_3V0
 << 
UICR_REGOUT0_VOUT_Pos
);

116 
NRF_NVMC
->
CONFIG
 = 
NVMC_CONFIG_WEN_R’
;

117 
NRF_NVMC
->
READY
 =ğ
NVMC_READY_READY_Busy
){}

120 
	`NVIC_Sy¡emRe£t
();

122 
	}
}

125 
	$b¥_bßrd_Ëds_š™
()

127 #ià
	`defšed
(
BOARD_PCA10059
)

132 ià(
NRF_POWER
->
MAINREGSTATUS
 &

133 (
POWER_MAINREGSTATUS_MAINREGSTATUS_High
 << 
POWER_MAINREGSTATUS_MAINREGSTATUS_Pos
))

135 
	`gpio_ouut_vŞge_£tup
();

139 
ušt32_t
 
i
;

140 
i
 = 0; i < 
LEDS_NUMBER
; ++i)

142 
	`Äf_gpio_cfg_ouut
(
m_bßrd_Ëd_li¡
[
i
]);

144 
	`b¥_bßrd_Ëds_off
();

145 
	}
}

147 
ušt32_t
 
	$b¥_bßrd_Ëd_idx_to_pš
(
ušt32_t
 
Ëd_idx
)

149 
	`ASSERT
(
Ëd_idx
 < 
LEDS_NUMBER
);

150  
m_bßrd_Ëd_li¡
[
Ëd_idx
];

151 
	}
}

153 
ušt32_t
 
	$b¥_bßrd_pš_to_Ëd_idx
(
ušt32_t
 
pš_numb”
)

155 
ušt32_t
 
»t
 = 0xFFFFFFFF;

156 
ušt32_t
 
i
;

157 
i
 = 0; i < 
LEDS_NUMBER
; ++i)

159 ià(
m_bßrd_Ëd_li¡
[
i
] =ğ
pš_numb”
)

161 
»t
 = 
i
;

165  
»t
;

166 
	}
}

169 #ià
BUTTONS_NUMBER
 > 0

170 
boŞ
 
	$b¥_bßrd_bu‰Ú_¡©e_g‘
(
ušt32_t
 
bu‰Ú_idx
)

172 
	`ASSERT
(
bu‰Ú_idx
 < 
BUTTONS_NUMBER
);

173 
boŞ
 
pš_£t
 = 
	`Äf_gpio_pš_»ad
(
m_bßrd_bŠ_li¡
[
bu‰Ú_idx
]è? 
Œue
 : 
çl£
;

174  (
pš_£t
 =ğ(
BUTTONS_ACTIVE_STATE
 ? 
Œue
 : 
çl£
));

175 
	}
}

177 
	$b¥_bßrd_bu‰Ús_š™
()

179 
ušt32_t
 
i
;

180 
i
 = 0; i < 
BUTTONS_NUMBER
; ++i)

182 
	`Äf_gpio_cfg_šput
(
m_bßrd_bŠ_li¡
[
i
], 
BUTTON_PULL
);

184 
	}
}

186 
ušt32_t
 
	$b¥_bßrd_pš_to_bu‰Ú_idx
(
ušt32_t
 
pš_numb”
)

188 
ušt32_t
 
i
;

189 
ušt32_t
 
»t
 = 0xFFFFFFFF;

190 
i
 = 0; i < 
BUTTONS_NUMBER
; ++i)

192 ià(
m_bßrd_bŠ_li¡
[
i
] =ğ
pš_numb”
)

194 
»t
 = 
i
;

198  
»t
;

199 
	}
}

201 
ušt32_t
 
	$b¥_bßrd_bu‰Ú_idx_to_pš
(
ušt32_t
 
bu‰Ú_idx
)

203 
	`ASSERT
(
bu‰Ú_idx
 < 
BUTTONS_NUMBER
);

204  
m_bßrd_bŠ_li¡
[
bu‰Ú_idx
];

205 
	}
}

209 
	$b¥_bßrd_š™
(
ušt32_t
 
š™_æags
)

211 #ià
	`defšed
(
BOARDS_WITH_USB_DFU_TRIGGER
è&& defšed(
BOARD_PCA10059
)

212 (è
	`Äf_dfu_Œigg”_usb_š™
();

215 #ià
LEDS_NUMBER
 > 0

216 ià(
š™_æags
 & 
BSP_INIT_LEDS
)

218 
	`b¥_bßrd_Ëds_š™
();

222 #ià
BUTTONS_NUMBER
 > 0

223 ià(
š™_æags
 & 
BSP_INIT_BUTTONS
)

225 
	`b¥_bßrd_bu‰Ús_š™
();

228 
	}
}

	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\libraries\atomic\nrf_atomic.c

40 
	~"Äf_©omic.h
"

42 #iâdeà
NRF_ATOMIC_USE_BUILD_IN


43 #ià(
defšed
(
__GNUC__
è&& defšed(
WIN32
))

44 
	#NRF_ATOMIC_USE_BUILD_IN
 1

	)

46 
	#NRF_ATOMIC_USE_BUILD_IN
 0

	)

50 #ià((
__CORTEX_M
 >ğ0x03Uè|| (
__CORTEX_SC
 >= 300U))

51 
	#STREX_LDREX_PRESENT


	)

53 
	~"­p_ut_¶©fÜm.h
"

57 #ià(
NRF_ATOMIC_USE_BUILD_IN
 =ğ0è&& 
defšed
(
STREX_LDREX_PRESENT
)

58 
	~"Äf_©omic_š‹º®.h
"

61 
ušt32_t
 
	$Äf_©omic_u32_ãtch_¡Üe
(
Äf_©omic_u32_t
 * 
p_d©a
, 
ušt32_t
 
v®ue
)

63 #ià
NRF_ATOMIC_USE_BUILD_IN


64  
	`__©omic_exchªge_n
(
p_d©a
, 
v®ue
, 
__ATOMIC_SEQ_CST
);

66 #–ià
	`defšed
(
STREX_LDREX_PRESENT
)

67 
ušt32_t
 
Şd_v®
;

68 
ušt32_t
 
Ãw_v®
;

69 
	`NRF_ATOMIC_OP
(
mov
, 
Şd_v®
, 
Ãw_v®
, 
p_d©a
, 
v®ue
);

71 
	`UNUSED_PARAMETER
(
Şd_v®
);

72 
	`UNUSED_PARAMETER
(
Ãw_v®
);

73  
Şd_v®
;

75 
	`CRITICAL_REGION_ENTER
();

76 
ušt32_t
 
Şd_v®
 = *
p_d©a
;

77 *
p_d©a
 = 
v®ue
;

78 
	`CRITICAL_REGION_EXIT
();

79  
Şd_v®
;

81 
	}
}

83 
ušt32_t
 
	$Äf_©omic_u32_¡Üe
(
Äf_©omic_u32_t
 * 
p_d©a
, 
ušt32_t
 
v®ue
)

85 #ià
NRF_ATOMIC_USE_BUILD_IN


86 
	`__©omic_¡Üe_n
(
p_d©a
, 
v®ue
, 
__ATOMIC_SEQ_CST
);

87  
v®ue
;

88 #–ià
	`defšed
(
STREX_LDREX_PRESENT
)

89 
ušt32_t
 
Şd_v®
;

90 
ušt32_t
 
Ãw_v®
;

92 
	`NRF_ATOMIC_OP
(
mov
, 
Şd_v®
, 
Ãw_v®
, 
p_d©a
, 
v®ue
);

94 
	`UNUSED_PARAMETER
(
Şd_v®
);

95 
	`UNUSED_PARAMETER
(
Ãw_v®
);

96  
Ãw_v®
;

98 
	`CRITICAL_REGION_ENTER
();

99 *
p_d©a
 = 
v®ue
;

100 
	`CRITICAL_REGION_EXIT
();

101  
v®ue
;

103 
	}
}

105 
ušt32_t
 
	$Äf_©omic_u32_ãtch_Ü
(
Äf_©omic_u32_t
 * 
p_d©a
, 
ušt32_t
 
v®ue
)

107 #ià
NRF_ATOMIC_USE_BUILD_IN


108  
	`__©omic_ãtch_Ü
(
p_d©a
, 
v®ue
, 
__ATOMIC_SEQ_CST
);

109 #–ià
	`defšed
(
STREX_LDREX_PRESENT
)

110 
ušt32_t
 
Şd_v®
;

111 
ušt32_t
 
Ãw_v®
;

113 
	`NRF_ATOMIC_OP
(
Ür
, 
Şd_v®
, 
Ãw_v®
, 
p_d©a
, 
v®ue
);

114 
	`UNUSED_PARAMETER
(
Şd_v®
);

115 
	`UNUSED_PARAMETER
(
Ãw_v®
);

116  
Şd_v®
;

118 
	`CRITICAL_REGION_ENTER
();

119 
ušt32_t
 
Şd_v®
 = *
p_d©a
;

120 *
p_d©a
 |ğ
v®ue
;

121 
	`CRITICAL_REGION_EXIT
();

122  
Şd_v®
;

124 
	}
}

126 
ušt32_t
 
	$Äf_©omic_u32_Ü
(
Äf_©omic_u32_t
 * 
p_d©a
, 
ušt32_t
 
v®ue
)

128 #ià
NRF_ATOMIC_USE_BUILD_IN


129  
	`__©omic_Ü_ãtch
(
p_d©a
, 
v®ue
, 
__ATOMIC_SEQ_CST
);

130 #–ià
	`defšed
(
STREX_LDREX_PRESENT
)

131 
ušt32_t
 
Şd_v®
;

132 
ušt32_t
 
Ãw_v®
;

134 
	`NRF_ATOMIC_OP
(
Ür
, 
Şd_v®
, 
Ãw_v®
, 
p_d©a
, 
v®ue
);

135 
	`UNUSED_PARAMETER
(
Şd_v®
);

136 
	`UNUSED_PARAMETER
(
Ãw_v®
);

137  
Ãw_v®
;

139 
	`CRITICAL_REGION_ENTER
();

140 *
p_d©a
 |ğ
v®ue
;

141 
ušt32_t
 
Ãw_v®ue
 = *
p_d©a
;

142 
	`CRITICAL_REGION_EXIT
();

143  
Ãw_v®ue
;

145 
	}
}

147 
ušt32_t
 
	$Äf_©omic_u32_ãtch_ªd
(
Äf_©omic_u32_t
 * 
p_d©a
, 
ušt32_t
 
v®ue
)

149 #ià
NRF_ATOMIC_USE_BUILD_IN


150  
	`__©omic_ãtch_ªd
(
p_d©a
, 
v®ue
, 
__ATOMIC_SEQ_CST
);

151 #–ià
	`defšed
(
STREX_LDREX_PRESENT
)

152 
ušt32_t
 
Şd_v®
;

153 
ušt32_t
 
Ãw_v®
;

155 
	`NRF_ATOMIC_OP
(
ªd
, 
Şd_v®
, 
Ãw_v®
, 
p_d©a
, 
v®ue
);

156 
	`UNUSED_PARAMETER
(
Şd_v®
);

157 
	`UNUSED_PARAMETER
(
Ãw_v®
);

158  
Şd_v®
;

160 
	`CRITICAL_REGION_ENTER
();

161 
ušt32_t
 
Şd_v®
 = *
p_d©a
;

162 *
p_d©a
 &ğ
v®ue
;

163 
	`CRITICAL_REGION_EXIT
();

164  
Şd_v®
;

166 
	}
}

168 
ušt32_t
 
	$Äf_©omic_u32_ªd
(
Äf_©omic_u32_t
 * 
p_d©a
, 
ušt32_t
 
v®ue
)

170 #ià
NRF_ATOMIC_USE_BUILD_IN


171  
	`__©omic_ªd_ãtch
(
p_d©a
, 
v®ue
, 
__ATOMIC_SEQ_CST
);

172 #–ià
	`defšed
(
STREX_LDREX_PRESENT
)

173 
ušt32_t
 
Şd_v®
;

174 
ušt32_t
 
Ãw_v®
;

176 
	`NRF_ATOMIC_OP
(
ªd
, 
Şd_v®
, 
Ãw_v®
, 
p_d©a
, 
v®ue
);

177 
	`UNUSED_PARAMETER
(
Şd_v®
);

178 
	`UNUSED_PARAMETER
(
Ãw_v®
);

179  
Ãw_v®
;

181 
	`CRITICAL_REGION_ENTER
();

182 *
p_d©a
 &ğ
v®ue
;

183 
ušt32_t
 
Ãw_v®ue
 = *
p_d©a
;

184 
	`CRITICAL_REGION_EXIT
();

185  
Ãw_v®ue
;

187 
	}
}

189 
ušt32_t
 
	$Äf_©omic_u32_ãtch_xÜ
(
Äf_©omic_u32_t
 * 
p_d©a
, 
ušt32_t
 
v®ue
)

191 #ià
NRF_ATOMIC_USE_BUILD_IN


192  
	`__©omic_ãtch_xÜ
(
p_d©a
, 
v®ue
, 
__ATOMIC_SEQ_CST
);

193 #–ià
	`defšed
(
STREX_LDREX_PRESENT
)

194 
ušt32_t
 
Şd_v®
;

195 
ušt32_t
 
Ãw_v®
;

197 
	`NRF_ATOMIC_OP
(
eÜ
, 
Şd_v®
, 
Ãw_v®
, 
p_d©a
, 
v®ue
);

198 
	`UNUSED_PARAMETER
(
Şd_v®
);

199 
	`UNUSED_PARAMETER
(
Ãw_v®
);

200  
Şd_v®
;

202 
	`CRITICAL_REGION_ENTER
();

203 
ušt32_t
 
Şd_v®
 = *
p_d©a
;

204 *
p_d©a
 ^ğ
v®ue
;

205 
	`CRITICAL_REGION_EXIT
();

206  
Şd_v®
;

208 
	}
}

210 
ušt32_t
 
	$Äf_©omic_u32_xÜ
(
Äf_©omic_u32_t
 * 
p_d©a
, 
ušt32_t
 
v®ue
)

212 #ià
NRF_ATOMIC_USE_BUILD_IN


213  
	`__©omic_xÜ_ãtch
(
p_d©a
, 
v®ue
, 
__ATOMIC_SEQ_CST
);

214 #–ià
	`defšed
(
STREX_LDREX_PRESENT
)

215 
ušt32_t
 
Şd_v®
;

216 
ušt32_t
 
Ãw_v®
;

218 
	`NRF_ATOMIC_OP
(
eÜ
, 
Şd_v®
, 
Ãw_v®
, 
p_d©a
, 
v®ue
);

219 
	`UNUSED_PARAMETER
(
Şd_v®
);

220 
	`UNUSED_PARAMETER
(
Ãw_v®
);

221  
Ãw_v®
;

223 
	`CRITICAL_REGION_ENTER
();

224 *
p_d©a
 ^ğ
v®ue
;

225 
ušt32_t
 
Ãw_v®ue
 = *
p_d©a
;

226 
	`CRITICAL_REGION_EXIT
();

227  
Ãw_v®ue
;

229 
	}
}

231 
ušt32_t
 
	$Äf_©omic_u32_ãtch_add
(
Äf_©omic_u32_t
 * 
p_d©a
, 
ušt32_t
 
v®ue
)

233 #ià
NRF_ATOMIC_USE_BUILD_IN


234  
	`__©omic_ãtch_add
(
p_d©a
, 
v®ue
, 
__ATOMIC_SEQ_CST
);

235 #–ià
	`defšed
(
STREX_LDREX_PRESENT
)

236 
ušt32_t
 
Şd_v®
;

237 
ušt32_t
 
Ãw_v®
;

239 
	`NRF_ATOMIC_OP
(
add
, 
Şd_v®
, 
Ãw_v®
, 
p_d©a
, 
v®ue
);

240 
	`UNUSED_PARAMETER
(
Şd_v®
);

241 
	`UNUSED_PARAMETER
(
Ãw_v®
);

242  
Şd_v®
;

244 
	`CRITICAL_REGION_ENTER
();

245 
ušt32_t
 
Şd_v®
 = *
p_d©a
;

246 *
p_d©a
 +ğ
v®ue
;

247 
	`CRITICAL_REGION_EXIT
();

248  
Şd_v®
;

250 
	}
}

252 
ušt32_t
 
	$Äf_©omic_u32_add
(
Äf_©omic_u32_t
 * 
p_d©a
, 
ušt32_t
 
v®ue
)

254 #ià
NRF_ATOMIC_USE_BUILD_IN


255  
	`__©omic_add_ãtch
(
p_d©a
, 
v®ue
, 
__ATOMIC_SEQ_CST
);

256 #–ià
	`defšed
(
STREX_LDREX_PRESENT
)

257 
ušt32_t
 
Şd_v®
;

258 
ušt32_t
 
Ãw_v®
;

260 
	`NRF_ATOMIC_OP
(
add
, 
Şd_v®
, 
Ãw_v®
, 
p_d©a
, 
v®ue
);

261 
	`UNUSED_PARAMETER
(
Şd_v®
);

262 
	`UNUSED_PARAMETER
(
Ãw_v®
);

263  
Ãw_v®
;

265 
	`CRITICAL_REGION_ENTER
();

266 *
p_d©a
 +ğ
v®ue
;

267 
ušt32_t
 
Ãw_v®ue
 = *
p_d©a
;

268 
	`CRITICAL_REGION_EXIT
();

269  
Ãw_v®ue
;

271 
	}
}

273 
ušt32_t
 
	$Äf_©omic_u32_ãtch_sub
(
Äf_©omic_u32_t
 * 
p_d©a
, 
ušt32_t
 
v®ue
)

275 #ià
NRF_ATOMIC_USE_BUILD_IN


276  
	`__©omic_ãtch_sub
(
p_d©a
, 
v®ue
, 
__ATOMIC_SEQ_CST
);

277 #–ià
	`defšed
(
STREX_LDREX_PRESENT
)

278 
ušt32_t
 
Şd_v®
;

279 
ušt32_t
 
Ãw_v®
;

281 
	`NRF_ATOMIC_OP
(
sub
, 
Şd_v®
, 
Ãw_v®
, 
p_d©a
, 
v®ue
);

282 
	`UNUSED_PARAMETER
(
Şd_v®
);

283 
	`UNUSED_PARAMETER
(
Ãw_v®
);

284  
Şd_v®
;

286 
	`CRITICAL_REGION_ENTER
();

287 
ušt32_t
 
Şd_v®
 = *
p_d©a
;

288 *
p_d©a
 -ğ
v®ue
;

289 
	`CRITICAL_REGION_EXIT
();

290  
Şd_v®
;

292 
	}
}

294 
ušt32_t
 
	$Äf_©omic_u32_sub
(
Äf_©omic_u32_t
 * 
p_d©a
, 
ušt32_t
 
v®ue
)

296 #ià
NRF_ATOMIC_USE_BUILD_IN


297  
	`__©omic_sub_ãtch
(
p_d©a
, 
v®ue
, 
__ATOMIC_SEQ_CST
);

298 #–ià
	`defšed
(
STREX_LDREX_PRESENT
)

299 
ušt32_t
 
Şd_v®
;

300 
ušt32_t
 
Ãw_v®
;

302 
	`NRF_ATOMIC_OP
(
sub
, 
Şd_v®
, 
Ãw_v®
, 
p_d©a
, 
v®ue
);

303 
	`UNUSED_PARAMETER
(
Şd_v®
);

304 
	`UNUSED_PARAMETER
(
Ãw_v®
);

305  
Ãw_v®
;

307 
	`CRITICAL_REGION_ENTER
();

308 *
p_d©a
 -ğ
v®ue
;

309 
ušt32_t
 
Ãw_v®ue
 = *
p_d©a
;

310 
	`CRITICAL_REGION_EXIT
();

311  
Ãw_v®ue
;

313 
	}
}

315 
boŞ
 
	$Äf_©omic_u32_cmp_exch
(
Äf_©omic_u32_t
 * 
p_d©a
,

316 
ušt32_t
 * 
p_ex³ùed
,

317 
ušt32_t
 
desœed
)

319 #ià
NRF_ATOMIC_USE_BUILD_IN


320  
	`__©omic_com·»_exchªge
(
p_d©a
,

321 
p_ex³ùed
,

322 &
desœed
,

324 
__ATOMIC_SEQ_CST
,

325 
__ATOMIC_SEQ_CST
);

326 #–ià
	`defšed
(
STREX_LDREX_PRESENT
)

327  
	`Äf_©omic_š‹º®_cmp_exch
(
p_d©a
, 
p_ex³ùed
, 
desœed
);

329 
	`CRITICAL_REGION_ENTER
();

330 if(*
p_d©a
 =ğ*
p_ex³ùed
)

332 *
p_d©a
 = 
desœed
;

333  
Œue
;

337 *
p_ex³ùed
 = *
p_d©a
;

338  
çl£
;

340 
	`CRITICAL_REGION_EXIT
();

342 
	}
}

344 
ušt32_t
 
	$Äf_©omic_u32_ãtch_sub_hs
(
Äf_©omic_u32_t
 * 
p_d©a
, 
ušt32_t
 
v®ue
)

346 #ià
NRF_ATOMIC_USE_BUILD_IN


347 
ušt32_t
 
ex³ùed
 = *
p_d©a
;

348 
ušt32_t
 
Ãw_v®
;

349 
boŞ
 
sucûss
;

353 ià(
ex³ùed
 >ğ
v®ue
)

355 
Ãw_v®
 = 
ex³ùed
 - 
v®ue
;

359 
Ãw_v®
 = 
ex³ùed
;

361 
sucûss
 = 
	`__©omic_com·»_exchªge
(
p_d©a
,

362 &
ex³ùed
,

363 &
Ãw_v®
,

365 
__ATOMIC_SEQ_CST
,

366 
__ATOMIC_SEQ_CST
);

367 } !
sucûss
);

368  
ex³ùed
;

369 #–ià
	`defšed
(
STREX_LDREX_PRESENT
)

370 
ušt32_t
 
Şd_v®
;

371 
ušt32_t
 
Ãw_v®
;

373 
	`NRF_ATOMIC_OP
(
sub_hs
, 
Şd_v®
, 
Ãw_v®
, 
p_d©a
, 
v®ue
);

374 
	`UNUSED_PARAMETER
(
Şd_v®
);

375 
	`UNUSED_PARAMETER
(
Ãw_v®
);

376  
Şd_v®
;

378 
	`CRITICAL_REGION_ENTER
();

379 
ušt32_t
 
Şd_v®
 = *
p_d©a
;

380 *
p_d©a
 -ğ
v®ue
;

381 
	`CRITICAL_REGION_EXIT
();

382  
Şd_v®
;

384 
	}
}

386 
ušt32_t
 
	$Äf_©omic_u32_sub_hs
(
Äf_©omic_u32_t
 * 
p_d©a
, 
ušt32_t
 
v®ue
)

388 #ià
NRF_ATOMIC_USE_BUILD_IN


389 
ušt32_t
 
ex³ùed
 = *
p_d©a
;

390 
ušt32_t
 
Ãw_v®
;

391 
boŞ
 
sucûss
;

395 ià(
ex³ùed
 >ğ
v®ue
)

397 
Ãw_v®
 = 
ex³ùed
 - 
v®ue
;

401 
Ãw_v®
 = 
ex³ùed
;

403 
sucûss
 = 
	`__©omic_com·»_exchªge
(
p_d©a
,

404 &
ex³ùed
,

405 &
Ãw_v®
,

407 
__ATOMIC_SEQ_CST
,

408 
__ATOMIC_SEQ_CST
);

409 } !
sucûss
);

410  
Ãw_v®
;

411 #–ià
	`defšed
(
STREX_LDREX_PRESENT
)

412 
ušt32_t
 
Şd_v®
;

413 
ušt32_t
 
Ãw_v®
;

415 
	`NRF_ATOMIC_OP
(
sub_hs
, 
Şd_v®
, 
Ãw_v®
, 
p_d©a
, 
v®ue
);

416 
	`UNUSED_PARAMETER
(
Şd_v®
);

417 
	`UNUSED_PARAMETER
(
Ãw_v®
);

418  
Ãw_v®
;

420 
	`CRITICAL_REGION_ENTER
();

421 *
p_d©a
 -ğ
v®ue
;

422 
ušt32_t
 
Ãw_v®ue
 = *
p_d©a
;

423 
	`CRITICAL_REGION_EXIT
();

424  
Ãw_v®ue
;

426 
	}
}

428 
ušt32_t
 
	$Äf_©omic_æag_£t_ãtch
(
Äf_©omic_æag_t
 * 
p_d©a
)

430  
	`Äf_©omic_u32_ãtch_Ü
(
p_d©a
, 1);

431 
	}
}

433 
ušt32_t
 
	$Äf_©omic_æag_£t
(
Äf_©omic_æag_t
 * 
p_d©a
)

435  
	`Äf_©omic_u32_Ü
(
p_d©a
, 1);

436 
	}
}

438 
ušt32_t
 
	$Äf_©omic_æag_ş—r_ãtch
(
Äf_©omic_æag_t
 * 
p_d©a
)

440  
	`Äf_©omic_u32_ãtch_ªd
(
p_d©a
, 0);

441 
	}
}

443 
ušt32_t
 
	$Äf_©omic_æag_ş—r
(
Äf_©omic_æag_t
 * 
p_d©a
)

445  
	`Äf_©omic_u32_ªd
(
p_d©a
, 0);

446 
	}
}

	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\libraries\atomic_fifo\nrf_atfifo.c

41 
	~<¡ršg.h
>

42 
	~<¡dšt.h
>

43 
	~<¡dboŞ.h
>

44 
	~"­p_ut.h
"

45 
	~"Äf_©fifo.h
"

46 
	~"Äf_©fifo_š‹º®.h
"

48 #ià
NRF_ATFIFO_CONFIG_LOG_ENABLED


49 
	#NRF_LOG_LEVEL
 
NRF_ATFIFO_CONFIG_LOG_LEVEL


	)

50 
	#NRF_LOG_INIT_FILTER_LEVEL
 
NRF_ATFIFO_CONFIG_LOG_INIT_FILTER_LEVEL


	)

51 
	#NRF_LOG_INFO_COLOR
 
NRF_ATFIFO_CONFIG_INFO_COLOR


	)

52 
	#NRF_LOG_DEBUG_COLOR
 
NRF_ATFIFO_CONFIG_DEBUG_COLOR


	)

54 
	#NRF_LOG_LEVEL
 0

	)

56 
	~"Äf_log.h
"

59 
STATIC_ASSERT
((
Äf_©fifo_po¡ag_t
è=ğ(
ušt32_t
));

62 
»t_code_t
 
	$Äf_©fifo_š™
(
Äf_©fifo_t
 * cÚ¡ 
p_fifo
, * 
p_buf
, 
ušt16_t
 
buf_size
, ušt16_ˆ
™em_size
)

64 ià(
NULL
 =ğ
p_buf
)

66 
	`NRF_LOG_INST_ERROR
(
p_fifo
->
p_log
, "Initialization failed.…_buf == NULL");

67  
NRF_ERROR_NULL
;

69 ià(0 !ğ(
buf_size
 % 
™em_size
))

71 
	`NRF_LOG_INST_ERROR
(
p_fifo
->
p_log
, "Initialization failed. Buf_size‚ot multiple of item_size");

72  
NRF_ERROR_INVALID_LENGTH
;

75 
p_fifo
->
p_buf
 =…_buf;

76 
p_fifo
->

.
g
 = 0;

77 
p_fifo
->
h—d
.
g
 = 0;

78 
p_fifo
->
buf_size
 = buf_size;

79 
p_fifo
->
™em_size
 = item_size;

81 
	`NRF_LOG_INST_INFO
(
p_fifo
->
p_log
, "Initialized.");

82  
NRF_SUCCESS
;

83 
	}
}

86 
»t_code_t
 
	$Äf_©fifo_ş—r
(
Äf_©fifo_t
 * cÚ¡ 
p_fifo
)

88 
boŞ
 
»Ëa£d
 = 
	`Äf_©fifo_¥aû_ş—r
(
p_fifo
);

89 
	`NRF_LOG_INST_INFO
(
p_fifo
->
p_log
, "CË¬ed„esuÉ:%s", 
»Ëa£d
 ? "success" : "busy");

90  
»Ëa£d
 ? 
NRF_SUCCESS
 : 
NRF_ERROR_BUSY
;

91 
	}
}

94 
»t_code_t
 
	$Äf_©fifo_®loc_put
(
Äf_©fifo_t
 * cÚ¡ 
p_fifo
, cÚ¡ * 
p_v¬
, 
size_t
 
size
, 
boŞ
 * cÚ¡ 
p_visibË
)

96 
Äf_©fifo_™em_put_t
 
cÚ‹xt
;

97 
boŞ
 
visibË
;

98 * 
p_d©a
 = 
	`Äf_©fifo_™em_®loc
(
p_fifo
, &
cÚ‹xt
);

99 ià(
NULL
 =ğ
p_d©a
)

101 
	`NRF_LOG_INST_WARNING
(
p_fifo
->
p_log
, "Cİyšg iÀ–em’ˆ(0x%08Xèçed -‚Ø¥aû.", 
p_v¬
);

102  
NRF_ERROR_NO_MEM
;

105 
	`memıy
(
p_d©a
, 
p_v¬
, 
size
);

107 
visibË
 = 
	`Äf_©fifo_™em_put
(
p_fifo
, &
cÚ‹xt
);

108 ià(
NULL
 !ğ
p_visibË
)

110 *
p_visibË
 = 
visibË
;

112 
	`NRF_LOG_INST_DEBUG
(
p_fifo
->
p_log
, "EËm’ˆ(0x%08Xècİ›d in.", 
p_v¬
);

113  
NRF_SUCCESS
;

114 
	}
}

117 * 
	$Äf_©fifo_™em_®loc
(
Äf_©fifo_t
 * cÚ¡ 
p_fifo
, 
Äf_©fifo_™em_put_t
 * 
p_cÚ‹xt
)

119 ià(
	`Äf_©fifo_w¥aû_»q
(
p_fifo
, &(
p_cÚ‹xt
->
Ï¡_
)))

121 * 
p_™em
 = ((
ušt8_t
*)(
p_fifo
->
p_buf
)è+ 
p_cÚ‹xt
->
Ï¡_
.
pos
.
wr
;

122 
	`NRF_LOG_INST_DEBUG
(
p_fifo
->
p_log
, "AÎoÿ‹dƒËm’ˆ(0x%08X).", 
p_™em
);

123  
p_™em
;

125 
	`NRF_LOG_INST_WARNING
(
p_fifo
->
p_log
, "Allocation failed -‚o space.");

126  
NULL
;

127 
	}
}

130 
boŞ
 
	$Äf_©fifo_™em_put
(
Äf_©fifo_t
 * cÚ¡ 
p_fifo
, 
Äf_©fifo_™em_put_t
 * 
p_cÚ‹xt
)

132 ià((
p_cÚ‹xt
->
Ï¡_
.
pos
.
wr
è=ğÕ_cÚ‹xt->Ï¡_.pos.
rd
))

134 
	`NRF_LOG_INST_DEBUG
(
p_fifo
->
p_log
, "Put (uninterrupted)");

135 
	`Äf_©fifo_w¥aû_şo£
(
p_fifo
);

136  
Œue
;

138 
	`NRF_LOG_INST_DEBUG
(
p_fifo
->
p_log
, "Put (interrupted!)");

139  
çl£
;

140 
	}
}

143 
»t_code_t
 
	$Äf_©fifo_g‘_ä“
(
Äf_©fifo_t
 * cÚ¡ 
p_fifo
, * cÚ¡ 
p_v¬
, 
size_t
 
size
, 
boŞ
 * 
p_»Ëa£d
)

145 
Äf_©fifo_™em_g‘_t
 
cÚ‹xt
;

146 
boŞ
 
»Ëa£d
;

147 cÚ¡ * 
p_s
 = 
	`Äf_©fifo_™em_g‘
(
p_fifo
, &
cÚ‹xt
);

148 ià(
NULL
 =ğ
p_s
)

150 
	`NRF_LOG_INST_WARNING
(
p_fifo
->
p_log
, "Copying out failed -‚o item inhe FIFO.");

151  
NRF_ERROR_NOT_FOUND
;

154 
	`memıy
(
p_v¬
, 
p_s
, 
size
);

156 
»Ëa£d
 = 
	`Äf_©fifo_™em_ä“
(
p_fifo
, &
cÚ‹xt
);

157 ià(
NULL
 !ğ
p_»Ëa£d
)

159 *
p_»Ëa£d
 = 
»Ëa£d
;

161 
	`NRF_LOG_INST_DEBUG
(
p_fifo
->
p_log
, "EËm’ˆ(0x%08Xècİ›d out.", 
p_v¬
);

162  
NRF_SUCCESS
;

163 
	}
}

166 * 
	$Äf_©fifo_™em_g‘
(
Äf_©fifo_t
 * cÚ¡ 
p_fifo
, 
Äf_©fifo_™em_g‘_t
 * 
p_cÚ‹xt
)

168 ià(
	`Äf_©fifo_r¥aû_»q
(
p_fifo
, &(
p_cÚ‹xt
->
Ï¡_h—d
)))

170 * 
p_™em
 = ((
ušt8_t
*)(
p_fifo
->
p_buf
)è+ 
p_cÚ‹xt
->
Ï¡_h—d
.
pos
.
rd
;

171 
	`NRF_LOG_INST_DEBUG
(
p_fifo
->
p_log
, "G‘ƒËm’t: 0x%08X", 
p_™em
);

172  
p_™em
;

174 
	`NRF_LOG_INST_WARNING
(
p_fifo
->
p_log
, "Get failed -‚o item inhe FIFO.");

175  
NULL
;

176 
	}
}

179 
boŞ
 
	$Äf_©fifo_™em_ä“
(
Äf_©fifo_t
 * cÚ¡ 
p_fifo
, 
Äf_©fifo_™em_g‘_t
 * 
p_cÚ‹xt
)

181 ià((
p_cÚ‹xt
->
Ï¡_h—d
.
pos
.
wr
è=ğÕ_cÚ‹xt->Ï¡_h—d.pos.
rd
))

183 
	`NRF_LOG_INST_DEBUG
(
p_fifo
->
p_log
, "Free (uninterrupted)");

184 
	`Äf_©fifo_r¥aû_şo£
(
p_fifo
);

185  
Œue
;

187 
	`NRF_LOG_INST_DEBUG
(
p_fifo
->
p_log
, "Free (interrupted)");

188  
çl£
;

189 
	}
}

	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\libraries\atomic_flags\nrf_atflags.c

41 
	~"Äf.h
"

42 
	~"Äf_©omic.h
"

43 
	~"Äf_©æags.h
"

44 
	~"sdk_commÚ.h
"

54 
	#FLAG_BASE
(
æag_šdex
è((æag_šdexè/ 
NRF_ATFLAGS_FLAGS_PER_ELEMENT
)

	)

62 
	#FLAG_MASK
(
æag_šdex
è(1UL << ((æag_šdexè% 
NRF_ATFLAGS_FLAGS_PER_ELEMENT
))

	)

65 
	$Äf_©æags_£t
(
Äf_©æags_t
 * 
p_æags
, 
ušt32_t
 
æag_šdex
)

67 
ušt32_t
 
Ãw_v®ue
 = 
	`Äf_©omic_u32_Ü
(&
p_æags
[
	`FLAG_BASE
(
æag_šdex
)], 
	`FLAG_MASK
(flag_index));

68 
	`UNUSED_RETURN_VALUE
(
Ãw_v®ue
);

69 
	}
}

72 
boŞ
 
	$Äf_©æags_ãtch_£t
(
Äf_©æags_t
 * 
p_æags
, 
ušt32_t
 
æag_šdex
)

74  (
	`Äf_©omic_u32_ãtch_Ü
(&
p_æags
[
	`FLAG_BASE
(
æag_šdex
)], 
	`FLAG_MASK
(flag_index))

75 & 
	`FLAG_MASK
(
æag_šdex
)) != 0;

76 
	}
}

79 
	$Äf_©æags_ş—r
(
Äf_©æags_t
 * 
p_æags
, 
ušt32_t
 
æag_šdex
)

81 
ušt32_t
 
Ãw_v®ue
 = 
	`Äf_©omic_u32_ªd
(&
p_æags
[
	`FLAG_BASE
(
æag_šdex
)], ~
	`FLAG_MASK
(flag_index));

82 
	`UNUSED_RETURN_VALUE
(
Ãw_v®ue
);

83 
	}
}

86 
boŞ
 
	$Äf_©æags_ãtch_ş—r
(
Äf_©æags_t
 * 
p_æags
, 
ušt32_t
 
æag_šdex
)

88  (
	`Äf_©omic_u32_ãtch_ªd
(&
p_æags
[
	`FLAG_BASE
(
æag_šdex
)], ~
	`FLAG_MASK
(flag_index))

89 & 
	`FLAG_MASK
(
æag_šdex
)) != 0;

90 
	}
}

93 
boŞ
 
	$Äf_©æags_g‘
(
Äf_©æags_t
 cÚ¡ * 
p_æags
, 
ušt32_t
 
æag_šdex
)

95  (
p_æags
[
	`FLAG_BASE
(
æag_šdex
)] & 
	`FLAG_MASK
(flag_index)) != 0;

96 
	}
}

99 
ušt32_t
 
	$Äf_©æags_š™
(
Äf_©æags_t
 * 
p_æags
, 
ušt32_t
 
æags_¬¿y_Ën
, ušt32_ˆ
æag_couÁ
)

101 
ušt32_t
 
»quœed_æags_¬¿y_Ën
 = 
	`NRF_ATFLAGS_ARRAY_LEN
(
æag_couÁ
);

103 ià(
»quœed_æags_¬¿y_Ën
 <ğ
æags_¬¿y_Ën
)

105 
ušt32_t
 
i
 = 0; i < 
»quœed_æags_¬¿y_Ën
; i++)

107 
p_æags
[
i
] = 0;

109  
»quœed_æags_¬¿y_Ën
;

112 
	}
}

114 
ušt32_t
 
	$Äf_©æags_fšd_ªd_£t_æag
(
Äf_©æags_t
 * 
p_æags
, 
ušt32_t
 
æag_couÁ
)

116 
ušt32_t
 
i
 = 0; i < 
	`NRF_ATFLAGS_ARRAY_LEN
(
æag_couÁ
); i++)

119 
ušt32_t
 
fœ¡_z”o
 = 
	`__CLZ
(
	`__RBIT
(~
p_æags
[
i
]));

120 
fœ¡_z”o
 < 32)

122 
ušt32_t
 
fœ¡_z”o_glob®
 = 
fœ¡_z”o
 + (
i
 * 32);

123 ià(
fœ¡_z”o_glob®
 >ğ
æag_couÁ
)

127 ià(!
	`Äf_©æags_ãtch_£t
(
p_æags
, 
fœ¡_z”o_glob®
))

129  
fœ¡_z”o_glob®
;

131 
fœ¡_z”o
 = 
	`__CLZ
(
	`__RBIT
(~
p_æags
[
i
]));

135  
æag_couÁ
;

136 
	}
}

138 
ušt32_t
 
	$Äf_©æags_fšd_ªd_ş—r_æag
(
Äf_©æags_t
 * 
p_æags
, 
ušt32_t
 
æag_couÁ
)

140 
ušt32_t
 
i
 = 0; i < 
	`NRF_ATFLAGS_ARRAY_LEN
(
æag_couÁ
); i++)

143 
ušt32_t
 
fœ¡_Úe
 = 
	`__CLZ
(
	`__RBIT
(
p_æags
[
i
]));

144 
fœ¡_Úe
 < 32)

146 
ušt32_t
 
fœ¡_Úe_glob®
 = 
fœ¡_Úe
 + (
i
 * 32);

147 ià(
fœ¡_Úe_glob®
 >ğ
æag_couÁ
)

151 ià(
	`Äf_©æags_ãtch_ş—r
(
p_æags
, 
fœ¡_Úe_glob®
))

153  
fœ¡_Úe_glob®
;

155 
fœ¡_Úe
 = 
	`__CLZ
(
	`__RBIT
(
p_æags
[
i
]));

159  
æag_couÁ
;

160 
	}
}

	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\libraries\balloc\nrf_balloc.c

40 
	~"sdk_commÚ.h
"

41 #ià
NRF_MODULE_ENABLED
(
NRF_BALLOC
)

43 
	~"Äf_£ùiÚ.h
"

44 
	~"Äf_b®loc.h
"

45 
	~"­p_ut_¶©fÜm.h
"

48 #ià
NRF_BALLOC_CONFIG_LOG_ENABLED


49 
	#NRF_LOG_LEVEL
 
NRF_BALLOC_CONFIG_LOG_LEVEL


	)

50 
	#NRF_LOG_INITIAL_LEVEL
 
NRF_BALLOC_CONFIG_INITIAL_LOG_LEVEL


	)

51 
	#NRF_LOG_INFO_COLOR
 
NRF_BALLOC_CONFIG_INFO_COLOR


	)

52 
	#NRF_LOG_DEBUG_COLOR
 
NRF_BALLOC_CONFIG_DEBUG_COLOR


	)

54 
	#NRF_LOG_LEVEL
 0

	)

56 
	~"Äf_log.h
"

58 
	#HEAD_GUARD_FILL
 0xBAADF00D

	)

59 
	#TAIL_GUARD_FILL
 0xBAADCAFE

	)

60 
	#FREE_MEM_FILL
 0xBAADBAAD

	)

62 #ià
NRF_BALLOC_CONFIG_DEBUG_ENABLED


63 
	#POOL_ID
(
_p_poŞ
è_p_poŞ->
p_Çme


	)

64 
	#POOL_MARKER
 "%s"

	)

66 
	#POOL_ID
(
_p_poŞ
è
	)
_p_pool

67 
	#POOL_MARKER
 "0x%08X"

	)

70 
NRF_SECTION_DEF
(
Äf_b®loc
, 
Äf_b®loc_t
);

72 #ià
NRF_BALLOC_CLI_CMDS


73 
	~"Äf_şi.h
"

75 
	$Äf_b®loc_¡©us
(
Äf_şi_t
 cÚ¡ * 
p_şi
, 
size_t
 
¬gc
, **
¬gv
)

77 
	`UNUSED_PARAMETER
(
¬gv
);

79 ià(
	`Äf_şi_h–p_»que¡ed
(
p_şi
))

81 
	`Äf_şi_h–p_´št
(
p_şi
, 
NULL
, 0);

85 ià(
¬gc
 > 1)

87 
	`Äf_şi_årštf
(
p_şi
, 
NRF_CLI_ERROR
, "Bad‡rgument count");

91 
ušt32_t
 
num_of_š¡ªûs
 = 
	`NRF_SECTION_ITEM_COUNT
(
Äf_b®loc
, 
Äf_b®loc_t
);

92 
ušt32_t
 
i
;

94 
i
 = 0; i < 
num_of_š¡ªûs
; i++)

96 cÚ¡ 
Äf_b®loc_t
 * 
p_š¡ªû
 = 
	`NRF_SECTION_ITEM_GET
(
Äf_b®loc
,‚rf_b®loc_t, 
i
);

98 
ušt32_t
 
–em’t_size
 = 
	`NRF_BALLOC_ELEMENT_SIZE
(
p_š¡ªû
);

99 
ušt32_t
 
dbg_addÚ
 = 
p_š¡ªû
->
block_size
 - 
–em’t_size
;

100 
ušt32_t
 
poŞ_size
 = 
p_š¡ªû
->
p_¡ack_lim™
 -…_š¡ªû->
p_¡ack_ba£
;

101 
ušt32_t
 
max_ut
 = 
	`Äf_b®loc_max_utiz©iÚ_g‘
(
p_š¡ªû
);

102 
ušt32_t
 
ut
 = 
	`Äf_b®loc_utiz©iÚ_g‘
(
p_š¡ªû
);

103 cÚ¡ * 
p_Çme
 = 
p_š¡ªû
->p_name;

104 
	`Äf_şi_årštf
(
p_şi
, 
NRF_CLI_NORMAL
,

108 
p_Çme
, 
–em’t_size
, 
dbg_addÚ
,

109 100uÈ* 
ut
/
poŞ_size
, util,pool_size,

110 100uÈ* 
max_ut
/
poŞ_size
, max_util,pool_size);

113 
	}
}

115 
	$NRF_CLI_CREATE_STATIC_SUBCMD_SET
(
Äf_b®loc_commªds
)

117 
	`NRF_CLI_CMD
(
¡©us
, 
NULL
, "Pršˆ¡©u oàb®loøš¡ªûs.", 
Äf_b®loc_¡©us
),

118 
NRF_CLI_SUBCMD_SET_END


119 
	}
};

121 
NRF_CLI_CMD_REGISTER
(
b®loc
, &
Äf_b®loc_commªds
, "Commªd fÜ BALLOC mªagem’t", 
Äf_b®loc_¡©us
);

124 #ià
NRF_BALLOC_CONFIG_DEBUG_ENABLED


132 
__STATIC_INLINE
 * 
	$Äf_b®loc_block_unw¿p
(
Äf_b®loc_t
 cÚ¡ * 
p_poŞ
, * 
p_h—d
)

134 
	`ASSERT
((
p_poŞ
 !ğ
NULL
è&& (Õ_poŞ->
block_size
 % (
ušt32_t
)) == 0));

135 
	`ASSERT
((
p_h—d
 !ğ
NULL
è&& (((
ušt32_t
)(p_head) % (uint32_t)) == 0));

137 
ušt32_t
 
h—d_wÜds
 = 
	`NRF_BALLOC_DEBUG_HEAD_GUARD_WORDS_GET
(
p_poŞ
->
debug_æags
);

138 
ušt32_t
 
_wÜds
 = 
	`NRF_BALLOC_DEBUG_TAIL_GUARD_WORDS_GET
(
p_poŞ
->
debug_æags
);

140 
ušt32_t
 * 
p_
 = (ušt32_ˆ*)((
size_t
)(
p_h—d
è+ 
p_poŞ
->
block_size
);

141 
ušt32_t
 * 
p_–em’t
 = (ušt32_ˆ*)
p_h—d
 + 
h—d_wÜds
;

143 ià(
	`NRF_BALLOC_DEBUG_DATA_TRASHING_CHECK_GET
(
p_poŞ
->
debug_æags
))

145 
ušt32_t
 * 
±r
 = 
p_h—d
;…Œ < 
p_
;…tr++)

147 ià(*
±r
 !ğ
FREE_MEM_FILL
)

149 
	`NRF_LOG_INST_ERROR
(
p_poŞ
->
p_log
,

151 
±r
, *±r, 
FREE_MEM_FILL
);

152 
	`APP_ERROR_CHECK_BOOL
(
çl£
);

157 
ušt32_t
 * 
±r
 = 
p_h—d
;…Œ < 
p_–em’t
;…tr++)

159 *
±r
 = 
HEAD_GUARD_FILL
;

162 
ušt32_t
 * 
±r
 = ( 
p_
 - 
_wÜds
);…tr <…_tail;…tr++)

164 *
±r
 = 
TAIL_GUARD_FILL
;

167  
p_–em’t
;

168 
	}
}

177 
__STATIC_INLINE
 * 
	$Äf_b®loc_–em’t_w¿p
(
Äf_b®loc_t
 cÚ¡ * 
p_poŞ
, * 
p_–em’t
)

179 
	`ASSERT
((
p_poŞ
 !ğ
NULL
è&& (Õ_poŞ->
block_size
 % (
ušt32_t
)) == 0));

180 
	`ASSERT
((
p_–em’t
 !ğ
NULL
è&& (((
ušt32_t
)(p_element) % (uint32_t)) == 0));

182 
ušt32_t
 
h—d_wÜds
 = 
	`NRF_BALLOC_DEBUG_HEAD_GUARD_WORDS_GET
(
p_poŞ
->
debug_æags
);

183 
ušt32_t
 
_wÜds
 = 
	`NRF_BALLOC_DEBUG_TAIL_GUARD_WORDS_GET
(
p_poŞ
->
debug_æags
);

185 
ušt32_t
 * 
p_h—d
 = (ušt32_ˆ*)
p_–em’t
 - 
h—d_wÜds
;

186 
ušt32_t
 * 
p_
 = (ušt32_ˆ*)((
size_t
)(
p_h—d
è+ 
p_poŞ
->
block_size
);

188 
ušt32_t
 * 
±r
 = 
p_h—d
;…Œ < (ušt32_ˆ*)
p_–em’t
;…tr++)

190 ià(*
±r
 !ğ
HEAD_GUARD_FILL
)

192 
	`NRF_LOG_INST_ERROR
(
p_poŞ
->
p_log
,

194 
±r
, *±r, 
HEAD_GUARD_FILL
);

195 
	`APP_ERROR_CHECK_BOOL
(
çl£
);

199 
ušt32_t
 * 
±r
 = ( 
p_
 - 
_wÜds
);…tr <…_tail;…tr++)

201 ià(*
±r
 !ğ
TAIL_GUARD_FILL
)

203 
	`NRF_LOG_INST_ERROR
(
p_poŞ
->
p_log
,

205 
±r
, *±r, 
TAIL_GUARD_FILL
);

206 
	`APP_ERROR_CHECK_BOOL
(
çl£
);

210 ià(
	`NRF_BALLOC_DEBUG_DATA_TRASHING_CHECK_GET
(
p_poŞ
->
debug_æags
))

212 
ušt32_t
 * 
±r
 = 
p_h—d
;…Œ < 
p_
;…tr++)

214 *
±r
 = 
FREE_MEM_FILL
;

218  
p_h—d
;

219 
	}
}

230 * 
	$Äf_b®loc_idx2block
(
Äf_b®loc_t
 cÚ¡ * 
p_poŞ
, 
ušt8_t
 
idx
)

232 
	`ASSERT
(
p_poŞ
 !ğ
NULL
);

233  (
ušt8_t
 *)(
p_poŞ
->
p_memÜy_begš
è+ ((
size_t
)(
idx
è*…_poŞ->
block_size
);

234 
	}
}

243 
ušt8_t
 
	$Äf_b®loc_block2idx
(
Äf_b®loc_t
 cÚ¡ * 
p_poŞ
, cÚ¡ * 
p_block
)

245 
	`ASSERT
(
p_poŞ
 !ğ
NULL
);

246  ((
size_t
)(
p_block
è- (size_t)(
p_poŞ
->
p_memÜy_begš
)è/…_poŞ->
block_size
;

247 
	}
}

249 
»t_code_t
 
	$Äf_b®loc_š™
(
Äf_b®loc_t
 cÚ¡ * 
p_poŞ
)

251 
ušt8_t
 
poŞ_size
;

253 
	`VERIFY_PARAM_NOT_NULL
(
p_poŞ
);

255 
	`ASSERT
(
p_poŞ
->
p_cb
);

256 
	`ASSERT
(
p_poŞ
->
p_¡ack_ba£
);

257 
	`ASSERT
(
p_poŞ
->
p_¡ack_lim™
);

258 
	`ASSERT
(
p_poŞ
->
p_memÜy_begš
);

259 
	`ASSERT
(
p_poŞ
->
block_size
);

261 
poŞ_size
 = 
p_poŞ
->
p_¡ack_lim™
 -…_poŞ->
p_¡ack_ba£
;

263 #ià
NRF_BALLOC_CONFIG_DEBUG_ENABLED


264 *
p_memÜy_’d
 = (
ušt8_t
 *)(
p_poŞ
->
p_memÜy_begš
è+ (
poŞ_size
 *…_poŞ->
block_size
);

265 ià(
	`NRF_BALLOC_DEBUG_DATA_TRASHING_CHECK_GET
(
p_poŞ
->
debug_æags
))

267 
ušt32_t
 * 
±r
 = 
p_poŞ
->
p_memÜy_begš
;…Œ < (ušt32_ˆ*)(
p_memÜy_’d
);…tr++)

269 *
±r
 = 
FREE_MEM_FILL
;

274 
	`NRF_LOG_INST_INFO
(
p_poŞ
->
p_log
, "Initialized (size: %u x %u = %u bytes)",

275 
poŞ_size
,

276 
p_poŞ
->
block_size
,

277 
poŞ_size
 * 
p_poŞ
->
block_size
);

279 
p_poŞ
->
p_cb
->
p_¡ack_poš‹r
 =…_poŞ->
p_¡ack_ba£
;

280 
poŞ_size
--)

282 *(
p_poŞ
->
p_cb
->
p_¡ack_poš‹r
)++ = 
poŞ_size
;

285 
p_poŞ
->
p_cb
->
max_utiz©iÚ
 = 0;

287  
NRF_SUCCESS
;

288 
	}
}

290 * 
	$Äf_b®loc_®loc
(
Äf_b®loc_t
 cÚ¡ * 
p_poŞ
)

292 
	`ASSERT
(
p_poŞ
 !ğ
NULL
);

294 * 
p_block
 = 
NULL
;

296 
	`CRITICAL_REGION_ENTER
();

298 ià(
p_poŞ
->
p_cb
->
p_¡ack_poš‹r
 >…_poŞ->
p_¡ack_ba£
)

301 
p_block
 = 
	`Äf_b®loc_idx2block
(
p_poŞ
, *--Õ_poŞ->
p_cb
->
p_¡ack_poš‹r
));

304 
ušt8_t
 
utiz©iÚ
 = 
p_poŞ
->
p_¡ack_lim™
 -…_poŞ->
p_cb
->
p_¡ack_poš‹r
;

305 ià(
p_poŞ
->
p_cb
->
max_utiz©iÚ
 < 
utiz©iÚ
)

307 
p_poŞ
->
p_cb
->
max_utiz©iÚ
 = 
utiz©iÚ
;

311 
	`CRITICAL_REGION_EXIT
();

313 #ià
NRF_BALLOC_CONFIG_DEBUG_ENABLED


314 ià(
p_block
 !ğ
NULL
)

316 
p_block
 = 
	`Äf_b®loc_block_unw¿p
(
p_poŞ
,…_block);

320 
	`NRF_LOG_INST_DEBUG
(
p_poŞ
->
p_log
, "AÎoÿtšgƒËm’t: 0x%08X", 
p_block
);

322  
p_block
;

323 
	}
}

325 
	$Äf_b®loc_ä“
(
Äf_b®loc_t
 cÚ¡ * 
p_poŞ
, * 
p_–em’t
)

327 
	`ASSERT
(
p_poŞ
 !ğ
NULL
);

328 
	`ASSERT
(
p_–em’t
 !ğ
NULL
)

330 
	`NRF_LOG_INST_DEBUG
(
p_poŞ
->
p_log
, "F»ešgƒËm’t: 0x%08X", 
p_–em’t
);

332 #ià
NRF_BALLOC_CONFIG_DEBUG_ENABLED


333 * 
p_block
 = 
	`Äf_b®loc_–em’t_w¿p
(
p_poŞ
, 
p_–em’t
);

336 ià(
	`NRF_BALLOC_DEBUG_BASIC_CHECKS_GET
(
p_poŞ
->
debug_æags
))

338 
ušt8_t
 
poŞ_size
 = 
p_poŞ
->
p_¡ack_lim™
 -…_poŞ->
p_¡ack_ba£
;

339 *
p_memÜy_’d
 = (
ušt8_t
 *)(
p_poŞ
->
p_memÜy_begš
è+ (
poŞ_size
 *…_poŞ->
block_size
);

342 ià((
p_block
 < 
p_poŞ
->
p_memÜy_begš
è|| (p_block >ğ
p_memÜy_’d
))

344 
	`NRF_LOG_INST_ERROR
(
p_poŞ
->
p_log
,

346 
p_–em’t
);

347 
	`APP_ERROR_CHECK_BOOL
(
çl£
);

351 ià((((
size_t
)(
p_block
è- (size_t)(
p_poŞ
->
p_memÜy_begš
)è%…_poŞ->
block_size
) != 0)

353 
	`NRF_LOG_INST_ERROR
(
p_poŞ
->
p_log
,

354 "A‰em±edØä“ cÜru±edƒËm’ˆadd»s (0x%08X).", 
p_–em’t
);

355 
	`APP_ERROR_CHECK_BOOL
(
çl£
);

359 * 
p_block
 = 
p_–em’t
;

362 
	`CRITICAL_REGION_ENTER
();

364 #ià
NRF_BALLOC_CONFIG_DEBUG_ENABLED


366 ià(
	`NRF_BALLOC_DEBUG_BASIC_CHECKS_GET
(
p_poŞ
->
debug_æags
))

369 ià(
p_poŞ
->
p_cb
->
p_¡ack_poš‹r
 >ğp_poŞ->
p_¡ack_lim™
)

371 
	`NRF_LOG_INST_ERROR
(
p_poŞ
->
p_log
,

373 
p_–em’t
);

374 
	`APP_ERROR_CHECK_BOOL
(
çl£
);

378 ià(
	`NRF_BALLOC_DEBUG_DOUBLE_FREE_CHECK_GET
(
p_poŞ
->
debug_æags
))

381 
ušt8_t
 * 
p_idx
 = 
p_poŞ
->
p_¡ack_ba£
;…_idx <…_poŞ->
p_cb
->
p_¡ack_poš‹r
;…_idx++)

383 ià(
	`Äf_b®loc_idx2block
(
p_poŞ
, *
p_idx
è=ğ
p_block
)

385 
	`NRF_LOG_INST_ERROR
(
p_poŞ
->
p_log
, "Attemptedo double-free‡nƒlement (0x%08X).",

386 
p_–em’t
);

387 
	`APP_ERROR_CHECK_BOOL
(
çl£
);

394 *(
p_poŞ
->
p_cb
->
p_¡ack_poš‹r
)++ = 
	`Äf_b®loc_block2idx
Õ_poŞ, 
p_block
);

396 
	`CRITICAL_REGION_EXIT
();

397 
	}
}

	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\libraries\bsp\bsp.c

40 
	~"b¥.h
"

41 
	~<¡ddef.h
>

42 
	~<¡dio.h
>

43 
	~"nÜdic_commÚ.h
"

44 
	~"Äf.h
"

45 
	~"Äf_gpio.h
"

46 
	~"Äf_”rÜ.h
"

47 
	~"b¥_cÚfig.h
"

48 
	~"bßrds.h
"

50 #iâdeà
BSP_SIMPLE


51 
	~"­p_tim”.h
"

52 
	~"­p_bu‰Ú.h
"

55 #ià
LEDS_NUMBER
 > 0 && !(
defšed
 
BSP_SIMPLE
)

56 
b¥_šdiÿtiÚ_t
 
	gm_¡abË_¡©e
 = 
BSP_INDICATE_IDLE
;

57 
boŞ
 
	gm_Ëds_ş—r
 = 
çl£
;

58 
ušt32_t
 
	gm_šdiÿtiÚ_ty³
 = 0;

59 
boŞ
 
	gm_®”t_Ú
 = 
çl£
;

60 
APP_TIMER_DEF
(
m_b¥_Ëds_tmr
);

61 
APP_TIMER_DEF
(
m_b¥_®”t_tmr
);

64 #ià
BUTTONS_NUMBER
 > 0

65 #iâdeà
BSP_SIMPLE


66 
b¥_ev’t_ÿÎback_t
 
	gm_»gi¡”ed_ÿÎback
 = 
NULL
;

67 
b¥_bu‰Ú_ev’t_cfg_t
 
	gm_ev’ts_li¡
[
BUTTONS_NUMBER
] = {{
BSP_EVENT_NOTHING
, BSP_EVENT_NOTHING}};

68 
APP_TIMER_DEF
(
m_b¥_bu‰Ú_tmr
);

69 
b¥_bu‰Ú_ev’t_hªdËr
(
ušt8_t
 
pš_no
, ušt8_ˆ
bu‰Ú_aùiÚ
);

72 #iâdeà
BSP_SIMPLE


73 cÚ¡ 
­p_bu‰Ú_cfg_t
 
	g­p_bu‰Ús
[
BUTTONS_NUMBER
] =

75 #ifdeà
BSP_BUTTON_0


76 {
BSP_BUTTON_0
, 
çl£
, 
BUTTON_PULL
, 
b¥_bu‰Ú_ev’t_hªdËr
},

79 #ifdeà
BSP_BUTTON_1


80 {
BSP_BUTTON_1
, 
çl£
, 
BUTTON_PULL
, 
b¥_bu‰Ú_ev’t_hªdËr
},

83 #ifdeà
BSP_BUTTON_2


84 {
BSP_BUTTON_2
, 
çl£
, 
BUTTON_PULL
, 
b¥_bu‰Ú_ev’t_hªdËr
},

87 #ifdeà
BSP_BUTTON_3


88 {
BSP_BUTTON_3
, 
çl£
, 
BUTTON_PULL
, 
b¥_bu‰Ú_ev’t_hªdËr
},

91 #ifdeà
BSP_BUTTON_4


92 {
BSP_BUTTON_4
, 
çl£
, 
BUTTON_PULL
, 
b¥_bu‰Ú_ev’t_hªdËr
},

95 #ifdeà
BSP_BUTTON_5


96 {
BSP_BUTTON_5
, 
çl£
, 
BUTTON_PULL
, 
b¥_bu‰Ú_ev’t_hªdËr
},

99 #ifdeà
BSP_BUTTON_6


100 {
BSP_BUTTON_6
, 
çl£
, 
BUTTON_PULL
, 
b¥_bu‰Ú_ev’t_hªdËr
},

103 #ifdeà
BSP_BUTTON_7


104 {
BSP_BUTTON_7
, 
çl£
, 
BUTTON_PULL
, 
b¥_bu‰Ú_ev’t_hªdËr
},

111 #ià(
BUTTONS_NUMBER
 > 0)

112 
boŞ
 
	$b¥_bu‰Ú_is_´es£d
(
ušt32_t
 
bu‰Ú
)

114 ià(
bu‰Ú
 < 
BUTTONS_NUMBER
)

116  
	`b¥_bßrd_bu‰Ú_¡©e_g‘
(
bu‰Ú
);

121  
çl£
;

123 
	}
}

126 #ià(
BUTTONS_NUMBER
 > 0è&& !(
defšed
 
BSP_SIMPLE
)

132 
	$b¥_bu‰Ú_ev’t_hªdËr
(
ušt8_t
 
pš_no
, ušt8_ˆ
bu‰Ú_aùiÚ
)

134 
b¥_ev’t_t
 
ev’t
 = 
BSP_EVENT_NOTHING
;

135 
ušt32_t
 
bu‰Ú
 = 0;

136 
ušt32_t
 
”r_code
;

137 
ušt8_t
 
cu¼’t_lÚg_push_pš_no
;

138 
b¥_ev’t_t
 
»Ëa£_ev’t_©_push
[
BUTTONS_NUMBER
];

140 
bu‰Ú
 = 
	`b¥_bßrd_pš_to_bu‰Ú_idx
(
pš_no
);

142 ià(
bu‰Ú
 < 
BUTTONS_NUMBER
)

144 
bu‰Ú_aùiÚ
)

146 
APP_BUTTON_PUSH
:

147 
ev’t
 = 
m_ev’ts_li¡
[
bu‰Ú
].
push_ev’t
;

148 ià(
m_ev’ts_li¡
[
bu‰Ú
].
lÚg_push_ev’t
 !ğ
BSP_EVENT_NOTHING
)

150 
”r_code
 = 
	`­p_tim”_¡¬t
(
m_b¥_bu‰Ú_tmr
, 
	`APP_TIMER_TICKS
(
BSP_LONG_PUSH_TIMEOUT_MS
), (*)&
cu¼’t_lÚg_push_pš_no
);

151 ià(
”r_code
 =ğ
NRF_SUCCESS
)

153 
cu¼’t_lÚg_push_pš_no
 = 
pš_no
;

156 
»Ëa£_ev’t_©_push
[
bu‰Ú
] = 
m_ev’ts_li¡
[bu‰Ú].
»Ëa£_ev’t
;

158 
APP_BUTTON_RELEASE
:

159 ()
	`­p_tim”_¡İ
(
m_b¥_bu‰Ú_tmr
);

160 ià(
»Ëa£_ev’t_©_push
[
bu‰Ú
] =ğ
m_ev’ts_li¡
[bu‰Ú].
»Ëa£_ev’t
)

162 
ev’t
 = 
m_ev’ts_li¡
[
bu‰Ú
].
»Ëa£_ev’t
;

165 
BSP_BUTTON_ACTION_LONG_PUSH
:

166 
ev’t
 = 
m_ev’ts_li¡
[
bu‰Ú
].
lÚg_push_ev’t
;

170 ià((
ev’t
 !ğ
BSP_EVENT_NOTHING
è&& (
m_»gi¡”ed_ÿÎback
 !ğ
NULL
))

172 
	`m_»gi¡”ed_ÿÎback
(
ev’t
);

174 
	}
}

180 
	$bu‰Ú_tim”_hªdËr
(* 
p_cÚ‹xt
)

182 
	`b¥_bu‰Ú_ev’t_hªdËr
(*(
ušt8_t
 *)
p_cÚ‹xt
, 
BSP_BUTTON_ACTION_LONG_PUSH
);

183 
	}
}

189 #ià
LEDS_NUMBER
 > 0 && !(
defšed
 
BSP_SIMPLE
)

190 
	$Ëds_off
()

192 ià(
m_®”t_Ú
)

194 
ušt32_t
 
i
;

195 
i
 = 0; i < 
LEDS_NUMBER
; i++)

197 ià(
i
 !ğ
BSP_LED_ALERT
)

199 
	`b¥_bßrd_Ëd_off
(
i
);

205 
	`b¥_bßrd_Ëds_off
();

207 
	}
}

213 
ušt32_t
 
	$b¥_Ëd_šdiÿtiÚ
(
b¥_šdiÿtiÚ_t
 
šdiÿ‹
)

215 
ušt32_t
 
”r_code
 = 
NRF_SUCCESS
;

216 
ušt32_t
 
Ãxt_d–ay
 = 0;

218 ià(
m_Ëds_ş—r
)

220 
m_Ëds_ş—r
 = 
çl£
;

221 
	`Ëds_off
();

224 
šdiÿ‹
)

226 
BSP_INDICATE_IDLE
:

227 
	`Ëds_off
();

228 
m_¡abË_¡©e
 = 
šdiÿ‹
;

231 
BSP_INDICATE_SCANNING
:

232 
BSP_INDICATE_ADVERTISING
:

234 ià(
	`b¥_bßrd_Ëd_¡©e_g‘
(
BSP_LED_INDICATE_INDICATE_ADVERTISING
))

236 
	`b¥_bßrd_Ëd_off
(
BSP_LED_INDICATE_INDICATE_ADVERTISING
);

237 
Ãxt_d–ay
 = 
šdiÿ‹
 ==

238 
BSP_INDICATE_ADVERTISING
 ? 
ADVERTISING_LED_OFF_INTERVAL
 :

239 
ADVERTISING_SLOW_LED_OFF_INTERVAL
;

243 
	`b¥_bßrd_Ëd_Ú
(
BSP_LED_INDICATE_INDICATE_ADVERTISING
);

244 
Ãxt_d–ay
 = 
šdiÿ‹
 ==

245 
BSP_INDICATE_ADVERTISING
 ? 
ADVERTISING_LED_ON_INTERVAL
 :

246 
ADVERTISING_SLOW_LED_ON_INTERVAL
;

249 
m_¡abË_¡©e
 = 
šdiÿ‹
;

250 
”r_code
 = 
	`­p_tim”_¡¬t
(
m_b¥_Ëds_tmr
, 
	`APP_TIMER_TICKS
(
Ãxt_d–ay
), 
NULL
);

253 
BSP_INDICATE_ADVERTISING_WHITELIST
:

255 ià(
	`b¥_bßrd_Ëd_¡©e_g‘
(
BSP_LED_INDICATE_ADVERTISING_WHITELIST
))

257 
	`b¥_bßrd_Ëd_off
(
BSP_LED_INDICATE_ADVERTISING_WHITELIST
);

258 
Ãxt_d–ay
 = 
šdiÿ‹
 ==

259 
BSP_INDICATE_ADVERTISING_WHITELIST
 ?

260 
ADVERTISING_WHITELIST_LED_OFF_INTERVAL
 :

261 
ADVERTISING_SLOW_LED_OFF_INTERVAL
;

265 
	`b¥_bßrd_Ëd_Ú
(
BSP_LED_INDICATE_ADVERTISING_WHITELIST
);

266 
Ãxt_d–ay
 = 
šdiÿ‹
 ==

267 
BSP_INDICATE_ADVERTISING_WHITELIST
 ?

268 
ADVERTISING_WHITELIST_LED_ON_INTERVAL
 :

269 
ADVERTISING_SLOW_LED_ON_INTERVAL
;

271 
m_¡abË_¡©e
 = 
šdiÿ‹
;

272 
”r_code
 = 
	`­p_tim”_¡¬t
(
m_b¥_Ëds_tmr
, 
	`APP_TIMER_TICKS
(
Ãxt_d–ay
), 
NULL
);

275 
BSP_INDICATE_ADVERTISING_SLOW
:

277 ià(
	`b¥_bßrd_Ëd_¡©e_g‘
(
BSP_LED_INDICATE_ADVERTISING_SLOW
))

279 
	`b¥_bßrd_Ëd_off
(
BSP_LED_INDICATE_ADVERTISING_SLOW
);

280 
Ãxt_d–ay
 = 
šdiÿ‹
 ==

281 
BSP_INDICATE_ADVERTISING_SLOW
 ? 
ADVERTISING_SLOW_LED_OFF_INTERVAL
 :

282 
ADVERTISING_SLOW_LED_OFF_INTERVAL
;

286 
	`b¥_bßrd_Ëd_Ú
(
BSP_LED_INDICATE_ADVERTISING_SLOW
);

287 
Ãxt_d–ay
 = 
šdiÿ‹
 ==

288 
BSP_INDICATE_ADVERTISING_SLOW
 ? 
ADVERTISING_SLOW_LED_ON_INTERVAL
 :

289 
ADVERTISING_SLOW_LED_ON_INTERVAL
;

291 
m_¡abË_¡©e
 = 
šdiÿ‹
;

292 
”r_code
 = 
	`­p_tim”_¡¬t
(
m_b¥_Ëds_tmr
, 
	`APP_TIMER_TICKS
(
Ãxt_d–ay
), 
NULL
);

295 
BSP_INDICATE_ADVERTISING_DIRECTED
:

297 ià(
	`b¥_bßrd_Ëd_¡©e_g‘
(
BSP_LED_INDICATE_ADVERTISING_DIRECTED
))

299 
	`b¥_bßrd_Ëd_off
(
BSP_LED_INDICATE_ADVERTISING_DIRECTED
);

300 
Ãxt_d–ay
 = 
šdiÿ‹
 ==

301 
BSP_INDICATE_ADVERTISING_DIRECTED
 ?

302 
ADVERTISING_DIRECTED_LED_OFF_INTERVAL
 :

303 
ADVERTISING_SLOW_LED_OFF_INTERVAL
;

307 
	`b¥_bßrd_Ëd_Ú
(
BSP_LED_INDICATE_ADVERTISING_DIRECTED
);

308 
Ãxt_d–ay
 = 
šdiÿ‹
 ==

309 
BSP_INDICATE_ADVERTISING_DIRECTED
 ?

310 
ADVERTISING_DIRECTED_LED_ON_INTERVAL
 :

311 
ADVERTISING_SLOW_LED_ON_INTERVAL
;

313 
m_¡abË_¡©e
 = 
šdiÿ‹
;

314 
”r_code
 = 
	`­p_tim”_¡¬t
(
m_b¥_Ëds_tmr
, 
	`APP_TIMER_TICKS
(
Ãxt_d–ay
), 
NULL
);

317 
BSP_INDICATE_BONDING
:

319 
	`b¥_bßrd_Ëd_šv”t
(
BSP_LED_INDICATE_BONDING
);

321 
m_¡abË_¡©e
 = 
šdiÿ‹
;

322 
”r_code
 =

323 
	`­p_tim”_¡¬t
(
m_b¥_Ëds_tmr
, 
	`APP_TIMER_TICKS
(
BONDING_INTERVAL
), 
NULL
);

326 
BSP_INDICATE_CONNECTED
:

327 
	`b¥_bßrd_Ëd_Ú
(
BSP_LED_INDICATE_CONNECTED
);

328 
m_¡abË_¡©e
 = 
šdiÿ‹
;

331 
BSP_INDICATE_SENT_OK
:

333 
m_Ëds_ş—r
 = 
Œue
;

334 
	`b¥_bßrd_Ëd_šv”t
(
BSP_LED_INDICATE_SENT_OK
);

335 
”r_code
 = 
	`­p_tim”_¡¬t
(
m_b¥_Ëds_tmr
, 
	`APP_TIMER_TICKS
(
SENT_OK_INTERVAL
), 
NULL
);

338 
BSP_INDICATE_SEND_ERROR
:

340 
m_Ëds_ş—r
 = 
Œue
;

341 
	`b¥_bßrd_Ëd_šv”t
(
BSP_LED_INDICATE_SEND_ERROR
);

342 
”r_code
 = 
	`­p_tim”_¡¬t
(
m_b¥_Ëds_tmr
, 
	`APP_TIMER_TICKS
(
SEND_ERROR_INTERVAL
), 
NULL
);

345 
BSP_INDICATE_RCV_OK
:

347 
m_Ëds_ş—r
 = 
Œue
;

348 
	`b¥_bßrd_Ëd_šv”t
(
BSP_LED_INDICATE_RCV_OK
);

349 
”r_code
 = 
	`­p_tim”_¡¬t
(
m_b¥_Ëds_tmr
, 
	`APP_TIMER_TICKS
(
RCV_OK_INTERVAL
), 
NULL
);

352 
BSP_INDICATE_RCV_ERROR
:

354 
m_Ëds_ş—r
 = 
Œue
;

355 
	`b¥_bßrd_Ëd_šv”t
(
BSP_LED_INDICATE_RCV_ERROR
);

356 
”r_code
 = 
	`­p_tim”_¡¬t
(
m_b¥_Ëds_tmr
, 
	`APP_TIMER_TICKS
(
RCV_ERROR_INTERVAL
), 
NULL
);

359 
BSP_INDICATE_FATAL_ERROR
:

361 
	`b¥_bßrd_Ëds_Ú
();

362 
m_¡abË_¡©e
 = 
šdiÿ‹
;

365 
BSP_INDICATE_ALERT_0
:

366 
BSP_INDICATE_ALERT_1
:

367 
BSP_INDICATE_ALERT_2
:

368 
BSP_INDICATE_ALERT_3
:

369 
BSP_INDICATE_ALERT_OFF
:

370 
”r_code
 = 
	`­p_tim”_¡İ
(
m_b¥_®”t_tmr
);

371 
Ãxt_d–ay
 = (
ušt32_t
)
BSP_INDICATE_ALERT_OFF
 - (ušt32_t)
šdiÿ‹
;

374 ià(
Ãxt_d–ay
 && (
”r_code
 =ğ
NRF_SUCCESS
))

376 ià(
Ãxt_d–ay
 > 1)

378 
”r_code
 = 
	`­p_tim”_¡¬t
(
m_b¥_®”t_tmr
,

379 
	`APP_TIMER_TICKS
(((
ušt16_t
)
Ãxt_d–ay
 * 
ALERT_INTERVAL
)),

380 
NULL
);

382 
	`b¥_bßrd_Ëd_Ú
(
BSP_LED_ALERT
);

383 
m_®”t_Ú
 = 
Œue
;

387 
	`b¥_bßrd_Ëd_off
(
BSP_LED_ALERT
);

388 
m_®”t_Ú
 = 
çl£
;

393 
BSP_INDICATE_USER_STATE_OFF
:

394 
	`Ëds_off
();

395 
m_¡abË_¡©e
 = 
šdiÿ‹
;

398 
BSP_INDICATE_USER_STATE_0
:

399 
	`Ëds_off
();

400 
	`b¥_bßrd_Ëd_Ú
(
BSP_LED_INDICATE_USER_LED1
);

401 
m_¡abË_¡©e
 = 
šdiÿ‹
;

404 
BSP_INDICATE_USER_STATE_1
:

405 
	`Ëds_off
();

406 
	`b¥_bßrd_Ëd_Ú
(
BSP_LED_INDICATE_USER_LED2
);

407 
m_¡abË_¡©e
 = 
šdiÿ‹
;

410 
BSP_INDICATE_USER_STATE_2
:

411 
	`Ëds_off
();

412 
	`b¥_bßrd_Ëd_Ú
(
BSP_LED_INDICATE_USER_LED1
);

413 
	`b¥_bßrd_Ëd_Ú
(
BSP_LED_INDICATE_USER_LED2
);

414 
m_¡abË_¡©e
 = 
šdiÿ‹
;

417 
BSP_INDICATE_USER_STATE_3
:

419 
BSP_INDICATE_USER_STATE_ON
:

420 
	`b¥_bßrd_Ëds_Ú
();

421 
m_¡abË_¡©e
 = 
šdiÿ‹
;

428  
”r_code
;

429 
	}
}

439 
	$Ëds_tim”_hªdËr
(* 
p_cÚ‹xt
)

441 
	`UNUSED_PARAMETER
(
p_cÚ‹xt
);

443 ià(
m_šdiÿtiÚ_ty³
 & 
BSP_INIT_LEDS
)

445 
	`UNUSED_VARIABLE
(
	`b¥_Ëd_šdiÿtiÚ
(
m_¡abË_¡©e
));

447 
	}
}

454 
	$®”t_tim”_hªdËr
(* 
p_cÚ‹xt
)

456 
	`UNUSED_PARAMETER
(
p_cÚ‹xt
);

457 
	`b¥_bßrd_Ëd_šv”t
(
BSP_LED_ALERT
);

458 
	}
}

464 
ušt32_t
 
	$b¥_šdiÿtiÚ_£t
(
b¥_šdiÿtiÚ_t
 
šdiÿ‹
)

466 
ušt32_t
 
”r_code
 = 
NRF_SUCCESS
;

468 #ià
LEDS_NUMBER
 > 0 && !(
defšed
 
BSP_SIMPLE
)

470 ià(
m_šdiÿtiÚ_ty³
 & 
BSP_INIT_LEDS
)

472 
”r_code
 = 
	`b¥_Ëd_šdiÿtiÚ
(
šdiÿ‹
);

476  
”r_code
;

477 
	}
}

480 
ušt32_t
 
	$b¥_š™
(
ušt32_t
 
ty³
, 
b¥_ev’t_ÿÎback_t
 
ÿÎback
)

482 
ušt32_t
 
”r_code
 = 
NRF_SUCCESS
;

484 #ià
LEDS_NUMBER
 > 0 && !(
defšed
 
BSP_SIMPLE
)

485 
m_šdiÿtiÚ_ty³
 = 
ty³
;

488 #ià(
BUTTONS_NUMBER
 > 0è&& !(
defšed
 
BSP_SIMPLE
)

489 
m_»gi¡”ed_ÿÎback
 = 
ÿÎback
;

492 ià(
ty³
 & 
BSP_INIT_BUTTONS
)

494 
ušt32_t
 
num
;

496 
num
 = 0; (Òum < 
BUTTONS_NUMBER
è&& (
”r_code
 =ğ
NRF_SUCCESS
));‚um++)

498 
”r_code
 = 
	`b¥_ev’t_to_bu‰Ú_aùiÚ_assign
(
num
, 
BSP_BUTTON_ACTION_PUSH
, 
BSP_EVENT_DEFAULT
);

501 ià(
”r_code
 =ğ
NRF_SUCCESS
)

503 
”r_code
 = 
	`­p_bu‰Ú_š™
((
­p_bu‰Ú_cfg_t
 *)
­p_bu‰Ús
,

504 
BUTTONS_NUMBER
,

505 
	`APP_TIMER_TICKS
(50));

508 ià(
”r_code
 =ğ
NRF_SUCCESS
)

510 
”r_code
 = 
	`­p_bu‰Ú_’abË
();

513 ià(
”r_code
 =ğ
NRF_SUCCESS
)

515 
”r_code
 = 
	`­p_tim”_ü—‹
(&
m_b¥_bu‰Ú_tmr
,

516 
APP_TIMER_MODE_SINGLE_SHOT
,

517 
bu‰Ú_tim”_hªdËr
);

520 #–ià(
BUTTONS_NUMBER
 > 0è&& (
defšed
 
BSP_SIMPLE
)

521 
	`b¥_bßrd_š™
(
ty³
);

524 #ià
LEDS_NUMBER
 > 0 && !(
defšed
 
BSP_SIMPLE
)

525 ià(
ty³
 & 
BSP_INIT_LEDS
)

528 
	`b¥_bßrd_š™
(
BSP_INIT_LEDS
);

531 ià(
”r_code
 =ğ
NRF_SUCCESS
)

533 
”r_code
 =

534 
	`­p_tim”_ü—‹
(&
m_b¥_Ëds_tmr
, 
APP_TIMER_MODE_SINGLE_SHOT
, 
Ëds_tim”_hªdËr
);

537 ià(
”r_code
 =ğ
NRF_SUCCESS
)

539 
”r_code
 =

540 
	`­p_tim”_ü—‹
(&
m_b¥_®”t_tmr
, 
APP_TIMER_MODE_REPEATED
, 
®”t_tim”_hªdËr
);

545  
”r_code
;

546 
	}
}

549 #iâdeà
BSP_SIMPLE


552 
ušt32_t
 
	$b¥_ev’t_to_bu‰Ú_aùiÚ_assign
(
ušt32_t
 
bu‰Ú
, 
b¥_bu‰Ú_aùiÚ_t
 
aùiÚ
, 
b¥_ev’t_t
 
ev’t
)

554 
ušt32_t
 
”r_code
 = 
NRF_SUCCESS
;

556 #ià
BUTTONS_NUMBER
 > 0

557 ià(
bu‰Ú
 < 
BUTTONS_NUMBER
)

559 ià(
ev’t
 =ğ
BSP_EVENT_DEFAULT
)

562 
ev’t
 = (
aùiÚ
 =ğ
BSP_BUTTON_ACTION_PUSH
è? (
b¥_ev’t_t
)(
BSP_EVENT_KEY_0
 + 
bu‰Ú
è: 
BSP_EVENT_NOTHING
;

564 
aùiÚ
)

566 
BSP_BUTTON_ACTION_PUSH
:

567 
m_ev’ts_li¡
[
bu‰Ú
].
push_ev’t
 = 
ev’t
;

569 
BSP_BUTTON_ACTION_LONG_PUSH
:

570 
m_ev’ts_li¡
[
bu‰Ú
].
lÚg_push_ev’t
 = 
ev’t
;

572 
BSP_BUTTON_ACTION_RELEASE
:

573 
m_ev’ts_li¡
[
bu‰Ú
].
»Ëa£_ev’t
 = 
ev’t
;

576 
”r_code
 = 
NRF_ERROR_INVALID_PARAM
;

582 
”r_code
 = 
NRF_ERROR_INVALID_PARAM
;

585 
”r_code
 = 
NRF_ERROR_INVALID_PARAM
;

588  
”r_code
;

589 
	}
}

594 
ušt32_t
 
	$b¥_bu‰Ús_’abË
()

596 #ià(
BUTTONS_NUMBER
 > 0è&& !
	`defšed
(
BSP_SIMPLE
)

597  
	`­p_bu‰Ú_’abË
();

599  
NRF_ERROR_NOT_SUPPORTED
;

601 
	}
}

603 
ušt32_t
 
	$b¥_bu‰Ús_di§bË
()

605 #ià(
BUTTONS_NUMBER
 > 0è&& !
	`defšed
(
BSP_SIMPLE
)

606  
	`­p_bu‰Ú_di§bË
();

608  
NRF_ERROR_NOT_SUPPORTED
;

610 
	}
}

611 
ušt32_t
 
	$wakeup_bu‰Ú_cfg
(
ušt32_t
 
bu‰Ú_idx
, 
boŞ
 
’abË
)

613 #ià!
	`defšed
(
BSP_SIMPLE
)

614 ià(
bu‰Ú_idx
 < 
BUTTONS_NUMBER
)

616 
Äf_gpio_pš_£n£_t
 
£n£
 = 
’abË
 ?

617 (
BUTTONS_ACTIVE_STATE
 ? 
NRF_GPIO_PIN_SENSE_HIGH
 : 
NRF_GPIO_PIN_SENSE_LOW
) :

618 
NRF_GPIO_PIN_NOSENSE
;

619 
	`Äf_gpio_cfg_£n£_£t
(
	`b¥_bßrd_bu‰Ú_idx_to_pš
(
bu‰Ú_idx
), 
£n£
);

620  
NRF_SUCCESS
;

623 
	`UNUSED_PARAMETER
(
bu‰Ú_idx
);

624 
	`UNUSED_PARAMETER
(
’abË
);

626  
NRF_ERROR_NOT_SUPPORTED
;

628 
	}
}

629 
ušt32_t
 
	$b¥_wakeup_bu‰Ú_’abË
(
ušt32_t
 
bu‰Ú_idx
)

631  
	`wakeup_bu‰Ú_cfg
(
bu‰Ú_idx
, 
Œue
);

632 
	}
}

634 
ušt32_t
 
	$b¥_wakeup_bu‰Ú_di§bË
(
ušt32_t
 
bu‰Ú_idx
)

636  
	`wakeup_bu‰Ú_cfg
(
bu‰Ú_idx
, 
çl£
);

637 
	}
}

	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\libraries\bsp\bsp_btn_ble.c

40 
	~"b¥_bŠ_bË.h
"

41 
	~"Äf_sdh_bË.h
"

42 
	~"b¥.h
"

44 
	#BTN_ID_WAKEUP
 0

	)

45 
	#BTN_ID_SLEEP
 0

	)

46 
	#BTN_ID_DISCONNECT
 0

	)

47 
	#BTN_ID_WAKEUP_BOND_DELETE
 1

	)

48 
	#BTN_ID_WHITELIST_OFF
 1

	)

50 
	#BTN_ACTION_SLEEP
 
BSP_BUTTON_ACTION_RELEASE


	)

51 
	#BTN_ACTION_DISCONNECT
 
BSP_BUTTON_ACTION_LONG_PUSH


	)

52 
	#BTN_ACTION_WHITELIST_OFF
 
BSP_BUTTON_ACTION_LONG_PUSH


	)

57 
	#RETURN_ON_ERROR_NOT_INVALID_PARAM
(
”r_code
) \

60 ià(((
”r_code
è!ğ
NRF_SUCCESS
è&& (Ó¼_codeè!ğ
NRF_ERROR_INVALID_PARAM
)) \

62  
”r_code
; \

65 0)

	)

71 
	#RETURN_ON_ERROR_NOT_NOT_SUPPORTED
(
”r_code
) \

74 ià(((
”r_code
è!ğ
NRF_SUCCESS
è&& (Ó¼_codeè!ğ
NRF_ERROR_NOT_SUPPORTED
)) \

76  
”r_code
; \

79 0)

	)

85 
	#CALL_HANDLER_ON_ERROR
(
”r_code
) \

88 ià(((
”r_code
è!ğ
NRF_SUCCESS
è&& (
m_”rÜ_hªdËr
 !ğ
NULL
)) \

90 
	`m_”rÜ_hªdËr
(
”r_code
); \

93 0)

	)

96 
b¥_bŠ_bË_”rÜ_hªdËr_t
 
	gm_”rÜ_hªdËr
 = 
NULL
;

97 
ušt32_t
 
	gm_num_cÚÃùiÚs
 = 0;

105 
ušt32_t
 
	$cÚÃùiÚ_bu‰Ús_cÚfigu»
()

107 
ušt32_t
 
”r_code
;

109 
”r_code
 = 
	`b¥_ev’t_to_bu‰Ú_aùiÚ_assign
(
BTN_ID_SLEEP
,

110 
BTN_ACTION_SLEEP
,

111 
BSP_EVENT_DEFAULT
);

112 
	`RETURN_ON_ERROR_NOT_INVALID_PARAM
(
”r_code
);

114 
”r_code
 = 
	`b¥_ev’t_to_bu‰Ú_aùiÚ_assign
(
BTN_ID_WHITELIST_OFF
,

115 
BTN_ACTION_WHITELIST_OFF
,

116 
BSP_EVENT_WHITELIST_OFF
);

117 
	`RETURN_ON_ERROR_NOT_INVALID_PARAM
(
”r_code
);

120 
”r_code
 = 
	`b¥_ev’t_to_bu‰Ú_aùiÚ_assign
(
BTN_ID_DISCONNECT
,

121 
BTN_ACTION_DISCONNECT
,

122 
BSP_EVENT_DISCONNECT
);

123 
	`RETURN_ON_ERROR_NOT_INVALID_PARAM
(
”r_code
);

125  
NRF_SUCCESS
;

126 
	}
}

134 
ušt32_t
 
	$adv”tisšg_bu‰Ús_cÚfigu»
()

136 
ušt32_t
 
”r_code
;

138 
”r_code
 = 
	`b¥_ev’t_to_bu‰Ú_aùiÚ_assign
(
BTN_ID_DISCONNECT
,

139 
BTN_ACTION_DISCONNECT
,

140 
BSP_EVENT_DEFAULT
);

141 
	`RETURN_ON_ERROR_NOT_INVALID_PARAM
(
”r_code
);

143 
”r_code
 = 
	`b¥_ev’t_to_bu‰Ú_aùiÚ_assign
(
BTN_ID_WHITELIST_OFF
,

144 
BTN_ACTION_WHITELIST_OFF
,

145 
BSP_EVENT_WHITELIST_OFF
);

146 
	`RETURN_ON_ERROR_NOT_INVALID_PARAM
(
”r_code
);

148 
”r_code
 = 
	`b¥_ev’t_to_bu‰Ú_aùiÚ_assign
(
BTN_ID_SLEEP
,

149 
BTN_ACTION_SLEEP
,

150 
BSP_EVENT_SLEEP
);

151 
	`RETURN_ON_ERROR_NOT_INVALID_PARAM
(
”r_code
);

153  
NRF_SUCCESS
;

154 
	}
}

165 
	$¡¬tup_ev’t_exŒaù
(
b¥_ev’t_t
 * 
p_¡¬tup_ev’t
)

168 ià(
	`b¥_bu‰Ú_is_´es£d
(
BTN_ID_WAKEUP_BOND_DELETE
))

170 *
p_¡¬tup_ev’t
 = 
BSP_EVENT_CLEAR_BONDING_DATA
;

172 ià(
	`b¥_bu‰Ú_is_´es£d
(
BTN_ID_WAKEUP
))

174 *
p_¡¬tup_ev’t
 = 
BSP_EVENT_WAKEUP
;

178 *
p_¡¬tup_ev’t
 = 
BSP_EVENT_NOTHING
;

180 
	}
}

183 
ušt32_t
 
	$b¥_bŠ_bË_¦“p_mode_´•¬e
()

185 
ušt32_t
 
”r_code
;

187 
”r_code
 = 
	`b¥_wakeup_bu‰Ú_’abË
(
BTN_ID_WAKEUP
);

188 
	`RETURN_ON_ERROR_NOT_NOT_SUPPORTED
(
”r_code
);

190 
”r_code
 = 
	`b¥_wakeup_bu‰Ú_’abË
(
BTN_ID_WAKEUP_BOND_DELETE
);

191 
	`RETURN_ON_ERROR_NOT_NOT_SUPPORTED
(
”r_code
);

193  
NRF_SUCCESS
;

194 
	}
}

203 
	$bË_evt_hªdËr
(
bË_evt_t
 cÚ¡ * 
p_bË_evt
, * 
p_cÚ‹xt
)

205 
ušt32_t
 
”r_code
;

207 
p_bË_evt
->
h—d”
.
evt_id
)

209 
BLE_GAP_EVT_CONNECTED
:

210 ià(
m_num_cÚÃùiÚs
 == 0)

212 
”r_code
 = 
	`cÚÃùiÚ_bu‰Ús_cÚfigu»
();

213 
	`CALL_HANDLER_ON_ERROR
(
”r_code
);

216 
m_num_cÚÃùiÚs
++;

219 
BLE_GAP_EVT_DISCONNECTED
:

220 
m_num_cÚÃùiÚs
--;

222 ià(
m_num_cÚÃùiÚs
 == 0)

224 
”r_code
 = 
	`adv”tisšg_bu‰Ús_cÚfigu»
();

225 
	`CALL_HANDLER_ON_ERROR
(
”r_code
);

232 
	}
}

234 
NRF_SDH_BLE_OBSERVER
(
m_bË_ob£rv”
, 
BSP_BTN_BLE_OBSERVER_PRIO
, 
bË_evt_hªdËr
, 
NULL
);

237 
ušt32_t
 
	$b¥_bŠ_bË_š™
(
b¥_bŠ_bË_”rÜ_hªdËr_t
 
”rÜ_hªdËr
, 
b¥_ev’t_t
 * 
p_¡¬tup_b¥_evt
)

239 
ušt32_t
 
”r_code
 = 
NRF_SUCCESS
;

241 
m_”rÜ_hªdËr
 = 
”rÜ_hªdËr
;

243 ià(
p_¡¬tup_b¥_evt
 !ğ
NULL
)

245 
	`¡¬tup_ev’t_exŒaù
(
p_¡¬tup_b¥_evt
);

248 ià(
m_num_cÚÃùiÚs
 == 0)

250 
”r_code
 = 
	`adv”tisšg_bu‰Ús_cÚfigu»
();

253  
”r_code
;

254 
	}
}

	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\libraries\button\app_button.c

40 
	~"sdk_commÚ.h
"

41 #ià
NRF_MODULE_ENABLED
(
BUTTON
)

42 
	~"­p_bu‰Ú.h
"

43 
	~"­p_tim”.h
"

44 
	~"­p_”rÜ.h
"

45 
	~"Äf_drv_gpiÙe.h
"

46 
	~"Äf_as£¹.h
"

49 
­p_bu‰Ú_cfg_t
 cÚ¡ * 
	gmp_bu‰Ús
 = 
NULL
;

50 
ušt8_t
 
	gm_bu‰Ú_couÁ
;

51 
ušt32_t
 
	gm_d‘eùiÚ_d–ay
;

52 
APP_TIMER_DEF
(
m_d‘eùiÚ_d–ay_tim”_id
);

55 
ušt64_t
 
	gm_pš_¡©e
;

56 
ušt64_t
 
	gm_pš_Œªs™iÚ
;

70 
	$d‘eùiÚ_d–ay_timeout_hªdËr
(* 
p_cÚ‹xt
)

72 
ušt8_t
 
i
;

75 
i
 = 0; i < 
m_bu‰Ú_couÁ
; i++)

77 
­p_bu‰Ú_cfg_t
 cÚ¡ * 
p_bŠ
 = &
mp_bu‰Ús
[
i
];

78 
ušt64_t
 
bŠ_mask
 = 1ULL << 
p_bŠ
->
pš_no
;

79 ià(
bŠ_mask
 & 
m_pš_Œªs™iÚ
)

81 
m_pš_Œªs™iÚ
 &ğ~
bŠ_mask
;

82 
boŞ
 
pš_is_£t
 = 
	`Äf_drv_gpiÙe_š_is_£t
(
p_bŠ
->
pš_no
);

83 ià((
m_pš_¡©e
 & (1ULL << 
p_bŠ
->
pš_no
)è=ğ(((
ušt64_t
)
pš_is_£t
) <<…_btn->pin_no))

85 
ušt32_t
 
Œªs™iÚ
 = !(
pš_is_£t
 ^ (
p_bŠ
->
aùive_¡©e
 =ğ
APP_BUTTON_ACTIVE_HIGH
));

87 ià(
p_bŠ
->
bu‰Ú_hªdËr
)

89 
p_bŠ
->
	`bu‰Ú_hªdËr
Õ_bŠ->
pš_no
, 
Œªs™iÚ
);

94 
	}
}

96 
	$gpiÙe_ev’t_hªdËr
(
Äf_drv_gpiÙe_pš_t
 
pš
, 
Äf_gpiÙe_pŞ¬™y_t
 
aùiÚ
)

98 
ušt32_t
 
”r_code
;

99 
ušt64_t
 
pš_mask
 = 1ULL << 
pš
;

105 
”r_code
 = 
	`­p_tim”_¡İ
(
m_d‘eùiÚ_d–ay_tim”_id
);

106 ià(
”r_code
 !ğ
NRF_SUCCESS
)

113 ià(!(
m_pš_Œªs™iÚ
 & 
pš_mask
))

115 ià(
	`Äf_drv_gpiÙe_š_is_£t
(
pš
))

117 
m_pš_¡©e
 |ğ
pš_mask
;

121 
m_pš_¡©e
 &ğ~(
pš_mask
);

123 
m_pš_Œªs™iÚ
 |ğ(
pš_mask
);

125 
”r_code
 = 
	`­p_tim”_¡¬t
(
m_d‘eùiÚ_d–ay_tim”_id
, 
m_d‘eùiÚ_d–ay
, 
NULL
);

126 ià(
”r_code
 !ğ
NRF_SUCCESS
)

134 
m_pš_Œªs™iÚ
 &ğ~
pš_mask
;

136 
	}
}

138 
ušt32_t
 
	$­p_bu‰Ú_š™
(
­p_bu‰Ú_cfg_t
 cÚ¡ * 
p_bu‰Ús
,

139 
ušt8_t
 
bu‰Ú_couÁ
,

140 
ušt32_t
 
d‘eùiÚ_d–ay
)

142 
ušt32_t
 
”r_code
;

144 ià(
d‘eùiÚ_d–ay
 < 
APP_TIMER_MIN_TIMEOUT_TICKS
)

146  
NRF_ERROR_INVALID_PARAM
;

149 ià(!
	`Äf_drv_gpiÙe_is_š™
())

151 
”r_code
 = 
	`Äf_drv_gpiÙe_š™
();

152 
	`VERIFY_SUCCESS
(
”r_code
);

156 
mp_bu‰Ús
 = 
p_bu‰Ús
;

157 
m_bu‰Ú_couÁ
 = 
bu‰Ú_couÁ
;

158 
m_d‘eùiÚ_d–ay
 = 
d‘eùiÚ_d–ay
;

160 
m_pš_¡©e
 = 0;

161 
m_pš_Œªs™iÚ
 = 0;

163 
bu‰Ú_couÁ
--)

165 
­p_bu‰Ú_cfg_t
 cÚ¡ * 
p_bŠ
 = &
p_bu‰Ús
[
bu‰Ú_couÁ
];

167 #ià
	`defšed
(
BUTTON_HIGH_ACCURACY_ENABLED
) && (BUTTON_HIGH_ACCURACY_ENABLED == 1)

168 
Äf_drv_gpiÙe_š_cÚfig_t
 
cÚfig
 = 
	`GPIOTE_CONFIG_IN_SENSE_TOGGLE
(
p_bŠ
->
hi_accu¿cy
);

170 
Äf_drv_gpiÙe_š_cÚfig_t
 
cÚfig
 = 
	`GPIOTE_CONFIG_IN_SENSE_TOGGLE
(
çl£
);

172 
cÚfig
.
puÎ
 = 
p_bŠ
->
puÎ_cfg
;

174 
”r_code
 = 
	`Äf_drv_gpiÙe_š_š™
(
p_bŠ
->
pš_no
, &
cÚfig
, 
gpiÙe_ev’t_hªdËr
);

175 
	`VERIFY_SUCCESS
(
”r_code
);

179  
	`­p_tim”_ü—‹
(&
m_d‘eùiÚ_d–ay_tim”_id
,

180 
APP_TIMER_MODE_SINGLE_SHOT
,

181 
d‘eùiÚ_d–ay_timeout_hªdËr
);

182 
	}
}

184 
ušt32_t
 
	$­p_bu‰Ú_’abË
()

186 
	`ASSERT
(
mp_bu‰Ús
);

188 
ušt32_t
 
i
;

189 
i
 = 0; i < 
m_bu‰Ú_couÁ
; i++)

191 
	`Äf_drv_gpiÙe_š_ev’t_’abË
(
mp_bu‰Ús
[
i
].
pš_no
, 
Œue
);

194  
NRF_SUCCESS
;

195 
	}
}

198 
ušt32_t
 
	$­p_bu‰Ú_di§bË
()

200 
	`ASSERT
(
mp_bu‰Ús
);

202 
ušt32_t
 
i
;

203 
i
 = 0; i < 
m_bu‰Ú_couÁ
; i++)

205 
	`Äf_drv_gpiÙe_š_ev’t_di§bË
(
mp_bu‰Ús
[
i
].
pš_no
);

209  
	`­p_tim”_¡İ
(
m_d‘eùiÚ_d–ay_tim”_id
);

210 
	}
}

213 
boŞ
 
	$­p_bu‰Ú_is_pushed
(
ušt8_t
 
bu‰Ú_id
)

215 
	`ASSERT
(
bu‰Ú_id
 <ğ
m_bu‰Ú_couÁ
);

216 
	`ASSERT
(
mp_bu‰Ús
 !ğ
NULL
);

218 
­p_bu‰Ú_cfg_t
 cÚ¡ * 
p_bŠ
 = &
mp_bu‰Ús
[
bu‰Ú_id
];

219 
boŞ
 
is_£t
 = 
	`Äf_drv_gpiÙe_š_is_£t
(
p_bŠ
->
pš_no
);

221  !(
is_£t
 ^ (
p_bŠ
->
aùive_¡©e
 =ğ
APP_BUTTON_ACTIVE_HIGH
));

222 
	}
}

	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\libraries\crc16\crc16.c

40 
	~"sdk_commÚ.h
"

41 #ià
NRF_MODULE_ENABLED
(
CRC16
)

42 
	~"üc16.h
"

44 
	~<¡dlib.h
>

46 
ušt16_t
 
	$üc16_compu‹
(
ušt8_t
 cÚ¡ * 
p_d©a
, 
ušt32_t
 
size
, 
ušt16_t
 cÚ¡ * 
p_üc
)

48 
ušt16_t
 
üc
 = (
p_üc
 =ğ
NULL
) ? 0xFFFF : *p_crc;

50 
ušt32_t
 
i
 = 0; i < 
size
; i++)

52 
üc
 = (
ušt8_t
)(crc >> 8) | (crc << 8);

53 
üc
 ^ğ
p_d©a
[
i
];

54 
üc
 ^ğ(
ušt8_t
)(crc & 0xFF) >> 4;

55 
üc
 ^= (crc << 8) << 4;

56 
üc
 ^= ((crc & 0xFF) << 4) << 1;

59  
üc
;

60 
	}
}

	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\libraries\experimental_log\src\nrf_log_backend_rtt.c

40 
	~"sdk_commÚ.h
"

41 #ià
NRF_MODULE_ENABLED
(
NRF_LOG
è&& NRF_MODULE_ENABLED(
NRF_LOG_BACKEND_RTT
)

42 
	~"Äf_log_back’d_¹t.h
"

43 
	~"Äf_log_back’d_£rŸl.h
"

44 
	~"Äf_log_¡r_fÜm©‹r.h
"

45 
	~"Äf_log_š‹º®.h
"

46 
	~"Äf_d–ay.h
"

47 
	~<SEGGER_RTT_CÚf.h
>

48 
	~<SEGGER_RTT.h
>

50 
boŞ
 
	gm_ho¡_´e£Á
;

52 
ušt8_t
 
	gm_¡ršg_buff
[
NRF_LOG_BACKEND_RTT_TEMP_BUFFER_SIZE
];

54 
	$Äf_log_back’d_¹t_š™
()

56 
	`SEGGER_RTT_In™
();

57 
	}
}

59 
	$£rŸl_tx
(cÚ¡ * 
p_cÚ‹xt
, cÚ¡ * 
bufãr
, 
size_t
 
Ën
)

61 ià(
Ën
)

63 
ušt32_t
 
idx
 = 0;

64 
ušt32_t
 
´oûs£d
;

65 
ušt32_t
 
w©chdog_couÁ”
 = 
NRF_LOG_BACKEND_RTT_TX_RETRY_CNT
;

68 
´oûs£d
 = 
	`SEGGER_RTT_Wr™eNoLock
(0, &
bufãr
[
idx
], 
Ën
);

69 
idx
 +ğ
´oûs£d
;

70 
Ën
 -ğ
´oûs£d
;

71 ià(
´oûs£d
 == 0)

83 ià(!
m_ho¡_´e£Á
)

89 
	`Äf_d–ay_ms
(
NRF_LOG_BACKEND_RTT_TX_RETRY_DELAY_MS
);

90 
w©chdog_couÁ”
--;

91 ià(
w©chdog_couÁ”
 == 0)

93 
m_ho¡_´e£Á
 = 
çl£
;

98 
m_ho¡_´e£Á
 = 
Œue
;

99 } 
Ën
);

101 
	}
}

102 
	$Äf_log_back’d_¹t_put
(
Äf_log_back’d_t
 cÚ¡ * 
p_back’d
,

103 
Äf_log_’Œy_t
 * 
p_msg
)

105 
	`Äf_log_back’d_£rŸl_put
(
p_back’d
, 
p_msg
, 
m_¡ršg_buff
, 
NRF_LOG_BACKEND_RTT_TEMP_BUFFER_SIZE
, 
£rŸl_tx
);

106 
	}
}

108 
	$Äf_log_back’d_¹t_æush
(
Äf_log_back’d_t
 cÚ¡ * 
p_back’d
)

111 
	}
}

113 
	$Äf_log_back’d_¹t_·nic_£t
(
Äf_log_back’d_t
 cÚ¡ * 
p_back’d
)

116 
	}
}

118 cÚ¡ 
Äf_log_back’d_­i_t
 
	gÄf_log_back’d_¹t_­i
 = {

119 .
put
 = 
Äf_log_back’d_¹t_put
,

120 .
	gæush
 = 
Äf_log_back’d_¹t_æush
,

121 .
	g·nic_£t
 = 
Äf_log_back’d_¹t_·nic_£t
,

	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\libraries\experimental_log\src\nrf_log_backend_serial.c

40 
	~"sdk_commÚ.h
"

41 #ià
NRF_MODULE_ENABLED
(
NRF_LOG
)

42 
	~"Äf_log_back’d_£rŸl.h
"

43 
	~"Äf_log_¡r_fÜm©‹r.h
"

44 
	~"Äf_log_š‹º®.h
"

46 
	$Äf_log_back’d_£rŸl_put
(
Äf_log_back’d_t
 cÚ¡ * 
p_back’d
,

47 
Äf_log_’Œy_t
 * 
p_msg
,

48 
ušt8_t
 * 
p_bufãr
,

49 
ušt32_t
 
Ëngth
,

50 
Äf_årštf_fwr™e
 
tx_func
)

52 
	`Äf_memobj_g‘
(
p_msg
);

54 
Äf_årštf_ùx_t
 
årštf_ùx
 = {

55 .
p_io_bufãr
 = (*)
p_bufãr
,

56 .
io_bufãr_size
 = 
Ëngth
,

57 .
io_bufãr_út
 = 0,

58 .
auto_æush
 = 
çl£
,

59 .
p_u£r_ùx
 = 
NULL
,

60 .
fwr™e
 = 
tx_func


63 
Äf_log_¡r_fÜm©‹r_’Œy_·¿ms_t
 
·¿ms
;

65 
Äf_log_h—d”_t
 
h—d”
;

66 
ušt32_t
 
memobj_off£t
 = 0;

67 
	`Äf_memobj_»ad
(
p_msg
, &
h—d”
, 
HEADER_SIZE
*(
ušt32_t
), 
memobj_off£t
);

68 
memobj_off£t
 = 
HEADER_SIZE
*(
ušt32_t
);

70 
·¿ms
.
time¡amp
 = 
h—d”
.timestamp;

71 
·¿ms
.
moduË_id
 = 
h—d”
.module_id;

72 
·¿ms
.
drİ³d
 = 
h—d”
.dropped;

73 
·¿ms
.
u£_cŞÜs
 = 
NRF_LOG_USES_COLORS
;

76 ià(
h—d”
.
ba£
.
g’”ic
.
ty³
 =ğ
HEADER_TYPE_STD
)

78 cÚ¡ * 
p_log_¡r
 = (cÚ¡ *)((
ušt32_t
)
h—d”
.
ba£
.
¡d
.
addr
);

79 
·¿ms
.
£v”™y
 = (
Äf_log_£v”™y_t
)
h—d”
.
ba£
.
¡d
.severity;

80 
ušt32_t
 
Çrgs
 = 
h—d”
.
ba£
.
¡d
.nargs;

81 
ušt32_t
 
¬gs
[
NRF_LOG_MAX_NUM_OF_ARGS
];

83 
	`Äf_memobj_»ad
(
p_msg
, 
¬gs
, 
Çrgs
*(
ušt32_t
), 
memobj_off£t
);

84 
memobj_off£t
 +ğ(
Çrgs
*(
ušt32_t
));

86 
	`Äf_log_¡d_’Œy_´oûss
(
p_log_¡r
,

87 
¬gs
,

88 
Çrgs
,

89 &
·¿ms
,

90 &
årštf_ùx
);

93 ià(
h—d”
.
ba£
.
g’”ic
.
ty³
 =ğ
HEADER_TYPE_HEXDUMP
)

95 
ušt32_t
 
d©a_Ën
 = 
h—d”
.
ba£
.
hexdump
.
Ën
;

96 
·¿ms
.
£v”™y
 = (
Äf_log_£v”™y_t
)
h—d”
.
ba£
.
hexdump
.severity;

97 
ušt8_t
 
d©a_buf
[8];

98 
ušt32_t
 
chunk_Ën
;

101 
chunk_Ën
 = (
d©a_buf
è> 
d©a_Ën
 ? data_len : (data_buf);

102 
	`Äf_memobj_»ad
(
p_msg
, 
d©a_buf
, 
chunk_Ën
, 
memobj_off£t
);

103 
memobj_off£t
 +ğ
chunk_Ën
;

104 
d©a_Ën
 -ğ
chunk_Ën
;

106 
	`Äf_log_hexdump_’Œy_´oûss
(
d©a_buf
,

107 
chunk_Ën
,

108 &
·¿ms
,

109 &
årštf_ùx
);

110 } 
d©a_Ën
 > 0);

112 
	`Äf_memobj_put
(
p_msg
);

114 
	}
}

	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\libraries\experimental_log\src\nrf_log_backend_uart.c

40 
	~"sdk_commÚ.h
"

41 #ià
NRF_MODULE_ENABLED
(
NRF_LOG
è&& NRF_MODULE_ENABLED(
NRF_LOG_BACKEND_UART
)

42 
	~"Äf_log_back’d_u¬t.h
"

43 
	~"Äf_log_back’d_£rŸl.h
"

44 
	~"Äf_log_š‹º®.h
"

45 
	~"Äf_drv_u¬t.h
"

46 
	~"­p_”rÜ.h
"

48 
Äf_drv_u¬t_t
 
	gm_u¬t
 = 
NRF_DRV_UART_INSTANCE
(0);

50 
ušt8_t
 
	gm_¡ršg_buff
[
NRF_LOG_BACKEND_UART_TEMP_BUFFER_SIZE
];

51 vŞ©
boŞ
 
	gm_xãr_dÚe
;

52 
boŞ
 
	gm_async_mode
;

53 
	$u¬t_evt_hªdËr
(
Äf_drv_u¬t_ev’t_t
 * 
p_ev’t
, * 
p_cÚ‹xt
)

55 
m_xãr_dÚe
 = 
Œue
;

56 
	}
}

58 
	$u¬t_š™
(
boŞ
 
async_mode
)

60 
Äf_drv_u¬t_cÚfig_t
 
cÚfig
 = 
NRF_DRV_UART_DEFAULT_CONFIG
;

61 
cÚfig
.
p£Éxd
 = 
NRF_LOG_BACKEND_UART_TX_PIN
;

62 
cÚfig
.
p£Ìxd
 = 
NRF_UART_PSEL_DISCONNECTED
;

63 
cÚfig
.
p£lùs
 = 
NRF_UART_PSEL_DISCONNECTED
;

64 
cÚfig
.
p£Ìts
 = 
NRF_UART_PSEL_DISCONNECTED
;

65 
cÚfig
.
baud¿‹
 = (
Äf_u¬t_baud¿‹_t
)
NRF_LOG_BACKEND_UART_BAUDRATE
;

66 
»t_code_t
 
”r_code
 = 
	`Äf_drv_u¬t_š™
(&
m_u¬t
, &
cÚfig
, 
async_mode
 ? 
u¬t_evt_hªdËr
 : 
NULL
);

67 
	`APP_ERROR_CHECK
(
”r_code
);

69 
m_async_mode
 = 
async_mode
;

70 
	}
}

72 
	$Äf_log_back’d_u¬t_š™
()

74 
boŞ
 
async_mode
 = 
NRF_LOG_DEFERRED
 ? 
Œue
 : 
çl£
;

75 
	`u¬t_š™
(
async_mode
);

76 
	}
}

78 
	$£rŸl_tx
(cÚ¡ * 
p_cÚ‹xt
, cÚ¡ * 
p_bufãr
, 
size_t
 
Ën
)

80 
ušt8_t
 
Ën8
 = (ušt8_t)(
Ën
 & 0x000000FF);

81 
m_xãr_dÚe
 = 
çl£
;

82 
»t_code_t
 
”r_code
 = 
	`Äf_drv_u¬t_tx
(&
m_u¬t
, (
ušt8_t
 *)
p_bufãr
, 
Ën8
);

83 
	`APP_ERROR_CHECK
(
”r_code
);

85 
m_async_mode
 && (
m_xãr_dÚe
 =ğ
çl£
))

90 
	}
}

92 
	$Äf_log_back’d_u¬t_put
(
Äf_log_back’d_t
 cÚ¡ * 
p_back’d
,

93 
Äf_log_’Œy_t
 * 
p_msg
)

95 
	`Äf_log_back’d_£rŸl_put
(
p_back’d
, 
p_msg
, 
m_¡ršg_buff
,

96 
NRF_LOG_BACKEND_UART_TEMP_BUFFER_SIZE
, 
£rŸl_tx
);

97 
	}
}

99 
	$Äf_log_back’d_u¬t_æush
(
Äf_log_back’d_t
 cÚ¡ * 
p_back’d
)

102 
	}
}

104 
	$Äf_log_back’d_u¬t_·nic_£t
(
Äf_log_back’d_t
 cÚ¡ * 
p_back’d
)

106 
	`Äf_drv_u¬t_unš™
(&
m_u¬t
);

108 
	`u¬t_š™
(
çl£
);

109 
	}
}

111 cÚ¡ 
Äf_log_back’d_­i_t
 
	gÄf_log_back’d_u¬t_­i
 = {

112 .
put
 = 
Äf_log_back’d_u¬t_put
,

113 .
	gæush
 = 
Äf_log_back’d_u¬t_æush
,

114 .
	g·nic_£t
 = 
Äf_log_back’d_u¬t_·nic_£t
,

	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\libraries\experimental_log\src\nrf_log_default_backends.c

41 
	~"sdk_commÚ.h
"

42 #ià
NRF_MODULE_ENABLED
(
NRF_LOG
)

43 
	~"Äf_log_deçuÉ_back’ds.h
"

44 
	~"Äf_log_ù¾.h
"

45 
	~"Äf_log_š‹º®.h
"

46 
	~"Äf_as£¹.h
"

48 #ià
defšed
(
NRF_LOG_BACKEND_RTT_ENABLED
) && NRF_LOG_BACKEND_RTT_ENABLED

49 
	~"Äf_log_back’d_¹t.h
"

50 
NRF_LOG_BACKEND_RTT_DEF
(
¹t_log_back’d
);

53 #ià
defšed
(
NRF_LOG_BACKEND_UART_ENABLED
) && NRF_LOG_BACKEND_UART_ENABLED

54 
	~"Äf_log_back’d_u¬t.h
"

55 
NRF_LOG_BACKEND_UART_DEF
(
u¬t_log_back’d
);

58 
	$Äf_log_deçuÉ_back’ds_š™
()

60 
št32_t
 
back’d_id
 = -1;

61 ()
back’d_id
;

62 #ià
	`defšed
(
NRF_LOG_BACKEND_RTT_ENABLED
) && NRF_LOG_BACKEND_RTT_ENABLED

63 
	`Äf_log_back’d_¹t_š™
();

64 
back’d_id
 = 
	`Äf_log_back’d_add
(&
¹t_log_back’d
.
back’d
, 
NRF_LOG_SEVERITY_DEBUG
);

65 
	`ASSERT
(
back’d_id
 >= 0);

66 
	`Äf_log_back’d_’abË
(&
¹t_log_back’d
.
back’d
);

69 #ià
	`defšed
(
NRF_LOG_BACKEND_UART_ENABLED
) && NRF_LOG_BACKEND_UART_ENABLED

70 
	`Äf_log_back’d_u¬t_š™
();

71 
back’d_id
 = 
	`Äf_log_back’d_add
(&
u¬t_log_back’d
.
back’d
, 
NRF_LOG_SEVERITY_DEBUG
);

72 
	`ASSERT
(
back’d_id
 >= 0);

73 
	`Äf_log_back’d_’abË
(&
u¬t_log_back’d
.
back’d
);

75 
	}
}

	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\libraries\experimental_log\src\nrf_log_frontend.c

40 
	~"sdk_commÚ.h
"

41 #ià
NRF_MODULE_ENABLED
(
NRF_LOG
)

42 
	~"­p_ut.h
"

43 
	~"­p_ut_¶©fÜm.h
"

44 
	~"Äf_log.h
"

45 
	~"Äf_log_š‹º®.h
"

46 
	~"Äf_log_ù¾.h
"

47 
	~"Äf_log_¡r_fÜm©‹r.h
"

48 
	~"Äf_£ùiÚ.h
"

49 
	~"Äf_memobj.h
"

50 
	~"Äf_©omic.h
"

51 
	~<¡ršg.h
>

53 
STATIC_ASSERT
((
NRF_LOG_BUFSIZE
 % 4) == 0);

54 
STATIC_ASSERT
(
IS_POWER_OF_TWO
(
NRF_LOG_BUFSIZE
));

56 
	#NRF_LOG_BUF_WORDS
 (
NRF_LOG_BUFSIZE
/4)

	)

58 #ià
NRF_LOG_BUF_WORDS
 < 32

62 
NRF_MEMOBJ_POOL_DEF
(
log_mempoŞ
, 
NRF_LOG_MSGPOOL_ELEMENT_SIZE
, 
NRF_LOG_MSGPOOL_ELEMENT_COUNT
);

64 
	#NRF_LOG_BACKENDS_FULL
 0xFF

	)

65 
	#NRF_LOG_FILTER_BITS_PER_BACKEND
 3

	)

66 
	#NRF_LOG_MAX_BACKENDS
 (32/
NRF_LOG_FILTER_BITS_PER_BACKEND
)

	)

67 
	#NRF_LOG_MAX_HEXDUMP
 (
NRF_LOG_MSGPOOL_ELEMENT_SIZE
*
NRF_LOG_MSGPOOL_ELEMENT_COUNT
/2)

	)

79 
ušt32_t
 
	mwr_idx
;

80 
ušt32_t
 
	mrd_idx
;

81 
ušt32_t
 
	mmask
;

82 
ušt32_t
 
	mbufãr
[
NRF_LOG_BUF_WORDS
];

83 
Äf_log_time¡amp_func_t
 
	mtime¡amp_func
;

84 
Äf_log_back’d_t
 * 
	mp_back’d_h—d
;

85 
Äf_©omic_æag_t
 
	mlog_skpšg
;

86 
Äf_©omic_æag_t
 
	mlog_sk³d
;

87 
Äf_©omic_u32_t
 
	mlog_drİ³d_út
;

88 
boŞ
 
	mautoæush
;

89 } 
	tlog_d©a_t
;

91 
log_d©a_t
 
	gm_log_d©a
;

94 
NRF_SECTION_DEF
(
log_dyÇmic_d©a
, 
NRF_LOG_DYNAMIC_STRUCT_NAME
);

95 
NRF_SECTION_DEF
(
log_cÚ¡_d©a
, 
Äf_log_moduË_cÚ¡_d©a_t
);

97 
NRF_LOG_MODULE_REGISTER
();

99 
	#NRF_LOG_DYNAMIC_SECTION_VARS_GET
(
i
è
	`NRF_SECTION_ITEM_GET
(
log_dyÇmic_d©a
, 
NRF_LOG_DYNAMIC_STRUCT_NAME
, (i))

	)

101 
	#NRF_LOG_CONST_SECTION_VARS_GET
(
i
è
	`NRF_SECTION_ITEM_GET
(
log_cÚ¡_d©a
, 
Äf_log_moduË_cÚ¡_d©a_t
, (i))

	)

102 
	#NRF_LOG_CONST_SECTION_VARS_COUNT
 
	`NRF_SECTION_ITEM_COUNT
(
log_cÚ¡_d©a
, 
Äf_log_moduË_cÚ¡_d©a_t
)

	)

104 
	#PUSHED_HEADER_FILL
(
P_HDR
, 
OFFSET
, 
LENGTH
) \

105 (
P_HDR
)->
ba£
.
¿w
 = 0; \

106 (
P_HDR
)->
ba£
.
pushed
.
ty³
 = 
HEADER_TYPE_PUSHED
; \

107 (
P_HDR
)->
ba£
.
pushed
.
off£t
 = 
OFFSET
; \

108 (
P_HDR
)->
ba£
.
pushed
.
Ën
 = 
LENGTH


	)

111 
»t_code_t
 
	$Äf_log_š™
(
Äf_log_time¡amp_func_t
 
time¡amp_func
, 
ušt32_t
 
time¡amp_äeq
)

113 ià(
NRF_LOG_USES_TIMESTAMP
 && (
time¡amp_func
 =ğ
NULL
))

115  
NRF_ERROR_INVALID_PARAM
;

118 
m_log_d©a
.
mask
 = 
NRF_LOG_BUF_WORDS
 - 1;

119 
m_log_d©a
.
wr_idx
 = 0;

120 
m_log_d©a
.
rd_idx
 = 0;

121 
m_log_d©a
.
log_sk³d
 = 0;

122 
m_log_d©a
.
log_skpšg
 = 0;

123 
m_log_d©a
.
autoæush
 = 
NRF_LOG_DEFERRED
 ? 
çl£
 : 
Œue
;

124 ià(
NRF_LOG_USES_TIMESTAMP
)

126 
	`Äf_log_¡r_fÜm©‹r_time¡amp_äeq_£t
(
time¡amp_äeq
);

127 
m_log_d©a
.
time¡amp_func
 =imestamp_func;

130 
»t_code_t
 
”r_code
 = 
	`Äf_memobj_poŞ_š™
(&
log_mempoŞ
);

131 ià(
”r_code
 !ğ
NRF_SUCCESS
)

133  
”r_code
;

136 
ušt32_t
 
moduËs_út
 = 
NRF_LOG_CONST_SECTION_VARS_COUNT
;

137 
ušt32_t
 
i
;

138 ià(
NRF_LOG_FILTERS_ENABLED
)

140 
ušt32_t
 
j
;

142 
i
 = 0; i < 
moduËs_út
; i++)

144 
ušt32_t
 
idx
 = 0;

146 
j
 = 0; j < 
moduËs_út
; j++)

148 ià(
i
 !ğ
j
)

150 cÚ¡ * 
p_Çme0
 = 
	`NRF_LOG_CONST_SECTION_VARS_GET
(
i
)->
p_moduË_Çme
;

151 cÚ¡ * 
p_Çme1
 = 
	`NRF_LOG_CONST_SECTION_VARS_GET
(
j
)->
p_moduË_Çme
;

152 ià(
	`¡ºcmp
(
p_Çme0
, 
p_Çme1
, 20) > 0)

154 
idx
++;

159 
Äf_log_moduË_dyÇmic_d©a_t
 * 
p_moduË_dd©a
 =

160 (
Äf_log_moduË_dyÇmic_d©a_t
 *)
	`NRF_LOG_DYNAMIC_SECTION_VARS_GET
(
i
);

161 
p_moduË_dd©a
->
f‹r
 = 0;

162 
p_moduË_dd©a
->
moduË_id
 = 
i
;

163 
p_moduË_dd©a
->
Üd”_idx
 = 
idx
;

168 
i
 = 0; i < 
moduËs_út
; i++)

170 
Äf_log_moduË_»duûd_dyÇmic_d©a_t
 * 
p_moduË_dd©a
 =

171 (
Äf_log_moduË_»duûd_dyÇmic_d©a_t
 *)
	`NRF_LOG_DYNAMIC_SECTION_VARS_GET
(
i
);

172 
p_moduË_dd©a
->
moduË_id
 = 
i
;

176  
NRF_SUCCESS
;

177 
	}
}

179 
ušt32_t
 
	$Äf_log_moduË_út_g‘
()

181  
NRF_LOG_CONST_SECTION_VARS_COUNT
;

182 
	}
}

184 
»t_code_t
 
	$moduË_idx_g‘
(
ušt32_t
 * 
p_idx
, 
boŞ
 
Üd”ed_idx
)

186 ià(
Üd”ed_idx
)

188 
ušt32_t
 
moduË_út
 = 
	`Äf_log_moduË_út_g‘
();

189 
ušt32_t
 
i
;

190 
i
 = 0; i < 
moduË_út
; i++)

192 
Äf_log_moduË_dyÇmic_d©a_t
 * 
p_moduË_d©a
 =

193 (
Äf_log_moduË_dyÇmic_d©a_t
 *)
	`NRF_LOG_DYNAMIC_SECTION_VARS_GET
(
i
);

194 ià(
p_moduË_d©a
->
Üd”_idx
 =ğ*
p_idx
)

196 *
p_idx
 = 
i
;

197  
NRF_SUCCESS
;

200  
NRF_ERROR_NOT_FOUND
;

204  
NRF_SUCCESS
;

206 
	}
}

207 cÚ¡ * 
	$Äf_log_moduË_Çme_g‘
(
ušt32_t
 
moduË_id
, 
boŞ
 
Üd”ed_idx
)

209 ià(
	`moduË_idx_g‘
(&
moduË_id
, 
Üd”ed_idx
è=ğ
NRF_SUCCESS
)

211 
Äf_log_moduË_cÚ¡_d©a_t
 * 
p_moduË_d©a
 = 
	`NRF_LOG_CONST_SECTION_VARS_GET
(
moduË_id
);

212  
p_moduË_d©a
->
p_moduË_Çme
;

216  
NULL
;

218 
	}
}

220 
ušt8_t
 
	$Äf_log_cŞÜ_id_g‘
(
ušt32_t
 
moduË_id
, 
Äf_log_£v”™y_t
 
£v”™y
)

222 
Äf_log_moduË_cÚ¡_d©a_t
 * 
p_moduË_d©a
 = 
	`NRF_LOG_CONST_SECTION_VARS_GET
(
moduË_id
);

223 
ušt8_t
 
cŞÜ_id
;

224 
£v”™y
)

226 
NRF_LOG_SEVERITY_ERROR
:

227 
cŞÜ_id
 = 
NRF_LOG_ERROR_COLOR
;

229 
NRF_LOG_SEVERITY_WARNING
:

230 
cŞÜ_id
 = 
NRF_LOG_WARNING_COLOR
;

232 
NRF_LOG_SEVERITY_INFO
:

233 
cŞÜ_id
 = 
p_moduË_d©a
->
šfo_cŞÜ_id
;

235 
NRF_LOG_SEVERITY_DEBUG
:

236 
cŞÜ_id
 = 
p_moduË_d©a
->
debug_cŞÜ_id
;

239 
cŞÜ_id
 = 0;

242  
cŞÜ_id
;

243 
	}
}

245 
ušt32_t
 
	$high”_lvl_g‘
(
ušt32_t
 
lvls
)

247 
ušt32_t
 
tİ_lvl
 = 0;

248 
ušt32_t
 
tmp_lvl
;

249 
ušt32_t
 
i
;

252 
i
 = 0; i < (32/
NRF_LOG_LEVEL_BITS
); i+=NRF_LOG_LEVEL_BITS)

254 
tmp_lvl
 = 
	`BF_GET
(
lvls
,
NRF_LOG_LEVEL_BITS
, 
i
);

255 ià(
tmp_lvl
 > 
tİ_lvl
)

257 
tİ_lvl
 = 
tmp_lvl
;

260  
tİ_lvl
;

261 
	}
}

263 
	$Äf_log_moduË_f‹r_£t
(
ušt32_t
 
back’d_id
, ušt32_ˆ
moduË_id
, 
Äf_log_£v”™y_t
 
£v”™y
)

265 ià(
NRF_LOG_FILTERS_ENABLED
)

267 
Äf_log_moduË_dyÇmic_d©a_t
 * 
p_moduË_f‹r
 =

268 (
Äf_log_moduË_dyÇmic_d©a_t
 *)
	`NRF_LOG_DYNAMIC_SECTION_VARS_GET
(
moduË_id
);

269 
p_moduË_f‹r
->
f‹r_lvls
 &ğ~(
NRF_LOG_LEVEL_MASK
 << (
NRF_LOG_LEVEL_BITS
 * 
back’d_id
));

270 
p_moduË_f‹r
->
f‹r_lvls
 |ğ(
£v”™y
 & 
NRF_LOG_LEVEL_MASK
è<< (
NRF_LOG_LEVEL_BITS
 * 
back’d_id
);

271 
p_moduË_f‹r
->
f‹r
 = 
	`high”_lvl_g‘
Õ_moduË_f‹r->
f‹r_lvls
);

273 
	}
}

275 
Äf_log_£v”™y_t
 
	$Äf_log_moduË_š™_f‹r_g‘
(
ušt32_t
 
moduË_id
)

277 
Äf_log_moduË_cÚ¡_d©a_t
 * 
p_moduË_d©a
 =

278 
	`NRF_LOG_CONST_SECTION_VARS_GET
(
moduË_id
);

279  
NRF_LOG_FILTERS_ENABLED
 ? 
p_moduË_d©a
->
š™Ÿl_lvl
 :…_moduË_d©a->
comped_lvl
;

280 
	}
}

282 
Äf_log_£v”™y_t
 
	$Äf_log_moduË_f‹r_g‘
(
ušt32_t
 
back’d_id
,

283 
ušt32_t
 
moduË_id
,

284 
boŞ
 
Üd”ed_idx
,

285 
boŞ
 
dyÇmic
)

287 
Äf_log_£v”™y_t
 
£v”™y
 = 
NRF_LOG_SEVERITY_NONE
;

288 ià(
NRF_LOG_FILTERS_ENABLED
 && 
dyÇmic
)

290 ià(
	`moduË_idx_g‘
(&
moduË_id
, 
Üd”ed_idx
è=ğ
NRF_SUCCESS
)

292 
Äf_log_moduË_dyÇmic_d©a_t
 * 
p_moduË_f‹r
 =

293 (
Äf_log_moduË_dyÇmic_d©a_t
 *)
	`NRF_LOG_DYNAMIC_SECTION_VARS_GET
(
moduË_id
);

294 
£v”™y
 = (
Äf_log_£v”™y_t
)((
p_moduË_f‹r
->
f‹r_lvls
 >> (
NRF_LOG_LEVEL_BITS
 * 
back’d_id
)) &

295 
NRF_LOG_LEVEL_MASK
);

298 ià(!
dyÇmic
)

300 ià(
	`moduË_idx_g‘
(&
moduË_id
, 
Üd”ed_idx
è=ğ
NRF_SUCCESS
)

302 
Äf_log_moduË_cÚ¡_d©a_t
 * 
p_moduË_d©a
 =

303 
	`NRF_LOG_CONST_SECTION_VARS_GET
(
moduË_id
);

304 
£v”™y
 = (
Äf_log_£v”™y_t
)
p_moduË_d©a
->
comped_lvl
;

307  
£v”™y
;

308 
	}
}

312 
boŞ
 
	$šv®id_·ck‘s_pushed_¡r_om™
(
Äf_log_h—d”_t
 cÚ¡ * 
p_h—d”
, 
ušt32_t
 * 
p_rd_idx
)

314 
boŞ
 
»t
 = 
çl£
;

315 ià((
p_h—d”
->
ba£
.
g’”ic
.
ty³
 =ğ
HEADER_TYPE_PUSHED
è|| (p_h—d”->ba£.g’”ic.
š_´og»ss
 == 1))

317 ià(
p_h—d”
->
ba£
.
g’”ic
.
š_´og»ss
 == 1)

319 
p_h—d”
->
ba£
.
g’”ic
.
ty³
)

321 
HEADER_TYPE_STD
:

322 *
p_rd_idx
 +ğ(
HEADER_SIZE
 + 
p_h—d”
->
ba£
.
¡d
.
Çrgs
);

324 
HEADER_TYPE_HEXDUMP
:

325 *
p_rd_idx
 +ğ(
HEADER_SIZE
 + 
p_h—d”
->
ba£
.
hexdump
.
Ën
);

328 
	`ASSERT
(0);

334 *
p_rd_idx
 +=

335 (
PUSHED_HEADER_SIZE
 + 
p_h—d”
->
ba£
.
pushed
.
Ën
 +…_h—d”->ba£.pushed.
off£t
);

337 
»t
 = 
Œue
;

339  
»t
;

340 
	}
}

346 
ušt32_t
 
	$log_sk
()

348 
ušt16_t
 
drİ³d
 = 0;

350 ()
	`Äf_©omic_æag_£t
(&
m_log_d©a
.
log_sk³d
);

351 ()
	`Äf_©omic_æag_£t
(&
m_log_d©a
.
log_skpšg
);

353 
ušt32_t
 
rd_idx
 = 
m_log_d©a
.rd_idx;

354 
ušt32_t
 
mask
 = 
m_log_d©a
.mask;

355 
Äf_log_h—d”_t
 * 
p_h—d”
 = (Äf_log_h—d”_ˆ*)&
m_log_d©a
.
bufãr
[
rd_idx
 & 
mask
];

356 
Äf_log_h—d”_t
 
h—d”
;

360 ià(
	`šv®id_·ck‘s_pushed_¡r_om™
(
p_h—d”
, &
rd_idx
))

363 
p_h—d”
 = (
Äf_log_h—d”_t
 *)&
m_log_d©a
.
bufãr
[
rd_idx
 & 
mask
];

369 } 
Œue
);

371 
ušt32_t
 
i
;

372 
i
 = 0; i < 
HEADER_SIZE
; i++)

374 ((
ušt32_t
*)&
h—d”
)[
i
] = 
m_log_d©a
.
bufãr
[
rd_idx
++ & 
mask
];

377 
h—d”
.
ba£
.
g’”ic
.
ty³
)

379 
HEADER_TYPE_HEXDUMP
:

380 
drİ³d
 = 
h—d”
.dropped;

381 
rd_idx
 +ğ
	`CEIL_DIV
(
h—d”
.
ba£
.
hexdump
.
Ën
, (
ušt32_t
));

383 
HEADER_TYPE_STD
:

384 
drİ³d
 = 
h—d”
.dropped;

385 
rd_idx
 +ğ
h—d”
.
ba£
.
¡d
.
Çrgs
;

388 
	`ASSERT
(
çl£
);

392 
ušt32_t
 
log_skpšg_tmp
 = 
	`Äf_©omic_æag_ş—r_ãtch
(&
m_log_d©a
.
log_skpšg
);

394 ià(
log_skpšg_tmp
)

396 
m_log_d©a
.
rd_idx
 =„d_idx;

399  (
ušt32_t
)
drİ³d
;

400 
	}
}

407 
šlše
 
ušt32_t
 
	$drİ³d_§t16_g‘
()

409 
ušt32_t
 
drİ³d
 = 
	`Äf_©omic_u32_ãtch_¡Üe
(&
m_log_d©a
.
log_drİ³d_út
, 0);

410  
	`__USAT
(
drİ³d
, 16);

411 
	}
}

414 
šlše
 
	$¡d_h—d”_£t
(
ušt32_t
 
£v”™y_mid
,

415 cÚ¡ * cÚ¡ 
p_¡r
,

416 
ušt32_t
 
Çrgs
,

417 
ušt32_t
 
wr_idx
,

418 
ušt32_t
 
mask
)

423 
ušt32_t
 
moduË_id
 = 
£v”™y_mid
 >> 
NRF_LOG_MODULE_ID_POS
;

424 
ušt32_t
 
drİ³d
 = 
	`drİ³d_§t16_g‘
();

425 
	`ASSERT
(
moduË_id
 < 
	`Äf_log_moduË_út_g‘
());

426 
m_log_d©a
.
bufãr
[(
wr_idx
 + 1è& 
mask
] = 
moduË_id
 | (
drİ³d
 << 16);

428 ià(
NRF_LOG_USES_TIMESTAMP
)

430 
m_log_d©a
.
bufãr
[(
wr_idx
 + 2è& 
mask
] = m_log_d©a.
	`time¡amp_func
();

433 
Äf_log_h—d”_t
 * 
p_h—d”
 = (Äf_log_h—d”_ˆ*)&
m_log_d©a
.
bufãr
[
wr_idx
 & 
mask
];

434 
p_h—d”
->
ba£
.
¡d
.
£v”™y
 = 
£v”™y_mid
 & 
NRF_LOG_LEVEL_MASK
;

435 
p_h—d”
->
ba£
.
¡d
.
Çrgs
 =‚args;

436 
p_h—d”
->
ba£
.
¡d
.
addr
 = ((
ušt32_t
)(
p_¡r
è& 
STD_ADDR_MASK
);

437 
p_h—d”
->
ba£
.
¡d
.
ty³
 = 
HEADER_TYPE_STD
;

438 
p_h—d”
->
ba£
.
¡d
.
š_´og»ss
 = 0;

439 
	}
}

452 
šlše
 
boŞ
 
	$buf_´—Îoc
(
ušt32_t
 
cÚ‹Á_Ën
, ušt32_ˆ* 
p_wr_idx
, 
boŞ
 
¡d
)

454 
ušt32_t
 
»q_Ën
 = 
cÚ‹Á_Ën
 + 
HEADER_SIZE
;

455 
boŞ
 
»t
 = 
Œue
;

456 
	`CRITICAL_REGION_ENTER
();

457 *
p_wr_idx
 = 
m_log_d©a
.
wr_idx
;

458 
ušt32_t
 
avaabË_wÜds
 = (
m_log_d©a
.
mask
 + 1è- (m_log_d©a.
wr_idx
 - m_log_d©a.
rd_idx
);

459 
»q_Ën
 > 
avaabË_wÜds
)

461 
	`UNUSED_RETURN_VALUE
(
	`Äf_©omic_u32_add
(&
m_log_d©a
.
log_drİ³d_út
, 1));

462 ià(
NRF_LOG_ALLOW_OVERFLOW
)

464 
ušt32_t
 
drİ³d_š_sk
 = 
	`log_sk
();

465 
	`UNUSED_RETURN_VALUE
(
	`Äf_©omic_u32_add
(&
m_log_d©a
.
log_drİ³d_út
, 
drİ³d_š_sk
));

466 
avaabË_wÜds
 = (
m_log_d©a
.
mask
 + 1è- (m_log_d©a.
wr_idx
 - m_log_d©a.
rd_idx
);

470 
»t
 = 
çl£
;

475 ià(
»t
)

477 
Äf_log_maš_h—d”_t
 
šv®id_h—d”
;

478 
šv®id_h—d”
.
¿w
 = 0;

480 ià(
¡d
)

482 
šv®id_h—d”
.
¡d
.
ty³
 = 
HEADER_TYPE_STD
;

483 
šv®id_h—d”
.
¡d
.
š_´og»ss
 = 1;

484 
šv®id_h—d”
.
¡d
.
Çrgs
 = 
cÚ‹Á_Ën
;

488 
šv®id_h—d”
.
hexdump
.
ty³
 = 
HEADER_TYPE_HEXDUMP
;

489 
šv®id_h—d”
.
hexdump
.
š_´og»ss
 = 1;

490 
šv®id_h—d”
.
hexdump
.
Ën
 = 
cÚ‹Á_Ën
;

493 
Äf_log_maš_h—d”_t
 * 
p_h—d”
 = (Äf_log_maš_h—d”_ˆ*)&
m_log_d©a
.
bufãr
[m_log_d©a.
wr_idx
 & m_log_d©a.
mask
];

495 
p_h—d”
->
¿w
 = 
šv®id_h—d”
.raw;

497 
m_log_d©a
.
wr_idx
 +ğ
»q_Ën
;

500 
	`CRITICAL_REGION_EXIT
();

501  
»t
;

502 
	}
}

519 
šlše
 
ušt32_t
 * 
	$cÚt_buf_´—Îoc
(
ušt32_t
 
Ën32
,

520 
ušt32_t
 * 
p_off£t
,

521 
ušt32_t
 * 
p_wr_idx
)

524 
	`STATIC_ASSERT
(
PUSHED_HEADER_SIZE
 == 1);

525 
ušt32_t
 * 
p_buf
 = 
NULL
;

527 
Ën32
 +ğ
PUSHED_HEADER_SIZE
;

529 
	`CRITICAL_REGION_ENTER
();

530 *
p_wr_idx
 = 
m_log_d©a
.
wr_idx
;

531 
ušt32_t
 
avaabË_wÜds
 = (
m_log_d©a
.
mask
 + 1) -

532 (
m_log_d©a
.
wr_idx
 - m_log_d©a.
rd_idx
);

533 
ušt32_t
 
_wÜds
 = (
m_log_d©a
.
mask
 + 1è- (m_log_d©a.
wr_idx
 & m_log_data.mask);

536 
ušt32_t
 
cu¼_pos_avaabË
 = (
avaabË_wÜds
 <ğ
_wÜds
) ?‡vailable_words :ail_words;

537 
ušt32_t
 
¡¬t_pos_avaabË
 = (
avaabË_wÜds
 <ğ
_wÜds
) ? 0 : (available_words -ail_words);

539 ià((
Ën32
 <ğ
cu¼_pos_avaabË
) ||

540 ((
Ën32
 - 
PUSHED_HEADER_SIZE
è<ğ
¡¬t_pos_avaabË
))

544 *
p_off£t
 = (
Ën32
 <ğ
cu¼_pos_avaabË
è? 0 : (
_wÜds
 - 
PUSHED_HEADER_SIZE
);

545 
ušt32_t
 
¡r_¡¬t_idx
 =

546 (
m_log_d©a
.
wr_idx
 + 
PUSHED_HEADER_SIZE
 + *
p_off£t
è& m_log_d©a.
mask
;

547 
p_buf
 = &
m_log_d©a
.
bufãr
[
¡r_¡¬t_idx
];

549 
m_log_d©a
.
wr_idx
 +ğ(
Ën32
 + *
p_off£t
);

552 
	`CRITICAL_REGION_EXIT
();

554  
p_buf
;

555 
	}
}

558 
ušt32_t
 
	$Äf_log_push
(* cÚ¡ 
p_¡r
)

560 ià((
m_log_d©a
.
autoæush
è|| (
p_¡r
 =ğ
NULL
))

562  (
ušt32_t
)
p_¡r
;

565 
ušt32_t
 
mask
 = 
m_log_d©a
.mask;

566 
ušt32_t
 
¦’
 = 
	`¡¾’
(
p_¡r
) + 1;

567 
ušt32_t
 
buæ’
 = 
	`CEIL_DIV
(
¦’
, (uint32_t));

568 
ušt32_t
 
off£t
 = 0;

569 
ušt32_t
 
wr_idx
;

570 * 
p_d¡_¡r
 = (*)
	`cÚt_buf_´—Îoc
(
buæ’
, &
off£t
, &
wr_idx
);

571 ià(
p_d¡_¡r
)

573 
Äf_log_h—d”_t
 * 
p_h—d”
 = (Äf_log_h—d”_ˆ*)&
m_log_d©a
.
bufãr
[
wr_idx
 & 
mask
];

574 
	`PUSHED_HEADER_FILL
(
p_h—d”
, 
off£t
, 
buæ’
);

575 
	`memıy
(
p_d¡_¡r
, 
p_¡r
, 
¦’
);

577  (
ušt32_t
)
p_d¡_¡r
;

578 
	}
}

580 
šlše
 
	$¡d_n
(
ušt32_t
 
£v”™y_mid
, cÚ¡ * cÚ¡ 
p_¡r
, ušt32_ˆcÚ¡ * 
¬gs
, ušt32_ˆ
Çrgs
)

582 
ušt32_t
 
mask
 = 
m_log_d©a
.mask;

583 
ušt32_t
 
wr_idx
;

585 ià(
	`buf_´—Îoc
(
Çrgs
, &
wr_idx
, 
Œue
))

589 
ušt32_t
 
d©a_idx
 = 
wr_idx
 + 
HEADER_SIZE
;

590 
ušt32_t
 
i
;

591 
i
 = 0; i < 
Çrgs
; i++)

593 
m_log_d©a
.
bufãr
[
d©a_idx
++ & 
mask
] =
¬gs
[
i
];

595 
	`¡d_h—d”_£t
(
£v”™y_mid
, 
p_¡r
, 
Çrgs
, 
wr_idx
, 
mask
);

597 ià(
m_log_d©a
.
autoæush
)

599 
	`NRF_LOG_FLUSH
();

602 
	}
}

604 
	$Äf_log_äÚ‹nd_¡d_0
(
ušt32_t
 
£v”™y_mid
, cÚ¡ * cÚ¡ 
p_¡r
)

606 
	`¡d_n
(
£v”™y_mid
, 
p_¡r
, 
NULL
, 0);

607 
	}
}

610 
	$Äf_log_äÚ‹nd_¡d_1
(
ušt32_t
 
£v”™y_mid
,

611 cÚ¡ * cÚ¡ 
p_¡r
,

612 
ušt32_t
 
v®0
)

614 
ušt32_t
 
¬gs
[] = {
v®0
};

615 
	`¡d_n
(
£v”™y_mid
, 
p_¡r
, 
¬gs
, 
	`ARRAY_SIZE
(args));

616 
	}
}

619 
	$Äf_log_äÚ‹nd_¡d_2
(
ušt32_t
 
£v”™y_mid
,

620 cÚ¡ * cÚ¡ 
p_¡r
,

621 
ušt32_t
 
v®0
,

622 
ušt32_t
 
v®1
)

624 
ušt32_t
 
¬gs
[] = {
v®0
, 
v®1
};

625 
	`¡d_n
(
£v”™y_mid
, 
p_¡r
, 
¬gs
, 
	`ARRAY_SIZE
(args));

626 
	}
}

629 
	$Äf_log_äÚ‹nd_¡d_3
(
ušt32_t
 
£v”™y_mid
,

630 cÚ¡ * cÚ¡ 
p_¡r
,

631 
ušt32_t
 
v®0
,

632 
ušt32_t
 
v®1
,

633 
ušt32_t
 
v®2
)

635 
ušt32_t
 
¬gs
[] = {
v®0
, 
v®1
, 
v®2
};

636 
	`¡d_n
(
£v”™y_mid
, 
p_¡r
, 
¬gs
, 
	`ARRAY_SIZE
(args));

637 
	}
}

640 
	$Äf_log_äÚ‹nd_¡d_4
(
ušt32_t
 
£v”™y_mid
,

641 cÚ¡ * cÚ¡ 
p_¡r
,

642 
ušt32_t
 
v®0
,

643 
ušt32_t
 
v®1
,

644 
ušt32_t
 
v®2
,

645 
ušt32_t
 
v®3
)

647 
ušt32_t
 
¬gs
[] = {
v®0
, 
v®1
, 
v®2
, 
v®3
};

648 
	`¡d_n
(
£v”™y_mid
, 
p_¡r
, 
¬gs
, 
	`ARRAY_SIZE
(args));

649 
	}
}

652 
	$Äf_log_äÚ‹nd_¡d_5
(
ušt32_t
 
£v”™y_mid
,

653 cÚ¡ * cÚ¡ 
p_¡r
,

654 
ušt32_t
 
v®0
,

655 
ušt32_t
 
v®1
,

656 
ušt32_t
 
v®2
,

657 
ušt32_t
 
v®3
,

658 
ušt32_t
 
v®4
)

660 
ušt32_t
 
¬gs
[] = {
v®0
, 
v®1
, 
v®2
, 
v®3
, 
v®4
};

661 
	`¡d_n
(
£v”™y_mid
, 
p_¡r
, 
¬gs
, 
	`ARRAY_SIZE
(args));

662 
	}
}

665 
	$Äf_log_äÚ‹nd_¡d_6
(
ušt32_t
 
£v”™y_mid
,

666 cÚ¡ * cÚ¡ 
p_¡r
,

667 
ušt32_t
 
v®0
,

668 
ušt32_t
 
v®1
,

669 
ušt32_t
 
v®2
,

670 
ušt32_t
 
v®3
,

671 
ušt32_t
 
v®4
,

672 
ušt32_t
 
v®5
)

674 
ušt32_t
 
¬gs
[] = {
v®0
, 
v®1
, 
v®2
, 
v®3
, 
v®4
, 
v®5
};

675 
	`¡d_n
(
£v”™y_mid
, 
p_¡r
, 
¬gs
, 
	`ARRAY_SIZE
(args));

676 
	}
}

679 
	$Äf_log_äÚ‹nd_hexdump
(
ušt32_t
 
£v”™y_mid
,

680 cÚ¡ * cÚ¡ 
p_d©a
,

681 
ušt16_t
 
Ëngth
)

683 
ušt32_t
 
mask
 = 
m_log_d©a
.mask;

685 
ušt32_t
 
wr_idx
;

686 ià(
	`buf_´—Îoc
(
	`CEIL_DIV
(
Ëngth
, (
ušt32_t
)), &
wr_idx
, 
çl£
))

688 
ušt32_t
 
h—d”_wr_idx
 = 
wr_idx
;

689 
wr_idx
 +ğ
HEADER_SIZE
;

691 
ušt32_t
 
¥aû0
 = (ušt32_tè* (
m_log_d©a
.
mask
 + 1 - (
wr_idx
 & mask));

692 ià(
Ëngth
 <ğ
¥aû0
)

694 
	`memıy
(&
m_log_d©a
.
bufãr
[
wr_idx
 & 
mask
], 
p_d©a
, 
Ëngth
);

698 
	`memıy
(&
m_log_d©a
.
bufãr
[
wr_idx
 & 
mask
], 
p_d©a
, 
¥aû0
);

699 
	`memıy
(&
m_log_d©a
.
bufãr
[0], &((
ušt8_t
 *)
p_d©a
)[
¥aû0
], 
Ëngth
 - space0);

703 ià(
NRF_LOG_USES_TIMESTAMP
)

705 
m_log_d©a
.
bufãr
[(
h—d”_wr_idx
 + 2è& 
mask
] = m_log_d©a.
	`time¡amp_func
();

708 
ušt32_t
 
moduË_id
 = 
£v”™y_mid
 >> 
NRF_LOG_MODULE_ID_POS
;

709 
ušt32_t
 
drİ³d
 = 
	`drİ³d_§t16_g‘
();

710 
m_log_d©a
.
bufãr
[(
h—d”_wr_idx
 + 1è& 
mask
] = 
moduË_id
 | (
drİ³d
 << 16);

712 
Äf_log_h—d”_t
 * 
p_h—d”
 = (Äf_log_h—d”_ˆ*)&
m_log_d©a
.
bufãr
[
h—d”_wr_idx
 & 
mask
];

713 
p_h—d”
->
ba£
.
hexdump
.
£v”™y
 = 
£v”™y_mid
 & 
NRF_LOG_LEVEL_MASK
;

714 
p_h—d”
->
ba£
.
hexdump
.
off£t
 = 0;

715 
p_h—d”
->
ba£
.
hexdump
.
Ën
 = 
Ëngth
;

716 
p_h—d”
->
ba£
.
hexdump
.
ty³
 = 
HEADER_TYPE_HEXDUMP
;

717 
p_h—d”
->
ba£
.
hexdump
.
š_´og»ss
 = 0;

723 ià(
m_log_d©a
.
autoæush
)

725 
	`NRF_LOG_FLUSH
();

727 
	}
}

730 
boŞ
 
	$bufãr_is_em±y
()

732  (
m_log_d©a
.
rd_idx
 =ğm_log_d©a.
wr_idx
);

733 
	}
}

735 
boŞ
 
	$Äf_log_äÚ‹nd_dequeue
()

738 ià(
	`bufãr_is_em±y
())

740  
çl£
;

742 
m_log_d©a
.
log_sk³d
 = 0;

744 
	`__DSB
();

745 
ušt32_t
 
rd_idx
 = 
m_log_d©a
.rd_idx;

746 
ušt32_t
 
mask
 = 
m_log_d©a
.mask;

747 
Äf_log_h—d”_t
 * 
p_h—d”
 = (Äf_log_h—d”_ˆ*)&
m_log_d©a
.
bufãr
[
rd_idx
 & 
mask
];

748 
Äf_log_h—d”_t
 
h—d”
;

749 
Äf_memobj_t
 * 
p_msg_buf
 = 
NULL
;

750 
ušt32_t
 
memobj_off£t
 = 0;

751 
ušt32_t
 
£v”™y
 = 0;

755 ià(
	`šv®id_·ck‘s_pushed_¡r_om™
(
p_h—d”
, &
rd_idx
))

758 ià(
rd_idx
 >ğ
m_log_d©a
.
wr_idx
)

760 
m_log_d©a
.
rd_idx
 = m_log_d©a.
wr_idx
;

761  
çl£
;

764 
p_h—d”
 = (
Äf_log_h—d”_t
 *)&
m_log_d©a
.
bufãr
[
rd_idx
 & 
mask
];

770 } 
Œue
);

772 
ušt32_t
 
i
;

773 
i
 = 0; i < 
HEADER_SIZE
; i++)

775 ((
ušt32_t
*)&
h—d”
)[
i
] = 
m_log_d©a
.
bufãr
[
rd_idx
++ & 
mask
];

778 ià(
h—d”
.
ba£
.
g’”ic
.
ty³
 =ğ
HEADER_TYPE_HEXDUMP
)

780 
ušt32_t
 
Üig_d©a_Ën
 = 
h—d”
.
ba£
.
hexdump
.
Ën
;

781 
ušt32_t
 
d©a_Ën
 = 
	`MIN
(
h—d”
.
ba£
.
hexdump
.
Ën
, 
NRF_LOG_MAX_HEXDUMP
);

782 
h—d”
.
ba£
.
hexdump
.
Ën
 = 
d©a_Ën
;

783 
ušt32_t
 
msg_buf_size8
 = (ušt32_t)*
HEADER_SIZE
 + 
d©a_Ën
;

784 
£v”™y
 = 
h—d”
.
ba£
.
hexdump
.severity;

785 
p_msg_buf
 = 
	`Äf_memobj_®loc
(&
log_mempoŞ
, 
msg_buf_size8
);

787 ià(
p_msg_buf
)

789 
	`Äf_memobj_g‘
(
p_msg_buf
);

790 
	`Äf_memobj_wr™e
(
p_msg_buf
, &
h—d”
, 
HEADER_SIZE
*(
ušt32_t
), 
memobj_off£t
);

791 
memobj_off£t
 +ğ
HEADER_SIZE
*(
ušt32_t
);

793 
ušt32_t
 
¥aû0
 = (ušt32_tè* (
mask
 + 1 - (
rd_idx
 & mask));

794 ià(
d©a_Ën
 > 
¥aû0
)

796 
ušt8_t
 * 
±r0
 = 
¥aû0
 ?

797 (
ušt8_t
 *)&
m_log_d©a
.
bufãr
[
rd_idx
 & 
mask
] :

798 (
ušt8_t
 *)&
m_log_d©a
.
bufãr
[0];

799 
ušt8_t
 
Ën0
 = 
¥aû0
 ? s·û0 : 
d©a_Ën
;

800 
ušt8_t
 * 
±r1
 = 
¥aû0
 ?

801 (
ušt8_t
 *)&
m_log_d©a
.
bufãr
[0] : 
NULL
;

802 
ušt8_t
 
Ën1
 = 
¥aû0
 ? 
d©a_Ën
 - space0 : 0;

804 
	`Äf_memobj_wr™e
(
p_msg_buf
, 
±r0
, 
Ën0
, 
memobj_off£t
);

805 
memobj_off£t
 +ğ
Ën0
;

806 ià(
±r1
)

808 
	`Äf_memobj_wr™e
(
p_msg_buf
, 
±r1
, 
Ën1
, 
memobj_off£t
);

813 
ušt8_t
 * 
p_d©a
 = (ušt8_ˆ*)&
m_log_d©a
.
bufãr
[
rd_idx
 & 
mask
];

814 
	`Äf_memobj_wr™e
(
p_msg_buf
, 
p_d©a
, 
d©a_Ën
, 
memobj_off£t
);

816 
rd_idx
 +ğ
	`CEIL_DIV
(
Üig_d©a_Ën
, 4);

819 ià(
h—d”
.
ba£
.
g’”ic
.
ty³
 =ğ
HEADER_TYPE_STD
)

821 
h—d”
.
ba£
.
¡d
.
Çrgs
 = 
	`MIN
(h—d”.ba£.¡d.Çrgs, 
NRF_LOG_MAX_NUM_OF_ARGS
);

822 
ušt32_t
 
msg_buf_size32
 = 
HEADER_SIZE
 + 
h—d”
.
ba£
.
¡d
.
Çrgs
;

823 
£v”™y
 = 
h—d”
.
ba£
.
¡d
.severity;

825 
p_msg_buf
 = 
	`Äf_memobj_®loc
(&
log_mempoŞ
, 
msg_buf_size32
*(
ušt32_t
));

827 ià(
p_msg_buf
)

829 
	`Äf_memobj_g‘
(
p_msg_buf
);

830 
	`Äf_memobj_wr™e
(
p_msg_buf
, &
h—d”
, 
HEADER_SIZE
*(
ušt32_t
), 
memobj_off£t
);

831 
memobj_off£t
 +ğ
HEADER_SIZE
*(
ušt32_t
);

833 
i
 = 0; i < 
h—d”
.
ba£
.
¡d
.
Çrgs
; i++)

835 
	`Äf_memobj_wr™e
(
p_msg_buf
, &
m_log_d©a
.
bufãr
[
rd_idx
++ & 
mask
],

836 (
ušt32_t
), 
memobj_off£t
);

837 
memobj_off£t
 +ğ(
ušt32_t
);

846 ià(
p_msg_buf
)

848 
Äf_log_back’d_t
 * 
p_back’d
 = 
m_log_d©a
.
p_back’d_h—d
;

849 ià(
NRF_LOG_ALLOW_OVERFLOW
 && 
m_log_d©a
.
log_sk³d
)

853 
	`Äf_memobj_put
(
p_msg_buf
);

857 
p_back’d
)

859 
boŞ
 
’Œy_acû±ed
 = 
çl£
;

860 ià(
	`Äf_log_back’d_is_’abËd
(
p_back’d
è=ğ
Œue
)

862 ià(
NRF_LOG_FILTERS_ENABLED
)

864 
ušt8_t
 
back’d_id
 = 
	`Äf_log_back’d_id_g‘
(
p_back’d
);

865 
Äf_log_moduË_dyÇmic_d©a_t
 * 
p_moduË_f‹r
 =

866 (
Äf_log_moduË_dyÇmic_d©a_t
 *)
	`NRF_LOG_DYNAMIC_SECTION_VARS_GET
(
h—d”
.
moduË_id
);

867 
ušt32_t
 
f‹r_lvls
 = 
p_moduË_f‹r
->filter_lvls;

868 
ušt32_t
 
back’d_lvl
 = (
f‹r_lvls
 >> (
back’d_id
*
NRF_LOG_LEVEL_BITS
))

869 & 
NRF_LOG_LEVEL_MASK
;

871 
£v”™y
 = (£v”™y =ğ
NRF_LOG_SEVERITY_INFO_RAW
è? 
NRF_LOG_SEVERITY_INFO
 : severity;

872 ià(
back’d_lvl
 >ğ
£v”™y
)

874 
’Œy_acû±ed
 = 
Œue
;

879 ()
£v”™y
;

880 
’Œy_acû±ed
 = 
Œue
;

883 ià(
’Œy_acû±ed
)

885 
	`Äf_log_back’d_put
(
p_back’d
, 
p_msg_buf
);

887 
p_back’d
 =…_back’d->
p_Ãxt
;

890 
	`Äf_memobj_put
(
p_msg_buf
);

892 ià(
NRF_LOG_ALLOW_OVERFLOW
)

898 
	`CRITICAL_REGION_ENTER
();

899 ià(
m_log_d©a
.
log_sk³d
 == 0)

901 
m_log_d©a
.
rd_idx
 =„d_idx;

903 
	`CRITICAL_REGION_EXIT
();

907 
m_log_d©a
.
rd_idx
 =„d_idx;

914 
Äf_log_back’d_t
 * 
p_back’d
 = 
m_log_d©a
.
p_back’d_h—d
;

916 
p_back’d
)

918 
	`Äf_log_back’d_æush
(
p_back’d
);

919 
p_back’d
 =…_back’d->
p_Ãxt
;

921 
	`NRF_LOG_WARNING
("Backends flushed");

924  
	`bufãr_is_em±y
(è? 
çl£
 : 
Œue
;

925 
	}
}

927 
št32_t
 
	$back’d_id_assign
()

929 
št32_t
 
ÿndid©e_id
;

930 
Äf_log_back’d_t
 * 
p_back’d
;

931 
boŞ
 
id_avaabË
;

932 
ÿndid©e_id
 = 0; cªdid©e_id < 
NRF_LOG_MAX_BACKENDS
; candidate_id++)

934 
p_back’d
 = 
m_log_d©a
.
p_back’d_h—d
;

935 
id_avaabË
 = 
Œue
;

936 
p_back’d
)

938 ià(
	`Äf_log_back’d_id_g‘
(
p_back’d
è=ğ
ÿndid©e_id
)

940 
id_avaabË
 = 
çl£
;

943 
p_back’d
 =…_back’d->
p_Ãxt
;

945 ià(
id_avaabË
)

947  
ÿndid©e_id
;

951 
	}
}

953 
št32_t
 
	$Äf_log_back’d_add
(
Äf_log_back’d_t
 * 
p_back’d
, 
Äf_log_£v”™y_t
 
£v”™y
)

955 
št32_t
 
id
 = 
	`back’d_id_assign
();

956 ià(
id
 == -1)

958  
id
;

961 
	`Äf_log_back’d_id_£t
(
p_back’d
, 
id
);

963 ià(
m_log_d©a
.
p_back’d_h—d
 =ğ
NULL
)

965 
m_log_d©a
.
p_back’d_h—d
 = 
p_back’d
;

966 
p_back’d
->
p_Ãxt
 = 
NULL
;

970 
p_back’d
->
p_Ãxt
 = 
m_log_d©a
.
p_back’d_h—d
->p_next;

971 
m_log_d©a
.
p_back’d_h—d
->
p_Ãxt
 = 
p_back’d
;

974 ià(
NRF_LOG_FILTERS_ENABLED
)

976 
ušt32_t
 
i
;

977 
i
 = 0; i < 
	`Äf_log_moduË_út_g‘
(); i++)

979 
Äf_log_£v”™y_t
 
budš_lvl
 = 
	`Äf_log_moduË_š™_f‹r_g‘
(
i
);

980 
Äf_log_£v”™y_t
 
aùu®_£v”™y
 = 
	`MIN
(
budš_lvl
, 
£v”™y
);

981 
	`Äf_log_moduË_f‹r_£t
(
	`Äf_log_back’d_id_g‘
(
p_back’d
), 
i
, 
aùu®_£v”™y
);

985  
id
;

986 
	}
}

988 
	$Äf_log_back’d_»move
(
Äf_log_back’d_t
 * 
p_back’d
)

990 
Äf_log_back’d_t
 * 
p_cu¼
 = 
m_log_d©a
.
p_back’d_h—d
;

991 
Äf_log_back’d_t
 * 
p_´ev
 = 
NULL
;

992 
p_cu¼
 !ğ
p_back’d
)

994 
p_´ev
 = 
p_cu¼
;

995 
p_cu¼
 =…_cu¼->
p_Ãxt
;

998 ià(
p_´ev
)

1000 
p_´ev
->
p_Ãxt
 = 
p_back’d
->p_next;

1004 
m_log_d©a
.
p_back’d_h—d
 = 
NULL
;

1006 
	}
}

1008 
	$Äf_log_·nic
()

1010 
Äf_log_back’d_t
 * 
p_back’d
 = 
m_log_d©a
.
p_back’d_h—d
;

1011 
m_log_d©a
.
autoæush
 = 
Œue
;

1012 
p_back’d
)

1014 
	`Äf_log_back’d_’abË
(
p_back’d
);

1015 
	`Äf_log_back’d_·nic_£t
(
p_back’d
);

1016 
p_back’d
 =…_back’d->
p_Ãxt
;

1018 
	}
}

1020 #ià
NRF_LOG_CLI_CMDS


1021 
	~"Äf_şi.h
"

1023 cÚ¡ * 
	gm_£v”™y_lvls
[] = {

1031 cÚ¡ * 
	gm_£v”™y_lvls_sÜ‹d
[] = {

1039 
	$log_¡©us
(
Äf_şi_t
 cÚ¡ * 
p_şi
, 
size_t
 
¬gc
, **
¬gv
)

1041 
ušt32_t
 
moduËs_út
 = 
	`Äf_log_moduË_út_g‘
();

1042 
ušt32_t
 
back’d_id
 = 
p_şi
->
p_log_back’d
->
back’d
.
id
;

1043 
ušt32_t
 
i
;

1045 ià(!
	`Äf_log_back’d_is_’abËd
(&
p_şi
->
p_log_back’d
->
back’d
))

1047 
	`Äf_şi_årštf
(
p_şi
, 
NRF_CLI_ERROR
, "Logs‡re halted!\r\n");

1049 
	`Äf_şi_årštf
(
p_şi
, 
NRF_CLI_NORMAL
, "%-40s | current | built-in \r\n", "module_name");

1050 
	`Äf_şi_årštf
(
p_şi
, 
NRF_CLI_NORMAL
, "----------------------------------------------------------\r\n");

1051 
i
 = 0; i < 
moduËs_út
; i++)

1053 
Äf_log_£v”™y_t
 
moduË_dyÇmic_lvl
 = 
	`Äf_log_moduË_f‹r_g‘
(
back’d_id
, 
i
, 
Œue
,rue);

1054 
Äf_log_£v”™y_t
 
moduË_comped_lvl
 = 
	`Äf_log_moduË_f‹r_g‘
(
back’d_id
, 
i
, 
Œue
, 
çl£
);

1055 
Äf_log_£v”™y_t
 
aùu®_comped_lvl
 = 
	`MIN
(
moduË_comped_lvl
, (Äf_log_£v”™y_t)
NRF_LOG_DEFAULT_LEVEL
);

1056 
	`Äf_şi_årštf
(
p_şi
, 
NRF_CLI_NORMAL
, "%-40s | %-7s | %s%s\r\n",

1057 
	`Äf_log_moduË_Çme_g‘
(
i
, 
Œue
),

1058 
m_£v”™y_lvls
[
moduË_dyÇmic_lvl
],

1059 
m_£v”™y_lvls
[
aùu®_comped_lvl
],

1060 
aùu®_comped_lvl
 < 
moduË_comped_lvl
 ? "*" : "");

1062 
	}
}

1064 
boŞ
 
	$moduË_id_g‘
(cÚ¡ * 
p_Çme
, 
ušt32_t
 * 
p_id
)

1066 
ušt32_t
 
moduËs_út
 = 
	`Äf_log_moduË_út_g‘
();

1067 cÚ¡ * 
p_tmp_Çme
;

1068 
ušt32_t
 
j
;

1069 
j
 = 0; j < 
moduËs_út
; j++)

1071 
p_tmp_Çme
 = 
	`Äf_log_moduË_Çme_g‘
(
j
, 
çl£
);

1072 ià(
	`¡ºcmp
(
p_tmp_Çme
, 
p_Çme
, 32) == 0)

1074 *
p_id
 = 
j
;

1078  (
j
 !ğ
moduËs_út
);

1079 
	}
}

1081 
boŞ
 
	$moduË_id_f‹r_£t
(
ušt32_t
 
back’d_id
,

1082 
ušt32_t
 
moduË_id
,

1083 
Äf_log_£v”™y_t
 
lvl
)

1085 
Äf_log_£v”™y_t
 
budš_lvl
 = 
	`Äf_log_moduË_f‹r_g‘
(
back’d_id
, 
moduË_id
, 
çl£
, false);

1086 ià(
lvl
 > 
budš_lvl
)

1088  
çl£
;

1092 
	`Äf_log_moduË_f‹r_£t
(
back’d_id
, 
moduË_id
, 
lvl
);

1093  
Œue
;

1095 
	}
}

1097 
	$log_ù¾
(
Äf_şi_t
 cÚ¡ * 
p_şi
, 
size_t
 
¬gc
, **
¬gv
)

1099 
ušt32_t
 
back’d_id
 = 
p_şi
->
p_log_back’d
->
back’d
.
id
;

1100 
Äf_log_£v”™y_t
 
lvl
;

1101 
ušt32_t
 
fœ¡_m_Çme_idx
;

1102 
ušt32_t
 
i
;

1103 
boŞ
 
®l_moduËs
 = 
çl£
;

1105 ià(
¬gc
 > 0)

1107 ià(
	`¡ºcmp
(
¬gv
[0], "enable", 7) == 0)

1109 ià(
¬gc
 == 1)

1111 
	`Äf_şi_årštf
(
p_şi
, 
NRF_CLI_ERROR
, "Bad…arameter count.\r\n");

1115 ià(
¬gc
 == 2)

1117 
®l_moduËs
 = 
Œue
;

1120 
i
 = 0; i < 
	`ARRAY_SIZE
(
m_£v”™y_lvls
); i++)

1122 ià(
	`¡ºcmp
(
¬gv
[1], 
m_£v”™y_lvls
[
i
], 10) == 0)

1128 ià(
i
 =ğ
	`ARRAY_SIZE
(
m_£v”™y_lvls
))

1130 
	`Äf_şi_årštf
(
p_şi
, 
NRF_CLI_ERROR
, "UnknowÀ£v”™y†ev–: %s\r\n", 
¬gv
[1]);

1134 
lvl
 = (
Äf_log_£v”™y_t
)
i
;

1135 
fœ¡_m_Çme_idx
 = 2;

1138 ià(
	`¡ºcmp
(
¬gv
[0], "disable", 8) == 0)

1140 ià(
¬gc
 == 1)

1142 
®l_moduËs
 = 
Œue
;

1144 
lvl
 = 
NRF_LOG_SEVERITY_NONE
;

1145 
fœ¡_m_Çme_idx
 = 1;

1149 
	`Äf_şi_årštf
(
p_şi
, 
NRF_CLI_ERROR
, "UnknowÀİtiÚ: %s\r\n", 
¬gv
[0]);

1153 ià(
®l_moduËs
)

1155 
i
 = 0; i < 
	`Äf_log_moduË_út_g‘
(); i++)

1157 ià(
	`moduË_id_f‹r_£t
(
back’d_id
, 
i
, 
lvl
è=ğ
çl£
)

1159 
	`Äf_şi_årštf
(
p_şi
, 
NRF_CLI_ERROR
, "Lev– uÇvaabË fÜ moduË: %s\r\n", 
	`Äf_log_moduË_Çme_g‘
(
i
, 
çl£
));

1165 
i
 = 
fœ¡_m_Çme_idx
; i < 
¬gc
; i++)

1167 
ušt32_t
 
moduË_id
 = 0;

1168 ià(
	`moduË_id_g‘
(
¬gv
[
i
], &
moduË_id
è=ğ
çl£
)

1170 
	`Äf_şi_årštf
(
p_şi
, 
NRF_CLI_ERROR
, "UnknowÀmoduË:%s\r\n", 
¬gv
[
i
]);

1173 ià(
	`moduË_id_f‹r_£t
(
back’d_id
, 
moduË_id
, 
lvl
è=ğ
çl£
)

1175 
	`Äf_şi_årštf
(
p_şi
, 
NRF_CLI_ERROR
, "Lev– uÇvaabË fÜ moduË: %s\r\n", 
	`Äf_log_moduË_Çme_g‘
(
moduË_id
, 
çl£
));

1180 
	}
}

1181 
moduË_Çme_g‘
(
size_t
 
idx
, 
Äf_şi_¡©ic_’Œy_t
 * 
p_¡©ic
);

1183 
NRF_CLI_CREATE_DYNAMIC_CMD
(
m_moduË_Çme
, 
moduË_Çme_g‘
);

1185 
	$moduË_Çme_g‘
(
size_t
 
idx
, 
Äf_şi_¡©ic_’Œy_t
 * 
p_¡©ic
)

1187 
p_¡©ic
->
hªdËr
 = 
NULL
;

1188 
p_¡©ic
->
p_h–p
 = 
NULL
;

1189 
p_¡©ic
->
p_subcmd
 = &
m_moduË_Çme
;

1190 
p_¡©ic
->
p_syÁax
 = 
	`Äf_log_moduË_Çme_g‘
(
idx
, 
Œue
);

1191 
	}
}

1193 
	$£v”™y_lvl_g‘
(
size_t
 
idx
, 
Äf_şi_¡©ic_’Œy_t
 * 
p_¡©ic
)

1195 
p_¡©ic
->
hªdËr
 = 
NULL
;

1196 
p_¡©ic
->
p_h–p
 = 
NULL
;

1197 
p_¡©ic
->
p_subcmd
 = &
m_moduË_Çme
;

1198 
p_¡©ic
->
p_syÁax
 = (
idx
 < 
	`ARRAY_SIZE
(
m_£v”™y_lvls_sÜ‹d
)) ?

1199 
m_£v”™y_lvls_sÜ‹d
[
idx
] : 
NULL
;

1200 
	}
}

1202 
NRF_CLI_CREATE_DYNAMIC_CMD
(
m_£v”™y_lvl
, 
£v”™y_lvl_g‘
);

1204 
	$log_h®t
(
Äf_şi_t
 cÚ¡ * 
p_şi
, 
size_t
 
¬gc
, **
¬gv
)

1206 
	`Äf_log_back’d_di§bË
(&
p_şi
->
p_log_back’d
->
back’d
);

1207 
	}
}

1209 
	$log_go
(
Äf_şi_t
 cÚ¡ * 
p_şi
, 
size_t
 
¬gc
, **
¬gv
)

1211 
	`Äf_log_back’d_’abË
(&
p_şi
->
p_log_back’d
->
back’d
);

1212 
	}
}

1214 
	$NRF_CLI_CREATE_STATIC_SUBCMD_SET
(
m_sub_log_¡©
)

1216 
	`NRF_CLI_CMD
(
di§bË
, &
m_moduË_Çme
,

1219 
log_ù¾
),

1220 
	`NRF_CLI_CMD
(
’abË
, &
m_£v”™y_lvl
,

1223 
log_ù¾
),

1224 
	`NRF_CLI_CMD
(
go
, 
NULL
, "Resumloggšg", 
log_go
),

1225 
	`NRF_CLI_CMD
(
h®t
, 
NULL
, "H®ˆloggšg", 
log_h®t
),

1226 
	`NRF_CLI_CMD
(
¡©us
, 
NULL
, "Logg” stus", 
log_¡©us
),

1227 
NRF_CLI_SUBCMD_SET_END


1228 
	}
};

1230 
	$log_cmd
(
Äf_şi_t
 cÚ¡ * 
p_şi
, 
size_t
 
¬gc
, **
¬gv
)

1232 ià((
¬gc
 =ğ1è|| 
	`Äf_şi_h–p_»que¡ed
(
p_şi
))

1234 
	`Äf_şi_h–p_´št
(
p_şi
, 
NULL
, 0);

1238 
	`Äf_şi_årštf
(
p_şi
, 
NRF_CLI_ERROR
, "%s:%s%s\r\n", 
¬gv
[0], " unknown…arameter: ",‡rgv[1]);

1239 
	}
}

1241 
NRF_CLI_CMD_REGISTER
(
log
, &
m_sub_log_¡©
, "Commªd fÜ cÚŒŞlšg†ogg”", 
log_cmd
);

	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\libraries\experimental_log\src\nrf_log_str_formatter.c

40 
	~"sdk_commÚ.h
"

41 #ià
NRF_MODULE_ENABLED
(
NRF_LOG
)

42 
	~"Äf_log_¡r_fÜm©‹r.h
"

43 
	~"Äf_log_š‹º®.h
"

44 
	~"Äf_log_ù¾.h
"

45 
	~"Äf_årštf.h
"

46 
	~<ùy³.h
>

48 
	#NRF_LOG_COLOR_CODE_DEFAULT
 "\x1B[0m"

	)

49 
	#NRF_LOG_COLOR_CODE_BLACK
 "\x1B[1;30m"

	)

50 
	#NRF_LOG_COLOR_CODE_RED
 "\x1B[1;31m"

	)

51 
	#NRF_LOG_COLOR_CODE_GREEN
 "\x1B[1;32m"

	)

52 
	#NRF_LOG_COLOR_CODE_YELLOW
 "\x1B[1;33m"

	)

53 
	#NRF_LOG_COLOR_CODE_BLUE
 "\x1B[1;34m"

	)

54 
	#NRF_LOG_COLOR_CODE_MAGENTA
 "\x1B[1;35m"

	)

55 
	#NRF_LOG_COLOR_CODE_CYAN
 "\x1B[1;36m"

	)

56 
	#NRF_LOG_COLOR_CODE_WHITE
 "\x1B[1;37m"

	)

58 cÚ¡ * 
	g£v”™y_Çmes
[] = {

59 
NULL
,

66 cÚ¡ * 
	gm_cŞÜs
[] = {

67 
NRF_LOG_COLOR_CODE_DEFAULT
,

68 
NRF_LOG_COLOR_CODE_BLACK
,

69 
NRF_LOG_COLOR_CODE_RED
,

70 
NRF_LOG_COLOR_CODE_GREEN
,

71 
NRF_LOG_COLOR_CODE_YELLOW
,

72 
NRF_LOG_COLOR_CODE_BLUE
,

73 
NRF_LOG_COLOR_CODE_MAGENTA
,

74 
NRF_LOG_COLOR_CODE_CYAN
,

75 
NRF_LOG_COLOR_CODE_WHITE
,

78 
ušt32_t
 
	gm_äeq
;

79 
ušt32_t
 
	gm_time¡amp_div
;

81 
	$time¡amp_´št
(
Äf_årštf_ùx_t
 * 
p_ùx
, 
ušt32_t
 
time¡amp
)

83 ià(
NRF_LOG_USES_TIMESTAMP
)

85 ià(
NRF_LOG_STR_FORMATTER_TIMESTAMP_FORMAT_ENABLED
)

87 
time¡amp
 /ğ
m_time¡amp_div
;

88 
ušt32_t
 
£cÚds
 = 
time¡amp
/
m_äeq
;

89 
ušt32_t
 
hours
 = 
£cÚds
/3600;

90 
£cÚds
 -ğ
hours
 * 3600;

91 
ušt32_t
 
mšs
 = 
£cÚds
/60;

92 
£cÚds
 -ğ
mšs
 * 60;

94 
ušt32_t
 
»mšd”
 = 
time¡amp
 % 
m_äeq
;

95 
ušt32_t
 
ms
 = (
»mšd”
 * 1000)/
m_äeq
;

96 
ušt32_t
 
us
 = (1000*(1000*
»mšd”
 - (
ms
 * 
m_äeq
)))/m_freq;

98 
	`Äf_årštf
(
p_ùx
, "[%02d:%02d:%02d.%03d,%03d] ", 
hours
, 
mšs
, 
£cÚds
, 
ms
, 
us
);

102 
	`Äf_årštf
(
p_ùx
, "[%08lu] ", 
time¡amp
);

105 
	}
}

106 
	$´efix_´oûss
(
Äf_log_¡r_fÜm©‹r_’Œy_·¿ms_t
 * 
p_·¿ms
,

107 
Äf_årštf_ùx_t
 * 
p_ùx
)

109 ià(
p_·¿ms
->
drİ³d
)

111 
	`Äf_årštf
(
p_ùx
,

113 
NRF_LOG_COLOR_CODE_RED
,

114 
p_·¿ms
->
drİ³d
,

115 
NRF_LOG_COLOR_CODE_DEFAULT
);

118 ià(!(
p_·¿ms
->
£v”™y
 =ğ
NRF_LOG_SEVERITY_INFO_RAW
))

120 ià(
p_·¿ms
->
u£_cŞÜs
)

122 
	`Äf_årštf
(
p_ùx
, "%s",

123 
m_cŞÜs
[
	`Äf_log_cŞÜ_id_g‘
Ğ
p_·¿ms
->
moduË_id
,…_·¿ms->
£v”™y
)]);

125 
	`time¡amp_´št
(
p_ùx
, 
p_·¿ms
->
time¡amp
);

127 
	`Äf_årštf
(
p_ùx
, "<%s> %s: ",

128 
£v”™y_Çmes
[
p_·¿ms
->
£v”™y
], 
	`Äf_log_moduË_Çme_g‘
Õ_·¿ms->
moduË_id
, 
çl£
));

130 
	}
}

132 
	$po¡fix_´oûss
(
Äf_log_¡r_fÜm©‹r_’Œy_·¿ms_t
 * 
p_·¿ms
,

133 
Äf_årštf_ùx_t
 * 
p_ùx
,

134 
boŞ
 
Ãwlše
)

136 ià(!(
p_·¿ms
->
£v”™y
 =ğ
NRF_LOG_SEVERITY_INFO_RAW
))

138 ià(
p_·¿ms
->
u£_cŞÜs
)

140 
	`Äf_årštf
(
p_ùx
, "%s", 
m_cŞÜs
[0]);

142 
	`Äf_årštf
(
p_ùx
, "\r\n");

144 ià(
Ãwlše
)

146 
	`Äf_årštf
(
p_ùx
, "\r\n");

148 
	`Äf_årštf_bufãr_æush
(
p_ùx
);

149 
	}
}

151 
	$Äf_log_¡d_’Œy_´oûss
(cÚ¡ * 
p_¡r
,

152 
ušt32_t
 cÚ¡ * 
p_¬gs
,

153 
ušt32_t
 
Çrgs
,

154 
Äf_log_¡r_fÜm©‹r_’Œy_·¿ms_t
 * 
p_·¿ms
,

155 
Äf_årštf_ùx_t
 * 
p_ùx
)

157 
boŞ
 
auto_æush
 = 
p_ùx
->auto_flush;

158 
p_ùx
->
auto_æush
 = 
çl£
;

160 
	`´efix_´oûss
(
p_·¿ms
, 
p_ùx
);

162 
Çrgs
)

165 
	`Äf_årštf
(
p_ùx
, 
p_¡r
);

168 
	`Äf_årštf
(
p_ùx
, 
p_¡r
, 
p_¬gs
[0]);

171 
	`Äf_årštf
(
p_ùx
, 
p_¡r
, 
p_¬gs
[0],…_args[1]);

174 
	`Äf_årštf
(
p_ùx
, 
p_¡r
, 
p_¬gs
[0],…_args[1],…_args[2]);

177 
	`Äf_årštf
(
p_ùx
, 
p_¡r
, 
p_¬gs
[0],…_args[1],…_args[2],…_args[3]);

180 
	`Äf_årštf
(
p_ùx
, 
p_¡r
, 
p_¬gs
[0],…_args[1],…_args[2],…_args[3],…_args[4]);

183 
	`Äf_årštf
(
p_ùx
, 
p_¡r
, 
p_¬gs
[0],…_args[1],…_args[2],…_args[3],…_args[4],…_args[5]);

190 
	`po¡fix_´oûss
(
p_·¿ms
, 
p_ùx
, 
çl£
);

191 
p_ùx
->
auto_æush
 =‡uto_flush;

192 
	}
}

194 
	#HEXDUMP_BYTES_IN_LINE
 8

	)

196 
	$Äf_log_hexdump_’Œy_´oûss
(
ušt8_t
 * 
p_d©a
,

197 
ušt32_t
 
d©a_Ën
,

198 
Äf_log_¡r_fÜm©‹r_’Œy_·¿ms_t
 * 
p_·¿ms
,

199 
Äf_årštf_ùx_t
 * 
p_ùx
)

201 ià(
d©a_Ën
 > 
HEXDUMP_BYTES_IN_LINE
)

205 
boŞ
 
auto_æush
 = 
p_ùx
->auto_flush;

206 
p_ùx
->
auto_æush
 = 
çl£
;

208 
	`´efix_´oûss
(
p_·¿ms
, 
p_ùx
);

210 
ušt32_t
 
i
;

212 
i
 = 0; i < 
HEXDUMP_BYTES_IN_LINE
; i++)

214 ià(
i
 < 
d©a_Ën
)

216 
	`Äf_årštf
(
p_ùx
, " %02x", 
p_d©a
[
i
]);

220 
	`Äf_årštf
(
p_ùx
, " ");

223 
	`Äf_årštf
(
p_ùx
, "|");

225 
i
 = 0; i < 
HEXDUMP_BYTES_IN_LINE
; i++)

227 ià(
i
 < 
d©a_Ën
)

229 
c
 = ()
p_d©a
[
i
];

230 
	`Äf_årštf
(
p_ùx
, "%c", 
	`i¥ršt
(()
c
) ? c :'.');

234 
	`Äf_årštf
(
p_ùx
, " ");

238 
	`po¡fix_´oûss
(
p_·¿ms
, 
p_ùx
, 
Œue
);

240 
p_ùx
->
auto_æush
 =‡uto_flush;

241 
	}
}

243 
	$Äf_log_¡r_fÜm©‹r_time¡amp_äeq_£t
(
ušt32_t
 
äeq
)

245 
m_time¡amp_div
 = 1;

249 
äeq
 > 1000000)

251 
äeq
 /= 2;

252 
m_time¡amp_div
 *= 2;

254 
m_äeq
 = 
äeq
;

255 
	}
}

	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\libraries\experimental_memobj\nrf_memobj.c

41 
	~"Äf_memobj.h
"

42 
	~"Äf_©omic.h
"

43 
	~"Äf_as£¹.h
"

45 
memobj_–em_s
 
	tmemobj_–em_t
;

49 
memobj_–em_t
 * 
	mp_Ãxt
;

50 } 
	tmemobj_h—d”_t
;

54 
ušt8_t
 
	mu£r_út
;

55 
ušt8_t
 
	mchunk_út
;

56 
ušt16_t
 
	mchunk_size
;

57 } 
	tmemobj_h—d_h—d”_f›lds_t
;

63 
Äf_©omic_u32_t
 
	m©omic_u£r_út
;

64 
memobj_h—d_h—d”_f›lds_t
 
	mf›lds
;

65 } 
	md©a
;

66 } 
	tmemobj_h—d_h—d”_t
;

70 
memobj_h—d”_t
 
	mh—d”
;

71 
memobj_h—d_h—d”_t
 
	mh—d_h—d”
;

72 
ušt8_t
 
	md©a
[1];

73 } 
	tmemobj_h—d_t
;

75 
STATIC_ASSERT
((
memobj_h—d”_t
è=ğ
NRF_MEMOBJ_STD_HEADER_SIZE
);

77 
	smemobj_–em_s


79 
memobj_h—d”_t
 
	mh—d”
;

80 
ušt8_t
 
	md©a
[1];

83 
»t_code_t
 
	$Äf_memobj_poŞ_š™
(
Äf_memobj_poŞ_t
 cÚ¡ * 
p_poŞ
)

85  
	`Äf_b®loc_š™
((
Äf_b®loc_t
 cÚ¡ *)
p_poŞ
);

86 
	}
}

88 
Äf_memobj_t
 * 
	$Äf_memobj_®loc
(
Äf_memobj_poŞ_t
 cÚ¡ * 
p_poŞ
,

89 
size_t
 
size
)

91 
ušt32_t
 
bsize
 = (ušt32_t)
	`NRF_BALLOC_ELEMENT_SIZE
((
Äf_b®loc_t
 cÚ¡ *)
p_poŞ
è- (
memobj_h—d”_t
);

92 
ušt8_t
 
num_of_chunks
 = (ušt8_t)
	`CEIL_DIV
(
size
 + (
memobj_h—d_h—d”_t
), 
bsize
);

94 
memobj_h—d_t
 * 
p_h—d
 = 
	`Äf_b®loc_®loc
((
Äf_b®loc_t
 cÚ¡ *)
p_poŞ
);

95 ià(
p_h—d
 =ğ
NULL
)

97  
NULL
;

99 
p_h—d
->
h—d_h—d”
.
d©a
.
f›lds
.
u£r_út
 = 0;

100 
p_h—d
->
h—d_h—d”
.
d©a
.
f›lds
.
chunk_út
 = 1;

101 
p_h—d
->
h—d_h—d”
.
d©a
.
f›lds
.
chunk_size
 = 
bsize
;

103 
memobj_h—d”_t
 * 
p_´ev
 = (memobj_h—d”_ˆ*)
p_h—d
;

104 
memobj_h—d”_t
 * 
p_cu¼
;

105 
ušt32_t
 
i
;

106 
ušt32_t
 
chunk_Ëss1
 = (ušt32_t)
num_of_chunks
 - 1;

108 
p_´ev
->
p_Ãxt
 = (
memobj_–em_t
 *)
p_poŞ
;

109 
i
 = 0; i < 
chunk_Ëss1
; i++)

111 
p_cu¼
 = (
memobj_h—d”_t
 *)
	`Äf_b®loc_®loc
((
Äf_b®loc_t
 cÚ¡ *)
p_poŞ
);

112 ià(
p_cu¼
)

114 (
p_h—d
->
h—d_h—d”
.
d©a
.
f›lds
.
chunk_út
)++;

115 
p_´ev
->
p_Ãxt
 = (
memobj_–em_t
 *)
p_cu¼
;

116 
p_cu¼
->
p_Ãxt
 = (
memobj_–em_t
 *)
p_poŞ
;

117 
p_´ev
 = 
p_cu¼
;

122 
	`Äf_memobj_ä“
((
Äf_memobj_t
 *)
p_h—d
);

123  
NULL
;

126  (
Äf_memobj_t
 *)
p_h—d
;

127 
	}
}

129 
	$Äf_memobj_ä“
(
Äf_memobj_t
 * 
p_obj
)

131 
memobj_h—d_t
 * 
p_h—d
 = (memobj_h—d_ˆ*)
p_obj
;

132 
ušt8_t
 
chunk_út
 = 
p_h—d
->
h—d_h—d”
.
d©a
.
f›lds
.chunk_cnt;

133 
ušt32_t
 
i
;

134 
memobj_h—d”_t
 * 
p_cu¼
 = (memobj_h—d”_ˆ*)
p_obj
;

135 
memobj_h—d”_t
 * 
p_Ãxt
;

136 
ušt32_t
 
chunk_Ëss1
 = (ušt32_t)
chunk_út
 - 1;

138 
i
 = 0; i < 
chunk_Ëss1
; i++)

140 
p_cu¼
 = (
memobj_h—d”_t
 *í_cu¼->
p_Ãxt
;

142 
Äf_b®loc_t
 cÚ¡ * 
p_poŞ2
 = (Äf_b®loc_ˆcÚ¡ *)
p_cu¼
->
p_Ãxt
;

144 
p_cu¼
 = (
memobj_h—d”_t
 *)
p_obj
;

145 
i
 = 0; i < 
chunk_út
; i++)

147 
p_Ãxt
 = (
memobj_h—d”_t
 *)
p_cu¼
->p_next;

148 
	`Äf_b®loc_ä“
(
p_poŞ2
, 
p_cu¼
);

149 
p_cu¼
 = 
p_Ãxt
;

151 
	}
}

153 
	$Äf_memobj_g‘
(
Äf_memobj_t
 cÚ¡ * 
p_obj
)

155 
memobj_h—d_t
 * 
p_h—d
 = (memobj_h—d_ˆ*)
p_obj
;

156 ()
	`Äf_©omic_u32_add
(&
p_h—d
->
h—d_h—d”
.
d©a
.
©omic_u£r_út
, 1);

157 
	}
}

159 
	$Äf_memobj_put
(
Äf_memobj_t
 * 
p_obj
)

161 
memobj_h—d_t
 * 
p_h—d
 = (memobj_h—d_ˆ*)
p_obj
;

162 
ušt32_t
 
u£r_út
 = 
	`Äf_©omic_u32_sub
(&
p_h—d
->
h—d_h—d”
.
d©a
.
©omic_u£r_út
, 1);

163 
memobj_h—d_h—d”_f›lds_t
 * 
p_f›lds
 = (memobj_h—d_h—d”_f›lds_ˆ*)&
u£r_út
;

164 ià(
p_f›lds
->
u£r_út
 == 0)

166 
	`Äf_memobj_ä“
(
p_obj
);

168 
	}
}

170 
	$memobj_İ
(
Äf_memobj_t
 * 
p_obj
,

171 * 
p_d©a
,

172 
ušt32_t
 
Ën
,

173 
ušt32_t
 
off£t
,

174 
boŞ
 
»ad
)

177 
memobj_h—d_t
 * 
p_h—d
 = (memobj_h—d_ˆ*)
p_obj
;

178 
ušt32_t
 
¥aû_š_chunk
 = 
p_h—d
->
h—d_h—d”
.
d©a
.
f›lds
.
chunk_size
;

179 
memobj_–em_t
 * 
p_cu¼_chunk
 = (memobj_–em_ˆ*)
p_obj
;

180 
ušt32_t
 
chunk_idx
 = (
off£t
 + (
memobj_h—d_h—d”_f›lds_t
))/
¥aû_š_chunk
;

181 
ušt32_t
 
chunk_off£t
 = (
off£t
 + (
memobj_h—d_h—d”_f›lds_t
)è% 
¥aû_š_chunk
;

183 
ušt8_t
 
chunks_ex³ùed
 = 
	`CEIL_DIV
((
off£t
 + (
memobj_h—d_h—d”_f›lds_t
è+ 
Ën
),

184 
¥aû_š_chunk
);

185 
	`UNUSED_VARIABLE
(
chunks_ex³ùed
);

186 
	`ASSERT
(
p_h—d
->
h—d_h—d”
.
d©a
.
f›lds
.
chunk_út
 >ğ
chunks_ex³ùed
);

188 
chunk_idx
 > 0)

190 
p_cu¼_chunk
 =…_cu¼_chunk->
h—d”
.
p_Ãxt
;

191 
chunk_idx
--;

194 
ušt32_t
 
¤c_off£t
 = 0;

195 
ušt32_t
 
cu¼_ıy_size
 = 
¥aû_š_chunk
-
chunk_off£t
;

196 
cu¼_ıy_size
 = cu¼_ıy_siz> 
Ën
 ?†en : curr_cpy_size;

198 
Ën
)

200 ià(
»ad
)

202 
	`memıy
(&((
ušt8_t
 *)
p_d©a
)[
¤c_off£t
], &
p_cu¼_chunk
->
d©a
[
chunk_off£t
], 
cu¼_ıy_size
);

206 
	`memıy
(&
p_cu¼_chunk
->
d©a
[
chunk_off£t
], &((
ušt8_t
 *)
p_d©a
)[
¤c_off£t
], 
cu¼_ıy_size
);

208 
chunk_off£t
 = 0;

209 
p_cu¼_chunk
 =…_cu¼_chunk->
h—d”
.
p_Ãxt
;

210 
Ën
 -ğ
cu¼_ıy_size
;

211 
¤c_off£t
 +ğ
cu¼_ıy_size
;

212 
cu¼_ıy_size
 = (
¥aû_š_chunk
 > 
Ën
) ?†en : space_in_chunk;

214 
	}
}

216 
	$Äf_memobj_wr™e
(
Äf_memobj_t
 * 
p_obj
,

217 * 
p_d©a
,

218 
ušt32_t
 
Ën
,

219 
ušt32_t
 
off£t
)

222 
	`memobj_İ
(
p_obj
, 
p_d©a
, 
Ën
, 
off£t
, 
çl£
);

223 
	}
}

225 
	$Äf_memobj_»ad
(
Äf_memobj_t
 * 
p_obj
,

226 * 
p_d©a
,

227 
ušt32_t
 
Ën
,

228 
ušt32_t
 
off£t
)

230 
	`memobj_İ
(
p_obj
, 
p_d©a
, 
Ën
, 
off£t
, 
Œue
);

231 
	}
}

	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\libraries\experimental_section_vars\nrf_section_iter.c

41 
	~"sdk_commÚ.h
"

43 #ià
NRF_MODULE_ENABLED
(
NRF_SECTION_ITER
)

45 
	~"Äf_£ùiÚ_™”.h
"

48 #ià!
defšed
(
__GNUC__
)

49 
	$Äf_£ùiÚ_™”_™em_£t
(
Äf_£ùiÚ_™”_t
 * 
p_™”
)

51 
	`ASSERT
(
p_™”
 !ğ
NULL
);

52 
	`ASSERT
(
p_™”
->
p_£t
 !ğ
NULL
);

53 
	`ASSERT
(
p_™”
->
p_£ùiÚ
 !ğ
NULL
);

55 
Œue
)

57 ià(
p_™”
->
p_£ùiÚ
 =ğp_™”->
p_£t
->
p_Ï¡
)

60 
p_™”
->
p_™em
 = 
NULL
;

64 ià(
p_™”
->
p_£ùiÚ
->
p_¡¬t
 !ğp_™”->p_£ùiÚ->
p_’d
)

67 
p_™”
->
p_™em
 =…_™”->
p_£ùiÚ
->
p_¡¬t
;

72 
p_™”
->
p_£ùiÚ
++;

74 
	}
}

78 
	$Äf_£ùiÚ_™”_š™
(
Äf_£ùiÚ_™”_t
 * 
p_™”
, 
Äf_£ùiÚ_£t_t
 cÚ¡ * 
p_£t
)

80 
	`ASSERT
(
p_™”
 !ğ
NULL
);

81 
	`ASSERT
(
p_£t
 !ğ
NULL
);

83 
p_™”
->
p_£t
 =…_set;

85 #ià
	`defšed
(
__GNUC__
)

86 
p_™”
->
p_™em
 =…_™”->
p_£t
->
£ùiÚ
.
p_¡¬t
;

87 ià(
p_™”
->
p_™em
 =ğp_™”->
p_£t
->
£ùiÚ
.
p_’d
)

89 
p_™”
->
p_™em
 = 
NULL
;

92 
p_™”
->
p_£ùiÚ
 = 
p_£t
->
p_fœ¡
;

93 
	`Äf_£ùiÚ_™”_™em_£t
(
p_™”
);

95 
	}
}

97 
	$Äf_£ùiÚ_™”_Ãxt
(
Äf_£ùiÚ_™”_t
 * 
p_™”
)

99 
	`ASSERT
(
p_™”
 !ğ
NULL
);

100 
	`ASSERT
(
p_™”
->
p_£t
 !ğ
NULL
);

102 ià(
p_™”
->
p_™em
 =ğ
NULL
)

107 
p_™”
->
p_™em
 = (*)((
size_t
)Õ_™”->p_™emè+…_™”->
p_£t
->
™em_size
);

109 #ià
	`defšed
(
__GNUC__
)

110 ià(
p_™”
->
p_™em
 =ğp_™”->
p_£t
->
£ùiÚ
.
p_’d
)

112 
p_™”
->
p_™em
 = 
NULL
;

115 
	`ASSERT
(
p_™”
->
p_£ùiÚ
 !ğ
NULL
);

117 ià(
p_™”
->
p_™em
 =ğp_™”->
p_£ùiÚ
->
p_’d
)

119 
p_™”
->
p_£ùiÚ
++;

120 
	`Äf_£ùiÚ_™”_™em_£t
(
p_™”
);

123 
	}
}

	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\libraries\fds\fds.c

40 
	~"sdk_commÚ.h
"

41 #ià
NRF_MODULE_ENABLED
(
FDS
)

42 
	~"fds.h
"

43 
	~"fds_š‹º®_defs.h
"

45 
	~<¡dšt.h
>

46 
	~<¡ršg.h
>

47 
	~<¡dboŞ.h
>

48 
	~"Äf_”rÜ.h
"

49 
	~"Äf_©omic.h
"

50 
	~"Äf_©fifo.h
"

52 
	~"Äf_f¡Üage.h
"

53 #ià(
FDS_BACKEND
 =ğ
NRF_FSTORAGE_SD
)

54 
	~"Äf_f¡Üage_sd.h
"

55 #–ià(
FDS_BACKEND
 =ğ
NRF_FSTORAGE_NVMC
)

56 
	~"Äf_f¡Üage_nvmc.h
"

58 #”rÜ 
Inv®id
 
FDS
 
back’d
.

61 #ià(
FDS_CRC_CHECK_ON_READ
)

62 
	~"üc16.h
"

66 
fs_ev’t_hªdËr
(
Äf_f¡Üage_evt_t
 * 
evt
);

68 
NRF_FSTORAGE_DEF
(
Äf_f¡Üage_t
 
m_fs
) =

71 .
evt_hªdËr
 = 
fs_ev’t_hªdËr
,

77 
boŞ
 vŞ©
	mš™Ÿlized
;

78 
Äf_©omic_æag_t
 
	mš™Ÿlizšg
;

79 } 
	gm_æags
;

83 
Äf_©omic_u32_t
 
	gm_queued_İ_út
;

86 
Äf_©omic_u32_t
 
	gm_u£rs
;

87 
fds_cb_t
 
	gm_cb_bË
[
FDS_MAX_USERS
];

90 
Äf_©omic_u32_t
 
	gm_Ï‹¡_»c_id
;

93 
NRF_ATFIFO_DEF
(
m_queue
, 
fds_İ_t
, 
FDS_OP_QUEUE_SIZE
);

96 
fds_·ge_t
 
	gm_·ges
[
FDS_DATA_PAGES
];

97 
fds_sw­_·ge_t
 
	gm_sw­_·ge
;

100 
fds_gc_d©a_t
 
	gm_gc
;

103 
	$ev’t_£nd
(
fds_evt_t
 cÚ¡ * cÚ¡ 
p_evt
)

105 
ušt32_t
 
u£r
 = 0; u£¸< 
FDS_MAX_USERS
; user++)

107 ià(
m_cb_bË
[
u£r
] !ğ
NULL
)

109 
m_cb_bË
[
u£r
](
p_evt
);

112 
	}
}

115 
	$ev’t_´•¬e
(
fds_İ_t
 cÚ¡ * cÚ¡ 
p_İ
, 
fds_evt_t
 * cÚ¡ 
p_evt
)

117 
p_İ
->
İ_code
)

119 
FDS_OP_INIT
:

120 
p_evt
->
id
 = 
FDS_EVT_INIT
;

123 
FDS_OP_WRITE
:

124 
p_evt
->
id
 = 
FDS_EVT_WRITE
;

125 
p_evt
->
wr™e
.
fe_id
 = 
p_İ
->wr™e.
h—d”
.file_id;

126 
p_evt
->
wr™e
.
»cÜd_key
 = 
p_İ
->wr™e.
h—d”
.record_key;

127 
p_evt
->
wr™e
.
»cÜd_id
 = 
p_İ
->wr™e.
h—d”
.record_id;

128 
p_evt
->
wr™e
.
is_»cÜd_upd©ed
 = 0;

131 
FDS_OP_UPDATE
:

132 
p_evt
->
id
 = 
FDS_EVT_UPDATE
;

133 
p_evt
->
wr™e
.
fe_id
 = 
p_İ
->wr™e.
h—d”
.file_id;

134 
p_evt
->
wr™e
.
»cÜd_key
 = 
p_İ
->wr™e.
h—d”
.record_key;

135 
p_evt
->
wr™e
.
»cÜd_id
 = 
p_İ
->wr™e.
h—d”
.record_id;

136 
p_evt
->
wr™e
.
is_»cÜd_upd©ed
 = (
p_İ
->wr™e.
¡•
 =ğ
FDS_OP_WRITE_DONE
);

139 
FDS_OP_DEL_RECORD
:

140 
p_evt
->
id
 = 
FDS_EVT_DEL_RECORD
;

141 
p_evt
->
d–
.
fe_id
 = 
p_İ
->del.file_id;

142 
p_evt
->
d–
.
»cÜd_key
 = 
p_İ
->del.record_key;

143 
p_evt
->
d–
.
»cÜd_id
 = 
p_İ
->d–.
»cÜd_to_d–‘e
;

146 
FDS_OP_DEL_FILE
:

147 
p_evt
->
id
 = 
FDS_EVT_DEL_FILE
;

148 
p_evt
->
d–
.
fe_id
 = 
p_İ
->del.file_id;

149 
p_evt
->
d–
.
»cÜd_key
 = 
FDS_RECORD_KEY_DIRTY
;

150 
p_evt
->
d–
.
»cÜd_id
 = 0;

153 
FDS_OP_GC
:

154 
p_evt
->
id
 = 
FDS_EVT_GC
;

161 
	}
}

164 
boŞ
 
	$h—d”_has_Ãxt
(
fds_h—d”_t
 cÚ¡ * 
p_hdr
, 
ušt32_t
 cÚ¡ * 
p_·ge_’d
)

166 
ušt32_t
 cÚ¡ * cÚ¡ 
p_hdr32
 = (ušt32_t*)
p_hdr
;

167  ( ( 
p_hdr32
 < 
p_·ge_’d
)

168 && (*
p_hdr32
 !ğ
FDS_ERASED_WORD
));

169 
	}
}

173 
fds_h—d”_t
 cÚ¡ * 
	$h—d”_jump
(
fds_h—d”_t
 cÚ¡ * cÚ¡ 
p_hdr
)

175  (
fds_h—d”_t
*)((
ušt32_t
*)
p_hdr
 + 
FDS_HEADER_SIZE
 +…_hdr->
Ëngth_wÜds
);

176 
	}
}

179 
fds_h—d”_¡©us_t
 
	$h—d”_check
(
fds_h—d”_t
 cÚ¡ * 
p_hdr
, 
ušt32_t
 cÚ¡ * 
p_·ge_’d
)

181 ià(((
ušt32_t
*)
	`h—d”_jump
(
p_hdr
è> 
p_·ge_’d
))

185  
FDS_HEADER_CORRUPT
;

188 iàĞ(
p_hdr
->
fe_id
 =ğ
FDS_FILE_ID_INVALID
)

189 || (
p_hdr
->
»cÜd_key
 =ğ
FDS_RECORD_KEY_DIRTY
))

191  
FDS_HEADER_DIRTY
;

194  
FDS_HEADER_VALID
;

195 
	}
}

198 
boŞ
 
	$add»ss_is_v®id
(
ušt32_t
 cÚ¡ * cÚ¡ 
p_addr
)

200  ((
p_addr
 !ğ
NULL
) &&

201 (
p_addr
 >ğ(
ušt32_t
*)
m_fs
.
¡¬t_addr
) &&

202 (
p_addr
 <ğ(
ušt32_t
*)
m_fs
.
’d_addr
) &&

203 (
	`is_wÜd_®igÃd
(
p_addr
)));

204 
	}
}

208 
fds_·ge_ty³_t
 
	$·ge_id’tify
(
ušt32_t
 cÚ¡ * cÚ¡ 
p_·ge_addr
)

210 iàĞ(
p_·ge_addr
 =ğ
NULL
)

211 || (
p_·ge_addr
[
FDS_PAGE_TAG_WORD_0
] !ğ
FDS_PAGE_TAG_MAGIC
))

213  
FDS_PAGE_UNDEFINED
;

216 
p_·ge_addr
[
FDS_PAGE_TAG_WORD_1
])

218 
FDS_PAGE_TAG_SWAP
:

219  
FDS_PAGE_SWAP
;

221 
FDS_PAGE_TAG_DATA
:

222  
FDS_PAGE_DATA
;

225  
FDS_PAGE_UNDEFINED
;

227 
	}
}

230 
boŞ
 
	$·ge_is_”a£d
(
ušt32_t
 cÚ¡ * cÚ¡ 
p_·ge_addr
)

232 
ušt32_t
 
i
 = 0; i < 
FDS_PAGE_SIZE
; i++)

234 ià(*(
p_·ge_addr
 + 
i
è!ğ
FDS_ERASED_WORD
)

236  
çl£
;

240  
Œue
;

241 
	}
}

245 
boŞ
 
	$·ge_has_¥aû
(
ušt16_t
 
·ge
, ušt16_ˆ
Ëngth_wÜds
)

247 
Ëngth_wÜds
 +ğ
m_·ges
[
·ge
].
wr™e_off£t
;

248 
Ëngth_wÜds
 +ğ
m_·ges
[
·ge
].
wÜds_»£rved
;

249  (
Ëngth_wÜds
 < 
FDS_PAGE_SIZE
);

250 
	}
}

255 
»t_code_t
 
	$·ge_äom_»cÜd
(
ušt16_t
 * cÚ¡ 
p_·ge
, 
ušt32_t
 cÚ¡ * cÚ¡ 
p_»c
)

257 
»t_code_t
 
»t
 = 
FDS_ERR_NOT_FOUND
;

259 
	`CRITICAL_SECTION_ENTER
();

260 
ušt16_t
 
i
 = 0; i < 
FDS_DATA_PAGES
; i++)

262 ià((
p_»c
 > 
m_·ges
[
i
].
p_addr
) &&

263 (
p_»c
 < 
m_·ges
[
i
].
p_addr
 + 
FDS_PAGE_SIZE
))

265 
»t
 = 
FDS_SUCCESS
;

266 *
p_·ge
 = 
i
;

270 
	`CRITICAL_SECTION_EXIT
();

272  
»t
;

273 
	}
}

280 
	$·ge_sÿn
(
ušt32_t
 cÚ¡ * 
p_addr
,

281 
ušt16_t
 * cÚ¡ 
wÜds_wr™‹n
,

282 
boŞ
 * cÚ¡ 
ÿn_gc
)

284 
ušt32_t
 cÚ¡ * cÚ¡ 
p_·ge_’d
 = 
p_addr
 + 
FDS_PAGE_SIZE
;

286 
p_addr
 +ğ
FDS_PAGE_TAG_SIZE
;

287 *
wÜds_wr™‹n
 = 
FDS_PAGE_TAG_SIZE
;

289 
fds_h—d”_t
 cÚ¡ * 
p_h—d”
 = (fds_h—d”_t*)
p_addr
;

291 
	`h—d”_has_Ãxt
(
p_h—d”
, 
p_·ge_’d
))

293 
fds_h—d”_¡©us_t
 
hdr
 = 
	`h—d”_check
(
p_h—d”
, 
p_·ge_’d
);

295 ià(
hdr
 =ğ
FDS_HEADER_VALID
)

298 ià(
p_h—d”
->
»cÜd_id
 > 
m_Ï‹¡_»c_id
)

300 
m_Ï‹¡_»c_id
 = 
p_h—d”
->
»cÜd_id
;

305 ià(
ÿn_gc
 !ğ
NULL
)

307 *
ÿn_gc
 = 
Œue
;

310 ià(
hdr
 =ğ
FDS_HEADER_CORRUPT
)

316 *
wÜds_wr™‹n
 = 
FDS_PAGE_SIZE
;

323 *
wÜds_wr™‹n
 +ğ(
FDS_HEADER_SIZE
 + 
p_h—d”
->
Ëngth_wÜds
);

324 
p_h—d”
 = 
	`h—d”_jump
(p_header);

326 
	}
}

329 
	$·ge_off£ts_upd©e
(
fds_·ge_t
 * cÚ¡ 
p_·ge
, 
fds_İ_t
 cÚ¡ * 
p_İ
)

336 ià(
p_İ
->
wr™e
.
¡•
 > 
FDS_OP_WRITE_RECORD_ID
)

338 
p_·ge
->
wr™e_off£t
 +ğ(
FDS_HEADER_SIZE
 + 
p_İ
->
wr™e
.
h—d”
.
Ëngth_wÜds
);

341 
p_·ge
->
wÜds_»£rved
 -ğ(
FDS_HEADER_SIZE
 + 
p_İ
->
wr™e
.
h—d”
.
Ëngth_wÜds
);

342 
	}
}

346 
»t_code_t
 
	$·ge_g_wr™e_sw­
()

349 
ušt32_t
 cÚ¡ 
·ge_g_sw­
[] = {
FDS_PAGE_TAG_MAGIC
, 
FDS_PAGE_TAG_SWAP
};

350  
	`Äf_f¡Üage_wr™e
(&
m_fs
, (
ušt32_t
)
m_sw­_·ge
.
p_addr
, 
·ge_g_sw­
, 
FDS_PAGE_TAG_SIZE
 * (ušt32_t), 
NULL
);

351 
	}
}

355 
»t_code_t
 
	$·ge_g_wr™e_d©a
(
ušt32_t
 cÚ¡ * cÚ¡ 
p_·ge_addr
)

358 
ušt32_t
 cÚ¡ 
·ge_g_d©a
[] = {
FDS_PAGE_TAG_MAGIC
, 
FDS_PAGE_TAG_DATA
};

359  
	`Äf_f¡Üage_wr™e
(&
m_fs
, (
ušt32_t
)
p_·ge_addr
, 
·ge_g_d©a
, 
FDS_PAGE_TAG_SIZE
 * (ušt32_t), 
NULL
);

360 
	}
}

365 
»t_code_t
 
	$wr™e_¥aû_»£rve
(
ušt16_t
 
Ëngth_wÜds
, ušt16_ˆ* 
p_·ge
)

367 
boŞ
 
¥aû_»£rved
 = 
çl£
;

368 
ušt16_t
 cÚ¡ 
tÙ®_Ën_wÜds
 = 
Ëngth_wÜds
 + 
FDS_HEADER_SIZE
;

370 ià(
tÙ®_Ën_wÜds
 >ğ
FDS_PAGE_SIZE
 - 
FDS_PAGE_TAG_SIZE
)

372  
FDS_ERR_RECORD_TOO_LARGE
;

375 
	`CRITICAL_SECTION_ENTER
();

376 
ušt16_t
 
·ge
 = 0;…ag< 
FDS_DATA_PAGES
;…age++)

378 ià((
m_·ges
[
·ge
].
·ge_ty³
 =ğ
FDS_PAGE_DATA
) &&

379 (
	`·ge_has_¥aû
(
·ge
, 
tÙ®_Ën_wÜds
)))

381 
¥aû_»£rved
 = 
Œue
;

382 *
p_·ge
 = 
·ge
;

384 
m_·ges
[
·ge
].
wÜds_»£rved
 +ğ
tÙ®_Ën_wÜds
;

388 
	`CRITICAL_SECTION_EXIT
();

390  (
¥aû_»£rved
è? 
FDS_SUCCESS
 : 
FDS_ERR_NO_SPACE_IN_FLASH
;

391 
	}
}

396 
	$wr™e_¥aû_ä“
(
ušt16_t
 
Ëngth_wÜds
, ušt16_ˆ
·ge
)

398 
m_·ges
[
·ge
].
wÜds_»£rved
 -ğ(
Ëngth_wÜds
 + 
FDS_HEADER_SIZE
);

399 
	}
}

402 
ušt32_t
 
	$»cÜd_id_Ãw
()

404  
	`Äf_©omic_u32_add
(&
m_Ï‹¡_»c_id
, 1);

405 
	}
}

413 
boŞ
 
	$»cÜd_fšd_Ãxt
(
ušt16_t
 
·ge
, 
ušt32_t
 cÚ¡ ** 
p_»cÜd
)

415 
ušt32_t
 cÚ¡ * 
p_·ge_’d
 = (
m_·ges
[
·ge
].
p_addr
 + 
FDS_PAGE_SIZE
);

419 
fds_h—d”_t
 cÚ¡ * 
p_h—d”
 = (fds_h—d”_t*)(*
p_»cÜd
);

421 ià(
p_h—d”
 !ğ
NULL
)

423 
p_h—d”
 = 
	`h—d”_jump
(p_header);

427 
p_h—d”
 = (
fds_h—d”_t
*)(
m_·ges
[
·ge
].
p_addr
 + 
FDS_PAGE_TAG_SIZE
);

434 
	`h—d”_has_Ãxt
(
p_h—d”
, 
p_·ge_’d
))

436 
	`h—d”_check
(
p_h—d”
, 
p_·ge_’d
))

438 
FDS_HEADER_VALID
:

439 *
p_»cÜd
 = (
ušt32_t
*)
p_h—d”
;

440  
Œue
;

442 
FDS_HEADER_DIRTY
:

443 
p_h—d”
 = 
	`h—d”_jump
(p_header);

446 
FDS_HEADER_CORRUPT
:

449  
çl£
;

454  
çl£
;

455 
	}
}

460 
boŞ
 
	$»cÜd_fšd_by_desc
(
fds_»cÜd_desc_t
 * cÚ¡ 
p_desc
, 
ušt16_t
 * cÚ¡ 
p_·ge
)

466 ià((
	`add»ss_is_v®id
(
p_desc
->
p_»cÜd
)) &&

467 (
p_desc
->
gc_run_couÁ
 =ğ
m_gc
.
run_couÁ
) &&

468 (
p_desc
->
»cÜd_id
 =ğ((
fds_h—d”_t
*í_desc->
p_»cÜd
)->record_id))

470  (
	`·ge_äom_»cÜd
(
p_·ge
, 
p_desc
->
p_»cÜd
è=ğ
FDS_SUCCESS
);

474 *
p_·ge
 = 0; *p_·g< 
FDS_DATA_PAGES
; (*p_page)++)

477 
ušt32_t
 cÚ¡ * 
p_»cÜd
 = 
NULL
;

479 
	`»cÜd_fšd_Ãxt
(*
p_·ge
, &
p_»cÜd
))

481 
fds_h—d”_t
 cÚ¡ * cÚ¡ 
p_h—d”
 = (fds_h—d”_t*)
p_»cÜd
;

482 ià(
p_h—d”
->
»cÜd_id
 =ğ
p_desc
->record_id)

484 
p_desc
->
p_»cÜd
 =…_record;

485 
p_desc
->
gc_run_couÁ
 = 
m_gc
.
run_couÁ
;

486  
Œue
;

491  
çl£
;

492 
	}
}

499 
»t_code_t
 
	$»cÜd_fšd
(
ušt16_t
 cÚ¡ * 
p_fe_id
,

500 
ušt16_t
 cÚ¡ * 
p_»cÜd_key
,

501 
fds_»cÜd_desc_t
 * 
p_desc
,

502 
fds_fšd_tok’_t
 * 
p_tok’
)

504 ià(!
m_æags
.
š™Ÿlized
)

506  
FDS_ERR_NOT_INITIALIZED
;

509 ià(
p_desc
 =ğ
NULL
 || 
p_tok’
 == NULL)

511  
FDS_ERR_NULL_ARG
;

515 ; 
p_tok’
->
·ge
 < 
FDS_DATA_PAGES
;…_token->page++)

517 ià(
m_·ges
[
p_tok’
->
·ge
].
·ge_ty³
 !ğ
FDS_PAGE_DATA
)

524 
	`»cÜd_fšd_Ãxt
(
p_tok’
->
·ge
, &p_tok’->
p_addr
))

526 
fds_h—d”_t
 cÚ¡ * 
p_h—d”
 = (fds_h—d”_t*)
p_tok’
->
p_addr
;

529 ià((
p_fe_id
 !ğ
NULL
) &&

530 (
p_h—d”
->
fe_id
 !ğ*
p_fe_id
))

535 ià((
p_»cÜd_key
 !ğ
NULL
) &&

536 (
p_h—d”
->
»cÜd_key
 !ğ*
p_»cÜd_key
))

542 
p_desc
->
»cÜd_id
 = 
p_h—d”
->record_id;

543 
p_desc
->
p_»cÜd
 = 
p_tok’
->
p_addr
;

544 
p_desc
->
gc_run_couÁ
 = 
m_gc
.
run_couÁ
;

546  
FDS_SUCCESS
;

551 
p_tok’
->
p_addr
 = 
NULL
;

554  
FDS_ERR_NOT_FOUND
;

555 
	}
}

559 
	$»cÜds_¡©
(
ušt16_t
 
·ge
,

560 
ušt16_t
 * 
p_v®id_»cÜds
,

561 
ušt16_t
 * 
p_dœty_»cÜds
,

562 
ušt16_t
 * 
p_ä“abË_wÜds
,

563 
boŞ
 * 
p_cÜru±iÚ
)

565 
fds_h—d”_t
 cÚ¡ * 
p_h—d”
 = (fds_h—d”_t*)(
m_·ges
[
·ge
].
p_addr
 + 
FDS_PAGE_TAG_SIZE
);

566 
ušt32_t
 cÚ¡ * cÚ¡ 
p_·ge_’d
 = (
m_·ges
[
·ge
].
p_addr
 + 
FDS_PAGE_SIZE
);

568 
	`h—d”_has_Ãxt
(
p_h—d”
, 
p_·ge_’d
))

570 
	`h—d”_check
(
p_h—d”
, 
p_·ge_’d
))

572 
FDS_HEADER_DIRTY
:

573 *
p_dœty_»cÜds
 += 1;

574 *
p_ä“abË_wÜds
 +ğ
FDS_HEADER_SIZE
 + 
p_h—d”
->
Ëngth_wÜds
;

575 
p_h—d”
 = 
	`h—d”_jump
(p_header);

578 
FDS_HEADER_VALID
:

579 *
p_v®id_»cÜds
 += 1;

580 
p_h—d”
 = 
	`h—d”_jump
(p_header);

583 
FDS_HEADER_CORRUPT
:

585 *
p_dœty_»cÜds
 += 1;

586 *
p_ä“abË_wÜds
 +ğ(
p_·ge_’d
 - (
ušt32_t
*)
p_h—d”
);

587 *
p_cÜru±iÚ
 = 
Œue
;

596 
	}
}

600 
fds_İ_t
 * 
	$queue_buf_g‘
(
Äf_©fifo_™em_put_t
 * 
p_ut_ùx
)

602 
fds_İ_t
 * cÚ¡ 
p_İ
 = (fds_İ_t*è
	`Äf_©fifo_™em_®loc
(
m_queue
, 
p_ut_ùx
);

604 
	`mem£t
(
p_İ
, 0x00, (
fds_İ_t
));

605  
p_İ
;

606 
	}
}

610 
	$queue_buf_¡Üe
(
Äf_©fifo_™em_put_t
 * 
p_ut_ùx
)

612 (è
	`Äf_©fifo_™em_put
(
m_queue
, 
p_ut_ùx
);

613 
	}
}

617 
fds_İ_t
 * 
	$queue_lßd
(
Äf_©fifo_™em_g‘_t
 * 
p_ig‘_ùx
)

619  (
fds_İ_t
*è
	`Äf_©fifo_™em_g‘
(
m_queue
, 
p_ig‘_ùx
);

620 
	}
}

624 
	$queue_ä“
(
Äf_©fifo_™em_g‘_t
 * 
p_ig‘_ùx
)

627 (è
	`Äf_©fifo_™em_ä“
(
m_queue
, 
p_ig‘_ùx
);

628 
	}
}

631 
boŞ
 
	$queue_has_Ãxt
()

634 
	`ASSERT
(
m_queued_İ_út
 != 0);

635  
	`Äf_©omic_u32_sub
(&
m_queued_İ_út
, 1);

636 
	}
}

641 
fds_š™_İts_t
 
	$·ges_š™
()

643 
ušt32_t
 
»t
 = 
NO_PAGES
;

644 
ušt16_t
 
·ge
 = 0;

645 
ušt16_t
 
tÙ®_·ges_avaabË
 = 
FDS_VIRTUAL_PAGES
;

646 
boŞ
 
sw­_£t_but_nÙ_found
 = 
çl£
;

648 
ušt16_t
 
i
 = 0; i < 
FDS_VIRTUAL_PAGES
; i++)

650 
ušt32_t
 cÚ¡ * cÚ¡ 
p_·ge_addr
 = (ušt32_t*)
m_fs
.
¡¬t_addr
 + (
i
 * 
FDS_PAGE_SIZE
);

651 
fds_·ge_ty³_t
 cÚ¡ 
·ge_ty³
 = 
	`·ge_id’tify
(
p_·ge_addr
);

653 
·ge_ty³
)

655 
FDS_PAGE_UNDEFINED
:

657 ià(
	`·ge_is_”a£d
(
p_·ge_addr
))

659 ià(
m_sw­_·ge
.
p_addr
 !ğ
NULL
)

663 
m_·ges
[
·ge
].
·ge_ty³
 = 
FDS_PAGE_ERASED
;

664 
m_·ges
[
·ge
].
p_addr
 = 
p_·ge_addr
;

665 
m_·ges
[
·ge
].
wr™e_off£t
 = 
FDS_PAGE_TAG_SIZE
;

669 
m_gc
.
cur_·ge
 = 
·ge
;

670 
·ge
++;

675 
m_sw­_·ge
.
p_addr
 = 
p_·ge_addr
;

676 
m_sw­_·ge
.
wr™e_off£t
 = 
FDS_PAGE_TAG_SIZE
;

677 
sw­_£t_but_nÙ_found
 = 
Œue
;

680 
»t
 |ğ
PAGE_ERASED
;

686 
tÙ®_·ges_avaabË
--;

687 
m_·ges
[
·ge
].
p_addr
 = 
p_·ge_addr
;

688 
m_·ges
[
·ge
].
·ge_ty³
 = 
FDS_PAGE_UNDEFINED
;

689 
·ge
++;

693 
FDS_PAGE_DATA
:

695 
m_·ges
[
·ge
].
·ge_ty³
 = 
FDS_PAGE_DATA
;

696 
m_·ges
[
·ge
].
p_addr
 = 
p_·ge_addr
;

700 
	`·ge_sÿn
(
p_·ge_addr
, &
m_·ges
[
·ge
].
wr™e_off£t
, &m_·ges[·ge].
ÿn_gc
);

702 
»t
 |ğ
PAGE_DATA
;

703 
·ge
++;

706 
FDS_PAGE_SWAP
:

708 ià(
sw­_£t_but_nÙ_found
)

710 
m_·ges
[
·ge
].
·ge_ty³
 = 
FDS_PAGE_ERASED
;

711 
m_·ges
[
·ge
].
p_addr
 = 
m_sw­_·ge
.p_addr;

712 
m_·ges
[
·ge
].
wr™e_off£t
 = 
FDS_PAGE_TAG_SIZE
;

714 
·ge
++;

717 
m_sw­_·ge
.
p_addr
 = 
p_·ge_addr
;

720 
	`·ge_sÿn
(
p_·ge_addr
, &
m_sw­_·ge
.
wr™e_off£t
, 
NULL
);

722 
»t
 |ğ(
m_sw­_·ge
.
wr™e_off£t
 =ğ
FDS_PAGE_TAG_SIZE
) ?

723 
PAGE_SWAP_CLEAN
 : 
PAGE_SWAP_DIRTY
;

732 ià(
tÙ®_·ges_avaabË
 < 2)

734 
»t
 &ğ
NO_PAGES
;

737  (
fds_š™_İts_t
)
»t
;

738 
	}
}

742 
»t_code_t
 
	$»cÜd_h—d”_wr™e_begš
(
fds_İ_t
 * cÚ¡ 
p_İ
, 
ušt32_t
 * cÚ¡ 
p_addr
)

744 
»t_code_t
 
»t
;

747 
p_İ
->
wr™e
.
¡•
 = 
FDS_OP_WRITE_RECORD_ID
;

749 
»t
 = 
	`Äf_f¡Üage_wr™e
(&
m_fs
, (
ušt32_t
)(
p_addr
 + 
FDS_OFFSET_TL
),

750 &
p_İ
->
wr™e
.
h—d”
.
»cÜd_key
, 
FDS_HEADER_SIZE_TL
 * (
ušt32_t
), 
NULL
);

752  (
»t
 =ğ
NRF_SUCCESS
è? 
FDS_SUCCESS
 : 
FDS_ERR_BUSY
;

753 
	}
}

756 
»t_code_t
 
	$»cÜd_h—d”_wr™e_id
(
fds_İ_t
 * cÚ¡ 
p_İ
, 
ušt32_t
 * cÚ¡ 
p_addr
)

758 
»t_code_t
 
»t
;

762 
p_İ
->
wr™e
.
¡•
 = (p_İ->wr™e.
p_d©a
 !ğ
NULL
) ?

763 
FDS_OP_WRITE_DATA
 : 
FDS_OP_WRITE_HEADER_FINALIZE
;

765 
»t
 = 
	`Äf_f¡Üage_wr™e
(&
m_fs
, (
ušt32_t
)(
p_addr
 + 
FDS_OFFSET_ID
),

766 &
p_İ
->
wr™e
.
h—d”
.
»cÜd_id
, 
FDS_HEADER_SIZE_ID
 * (
ušt32_t
), 
NULL
);

768  (
»t
 =ğ
NRF_SUCCESS
è? 
FDS_SUCCESS
 : 
FDS_ERR_BUSY
;

769 
	}
}

772 
»t_code_t
 
	$»cÜd_h—d”_wr™e_fš®ize
(
fds_İ_t
 * cÚ¡ 
p_İ
, 
ušt32_t
 * cÚ¡ 
p_addr
)

774 
»t_code_t
 
»t
;

778 
p_İ
->
wr™e
.
¡•
 = (p_İ->
İ_code
 =ğ
FDS_OP_UPDATE
) ?

779 
FDS_OP_WRITE_FLAG_DIRTY
 : 
FDS_OP_WRITE_DONE
;

781 
»t
 = 
	`Äf_f¡Üage_wr™e
(&
m_fs
, (
ušt32_t
)(
p_addr
 + 
FDS_OFFSET_IC
),

782 &
p_İ
->
wr™e
.
h—d”
.
fe_id
, 
FDS_HEADER_SIZE_IC
 * (
ušt32_t
), 
NULL
);

784  (
»t
 =ğ
NRF_SUCCESS
è? 
FDS_SUCCESS
 : 
FDS_ERR_BUSY
;

785 
	}
}

788 
»t_code_t
 
	$»cÜd_h—d”_æag_dœty
(
ušt32_t
 * cÚ¡ 
p_»cÜd
, 
ušt16_t
 
·ge_to_gc
)

792 
	`__ALIGN
(4è
ušt32_t
 cÚ¡ 
dœty_h—d”
 = {0xFFFF0000};

795 
»t_code_t
 
»t
;

797 
»t
 = 
	`Äf_f¡Üage_wr™e
(&
m_fs
, (
ušt32_t
)
p_»cÜd
,

798 &
dœty_h—d”
, 
FDS_HEADER_SIZE_TL
 * (
ušt32_t
), 
NULL
);

800 ià(
»t
 !ğ
NRF_SUCCESS
)

802  
FDS_ERR_BUSY
;

805 
m_·ges
[
·ge_to_gc
].
ÿn_gc
 = 
Œue
;

807  
FDS_SUCCESS
;

808 
	}
}

811 
»t_code_t
 
	$»cÜd_fšd_ªd_d–‘e
(
fds_İ_t
 * cÚ¡ 
p_İ
)

813 
»t_code_t
 
»t
;

814 
ušt16_t
 
·ge
;

815 
fds_»cÜd_desc_t
 
desc
 = {0};

817 
desc
.
»cÜd_id
 = 
p_İ
->
d–
.
»cÜd_to_d–‘e
;

819 ià(
	`»cÜd_fšd_by_desc
(&
desc
, &
·ge
))

821 
fds_h—d”_t
 cÚ¡ * cÚ¡ 
p_h—d”
 = (fds_h—d”_ˆcÚ¡ *)
desc
.
p_»cÜd
;

828 
p_İ
->
d–
.
fe_id
 = 
p_h—d”
->file_id;

829 
p_İ
->
d–
.
»cÜd_key
 = 
p_h—d”
->record_key;

832 
»t
 = 
	`»cÜd_h—d”_æag_dœty
((
ušt32_t
*)
desc
.
p_»cÜd
, 
·ge
);

837 
»t
 = 
FDS_ERR_NOT_FOUND
;

840  
»t
;

841 
	}
}

845 
»t_code_t
 
	$fe_fšd_ªd_d–‘e
(
fds_İ_t
 * cÚ¡ 
p_İ
)

847 
»t_code_t
 
»t
;

848 
fds_»cÜd_desc_t
 
desc
;

851 
fds_fšd_tok’_t
 
tok
 = {0};

854 
»t
 = 
	`»cÜd_fšd
(&
p_İ
->
d–
.
fe_id
, 
NULL
, &
desc
, &
tok
);

856 ià(
»t
 =ğ
FDS_SUCCESS
)

859 
»t
 = 
	`»cÜd_h—d”_æag_dœty
((
ušt32_t
*)
desc
.
p_»cÜd
, 
tok
.
·ge
);

864 
	`mem£t
(&
tok
, 0x00, (
fds_fšd_tok’_t
));

867  
»t
;

868 
	}
}

872 
»t_code_t
 
	$»cÜd_wr™e_d©a
(
fds_İ_t
 * cÚ¡ 
p_İ
, 
ušt32_t
 * cÚ¡ 
p_addr
)

874 
»t_code_t
 
»t
;

876 
p_İ
->
wr™e
.
¡•
 = 
FDS_OP_WRITE_HEADER_FINALIZE
;

878 
»t
 = 
	`Äf_f¡Üage_wr™e
(&
m_fs
, (
ušt32_t
)(
p_addr
 + 
FDS_OFFSET_DATA
),

879 
p_İ
->
wr™e
.
p_d©a
,…_İ->wr™e.
h—d”
.
Ëngth_wÜds
 * (
ušt32_t
), 
NULL
);

881  (
»t
 =ğ
NRF_SUCCESS
è? 
FDS_SUCCESS
 : 
FDS_ERR_BUSY
;

882 
	}
}

885 #ià(
FDS_CRC_CHECK_ON_READ
)

886 
boŞ
 
	$üc_v”ify_sucûss
(
ušt16_t
 
üc
, ušt16_ˆ
Ën_wÜds
, 
ušt32_t
 cÚ¡ * cÚ¡ 
p_d©a
)

888 
ušt16_t
 
compu‹d_üc
;

894 
compu‹d_üc
 = 
	`üc16_compu‹
((
ušt8_t
 cÚ¡ *)
p_d©a
, 6, 
NULL
);

895 
compu‹d_üc
 = 
	`üc16_compu‹
((
ušt8_t
 cÚ¡ *)
p_d©a
 + 8,

896 (
FDS_HEADER_SIZE_ID
 + 
Ën_wÜds
è* (
ušt32_t
),

897 &
compu‹d_üc
);

899  (
compu‹d_üc
 =ğ
üc
);

900 
	}
}

904 
	$gc_š™
()

906 
m_gc
.
run_couÁ
++;

907 
m_gc
.
cur_·ge
 = 0;

908 
m_gc
.
»sume
 = 
çl£
;

912 
ušt16_t
 
i
 = 0; i < 
FDS_DATA_PAGES
; i++)

914 
m_gc
.
do_gc_·ge
[
i
] = (
m_·ges
[i].
·ge_ty³
 =ğ
FDS_PAGE_DATA
);

916 
	}
}

921 
boŞ
 
	$gc_·ge_Ãxt
(
ušt16_t
 * cÚ¡ 
p_Ãxt_·ge
)

923 
boŞ
 
»t
 = 
çl£
;

925 
ušt16_t
 
i
 = 0; i < 
FDS_DATA_PAGES
; i++)

927 ià(
m_gc
.
do_gc_·ge
[
i
])

930 
m_gc
.
do_gc_·ge
[
i
] = 
çl£
;

933 ià((
m_·ges
[
i
].
»cÜds_İ’
 =ğ0è&& (m_·ges[i].
ÿn_gc
 =ğ
Œue
))

935 *
p_Ãxt_·ge
 = 
i
;

936 
»t
 = 
Œue
;

942  
»t
;

943 
	}
}

946 
»t_code_t
 
	$gc_sw­_”a£
()

948 
m_gc
.
¡©e
 = 
GC_DISCARD_SWAP
;

949 
m_sw­_·ge
.
wr™e_off£t
 = 
FDS_PAGE_TAG_SIZE
;

951  
	`Äf_f¡Üage_”a£
(&
m_fs
, (
ušt32_t
)
m_sw­_·ge
.
p_addr
, 
FDS_PHY_PAGES_IN_VPAGE
, 
NULL
);

952 
	}
}

957 
»t_code_t
 
	$gc_·ge_”a£
()

959 
ušt32_t
 
»t
;

960 
ušt16_t
 cÚ¡ 
gc
 = 
m_gc
.
cur_·ge
;

962 ià(
m_·ges
[
gc
].
»cÜds_İ’
 == 0)

964 
m_gc
.
¡©e
 = 
GC_ERASE_PAGE
;

966 
»t
 = 
	`Äf_f¡Üage_”a£
(&
m_fs
, (
ušt32_t
)
m_·ges
[
gc
].
p_addr
, 
FDS_PHY_PAGES_IN_VPAGE
, 
NULL
);

972 
»t
 = 
	`gc_sw­_”a£
();

975  
»t
;

976 
	}
}

980 
»t_code_t
 
	$gc_»cÜd_cİy
()

982 
fds_h—d”_t
 cÚ¡ * cÚ¡ 
p_h—d”
 = (fds_h—d”_t*)
m_gc
.
p_»cÜd_¤c
;

983 
ušt32_t
 cÚ¡ * cÚ¡ 
p_de¡
 = 
m_sw­_·ge
.
p_addr
 + m_sw­_·ge.
wr™e_off£t
;

984 
ušt16_t
 cÚ¡ 
»cÜd_Ën
 = 
FDS_HEADER_SIZE
 + 
p_h—d”
->
Ëngth_wÜds
;

986 
m_gc
.
¡©e
 = 
GC_COPY_RECORD
;

990  
	`Äf_f¡Üage_wr™e
(&
m_fs
, (
ušt32_t
)
p_de¡
, 
m_gc
.
p_»cÜd_¤c
,

991 
»cÜd_Ën
 * (
ušt32_t
),

992 
NULL
);

993 
	}
}

996 
»t_code_t
 
	$gc_»cÜd_fšd_Ãxt
()

998 
»t_code_t
 
»t
;

1001 ià(
	`»cÜd_fšd_Ãxt
(
m_gc
.
cur_·ge
, &m_gc.
p_»cÜd_¤c
))

1003 
»t
 = 
	`gc_»cÜd_cİy
();

1008 
»t
 = 
	`gc_·ge_”a£
();

1011  
»t
;

1012 
	}
}

1016 
»t_code_t
 
	$gc_sw­_´omÙe
()

1018 
m_gc
.
¡©e
 = 
GC_PROMOTE_SWAP
;

1019  
	`·ge_g_wr™e_d©a
(
m_·ges
[
m_gc
.
cur_·ge
].
p_addr
);

1020 
	}
}

1024 
»t_code_t
 
	$gc_g_Ãw_sw­
()

1026 
m_gc
.
¡©e
 = 
GC_TAG_NEW_SWAP
;

1027 
m_gc
.
p_»cÜd_¤c
 = 
NULL
;

1028  
	`·ge_g_wr™e_sw­
();

1029 
	}
}

1032 
»t_code_t
 
	$gc_Ãxt_·ge
()

1034 ià(!
	`gc_·ge_Ãxt
(&
m_gc
.
cur_·ge
))

1037 
m_gc
.
¡©e
 = 
GC_BEGIN
;

1038 
m_gc
.
cur_·ge
 = 0;

1039 
m_gc
.
p_»cÜd_¤c
 = 
NULL
;

1041  
FDS_OP_COMPLETED
;

1044  
	`gc_»cÜd_fšd_Ãxt
();

1045 
	}
}

1049 
	$gc_upd©e_sw­_off£t
()

1051 
fds_h—d”_t
 cÚ¡ * cÚ¡ 
p_h—d”
 = (fds_h—d”_t*)
m_gc
.
p_»cÜd_¤c
;

1052 
ušt16_t
 cÚ¡ 
»cÜd_Ën
 = 
FDS_HEADER_SIZE
 + 
p_h—d”
->
Ëngth_wÜds
;

1054 
m_sw­_·ge
.
wr™e_off£t
 +ğ
»cÜd_Ën
;

1055 
	}
}

1058 
	$gc_sw­_·ges
()

1062 
ušt32_t
 cÚ¡ * cÚ¡ 
p_addr
 = 
m_sw­_·ge
.p_addr;

1064 
m_sw­_·ge
.
p_addr
 = 
m_·ges
[
m_gc
.
cur_·ge
].p_addr;

1065 
m_·ges
[
m_gc
.
cur_·ge
].
p_addr
 =…_addr;

1068 
m_·ges
[
m_gc
.
cur_·ge
].
wr™e_off£t
 = 
m_sw­_·ge
.write_offset;

1069 
m_sw­_·ge
.
wr™e_off£t
 = 
FDS_PAGE_TAG_SIZE
;

1070 
	}
}

1073 
	$gc_¡©e_advªû
()

1075 
m_gc
.
¡©e
)

1077 
GC_BEGIN
:

1078 
	`gc_š™
();

1079 
m_gc
.
¡©e
 = 
GC_NEXT_PAGE
;

1083 
GC_COPY_RECORD
:

1084 
	`gc_upd©e_sw­_off£t
();

1085 
m_gc
.
¡©e
 = 
GC_FIND_NEXT_RECORD
;

1089 
GC_ERASE_PAGE
:

1090 
	`gc_sw­_·ges
();

1091 
m_gc
.
¡©e
 = 
GC_PROMOTE_SWAP
;

1095 
GC_DISCARD_SWAP
:

1097 
GC_PROMOTE_SWAP
:

1099 
m_gc
.
¡©e
 = 
GC_TAG_NEW_SWAP
;

1102 
GC_TAG_NEW_SWAP
:

1103 
m_gc
.
¡©e
 = 
GC_NEXT_PAGE
;

1110 
	}
}

1114 
»t_code_t
 
	$š™_execu‹
(
ušt32_t
 
´ev_»t
, 
fds_İ_t
 * cÚ¡ 
p_İ
)

1116 
»t_code_t
 
»t
 = 
FDS_ERR_INTERNAL
;

1118 ià(
´ev_»t
 !ğ
NRF_SUCCESS
)

1121 
m_æags
.
š™Ÿlizšg
 = 
çl£
;

1122  
FDS_ERR_OPERATION_TIMEOUT
;

1125 
p_İ
->
š™
.
¡•
)

1127 
FDS_OP_INIT_TAG_SWAP
:

1130 
p_İ
->
š™
.
¡•
 = 
FDS_OP_INIT_TAG_DATA
;

1131 
»t
 = 
	`·ge_g_wr™e_sw­
();

1134 
FDS_OP_INIT_TAG_DATA
:

1137 
boŞ
 
wr™e_»qd
 = 
çl£
;

1138 
ušt16_t
 
i
 = 0; i < 
FDS_DATA_PAGES
; i++)

1140 ià(
m_·ges
[
i
].
·ge_ty³
 =ğ
FDS_PAGE_ERASED
)

1142 
m_·ges
[
i
].
·ge_ty³
 = 
FDS_PAGE_DATA
;

1143 
wr™e_»qd
 = 
Œue
;

1144 
»t
 = 
	`·ge_g_wr™e_d©a
(
m_·ges
[
i
].
p_addr
);

1148 ià(!
wr™e_»qd
)

1150 
m_æags
.
š™Ÿlized
 = 
Œue
;

1151 
m_æags
.
š™Ÿlizšg
 = 
çl£
;

1152  
FDS_OP_COMPLETED
;

1156 
FDS_OP_INIT_ERASE_SWAP
:

1159 
p_İ
->
š™
.
¡•
 = 
FDS_OP_INIT_TAG_SWAP
;

1160 
m_sw­_·ge
.
wr™e_off£t
 = 
FDS_PAGE_TAG_SIZE
;

1162 
»t
 = 
	`Äf_f¡Üage_”a£
(&
m_fs
, (
ušt32_t
)
m_sw­_·ge
.
p_addr
, 
FDS_PHY_PAGES_IN_VPAGE
, 
NULL
);

1165 
FDS_OP_INIT_PROMOTE_SWAP
:

1167 
p_İ
->
š™
.
¡•
 = 
FDS_OP_INIT_TAG_SWAP
;

1170 
»t
 = 
	`·ge_g_wr™e_d©a
(
m_sw­_·ge
.
p_addr
);

1172 
ušt16_t
 cÚ¡ 
gc
 = 
m_gc
.
cur_·ge
;

1173 
ušt32_t
 cÚ¡ * cÚ¡ 
p_Şd_sw­
 = 
m_sw­_·ge
.
p_addr
;

1176 
m_sw­_·ge
.
p_addr
 = 
m_·ges
[
gc
].p_addr;

1177 
m_·ges
[
gc
].
p_addr
 = 
p_Şd_sw­
;

1180 
m_·ges
[
gc
].
wr™e_off£t
 = 
m_sw­_·ge
.write_offset;

1181 
m_sw­_·ge
.
wr™e_off£t
 = 
FDS_PAGE_TAG_SIZE
;

1183 
m_·ges
[
gc
].
·ge_ty³
 = 
FDS_PAGE_DATA
;

1191 ià(
»t
 !ğ
FDS_SUCCESS
)

1194 
m_æags
.
š™Ÿlizšg
 = 
çl£
;

1195  
FDS_ERR_BUSY
;

1198  
FDS_OP_EXECUTING
;

1199 
	}
}

1203 
»t_code_t
 
	$wr™e_execu‹
(
ušt32_t
 
´ev_»t
, 
fds_İ_t
 * cÚ¡ 
p_İ
)

1205 
»t_code_t
 
»t
;

1206 
ušt32_t
 * 
p_wr™e_addr
;

1207 
fds_·ge_t
 * cÚ¡ 
p_·ge
 = &
m_·ges
[
p_İ
->
wr™e
.
·ge
];

1210 
fds_»cÜd_desc_t
 
desc
 = {0};

1214 
ušt16_t
 
·ge
;

1216 ià(
´ev_»t
 !ğ
NRF_SUCCESS
)

1219 
	`·ge_off£ts_upd©e
(
p_·ge
, 
p_İ
);

1220  
FDS_ERR_OPERATION_TIMEOUT
;

1224 
p_wr™e_addr
 = (
ušt32_t
*)(
p_·ge
->
p_addr
 +…_·ge->
wr™e_off£t
);

1227 
p_İ
->
wr™e
.
¡•
)

1229 
FDS_OP_WRITE_FIND_RECORD
:

1234 
desc
.
p_»cÜd
 = 
NULL
;

1235 
desc
.
»cÜd_id
 = 
p_İ
->
wr™e
.
»cÜd_to_d–‘e
;

1237 ià(!
	`»cÜd_fšd_by_desc
(&
desc
, &
·ge
))

1239  
FDS_ERR_NOT_FOUND
;

1245 
FDS_OP_WRITE_HEADER_BEGIN
:

1246 
»t
 = 
	`»cÜd_h—d”_wr™e_begš
(
p_İ
, 
p_wr™e_addr
);

1249 
FDS_OP_WRITE_RECORD_ID
:

1250 
»t
 = 
	`»cÜd_h—d”_wr™e_id
(
p_İ
, 
p_wr™e_addr
);

1253 
FDS_OP_WRITE_DATA
:

1254 
»t
 = 
	`»cÜd_wr™e_d©a
(
p_İ
, 
p_wr™e_addr
);

1257 
FDS_OP_WRITE_HEADER_FINALIZE
:

1258 
»t
 = 
	`»cÜd_h—d”_wr™e_fš®ize
(
p_İ
, 
p_wr™e_addr
);

1261 
FDS_OP_WRITE_FLAG_DIRTY
:

1262 
p_İ
->
wr™e
.
¡•
 = 
FDS_OP_WRITE_DONE
;

1263 
»t
 = 
	`»cÜd_h—d”_æag_dœty
((
ušt32_t
*)
desc
.
p_»cÜd
, 
·ge
);

1266 
FDS_OP_WRITE_DONE
:

1267 
»t
 = 
FDS_OP_COMPLETED
;

1269 #ià(
FDS_CRC_CHECK_ON_WRITE
)

1270 ià(!
	`üc_v”ify_sucûss
(
p_İ
->
wr™e
.
h—d”
.
üc16
,

1271 
p_İ
->
wr™e
.
h—d”
.
Ëngth_wÜds
,

1272 
p_wr™e_addr
))

1274 
»t
 = 
FDS_ERR_CRC_CHECK_FAILED
;

1280 
»t
 = 
FDS_ERR_INTERNAL
;

1286 ià(
»t
 !ğ
FDS_OP_EXECUTING
)

1289 
	`·ge_off£ts_upd©e
(
p_·ge
, 
p_İ
);

1292  
»t
;

1293 
	}
}

1296 
»t_code_t
 
	$d–‘e_execu‹
(
ušt32_t
 
´ev_»t
, 
fds_İ_t
 * cÚ¡ 
p_İ
)

1298 
»t_code_t
 
»t
;

1300 ià(
´ev_»t
 !ğ
NRF_SUCCESS
)

1302  
FDS_ERR_OPERATION_TIMEOUT
;

1305 
p_İ
->
d–
.
¡•
)

1307 
FDS_OP_DEL_RECORD_FLAG_DIRTY
:

1308 
p_İ
->
d–
.
¡•
 = 
FDS_OP_DEL_DONE
;

1309 
»t
 = 
	`»cÜd_fšd_ªd_d–‘e
(
p_İ
);

1312 
FDS_OP_DEL_FILE_FLAG_DIRTY
:

1313 
»t
 = 
	`fe_fšd_ªd_d–‘e
(
p_İ
);

1314 ià(
»t
 =ğ
FDS_ERR_NOT_FOUND
)

1318 
»t
 = 
FDS_OP_COMPLETED
;

1322 
FDS_OP_DEL_DONE
:

1323 
»t
 = 
FDS_OP_COMPLETED
;

1327 
»t
 = 
FDS_ERR_INTERNAL
;

1331  
»t
;

1332 
	}
}

1335 
»t_code_t
 
	$gc_execu‹
(
ušt32_t
 
´ev_»t
)

1337 
»t_code_t
 
»t
;

1339 ià(
´ev_»t
 !ğ
NRF_SUCCESS
)

1341  
FDS_ERR_OPERATION_TIMEOUT
;

1344 ià(
m_gc
.
»sume
)

1346 
m_gc
.
»sume
 = 
çl£
;

1350 
	`gc_¡©e_advªû
();

1353 
m_gc
.
¡©e
)

1355 
GC_NEXT_PAGE
:

1356 
»t
 = 
	`gc_Ãxt_·ge
();

1359 
GC_FIND_NEXT_RECORD
:

1360 
»t
 = 
	`gc_»cÜd_fšd_Ãxt
();

1363 
GC_COPY_RECORD
:

1364 
»t
 = 
	`gc_»cÜd_cİy
();

1367 
GC_ERASE_PAGE
:

1368 
»t
 = 
	`gc_·ge_”a£
();

1371 
GC_PROMOTE_SWAP
:

1372 
»t
 = 
	`gc_sw­_´omÙe
();

1375 
GC_TAG_NEW_SWAP
:

1376 
»t
 = 
	`gc_g_Ãw_sw­
();

1381 
»t
 = 
FDS_ERR_INTERNAL
;

1386  
»t
;

1387 
	}
}

1390 
	$queue_´oûss
(
»t_code_t
 
»suÉ
)

1392 
fds_İ_t
 * 
m_p_cur_İ
;

1393 
Äf_©fifo_™em_g‘_t
 
m_ig‘_ùx
;

1395 
Œue
)

1397 ià(
m_p_cur_İ
 =ğ
NULL
)

1400 
m_p_cur_İ
 = 
	`queue_lßd
(&
m_ig‘_ùx
);

1410 
	`ASSERT
(
m_p_cur_İ
 !ğ
NULL
);

1412 
m_p_cur_İ
->
İ_code
)

1414 
FDS_OP_INIT
:

1415 
»suÉ
 = 
	`š™_execu‹
ÔesuÉ, 
m_p_cur_İ
);

1418 
FDS_OP_WRITE
:

1419 
FDS_OP_UPDATE
:

1420 
»suÉ
 = 
	`wr™e_execu‹
ÔesuÉ, 
m_p_cur_İ
);

1423 
FDS_OP_DEL_RECORD
:

1424 
FDS_OP_DEL_FILE
:

1425 
»suÉ
 = 
	`d–‘e_execu‹
ÔesuÉ, 
m_p_cur_İ
);

1428 
FDS_OP_GC
:

1429 
»suÉ
 = 
	`gc_execu‹
(result);

1433 
»suÉ
 = 
FDS_ERR_INTERNAL
;

1437 ià(
»suÉ
 =ğ
FDS_OP_EXECUTING
)

1448 
fds_evt_t
 
evt
 =

1455 .
»suÉ
 = (»suÉ =ğ
FDS_OP_COMPLETED
è? 
FDS_SUCCESS
 :„esult,

1458 
	`ev’t_´•¬e
(
m_p_cur_İ
, &
evt
);

1459 
	`ev’t_£nd
(&
evt
);

1463 
m_p_cur_İ
 = 
NULL
;

1467 
»suÉ
 = 
NRF_SUCCESS
;

1470 
	`queue_ä“
(&
m_ig‘_ùx
);

1472 ià(!
	`queue_has_Ãxt
())

1478 
	}
}

1481 
	$queue_¡¬t
()

1483 ià(!
	`Äf_©omic_u32_ãtch_add
(&
m_queued_İ_út
, 1))

1485 
	`queue_´oûss
(
NRF_SUCCESS
);

1487 
	}
}

1490 
	$fs_ev’t_hªdËr
(
Äf_f¡Üage_evt_t
 * 
p_evt
)

1492 
	`queue_´oûss
(
p_evt
->
»suÉ
);

1493 
	}
}

1497 
»t_code_t
 
	$wr™e_’queue
(
fds_»cÜd_desc_t
 * cÚ¡ 
p_desc
,

1498 
fds_»cÜd_t
 cÚ¡ * cÚ¡ 
p_»cÜd
,

1499 
fds_»£rve_tok’_t
 cÚ¡ * cÚ¡ 
p_tok
,

1500 
fds_İ_code_t
 
İ_code
)

1502 
»t_code_t
 
»t
;

1503 
ušt16_t
 
·ge
;

1504 
ušt16_t
 
üc
 = 0;

1505 
ušt16_t
 
Ëngth_wÜds
 = 0;

1506 
fds_İ_t
 * 
p_İ
;

1507 
Äf_©fifo_™em_put_t
 
ut_ùx
;

1509 ià(!
m_æags
.
š™Ÿlized
)

1511  
FDS_ERR_NOT_INITIALIZED
;

1514 ià(
p_»cÜd
 =ğ
NULL
)

1516  
FDS_ERR_NULL_ARG
;

1519 ià((
p_»cÜd
->
fe_id
 =ğ
FDS_FILE_ID_INVALID
) ||

1520 (
p_»cÜd
->
key
 =ğ
FDS_RECORD_KEY_DIRTY
))

1522  
FDS_ERR_INVALID_ARG
;

1525 ià(!
	`is_wÜd_®igÃd
(
p_»cÜd
->
d©a
.
p_d©a
))

1527  
FDS_ERR_UNALIGNED_ADDR
;

1531 ià(
p_tok
 =ğ
NULL
)

1534 
Ëngth_wÜds
 = 
p_»cÜd
->
d©a
.length_words;

1535 
»t
 = 
	`wr™e_¥aû_»£rve
(
Ëngth_wÜds
, &
·ge
);

1537 ià(
»t
 !ğ
FDS_SUCCESS
)

1541  
»t
;

1546 
·ge
 = 
p_tok
->page;

1547 
Ëngth_wÜds
 = 
p_tok
->length_words;

1551 
p_İ
 = 
	`queue_buf_g‘
(&
ut_ùx
);

1552 ià(
p_İ
 =ğ
NULL
)

1554 
	`CRITICAL_SECTION_ENTER
();

1555 
	`wr™e_¥aû_ä“
(
Ëngth_wÜds
, 
·ge
);

1556 
	`CRITICAL_SECTION_EXIT
();

1557  
FDS_ERR_NO_SPACE_IN_QUEUES
;

1561 
p_İ
->
İ_code
 = op_code;

1562 
p_İ
->
wr™e
.
¡•
 = 
FDS_OP_WRITE_HEADER_BEGIN
;

1563 
p_İ
->
wr™e
.
·ge
 =…age;

1564 
p_İ
->
wr™e
.
p_d©a
 = 
p_»cÜd
->
d©a
.p_data;

1565 
p_İ
->
wr™e
.
h—d”
.
»cÜd_id
 = 
	`»cÜd_id_Ãw
();

1566 
p_İ
->
wr™e
.
h—d”
.
fe_id
 = 
p_»cÜd
->file_id;

1567 
p_İ
->
wr™e
.
h—d”
.
»cÜd_key
 = 
p_»cÜd
->
key
;

1568 
p_İ
->
wr™e
.
h—d”
.
Ëngth_wÜds
 =†ength_words;

1570 ià(
İ_code
 =ğ
FDS_OP_UPDATE
)

1572 
p_İ
->
wr™e
.
¡•
 = 
FDS_OP_WRITE_FIND_RECORD
;

1574 
p_İ
->
wr™e
.
»cÜd_to_d–‘e
 = 
p_desc
->
»cÜd_id
;

1577 #ià(
FDS_CRC_CHECK_ON_READ
)

1580 
üc
 = 
	`üc16_compu‹
((
ušt8_t
*)&
p_İ
->
wr™e
.
h—d”
, 6, 
NULL
);

1581 
üc
 = 
	`üc16_compu‹
((
ušt8_t
*)&
p_İ
->
wr™e
.
h—d”
.
»cÜd_id
, 4, &crc);

1584 
üc
 = 
	`üc16_compu‹
((
ušt8_t
*)
p_»cÜd
->
d©a
.
p_d©a
,

1585 
p_»cÜd
->
d©a
.
Ëngth_wÜds
 * (
ušt32_t
), &
üc
);

1588 
p_İ
->
wr™e
.
h—d”
.
üc16
 = 
üc
;

1590 
	`queue_buf_¡Üe
(&
ut_ùx
);

1593 ià(
p_desc
 !ğ
NULL
)

1595 
p_desc
->
p_»cÜd
 = 
NULL
;

1597 
p_desc
->
»cÜd_id
 = 
p_İ
->
wr™e
.
h—d”
.record_id;

1598 
p_desc
->
»cÜd_is_İ’
 = 
çl£
;

1599 
p_desc
->
gc_run_couÁ
 = 
m_gc
.
run_couÁ
;

1603 
	`queue_¡¬t
();

1605  
FDS_SUCCESS
;

1606 
	}
}

1609 
»t_code_t
 
	$fds_»gi¡”
(
fds_cb_t
 
cb
)

1611 
»t_code_t
 
»t
;

1613 ià(
m_u£rs
 =ğ
FDS_MAX_USERS
)

1615 
»t
 = 
FDS_ERR_USER_LIMIT_REACHED
;

1619 
m_cb_bË
[
m_u£rs
] = 
cb
;

1620 (è
	`Äf_©omic_u32_add
(&
m_u£rs
, 1);

1622 
»t
 = 
FDS_SUCCESS
;

1625  
»t
;

1626 
	}
}

1629 
ušt32_t
 
	$æash_’d_addr
()

1631 
ušt32_t
 cÚ¡ 
boÙlßd”_addr
 = 
NRF_UICR
->
NRFFW
[0];

1632 
ušt32_t
 cÚ¡ 
·ge_sz
 = 
NRF_FICR
->
CODEPAGESIZE
;

1633 #iâdeà
NRF52810_XXAA


1634 
ušt32_t
 cÚ¡ 
code_sz
 = 
NRF_FICR
->
CODESIZE
;

1637 
ušt32_t
 cÚ¡ 
code_sz
 = 48;

1640  (
boÙlßd”_addr
 !ğ0xFFFFFFFFè? boÙlßd”_add¸: (
code_sz
 * 
·ge_sz
);

1641 
	}
}

1644 
	$æash_bounds_£t
()

1646 
ušt32_t
 
æash_size
 = (
FDS_PHY_PAGES
 * 
FDS_PHY_PAGE_SIZE
 * (uint32_t));

1647 
m_fs
.
’d_addr
 = 
	`æash_’d_addr
();

1648 
m_fs
.
¡¬t_addr
 = m_fs.
’d_addr
 - 
æash_size
;

1649 
	}
}

1652 
»t_code_t
 
	$æash_subsy¡em_š™
()

1654 
	`æash_bounds_£t
();

1656 #ià (
FDS_BACKEND
 =ğ
NRF_FSTORAGE_SD
)

1657  
	`Äf_f¡Üage_š™
(&
m_fs
, &
Äf_f¡Üage_sd
, 
NULL
);

1658 #–ià(
FDS_BACKEND
 =ğ
NRF_FSTORAGE_NVMC
)

1659  
	`Äf_f¡Üage_š™
(&
m_fs
, &
Äf_f¡Üage_nvmc
, 
NULL
);

1661 #”rÜ 
Inv®id
 
FDS_BACKEND
.

1663 
	}
}

1666 
	$queue_š™
()

1668 (è
	`NRF_ATFIFO_INIT
(
m_queue
);

1669 
	}
}

1672 
»t_code_t
 
	$fds_š™
()

1674 
»t_code_t
 
»t
;

1675 
fds_evt_t
 cÚ¡ 
evt_sucûss
 =

1677 .
id
 = 
FDS_EVT_INIT
,

1678 .
»suÉ
 = 
FDS_SUCCESS
,

1681 ià(
m_æags
.
š™Ÿlized
)

1684 
	`ev’t_£nd
(&
evt_sucûss
);

1685  
FDS_SUCCESS
;

1688 ià(
	`Äf_©omic_æag_£t_ãtch
(&
m_æags
.
š™Ÿlizšg
))

1691  
FDS_SUCCESS
;

1696 
»t
 = 
	`æash_subsy¡em_š™
();

1697 ià(
»t
 !ğ
NRF_SUCCESS
)

1699  
»t
;

1702 
	`queue_š™
();

1707 
fds_š™_İts_t
 
š™_İts
 = 
	`·ges_š™
();

1709 
š™_İts
)

1711 
NO_PAGES
:

1712 
NO_SWAP
:

1713  
FDS_ERR_NO_PAGES
;

1715 
ALREADY_INSTALLED
:

1718 
m_æags
.
š™Ÿlized
 = 
Œue
;

1719 
m_æags
.
š™Ÿlizšg
 = 
çl£
;

1720 
	`ev’t_£nd
(&
evt_sucûss
);

1721  
FDS_SUCCESS
;

1730 
Äf_©fifo_™em_put_t
 
ut_ùx
;

1732 
fds_İ_t
 * 
p_İ
 = 
	`queue_buf_g‘
(&
ut_ùx
);

1733 ià(
p_İ
 =ğ
NULL
)

1735  
FDS_ERR_NO_SPACE_IN_QUEUES
;

1738 
p_İ
->
İ_code
 = 
FDS_OP_INIT
;

1740 
š™_İts
)

1742 
FRESH_INSTALL
:

1743 
TAG_SWAP
:

1744 
p_İ
->
š™
.
¡•
 = 
FDS_OP_INIT_TAG_SWAP
;

1747 
PROMOTE_SWAP
:

1748 
PROMOTE_SWAP_INST
:

1749 
p_İ
->
š™
.
¡•
 = 
FDS_OP_INIT_PROMOTE_SWAP
;

1752 
DISCARD_SWAP
:

1753 
p_İ
->
š™
.
¡•
 = 
FDS_OP_INIT_ERASE_SWAP
;

1756 
TAG_DATA
:

1757 
TAG_DATA_INST
:

1758 
p_İ
->
š™
.
¡•
 = 
FDS_OP_INIT_TAG_DATA
;

1766 
	`queue_buf_¡Üe
(&
ut_ùx
);

1767 
	`queue_¡¬t
();

1769  
FDS_SUCCESS
;

1770 
	}
}

1773 
»t_code_t
 
	$fds_»cÜd_İ’
(
fds_»cÜd_desc_t
 * cÚ¡ 
p_desc
,

1774 
fds_æash_»cÜd_t
 * cÚ¡ 
p_æash_»c
)

1776 
ušt16_t
 
·ge
;

1778 ià((
p_desc
 =ğ
NULL
è|| (
p_æash_»c
 == NULL))

1780  
FDS_ERR_NULL_ARG
;

1784 ià(
	`»cÜd_fšd_by_desc
(
p_desc
, &
·ge
))

1786 
fds_h—d”_t
 cÚ¡ * cÚ¡ 
p_h—d”
 = (fds_h—d”_t*)
p_desc
->
p_»cÜd
;

1788 #ià(
FDS_CRC_CHECK_ON_READ
)

1789 ià(!
	`üc_v”ify_sucûss
(
p_h—d”
->
üc16
,

1790 
p_h—d”
->
Ëngth_wÜds
,

1791 
p_desc
->
p_»cÜd
))

1793  
FDS_ERR_CRC_CHECK_FAILED
;

1797 (è
	`Äf_©omic_u32_add
(&
m_·ges
[
·ge
].
»cÜds_İ’
, 1);

1800 
p_æash_»c
->
p_h—d”
 =…_header;

1801 
p_æash_»c
->
p_d©a
 = (
p_desc
->
p_»cÜd
 + 
FDS_HEADER_SIZE
);

1804 
p_desc
->
»cÜd_is_İ’
 = 
Œue
;

1806  
FDS_SUCCESS
;

1811  
FDS_ERR_NOT_FOUND
;

1812 
	}
}

1815 
»t_code_t
 
	$fds_»cÜd_şo£
(
fds_»cÜd_desc_t
 * cÚ¡ 
p_desc
)

1817 
»t_code_t
 
»t
;

1818 
ušt16_t
 
·ge
;

1820 ià(
p_desc
 =ğ
NULL
)

1822  
FDS_ERR_NULL_ARG
;

1825 ià(
	`»cÜd_fšd_by_desc
((
fds_»cÜd_desc_t
*)
p_desc
, &
·ge
))

1827 
	`CRITICAL_SECTION_ENTER
();

1828 ià((
m_·ges
[
·ge
].
»cÜds_İ’
 > 0è&& (
p_desc
->
»cÜd_is_İ’
))

1831 
m_·ges
[
·ge
].
»cÜds_İ’
--;

1832 
p_desc
->
»cÜd_is_İ’
 = 
çl£
;

1834 
»t
 = 
FDS_SUCCESS
;

1838 
»t
 = 
FDS_ERR_NO_OPEN_RECORDS
;

1840 
	`CRITICAL_SECTION_EXIT
();

1844 
»t
 = 
FDS_ERR_NOT_FOUND
;

1847  
»t
;

1848 
	}
}

1851 
»t_code_t
 
	$fds_»£rve
(
fds_»£rve_tok’_t
 * cÚ¡ 
p_tok
, 
ušt16_t
 
Ëngth_wÜds
)

1853 
»t_code_t
 
»t
;

1854 
ušt16_t
 
·ge
;

1856 ià(!
m_æags
.
š™Ÿlized
)

1858  
FDS_ERR_NOT_INITIALIZED
;

1861 ià(
p_tok
 =ğ
NULL
)

1863  
FDS_ERR_NULL_ARG
;

1866 
»t
 = 
	`wr™e_¥aû_»£rve
(
Ëngth_wÜds
, &
·ge
);

1868 ià(
»t
 =ğ
FDS_SUCCESS
)

1870 
p_tok
->
·ge
 =…age;

1871 
p_tok
->
Ëngth_wÜds
 =†ength_words;

1874  
»t
;

1875 
	}
}

1878 
»t_code_t
 
	$fds_»£rve_ÿnûl
(
fds_»£rve_tok’_t
 * cÚ¡ 
p_tok
)

1880 
»t_code_t
 
»t
;

1882 ià(!
m_æags
.
š™Ÿlized
)

1884  
FDS_ERR_NOT_INITIALIZED
;

1887 ià(
p_tok
 =ğ
NULL
)

1889  
FDS_ERR_NULL_ARG
;

1892 ià(
p_tok
->
·ge
 > 
FDS_DATA_PAGES
)

1895  
FDS_ERR_INVALID_ARG
;

1898 
fds_·ge_t
 cÚ¡ * cÚ¡ 
p_·ge
 = &
m_·ges
[
p_tok
->
·ge
];

1900 
	`CRITICAL_SECTION_ENTER
();

1901 ià((
FDS_HEADER_SIZE
 + 
p_tok
->
Ëngth_wÜds
è<ğ
p_·ge
->
wÜds_»£rved
)

1904 
	`wr™e_¥aû_ä“
(
p_tok
->
Ëngth_wÜds
,…_tok->
·ge
);

1907 
p_tok
->
·ge
 = 0;

1908 
p_tok
->
Ëngth_wÜds
 = 0;

1909 
»t
 = 
FDS_SUCCESS
;

1915 
»t
 = 
FDS_ERR_INVALID_ARG
;

1917 
	`CRITICAL_SECTION_EXIT
();

1919  
»t
;

1920 
	}
}

1923 
»t_code_t
 
	$fds_»cÜd_wr™e
(
fds_»cÜd_desc_t
 * cÚ¡ 
p_desc
,

1924 
fds_»cÜd_t
 cÚ¡ * cÚ¡ 
p_»cÜd
)

1926  
	`wr™e_’queue
(
p_desc
, 
p_»cÜd
, 
NULL
, 
FDS_OP_WRITE
);

1927 
	}
}

1930 
»t_code_t
 
	$fds_»cÜd_wr™e_»£rved
(
fds_»cÜd_desc_t
 * cÚ¡ 
p_desc
,

1931 
fds_»cÜd_t
 cÚ¡ * cÚ¡ 
p_»cÜd
,

1932 
fds_»£rve_tok’_t
 cÚ¡ * cÚ¡ 
p_tok
)

1935 ià(
p_tok
 =ğ
NULL
)

1937  
FDS_ERR_NULL_ARG
;

1940  
	`wr™e_’queue
(
p_desc
, 
p_»cÜd
, 
p_tok
, 
FDS_OP_WRITE
);

1941 
	}
}

1944 
»t_code_t
 
	$fds_»cÜd_upd©e
(
fds_»cÜd_desc_t
 * cÚ¡ 
p_desc
,

1945 
fds_»cÜd_t
 cÚ¡ * cÚ¡ 
p_»cÜd
)

1948 ià(
p_desc
 =ğ
NULL
)

1950  
FDS_ERR_NULL_ARG
;

1953  
	`wr™e_’queue
(
p_desc
, 
p_»cÜd
, 
NULL
, 
FDS_OP_UPDATE
);

1954 
	}
}

1957 
»t_code_t
 
	$fds_»cÜd_d–‘e
(
fds_»cÜd_desc_t
 * cÚ¡ 
p_desc
)

1959 
fds_İ_t
 * 
p_İ
;

1960 
Äf_©fifo_™em_put_t
 
ut_ùx
;

1962 ià(!
m_æags
.
š™Ÿlized
)

1964  
FDS_ERR_NOT_INITIALIZED
;

1967 ià(
p_desc
 =ğ
NULL
)

1969  
FDS_ERR_NULL_ARG
;

1972 
p_İ
 = 
	`queue_buf_g‘
(&
ut_ùx
);

1973 ià(
p_İ
 =ğ
NULL
)

1975  
FDS_ERR_NO_SPACE_IN_QUEUES
;

1978 
p_İ
->
İ_code
 = 
FDS_OP_DEL_RECORD
;

1979 
p_İ
->
d–
.
¡•
 = 
FDS_OP_DEL_RECORD_FLAG_DIRTY
;

1980 
p_İ
->
d–
.
»cÜd_to_d–‘e
 = 
p_desc
->
»cÜd_id
;

1982 
	`queue_buf_¡Üe
(&
ut_ùx
);

1983 
	`queue_¡¬t
();

1985  
FDS_SUCCESS
;

1986 
	}
}

1989 
»t_code_t
 
	$fds_fe_d–‘e
(
ušt16_t
 
fe_id
)

1991 
fds_İ_t
 * 
p_İ
;

1992 
Äf_©fifo_™em_put_t
 
ut_ùx
;

1994 ià(!
m_æags
.
š™Ÿlized
)

1996  
FDS_ERR_NOT_INITIALIZED
;

1999 ià(
fe_id
 =ğ
FDS_FILE_ID_INVALID
)

2001  
FDS_ERR_INVALID_ARG
;

2004 
p_İ
 = 
	`queue_buf_g‘
(&
ut_ùx
);

2005 ià(
p_İ
 =ğ
NULL
)

2007  
FDS_ERR_NO_SPACE_IN_QUEUES
;

2010 
p_İ
->
İ_code
 = 
FDS_OP_DEL_FILE
;

2011 
p_İ
->
d–
.
¡•
 = 
FDS_OP_DEL_FILE_FLAG_DIRTY
;

2012 
p_İ
->
d–
.
fe_id
 = file_id;

2014 
	`queue_buf_¡Üe
(&
ut_ùx
);

2015 
	`queue_¡¬t
();

2017  
FDS_SUCCESS
;

2018 
	}
}

2021 
»t_code_t
 
	$fds_gc
()

2023 
fds_İ_t
 * 
p_İ
;

2024 
Äf_©fifo_™em_put_t
 
ut_ùx
;

2026 ià(!
m_æags
.
š™Ÿlized
)

2028  
FDS_ERR_NOT_INITIALIZED
;

2031 
p_İ
 = 
	`queue_buf_g‘
(&
ut_ùx
);

2032 ià(
p_İ
 =ğ
NULL
)

2034  
FDS_ERR_NO_SPACE_IN_QUEUES
;

2037 
p_İ
->
İ_code
 = 
FDS_OP_GC
;

2039 
	`queue_buf_¡Üe
(&
ut_ùx
);

2041 ià(
m_gc
.
¡©e
 !ğ
GC_BEGIN
)

2044 
m_gc
.
»sume
 = 
Œue
;

2047 
	`queue_¡¬t
();

2049  
FDS_SUCCESS
;

2050 
	}
}

2053 
»t_code_t
 
	$fds_»cÜd_™”©e
(
fds_»cÜd_desc_t
 * cÚ¡ 
p_desc
,

2054 
fds_fšd_tok’_t
 * cÚ¡ 
p_tok’
)

2056  
	`»cÜd_fšd
(
NULL
, NULL, 
p_desc
, 
p_tok’
);

2057 
	}
}

2060 
»t_code_t
 
	$fds_»cÜd_fšd
(
ušt16_t
 
fe_id
,

2061 
ušt16_t
 
»cÜd_key
,

2062 
fds_»cÜd_desc_t
 * cÚ¡ 
p_desc
,

2063 
fds_fšd_tok’_t
 * cÚ¡ 
p_tok’
)

2065  
	`»cÜd_fšd
(&
fe_id
, &
»cÜd_key
, 
p_desc
, 
p_tok’
);

2066 
	}
}

2069 
»t_code_t
 
	$fds_»cÜd_fšd_by_key
(
ušt16_t
 
»cÜd_key
,

2070 
fds_»cÜd_desc_t
 * cÚ¡ 
p_desc
,

2071 
fds_fšd_tok’_t
 * cÚ¡ 
p_tok’
)

2073  
	`»cÜd_fšd
(
NULL
, &
»cÜd_key
, 
p_desc
, 
p_tok’
);

2074 
	}
}

2077 
»t_code_t
 
	$fds_»cÜd_fšd_š_fe
(
ušt16_t
 
fe_id
,

2078 
fds_»cÜd_desc_t
 * cÚ¡ 
p_desc
,

2079 
fds_fšd_tok’_t
 * cÚ¡ 
p_tok’
)

2081  
	`»cÜd_fšd
(&
fe_id
, 
NULL
, 
p_desc
, 
p_tok’
);

2082 
	}
}

2085 
»t_code_t
 
	$fds_desütÜ_äom_»c_id
(
fds_»cÜd_desc_t
 * cÚ¡ 
p_desc
,

2086 
ušt32_t
 
»cÜd_id
)

2088 ià(
p_desc
 =ğ
NULL
)

2090  
FDS_ERR_NULL_ARG
;

2094 
	`mem£t
(
p_desc
, 0x00, (
fds_»cÜd_desc_t
));

2095 
p_desc
->
»cÜd_id
 =„ecord_id;

2097  
FDS_SUCCESS
;

2098 
	}
}

2101 
»t_code_t
 
	$fds_»cÜd_id_äom_desc
(
fds_»cÜd_desc_t
 cÚ¡ * cÚ¡ 
p_desc
,

2102 
ušt32_t
 * cÚ¡ 
p_»cÜd_id
)

2104 ià((
p_desc
 =ğ
NULL
è|| (
p_»cÜd_id
 == NULL))

2106  
FDS_ERR_NULL_ARG
;

2109 *
p_»cÜd_id
 = 
p_desc
->
»cÜd_id
;

2111  
FDS_SUCCESS
;

2112 
	}
}

2115 
»t_code_t
 
	$fds_¡©
(
fds_¡©_t
 * cÚ¡ 
p_¡©
)

2117 
ušt16_t
 cÚ¡ 
wÜds_š_·ge
 = 
FDS_PAGE_SIZE
;

2119 
ušt16_t
 
cÚtig_wÜds
 = 0;

2121 ià(!
m_æags
.
š™Ÿlized
)

2123  
FDS_ERR_NOT_INITIALIZED
;

2126 ià(
p_¡©
 =ğ
NULL
)

2128  
FDS_ERR_NULL_ARG
;

2131 
	`mem£t
(
p_¡©
, 0x00, (
fds_¡©_t
));

2133 
p_¡©
->
·ges_avaabË
 = 
FDS_VIRTUAL_PAGES
;

2135 
ušt16_t
 
·ge
 = 0;…ag< 
FDS_DATA_PAGES
;…age++)

2137 
ušt16_t
 cÚ¡ 
wÜds_u£d
 = 
m_·ges
[
·ge
].
wr™e_off£t
 + m_·ges[·ge].
wÜds_»£rved
;

2139 ià(
	`·ge_id’tify
(
m_·ges
[
·ge
].
p_addr
è=ğ
FDS_PAGE_UNDEFINED
)

2141 
p_¡©
->
·ges_avaabË
--;

2144 
p_¡©
->
İ’_»cÜds
 +ğ
m_·ges
[
·ge
].
»cÜds_İ’
;

2145 
p_¡©
->
wÜds_»£rved
 +ğ
m_·ges
[
·ge
].words_reserved;

2146 
p_¡©
->
wÜds_u£d
 += words_used;

2148 
cÚtig_wÜds
 = (
wÜds_š_·ge
 - 
wÜds_u£d
);

2149 ià(
cÚtig_wÜds
 > 
p_¡©
->
Ïrge¡_cÚtig
)

2151 
p_¡©
->
Ïrge¡_cÚtig
 = 
cÚtig_wÜds
;

2154 
	`»cÜds_¡©
(
·ge
,

2155 &
p_¡©
->
v®id_»cÜds
,

2156 &
p_¡©
->
dœty_»cÜds
,

2157 &
p_¡©
->
ä“abË_wÜds
,

2158 &
p_¡©
->
cÜru±iÚ
);

2161  
FDS_SUCCESS
;

2162 
	}
}

	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\libraries\fstorage\nrf_fstorage.c

40 
	~"sdk_cÚfig.h
"

42 #ià
NRF_FSTORAGE_ENABLED


44 
	~"Äf_f¡Üage.h
"

45 
	~<¡ddef.h
>

46 
	~<¡dšt.h
>

47 
	~"sdk_”rÜs.h
"

48 
	~"sdk_maüos.h
"

49 
	~"Äf_£ùiÚ.h
"

51 
	#NRF_LOG_MODULE_NAME
 
Äf_f¡Üage


	)

52 
	~"Äf_log.h
"

53 
NRF_LOG_MODULE_REGISTER
();

57 
NRF_SECTION_DEF
(
fs_d©a
, 
Äf_f¡Üage_t
);

72 
	#NRF_FSTORAGE_PARAM_CHECK
(
_cÚd
, 
_”r
) \

73 
	`NRF_PARAM_CHECK
(
NRF_FSTORAGE
, 
_cÚd
, 
_”r
, 
NRF_LOG_ERROR
)

	)

76 
boŞ
 
addr_is_®igÃd32
(
ušt32_t
 
addr
);

77 
boŞ
 
addr_is_·ge_®igÃd
(
Äf_f¡Üage_t
 cÚ¡ * 
p_fs
, 
ušt32_t
 
addr
);

78 
boŞ
 
addr_is_w™hš_bounds
(
Äf_f¡Üage_t
 cÚ¡ * 
p_fs
, 
ušt32_t
 
addr
, ušt32_ˆ
Ën
);

81 
»t_code_t
 
	$Äf_f¡Üage_š™
(
Äf_f¡Üage_t
 * 
p_fs
,

82 
Äf_f¡Üage_­i_t
 * 
p_­i
,

83 * 
p_·¿m
)

85 
	`NRF_FSTORAGE_PARAM_CHECK
(
p_fs
, 
NRF_ERROR_NULL
);

86 
	`NRF_FSTORAGE_PARAM_CHECK
(
p_­i
, 
NRF_ERROR_NULL
);

88 
p_fs
->
p_­i
 =…_api;

90  (
p_fs
->
p_­i
)->
	`š™
Õ_fs, 
p_·¿m
);

91 
	}
}

94 
»t_code_t
 
	$Äf_f¡Üage_unš™
(
Äf_f¡Üage_t
 * 
p_fs
,

95 * 
p_·¿m
)

97 
»t_code_t
 
rc
;

99 
	`NRF_FSTORAGE_PARAM_CHECK
(
p_fs
, 
NRF_ERROR_NULL
);

100 
	`NRF_FSTORAGE_PARAM_CHECK
(
p_fs
->
p_­i
, 
NRF_ERROR_INVALID_STATE
);

102 
rc
 = (
p_fs
->
p_­i
)->
	`unš™
Õ_fs, 
p_·¿m
);

105 
p_fs
->
p_­i
 = 
NULL
;

106 
p_fs
->
p_æash_šfo
 = 
NULL
;

108  
rc
;

109 
	}
}

112 
»t_code_t
 
	$Äf_f¡Üage_»ad
(
Äf_f¡Üage_t
 cÚ¡ * 
p_fs
,

113 
ušt32_t
 
¤c
,

114 * 
p_de¡
,

115 
ušt32_t
 
Ën
)

117 
	`NRF_FSTORAGE_PARAM_CHECK
(
p_fs
, 
NRF_ERROR_NULL
);

118 
	`NRF_FSTORAGE_PARAM_CHECK
(
p_de¡
, 
NRF_ERROR_NULL
);

119 
	`NRF_FSTORAGE_PARAM_CHECK
(
p_fs
->
p_­i
, 
NRF_ERROR_INVALID_STATE
);

120 
	`NRF_FSTORAGE_PARAM_CHECK
(
Ën
, 
NRF_ERROR_INVALID_LENGTH
);

123 
	`NRF_FSTORAGE_PARAM_CHECK
(
	`addr_is_®igÃd32
(
¤c
), 
NRF_ERROR_INVALID_ADDR
);

124 
	`NRF_FSTORAGE_PARAM_CHECK
(
	`addr_is_w™hš_bounds
(
p_fs
, 
¤c
, 
Ën
), 
NRF_ERROR_INVALID_ADDR
);

126  (
p_fs
->
p_­i
)->
	`»ad
Õ_fs, 
¤c
, 
p_de¡
, 
Ën
);

127 
	}
}

130 
»t_code_t
 
	$Äf_f¡Üage_wr™e
(
Äf_f¡Üage_t
 cÚ¡ * 
p_fs
,

131 
ušt32_t
 
de¡
,

132 cÚ¡ * 
p_¤c
,

133 
ušt32_t
 
Ën
,

134 * 
p_cÚ‹xt
)

136 
	`NRF_FSTORAGE_PARAM_CHECK
(
p_fs
, 
NRF_ERROR_NULL
);

137 
	`NRF_FSTORAGE_PARAM_CHECK
(
p_¤c
, 
NRF_ERROR_NULL
);

138 
	`NRF_FSTORAGE_PARAM_CHECK
(
p_fs
->
p_­i
, 
NRF_ERROR_INVALID_STATE
);

139 
	`NRF_FSTORAGE_PARAM_CHECK
(
Ën
, 
NRF_ERROR_INVALID_LENGTH
);

142 
	`NRF_FSTORAGE_PARAM_CHECK
(!(
Ën
 % 
p_fs
->
p_æash_šfo
->
´og¿m_un™
), 
NRF_ERROR_INVALID_LENGTH
);

145 
	`NRF_FSTORAGE_PARAM_CHECK
(
	`addr_is_®igÃd32
(
de¡
), 
NRF_ERROR_INVALID_ADDR
);

146 
	`NRF_FSTORAGE_PARAM_CHECK
(
	`addr_is_®igÃd32
((
ušt32_t
)
p_¤c
), 
NRF_ERROR_INVALID_ADDR
);

147 
	`NRF_FSTORAGE_PARAM_CHECK
(
	`addr_is_w™hš_bounds
(
p_fs
, 
de¡
, 
Ën
), 
NRF_ERROR_INVALID_ADDR
);

149  (
p_fs
->
p_­i
)->
	`wr™e
Õ_fs, 
de¡
, 
p_¤c
, 
Ën
, 
p_cÚ‹xt
);

150 
	}
}

153 
»t_code_t
 
	$Äf_f¡Üage_”a£
(
Äf_f¡Üage_t
 cÚ¡ * 
p_fs
,

154 
ušt32_t
 
·ge_addr
,

155 
ušt32_t
 
Ën
,

156 * 
p_cÚ‹xt
)

158 
	`NRF_FSTORAGE_PARAM_CHECK
(
p_fs
, 
NRF_ERROR_NULL
);

159 
	`NRF_FSTORAGE_PARAM_CHECK
(
p_fs
->
p_­i
, 
NRF_ERROR_INVALID_STATE
);

160 
	`NRF_FSTORAGE_PARAM_CHECK
(
Ën
, 
NRF_ERROR_INVALID_LENGTH
);

163 
	`NRF_FSTORAGE_PARAM_CHECK
(
	`addr_is_·ge_®igÃd
(
p_fs
, 
·ge_addr
), 
NRF_ERROR_INVALID_ADDR
);

165 
	`NRF_FSTORAGE_PARAM_CHECK
(

166 
	`addr_is_w™hš_bounds
(
p_fs
, 
·ge_addr
, (
Ën
 *…_fs->
p_æash_šfo
->
”a£_un™
)),

167 
NRF_ERROR_INVALID_ADDR


170  (
p_fs
->
p_­i
)->
	`”a£
Õ_fs, 
·ge_addr
, 
Ën
, 
p_cÚ‹xt
);

171 
	}
}

174 
ušt8_t
 cÚ¡ * 
	$Äf_f¡Üage_rm­
(
Äf_f¡Üage_t
 cÚ¡ * 
p_fs
, 
ušt32_t
 
addr
)

176 ià((
p_fs
 =ğ
NULL
è|| (p_fs->
p_­i
 == NULL))

178  
NULL
;

181  (
p_fs
->
p_­i
)->
	`rm­
Õ_fs, 
addr
);

182 
	}
}

185 
ušt8_t
 * 
	$Äf_f¡Üage_wm­
(
Äf_f¡Üage_t
 cÚ¡ * 
p_fs
, 
ušt32_t
 
addr
)

187 ià((
p_fs
 =ğ
NULL
è|| (p_fs->
p_­i
 == NULL))

189  
NULL
;

192  (
p_fs
->
p_­i
)->
	`wm­
Õ_fs, 
addr
);

193 
	}
}

196 
boŞ
 
	$Äf_f¡Üage_is_busy
(
Äf_f¡Üage_t
 cÚ¡ * 
p_fs
)

200 ià((
p_fs
 =ğ
NULL
è|| (p_fs->
p_­i
 == NULL))

202 
ušt32_t
 
i
 = 0; i < 
NRF_FSTORAGE_INSTANCE_CNT
; i++)

204 
p_fs
 = 
	`NRF_FSTORAGE_INSTANCE_GET
(
i
);

205 ià(
p_fs
->
p_­i
 !ğ
NULL
)

208 ià(
p_fs
->
p_­i
->
	`is_busy
(p_fs))

210  
Œue
;

215  
çl£
;

218  
p_fs
->
p_­i
->
	`is_busy
(p_fs);

219 
	}
}

222 
boŞ
 
	$addr_is_w™hš_bounds
(
Äf_f¡Üage_t
 cÚ¡ * 
p_fs
,

223 
ušt32_t
 
addr
,

224 
ušt32_t
 
Ën
)

226  ( (
addr
 >ğ
p_fs
->
¡¬t_addr
)

227 && (
addr
 + 
Ën
 - 1 <ğ
p_fs
->
’d_addr
));

228 
	}
}

231 
boŞ
 
	$addr_is_®igÃd32
(
ušt32_t
 
addr
)

233  !(
addr
 & 0x03);

234 
	}
}

237 
boŞ
 
	$addr_is_·ge_®igÃd
(
Äf_f¡Üage_t
 cÚ¡ * 
p_fs
,

238 
ušt32_t
 
addr
)

240  (
addr
 & (
p_fs
->
p_æash_šfo
->
”a£_un™
 - 1)) == 0;

241 
	}
}

	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\libraries\fstorage\nrf_fstorage_sd.c

41 
	~"sdk_commÚ.h
"

43 #ià
NRF_MODULE_ENABLED
(
NRF_FSTORAGE
)

45 
	~"Äf_f¡Üage_sd.h
"

46 
	~<¡dšt.h
>

47 
	~<¡ršg.h
>

48 
	~<¡dboŞ.h
>

49 
	~"nÜdic_commÚ.h
"

50 
	~"Äf_soc.h
"

51 
	~"Äf_sdh.h
"

52 
	~"Äf_sdh_soc.h
"

53 
	~"Äf_©omic.h
"

54 
	~"Äf_©fifo.h
"

55 
	~"­p_ut_¶©fÜm.h
"

58 #ià(
NRF_FSTORAGE_SD_MAX_WRITE_SIZE
 % 4)

59 #”rÜ 
NRF_FSTORAGE_SD_MAX_WRITE_SIZE
 
mu¡
 
be
 
a
 
muÉË
 
of
 
the
 
wÜd
 
size
.

66 
	mNRF_FSTORAGE_OP_WRITE
,

67 
	mNRF_FSTORAGE_OP_ERASE


68 } 
	tÄf_f¡Üage_sd_İcode_t
;

70 
	gANON_UNIONS_ENABLE
;

74 
Äf_f¡Üage_t
 cÚ¡ * 
	mp_fs
;

75 
Äf_f¡Üage_sd_İcode_t
 
	mİ_code
;

76 * 
	mp_·¿m
;

81 cÚ¡ * 
	mp_¤c
;

82 
ušt32_t
 
	mde¡
;

83 
ušt32_t
 
	mËn
;

84 
ušt32_t
 
	moff£t
;

85 } 
	mwr™e
;

88 
ušt32_t
 
	m·ge
;

89 
ušt32_t
 
	m´og»ss
;

90 
ušt32_t
 
	m·ges_to_”a£
;

91 } 
	m”a£
;

93 } 
	tÄf_f¡Üage_sd_İ_t
;

94 
	gANON_UNIONS_DISABLE
;

98 
	mNRF_FSTORAGE_STATE_IDLE
,

99 
	mNRF_FSTORAGE_STATE_OP_PENDING
,

100 
	mNRF_FSTORAGE_STATE_OP_EXECUTING
,

101 } 
	tÄf_f¡Üage_sd_¡©e_t
;

106 
Äf_©omic_æag_t
 
	mš™Ÿlized
;

107 
Äf_©omic_æag_t
 
	mqueue_ruÂšg
;

109 
Äf_f¡Üage_sd_¡©e_t
 
	m¡©e
;

110 
ušt32_t
 
	m»Œ›s
;

111 
boŞ
 
	msd_’abËd
;

112 
boŞ
 
	m·u£d
;

114 } 
	tÄf_f¡Üage_sd_wÜk_t
;

117 
Äf_f¡Üage_sys_evt_hªdËr
(
ušt32_t
, *);

118 
boŞ
 
Äf_f¡Üage_sdh_»q_hªdËr
(
Äf_sdh_»q_evt_t
, *);

119 
Äf_f¡Üage_sdh_¡©e_hªdËr
(
Äf_sdh_¡©e_evt_t
, *);

123 
Äf_f¡Üage_šfo_t
 
	gm_æash_šfo
 =

125 #ià 
defšed
(
NRF51
)

126 .
”a£_un™
 = 1024,

127 #–ià
defšed
(
NRF52_SERIES
)

128 .
	g”a£_un™
 = 4096,

130 .
	g´og¿m_un™
 = 4,

131 .
	grm­
 = 
Œue
,

132 .
	gwm­
 = 
çl£
,

136 
NRF_ATFIFO_DEF
(
m_fifo
, 
Äf_f¡Üage_sd_İ_t
, 
NRF_FSTORAGE_SD_QUEUE_SIZE
);

139 
NRF_SDH_SOC_OBSERVER
(
m_sys_obs
, 0, 
Äf_f¡Üage_sys_evt_hªdËr
, 
NULL
);

142 
NRF_SDH_REQUEST_OBSERVER
(
m_»q_obs
, 0) =

144 .
hªdËr
 = 
Äf_f¡Üage_sdh_»q_hªdËr
,

148 
NRF_SDH_STATE_OBSERVER
(
m_¡©e_obs
, 0) =

150 .
hªdËr
 = 
Äf_f¡Üage_sdh_¡©e_hªdËr
,

153 
Äf_f¡Üage_sd_wÜk_t
 
	gm_æags
;

154 
Äf_f¡Üage_sd_İ_t
 * 
	gm_p_cur_İ
;

155 
Äf_©fifo_™em_g‘_t
 
	gm_ig‘_ùx
;

159 
	$ev’t_£nd
(
Äf_f¡Üage_sd_İ_t
 cÚ¡ * 
p_İ
, 
»t_code_t
 
»suÉ
)

161 ià(
p_İ
->
p_fs
->
evt_hªdËr
 =ğ
NULL
)

167 
Äf_f¡Üage_evt_t
 
evt
 =

169 .
»suÉ
 =„esult,

170 .
p_·¿m
 = 
p_İ
->p_param,

173 
p_İ
->
İ_code
)

175 
NRF_FSTORAGE_OP_WRITE
:

176 
evt
.
id
 = 
NRF_FSTORAGE_EVT_WRITE_RESULT
;

177 
evt
.
addr
 = 
p_İ
->
wr™e
.
de¡
;

178 
evt
.
p_¤c
 = 
p_İ
->
wr™e
.p_src;

179 
evt
.
Ën
 = 
p_İ
->
wr™e
.len;

182 
NRF_FSTORAGE_OP_ERASE
:

183 
evt
.
id
 = 
NRF_FSTORAGE_EVT_ERASE_RESULT
;

184 
evt
.
addr
 = (
p_İ
->
”a£
.
·ge
 * 
m_æash_šfo
.
”a£_un™
);

185 
evt
.
Ën
 = 
p_İ
->
”a£
.
·ges_to_”a£
;

193 
p_İ
->
p_fs
->
	`evt_hªdËr
(&
evt
);

194 
	}
}

198 
ušt32_t
 
	$wr™e_execu‹
(
Äf_f¡Üage_sd_İ_t
 cÚ¡ * 
p_İ
)

200 
ušt32_t
 
chunk_Ën
;

202 
chunk_Ën
 = 
	`MIN
(
p_İ
->
wr™e
.
Ën
 -…_İ->wr™e.
off£t
, 
NRF_FSTORAGE_SD_MAX_WRITE_SIZE
);

203 
chunk_Ën
 = 
	`MAX
(1, chunk_ËÀ/ 
m_æash_šfo
.
´og¿m_un™
);

206 
ušt32_t
 * 
p_de¡
 = (ušt32_t*)(
p_İ
->
wr™e
.
de¡
 +…_İ->wr™e.
off£t
);

207 
ušt32_t
 cÚ¡ * 
p_¤c
 = (ušt32_t*)((ušt32_t)
p_İ
->
wr™e
.p_¤ø+…_İ->wr™e.
off£t
);

209  
	`sd_æash_wr™e
(
p_de¡
, 
p_¤c
, 
chunk_Ën
);

210 
	}
}

214 
ušt32_t
 
	$”a£_execu‹
(
Äf_f¡Üage_sd_İ_t
 cÚ¡ * 
p_İ
)

216  
	`sd_æash_·ge_”a£
(
p_İ
->
”a£
.
·ge
 +…_İ->”a£.
´og»ss
);

217 
	}
}

221 
	$queue_ä“
()

223 (è
	`Äf_©fifo_™em_ä“
(
m_fifo
, &
m_ig‘_ùx
);

224 
	}
}

228 
boŞ
 
	$queue_lßd_Ãxt
()

230 
m_p_cur_İ
 = 
	`Äf_©fifo_™em_g‘
(
m_fifo
, &
m_ig‘_ùx
);

232  (
m_p_cur_İ
 !ğ
NULL
);

233 
	}
}

237 
	$queue_´oûss
()

239 
ušt32_t
 
rc
;

241 ià(
m_æags
.
¡©e
 =ğ
NRF_FSTORAGE_STATE_IDLE
)

243 ià(!
	`queue_lßd_Ãxt
())

246 
m_æags
.
queue_ruÂšg
 = 
çl£
;

251 
m_æags
.
¡©e
 = 
NRF_FSTORAGE_STATE_OP_EXECUTING
;

253 
m_p_cur_İ
->
İ_code
)

255 
NRF_FSTORAGE_OP_WRITE
:

256 
rc
 = 
	`wr™e_execu‹
(
m_p_cur_İ
);

259 
NRF_FSTORAGE_OP_ERASE
:

260 
rc
 = 
	`”a£_execu‹
(
m_p_cur_İ
);

264 
rc
 = 
NRF_ERROR_INTERNAL
;

268 
rc
)

270 
NRF_SUCCESS
:

275 ià(!
m_æags
.
sd_’abËd
)

277 
	`Äf_f¡Üage_sys_evt_hªdËr
(
NRF_EVT_FLASH_OPERATION_SUCCESS
, 
NULL
);

281 
NRF_ERROR_BUSY
:

285 
m_æags
.
¡©e
 = 
NRF_FSTORAGE_STATE_OP_PENDING
;

291 
	`ev’t_£nd
(
m_p_cur_İ
, 
NRF_ERROR_INTERNAL
);

293 
m_æags
.
¡©e
 = 
NRF_FSTORAGE_STATE_IDLE
;

294 
m_æags
.
queue_ruÂšg
 = 
çl£
;

296 
	`queue_ä“
();

299 
	}
}

303 
	$queue_¡¬t
()

305 iàĞ(!
	`Äf_©omic_æag_£t_ãtch
(&
m_æags
.
queue_ruÂšg
))

306 && (!
m_æags
.
·u£d
))

308 
	`queue_´oûss
();

310 
	}
}

314 
boŞ
 
	$Ú_İ”©iÚ_sucûss
(
Äf_f¡Üage_sd_İ_t
 * cÚ¡ 
p_İ
)

317 
m_æags
.
»Œ›s
 = 0;

319 
p_İ
->
İ_code
)

321 
NRF_FSTORAGE_OP_WRITE
:

325 
ušt32_t
 cÚ¡ 
chunk_Ën
 = 
	`MIN
(
p_İ
->
wr™e
.
Ën
 -…_İ->wr™e.
off£t
,

326 
NRF_FSTORAGE_SD_MAX_WRITE_SIZE
);

328 
p_İ
->
wr™e
.
off£t
 +ğ
chunk_Ën
;

330 ià(
p_İ
->
wr™e
.
off£t
 =ğp_İ->wr™e.
Ën
)

332  
Œue
;

336 
NRF_FSTORAGE_OP_ERASE
:

338 
p_İ
->
”a£
.
´og»ss
++;

340 ià(
p_İ
->
”a£
.
´og»ss
 =ğp_İ->”a£.
·ges_to_”a£
)

342  
Œue
;

351  
çl£
;

352 
	}
}

356 
boŞ
 
	$Ú_İ”©iÚ_çu»
(
Äf_f¡Üage_sd_İ_t
 cÚ¡ * 
p_İ
)

358 
	`UNUSED_PARAMETER
(
p_İ
);

360 
m_æags
.
»Œ›s
++;

362 ià(
m_æags
.
»Œ›s
 > 
NRF_FSTORAGE_SD_MAX_RETRIES
)

365 
m_æags
.
»Œ›s
 = 0;

366  
Œue
;

369  
çl£
;

370 
	}
}

373 
»t_code_t
 
	$š™
(
Äf_f¡Üage_t
 * 
p_fs
, * 
p_·¿m
)

375 
	`UNUSED_PARAMETER
(
p_·¿m
);

377 
p_fs
->
p_æash_šfo
 = &
m_æash_šfo
;

379 ià(!
	`Äf_©omic_æag_£t_ãtch
(&
m_æags
.
š™Ÿlized
))

381 #ià
NRF_SDH_ENABLED


382 
m_æags
.
sd_’abËd
 = 
	`Äf_sdh_is_’abËd
();

384 (è
	`NRF_ATFIFO_INIT
(
m_fifo
);

387  
NRF_SUCCESS
;

388 
	}
}

391 
»t_code_t
 
	$unš™
(
Äf_f¡Üage_t
 * 
p_fs
, * 
p_·¿m
)

393 
	`UNUSED_PARAMETER
(
p_fs
);

394 
	`UNUSED_PARAMETER
(
p_·¿m
);

399 
	`mem£t
(&
m_æags
, 0x00, (m_flags));

401 (è
	`Äf_©fifo_ş—r
(
m_fifo
);

403  
NRF_SUCCESS
;

404 
	}
}

407 
»t_code_t
 
	$wr™e
(
Äf_f¡Üage_t
 cÚ¡ * 
p_fs
,

408 
ušt32_t
 
de¡
,

409 cÚ¡ * 
p_¤c
,

410 
ušt32_t
 
Ën
,

411 * 
p_·¿m
)

413 
Äf_f¡Üage_sd_İ_t
 * 
p_İ
;

414 
Äf_©fifo_™em_put_t
 
ut_ùx
;

417 
p_İ
 = 
	`Äf_©fifo_™em_®loc
(
m_fifo
, &
ut_ùx
);

419 ià(
p_İ
 =ğ
NULL
)

421  
NRF_ERROR_NO_MEM
;

425 
	`mem£t
(
p_İ
, 0x00, (
Äf_f¡Üage_sd_İ_t
));

427 
p_İ
->
İ_code
 = 
NRF_FSTORAGE_OP_WRITE
;

428 
p_İ
->
p_fs
 =…_fs;

429 
p_İ
->
p_·¿m
 =…_param;

430 
p_İ
->
wr™e
.
de¡
 = dest;

431 
p_İ
->
wr™e
.
p_¤c
 =…_src;

432 
p_İ
->
wr™e
.
Ën
 =†en;

435 (è
	`Äf_©fifo_™em_put
(
m_fifo
, &
ut_ùx
);

437 
	`queue_¡¬t
();

439  
NRF_SUCCESS
;

440 
	}
}

443 
»t_code_t
 
	$»ad
(
Äf_f¡Üage_t
 cÚ¡ * 
p_fs
, 
ušt32_t
 
¤c
, * 
p_de¡
, ušt32_ˆ
Ën
)

445 
	`memıy
(
p_de¡
, (
ušt32_t
*)
¤c
, 
Ën
);

447  
NRF_SUCCESS
;

448 
	}
}

451 
»t_code_t
 
	$”a£
(
Äf_f¡Üage_t
 cÚ¡ * 
p_fs
,

452 
ušt32_t
 
·ge_addr
,

453 
ušt32_t
 
Ën
,

454 * 
p_·¿m
)

456 
Äf_f¡Üage_sd_İ_t
 * 
p_İ
;

457 
Äf_©fifo_™em_put_t
 
ut_ùx
;

460 
p_İ
 = 
	`Äf_©fifo_™em_®loc
(
m_fifo
, &
ut_ùx
);

462 ià(
p_İ
 =ğ
NULL
)

464  
NRF_ERROR_NO_MEM
;

468 
	`mem£t
(
p_İ
, 0x00, (
Äf_f¡Üage_sd_İ_t
));

470 
p_İ
->
İ_code
 = 
NRF_FSTORAGE_OP_ERASE
;

471 
p_İ
->
p_fs
 =…_fs;

472 
p_İ
->
p_·¿m
 =…_param;

473 
p_İ
->
”a£
.
·ge
 = (
·ge_addr
 / 
m_æash_šfo
.
”a£_un™
);

474 
p_İ
->
”a£
.
·ges_to_”a£
 = 
Ën
;

477 (è
	`Äf_©fifo_™em_put
(
m_fifo
, &
ut_ùx
);

479 
	`queue_¡¬t
();

481  
NRF_SUCCESS
;

482 
	}
}

485 
ušt8_t
 cÚ¡ * 
	$rm­
(
Äf_f¡Üage_t
 cÚ¡ * 
p_fs
, 
ušt32_t
 
addr
)

487 
	`UNUSED_PARAMETER
(
p_fs
);

489  (
ušt8_t
*)
addr
;

490 
	}
}

493 
ušt8_t
 * 
	$wm­
(
Äf_f¡Üage_t
 cÚ¡ * 
p_fs
, 
ušt32_t
 
addr
)

495 
	`UNUSED_PARAMETER
(
p_fs
);

496 
	`UNUSED_PARAMETER
(
addr
);

499  
NULL
;

500 
	}
}

503 
boŞ
 
	$is_busy
(
Äf_f¡Üage_t
 cÚ¡ * 
p_fs
)

505 
	`UNUSED_PARAMETER
(
p_fs
);

507  (
m_æags
.
¡©e
 !ğ
NRF_FSTORAGE_STATE_IDLE
);

508 
	}
}

511 
	$Äf_f¡Üage_sys_evt_hªdËr
(
ušt32_t
 
sys_evt
, * 
p_cÚ‹xt
)

513 
	`UNUSED_PARAMETER
(
p_cÚ‹xt
);

515 iàĞ(
sys_evt
 !ğ
NRF_EVT_FLASH_OPERATION_SUCCESS
)

516 && (
sys_evt
 !ğ
NRF_EVT_FLASH_OPERATION_ERROR
))

522 
m_æags
.
¡©e
)

524 
NRF_FSTORAGE_STATE_IDLE
:

528 
NRF_FSTORAGE_STATE_OP_PENDING
:

534 
NRF_FSTORAGE_STATE_OP_EXECUTING
:

537 
boŞ
 
İ”©iÚ_fšished
 = 
çl£
;

539 
sys_evt
)

541 
NRF_EVT_FLASH_OPERATION_SUCCESS
:

542 
İ”©iÚ_fšished
 = 
	`Ú_İ”©iÚ_sucûss
(
m_p_cur_İ
);

545 
NRF_EVT_FLASH_OPERATION_ERROR
:

546 
İ”©iÚ_fšished
 = 
	`Ú_İ”©iÚ_çu»
(
m_p_cur_İ
);

553 ià(
İ”©iÚ_fšished
)

557 
m_æags
.
¡©e
 = 
NRF_FSTORAGE_STATE_IDLE
;

559 
	`ev’t_£nd
(
m_p_cur_İ
, (
sys_evt
 =ğ
NRF_EVT_FLASH_OPERATION_SUCCESS
) ?

560 
NRF_SUCCESS
 : 
NRF_ERROR_TIMEOUT
);

565 
	`queue_ä“
();

570 ià(!
m_æags
.
·u£d
)

572 
	`queue_´oûss
();

577 (è
	`Äf_sdh_»que¡_cÚtšue
();

579 
	}
}

582 
boŞ
 
	$Äf_f¡Üage_sdh_»q_hªdËr
(
Äf_sdh_»q_evt_t
 
»q
, * 
p_cÚ‹xt
)

584 
	`UNUSED_PARAMETER
(
»q
);

585 
	`UNUSED_PARAMETER
(
p_cÚ‹xt
);

587 
m_æags
.
·u£d
 = 
Œue
;

590  (
m_æags
.
¡©e
 =ğ
NRF_FSTORAGE_STATE_IDLE
);

591 
	}
}

594 
	$Äf_f¡Üage_sdh_¡©e_hªdËr
(
Äf_sdh_¡©e_evt_t
 
¡©e
, * 
p_cÚ‹xt
)

596 
	`UNUSED_PARAMETER
(
p_cÚ‹xt
);

598 iàĞ(
¡©e
 =ğ
NRF_SDH_EVT_STATE_ENABLED
)

599 || (
¡©e
 =ğ
NRF_SDH_EVT_STATE_DISABLED
))

601 
m_æags
.
·u£d
 = 
çl£
;

602 
m_æags
.
sd_’abËd
 = (
¡©e
 =ğ
NRF_SDH_EVT_STATE_ENABLED
);

605 
	`queue_´oûss
();

607 
	}
}

611 
Äf_f¡Üage_­i_t
 
	gÄf_f¡Üage_sd
 =

613 .
š™
 = init,

614 .
	gunš™
 = 
unš™
,

615 .
	g»ad
 = 
»ad
,

616 .
	gwr™e
 = 
wr™e
,

617 .
	g”a£
 = 
”a£
,

618 .
	grm­
 = 
rm­
,

619 .
	gwm­
 = 
wm­
,

620 .
	gis_busy
 = 
is_busy


	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\libraries\hardfault\hardfault_implementation.c

40 
	~"sdk_commÚ.h
"

41 #ià
NRF_MODULE_ENABLED
(
HARDFAULT_HANDLER
)

42 
	~"h¬dçuÉ.h
"

43 
	~"Äf.h
"

44 
	~"comp”_ab¡¿ùiÚ.h
"

45 
	~"­p_ut_¶©fÜm.h
"

46 #ifdeà
SOFTDEVICE_PRESENT


47 
	~"Äf_soc.h
"

49 
	#NRF_LOG_MODULE_NAME
 
h¬dçuÉ


	)

50 
	~"Äf_log.h
"

51 
	~"Äf_log_ù¾.h
"

52 
NRF_LOG_MODULE_REGISTER
();

54 #ià
defšed
(
DEBUG_NRF
)

61 vŞ©
H¬dFauÉ_¡ack_t
 * 
	gH¬dFauÉ_p_¡ack
;

65 
__WEAK
 
	$H¬dFauÉ_´oûss
(
H¬dFauÉ_¡ack_t
 * 
p_¡ack
)

68 
	`NVIC_Sy¡emRe£t
();

69 
	}
}

72 
	$H¬dFauÉ_c_hªdËr
(
ušt32_t
 * 
p_¡ack_add»ss
)

74 
	`NRF_LOG_FINAL_FLUSH
();

76 #ià(
__CORTEX_M
 == 0x04)

78 #iâdeà
CFSR_MMARVALID


79 
	#CFSR_MMARVALID
 (1 << (0 + 7))

	)

82 #iâdeà
CFSR_BFARVALID


83 
	#CFSR_BFARVALID
 (1 << (8 + 7))

	)

86 #ià
	`defšed
(
DEBUG
)

88 
H¬dFauÉ_¡ack_t
 * 
p_¡ack
 = (H¬dFauÉ_¡ack_ˆ*)
p_¡ack_add»ss
;

89 cÚ¡ *
cf¤_msgs
[] = {

92 [2] = 
NULL
,

96 [6] = 
NULL
,

97 [7] = 
NULL
,

104 [14] = 
NULL
,

105 [15] = 
NULL
,

110 [20] = 
NULL
,

111 [21] = 
NULL
,

112 [22] = 
NULL
,

113 [23] = 
NULL
,

118 
ušt32_t
 
cf¤
 = 
SCB
->
CFSR
;

121 
	`NRF_LOG_ERROR
("HARD FAULT‡ˆ0x%08X", 
p_¡ack
->
pc
);

122 
	`NRF_LOG_ERROR
(" R0: 0x%08X R1: 0x%08X R2: 0x%08X R3: 0x%08X",

123 
p_¡ack
->
r0
,…_¡ack->
r1
,…_¡ack->
r2
,…_¡ack->
r3
);

124 
	`NRF_LOG_ERROR
(" R12: 0x%08X LR: 0x%08X PSR: 0x%08X",

125 
p_¡ack
->
r12
,…_¡ack->
Ì
,…_¡ack->
p¤
);

127 ià(
SCB
->
HFSR
 & 
SCB_HFSR_VECTTBL_Msk
)

129 
	`NRF_LOG_ERROR
("Cause: BusFault on‡ vectorable„ead duringƒxception…rocessing.");

132 
ušt32_t
 
i
 = 0; i < (
cf¤_msgs
) / (cfsr_msgs[0]); i++)

134 ià(((
cf¤
 & (1 << 
i
)è!ğ0è&& (
cf¤_msgs
[i] !ğ
NULL
))

136 
	`NRF_LOG_ERROR
("Cau£: %s.", (
ušt32_t
)
cf¤_msgs
[
i
]);

140 ià(
cf¤
 & 
CFSR_MMARVALID
)

142 
	`NRF_LOG_ERROR
("MemMªagFauÉ Add»ss: 0x%08X", 
SCB
->
MMFAR
);

145 ià(
cf¤
 & 
CFSR_BFARVALID
)

147 
	`NRF_LOG_ERROR
("Bu FauÉ Add»ss: 0x%08X", 
SCB
->
BFAR
);

150 
NRF_BREAKPOINT_COND
;

156 
	`H¬dFauÉ_´oûss
((
H¬dFauÉ_¡ack_t
 *)
p_¡ack_add»ss
);

157 
	}
}

	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\libraries\pwr_mgmt\nrf_pwr_mgmt.c

40 
	~"sdk_commÚ.h
"

41 #ià
NRF_MODULE_ENABLED
(
NRF_PWR_MGMT
)

43 
	~"Äf_pwr_mgmt.h
"

44 
	~"Äf.h
"

45 
	~"Äf_mtx.h
"

46 
	~"Äf_pow”.h
"

47 
	~"­p_”rÜ.h
"

48 
	~"Äf_as£¹.h
"

49 
	~"Äf_log_ù¾.h
"

50 
	~"­p_ut_¶©fÜm.h
"

52 
	#NRF_LOG_MODULE_NAME
 
pwr_mgmt


	)

53 #ià
NRF_PWR_MGMT_CONFIG_LOG_ENABLED


54 
	#NRF_LOG_LEVEL
 
NRF_PWR_MGMT_CONFIG_LOG_LEVEL


	)

55 
	#NRF_LOG_INFO_COLOR
 
NRF_PWR_MGMT_CONFIG_INFO_COLOR


	)

56 
	#NRF_LOG_DEBUG_COLOR
 
NRF_PWR_MGMT_CONFIG_DEBUG_COLOR


	)

58 
	#NRF_LOG_LEVEL
 0

	)

60 
	~"Äf_log.h
"

61 
NRF_LOG_MODULE_REGISTER
();

63 #ifdeà
SOFTDEVICE_PRESENT


64 
	~"Äf_soc.h
"

65 
	~"Äf_sdh.h
"

69 #ià
NRF_PWR_MGMT_CONFIG_USE_SCHEDULER


70 #ià(
APP_SCHEDULER_ENABLED
 != 1)

73 
	~"­p_scheduËr.h
"

78 
NRF_SECTION_SET_DEF
(
pwr_mgmt_d©a
,

79 
Äf_pwr_mgmt_shutdown_hªdËr_t
,

80 
NRF_PWR_MGMT_CONFIG_HANDLER_PRIORITY_COUNT
);

82 
Äf_pwr_mgmt_evt_t
 
	gm_pwr_mgmt_evt
;

84 
Äf_mtx_t
 
	gm_sysoff_mtx
;

85 
boŞ
 
	gm_shutdown_¡¬‹d
;

86 
Äf_£ùiÚ_™”_t
 
	gm_hªdËrs_™”
;

88 #ià(
NRF_PWR_MGMT_CONFIG_FPU_SUPPORT_ENABLED
 && 
__FPU_PRESENT
)

89 
	#PWR_MGMT_FPU_SLEEP_PREPARE
(è
	`pwr_mgmt_åu_¦“p_´•¬e
()

	)

91 
__STATIC_INLINE
 
	$pwr_mgmt_åu_¦“p_´•¬e
()

93 
ušt32_t
 
åsü
;

94 
	`CRITICAL_REGION_ENTER
();

95 
åsü
 = 
	`__g‘_FPSCR
();

107 
	`__£t_FPSCR
(
åsü
 & ~0x9Fu);

108 
	`__DMB
();

109 
	`NVIC_CË¬P’dšgIRQ
(
FPU_IRQn
);

110 
	`CRITICAL_REGION_EXIT
();

118 
	`ASSERT
((
åsü
 & 0x07) == 0);

119 
	}
}

121 
	#PWR_MGMT_FPU_SLEEP_PREPARE
()

	)

125 #ià
NRF_PWR_MGMT_CONFIG_DEBUG_PIN_ENABLED


126 #undeà
PWR_MGMT_SLEEP_IN_CRITICAL_SECTION_REQUIRED


127 
	#PWR_MGMT_SLEEP_IN_CRITICAL_SECTION_REQUIRED


	)

129 
	~"Äf_gpio.h
"

130 
	#PWR_MGMT_DEBUG_PINS_INIT
(è
	`pwr_mgmt_debug_pšs_š™
()

	)

131 
	#PWR_MGMT_DEBUG_PIN_CLEAR
(è
	`Äf_gpio_pš_ş—r
(
NRF_PWR_MGMT_SLEEP_DEBUG_PIN
)

	)

132 
	#PWR_MGMT_DEBUG_PIN_SET
(è
	`Äf_gpio_pš_£t
(
NRF_PWR_MGMT_SLEEP_DEBUG_PIN
)

	)

134 
__STATIC_INLINE
 
	$pwr_mgmt_debug_pšs_š™
()

136 
	`Äf_gpio_pš_ş—r
(
NRF_PWR_MGMT_SLEEP_DEBUG_PIN
);

137 
	`Äf_gpio_cfg_ouut
(
NRF_PWR_MGMT_SLEEP_DEBUG_PIN
);

138 
	}
}

141 
	#PWR_MGMT_DEBUG_PIN_CLEAR
()

	)

142 
	#PWR_MGMT_DEBUG_PIN_SET
()

	)

143 
	#PWR_MGMT_DEBUG_PINS_INIT
()

	)

147 #ià
NRF_PWR_MGMT_CONFIG_CPU_USAGE_MONITOR_ENABLED


148 #undeà
PWR_MGMT_SLEEP_IN_CRITICAL_SECTION_REQUIRED


149 
	#PWR_MGMT_SLEEP_IN_CRITICAL_SECTION_REQUIRED


	)

151 #undeà
PWR_MGMT_TIMER_REQUIRED


152 
	#PWR_MGMT_TIMER_REQUIRED


	)

153 
	~"­p_tim”.h
"

155 
	#PWR_MGMT_CPU_USAGE_MONITOR_INIT
(è
	`pwr_mgmt_ıu_u§ge_mÚ™Ü_š™
()

	)

156 
	#PWR_MGMT_CPU_USAGE_MONITOR_UPDATE
(è
	`pwr_mgmt_ıu_u§ge_mÚ™Ü_upd©e
()

	)

157 
	#PWR_MGMT_CPU_USAGE_MONITOR_SUMMARY
(è
	`NRF_LOG_INFO
("Maximum CPU usage: %u%%", \

158 
m_max_ıu_u§ge
)

	)

159 
	#PWR_MGMT_CPU_USAGE_MONITOR_SECTION_ENTER
() \

161 
ušt32_t
 
¦“p_¡¬t
 = 
	`­p_tim”_út_g‘
()

	)

163 
	#PWR_MGMT_CPU_USAGE_MONITOR_SECTION_EXIT
() \

164 
ušt32_t
 
¦“p_’d
 = 
	`­p_tim”_út_g‘
(); \

165 
ušt32_t
 
¦“p_du¿tiÚ
; \

166 
¦“p_du¿tiÚ
 = 
	`­p_tim”_út_diff_compu‹
(
¦“p_’d
, \

167 
¦“p_¡¬t
); \

168 
m_ticks_¦“pšg
 +ğ
¦“p_du¿tiÚ
; \

169 }

	)

171 
ušt32_t
 
	gm_ticks_¦“pšg
;

172 
ušt32_t
 
	gm_ticks_Ï¡
;

173 
ušt8_t
 
	gm_max_ıu_u§ge
;

175 
__STATIC_INLINE
 
	$pwr_mgmt_ıu_u§ge_mÚ™Ü_š™
()

177 
m_ticks_¦“pšg
 = 0;

178 
m_ticks_Ï¡
 = 0;

179 
m_max_ıu_u§ge
 = 0;

180 
	}
}

182 
__STATIC_INLINE
 
	$pwr_mgmt_ıu_u§ge_mÚ™Ü_upd©e
()

184 
ušt32_t
 
d–
;

185 
ušt32_t
 
ticks
;

186 
ušt8_t
 
ıu_u§ge
;

188 
ticks
 = 
	`­p_tim”_út_g‘
();

189 
d–
 = 
	`­p_tim”_út_diff_compu‹
(
ticks
, 
m_ticks_Ï¡
);

190 
ıu_u§ge
 = 100 * (
d–
 - 
m_ticks_¦“pšg
) / delta;

192 
	`NRF_LOG_INFO
("CPU U§ge: %u%%", 
ıu_u§ge
);

193 ià(
m_max_ıu_u§ge
 < 
ıu_u§ge
)

195 
m_max_ıu_u§ge
 = 
ıu_u§ge
;

198 
m_ticks_Ï¡
 = 
ticks
;

199 
m_ticks_¦“pšg
 = 0;

200 
	}
}

203 
	#PWR_MGMT_CPU_USAGE_MONITOR_INIT
()

	)

204 
	#PWR_MGMT_CPU_USAGE_MONITOR_UPDATE
()

	)

205 
	#PWR_MGMT_CPU_USAGE_MONITOR_SUMMARY
()

	)

206 
	#PWR_MGMT_CPU_USAGE_MONITOR_SECTION_ENTER
()

	)

207 
	#PWR_MGMT_CPU_USAGE_MONITOR_SECTION_EXIT
()

	)

211 #ià
NRF_PWR_MGMT_CONFIG_STANDBY_TIMEOUT_ENABLED


212 #undeà
PWR_MGMT_TIMER_REQUIRED


213 
	#PWR_MGMT_TIMER_REQUIRED


	)

215 
	#PWR_MGMT_STANDBY_TIMEOUT_INIT
(è
	`pwr_mgmt_¡ªdby_timeout_ş—r
()

	)

216 
	#PWR_MGMT_STANDBY_TIMEOUT_CLEAR
(è
	`pwr_mgmt_¡ªdby_timeout_ş—r
()

	)

217 
	#PWR_MGMT_STANDBY_TIMEOUT_CHECK
(è
	`pwr_mgmt_¡ªdby_timeout_check
()

	)

219 
ušt16_t
 
	gm_¡ªdby_couÁ”
;

222 
__STATIC_INLINE
 
	$pwr_mgmt_¡ªdby_timeout_ş—r
()

224 
m_¡ªdby_couÁ”
 = 0;

225 
	}
}

227 
__STATIC_INLINE
 
	$pwr_mgmt_¡ªdby_timeout_check
()

229 ià(
m_¡ªdby_couÁ”
 < 
NRF_PWR_MGMT_CONFIG_STANDBY_TIMEOUT_S
)

231 
m_¡ªdby_couÁ”
++;

233 ià(
m_shutdown_¡¬‹d
 =ğ
çl£
)

235 
	`Äf_pwr_mgmt_shutdown
(
NRF_PWR_MGMT_SHUTDOWN_GOTO_SYSOFF
);

237 
	}
}

240 
	#PWR_MGMT_STANDBY_TIMEOUT_INIT
()

	)

241 
	#PWR_MGMT_STANDBY_TIMEOUT_CLEAR
()

	)

242 
	#PWR_MGMT_STANDBY_TIMEOUT_CHECK
()

	)

246 #ià
NRF_PWR_MGMT_CONFIG_AUTO_SHUTDOWN_RETRY


247 #undeà
PWR_MGMT_TIMER_REQUIRED


248 
	#PWR_MGMT_TIMER_REQUIRED


	)

250 
	#PWR_MGMT_AUTO_SHUTDOWN_RETRY
(è
	`pwr_mgmt_auto_shutdown_»Œy
()

	)

252 
__STATIC_INLINE
 
	$pwr_mgmt_auto_shutdown_»Œy
()

254 ià(
m_shutdown_¡¬‹d
)

257 
	`Äf_pwr_mgmt_shutdown
(
NRF_PWR_MGMT_SHUTDOWN_CONTINUE
);

259 
	}
}

262 
	#PWR_MGMT_AUTO_SHUTDOWN_RETRY
()

	)

266 #ifdeà
PWR_MGMT_SLEEP_IN_CRITICAL_SECTION_REQUIRED


267 
	#PWR_MGMT_SLEEP_INIT
(è
	`pwr_mgmt_¦“p_š™
()

	)

268 
	#PWR_MGMT_SLEEP_LOCK_ACQUIRE
(è
	`CRITICAL_REGION_ENTER
()

	)

269 
	#PWR_MGMT_SLEEP_LOCK_RELEASE
(è
	`CRITICAL_REGION_EXIT
()

	)

271 
__STATIC_INLINE
 
	$pwr_mgmt_¦“p_š™
()

273 #ifdeà
SOFTDEVICE_PRESENT


274 
	`ASSERT
(
	`cu¼’t_št_´iÜ™y_g‘
(è>ğ
APP_IRQ_PRIORITY_LOW
);

276 
SCB
->
SCR
 |ğ
SCB_SCR_SEVONPEND_Msk
;

277 
	}
}

280 
	#PWR_MGMT_SLEEP_INIT
()

	)

281 
	#PWR_MGMT_SLEEP_LOCK_ACQUIRE
()

	)

282 
	#PWR_MGMT_SLEEP_LOCK_RELEASE
()

	)

286 #ifdeà
PWR_MGMT_TIMER_REQUIRED


287 
	~"­p_tim”.h
"

288 
	#PWR_MGMT_TIMER_CREATE
(è
	`pwr_mgmt_tim”_ü—‹
()

	)

290 
APP_TIMER_DEF
(
m_pwr_mgmt_tim”
);

294 
	$Äf_pwr_mgmt_timeout_hªdËr
(* 
p_cÚ‹xt
)

296 
	`PWR_MGMT_CPU_USAGE_MONITOR_UPDATE
();

297 
	`PWR_MGMT_AUTO_SHUTDOWN_RETRY
();

298 
	`PWR_MGMT_STANDBY_TIMEOUT_CHECK
();

299 
	}
}

301 
__STATIC_INLINE
 
»t_code_t
 
	$pwr_mgmt_tim”_ü—‹
()

303 
»t_code_t
 
»t_code
 = 
	`­p_tim”_ü—‹
(&
m_pwr_mgmt_tim”
,

304 
APP_TIMER_MODE_REPEATED
,

305 
Äf_pwr_mgmt_timeout_hªdËr
);

306 ià(
»t_code
 !ğ
NRF_SUCCESS
)

308  
»t_code
;

311  
	`­p_tim”_¡¬t
(
m_pwr_mgmt_tim”
, 
	`APP_TIMER_TICKS
(1000), 
NULL
);

312 
	}
}

314 
	#PWR_MGMT_TIMER_CREATE
(è
NRF_SUCCESS


	)

317 
»t_code_t
 
	$Äf_pwr_mgmt_š™
()

319 
	`NRF_LOG_INFO
("Init");

321 
m_shutdown_¡¬‹d
 = 
çl£
;

322 
	`Äf_mtx_š™
(&
m_sysoff_mtx
);

323 
	`Äf_£ùiÚ_™”_š™
(&
m_hªdËrs_™”
, &
pwr_mgmt_d©a
);

325 
	`PWR_MGMT_SLEEP_INIT
();

326 
	`PWR_MGMT_DEBUG_PINS_INIT
();

327 
	`PWR_MGMT_STANDBY_TIMEOUT_INIT
();

328 
	`PWR_MGMT_CPU_USAGE_MONITOR_INIT
();

330  
	`PWR_MGMT_TIMER_CREATE
();

331 
	}
}

333 
	$Äf_pwr_mgmt_run
()

335 
	`PWR_MGMT_FPU_SLEEP_PREPARE
();

336 
	`PWR_MGMT_SLEEP_LOCK_ACQUIRE
();

337 
	`PWR_MGMT_CPU_USAGE_MONITOR_SECTION_ENTER
();

338 
	`PWR_MGMT_DEBUG_PIN_SET
();

341 #ifdeà
SOFTDEVICE_PRESENT


342 ià(
	`Äf_sdh_is_’abËd
())

344 
»t_code_t
 
»t_code
 = 
	`sd_­p_evt_wa™
();

345 
	`ASSERT
((
»t_code
 =ğ
NRF_SUCCESS
è|| (»t_cod=ğ
NRF_ERROR_SOFTDEVICE_NOT_ENABLED
));

346 
	`UNUSED_VARIABLE
(
»t_code
);

352 
	`__WFE
();

354 
	`__SEV
();

355 
	`__WFE
();

358 
	`PWR_MGMT_DEBUG_PIN_CLEAR
();

359 
	`PWR_MGMT_CPU_USAGE_MONITOR_SECTION_EXIT
();

360 
	`PWR_MGMT_SLEEP_LOCK_RELEASE
();

361 
	}
}

363 
	$Äf_pwr_mgmt_ãed
()

365 
	`NRF_LOG_DEBUG
("Feed");

367 
	`PWR_MGMT_STANDBY_TIMEOUT_CLEAR
();

368 
	}
}

372 
	$shutdown_´oûss
()

374 
	`NRF_LOG_INFO
("ShutdowÀ¡¬‹d. Ty³ %d", 
m_pwr_mgmt_evt
);

378 
	`Äf_£ùiÚ_™”_g‘
(&
m_hªdËrs_™”
è!ğ
NULL
;

379 
	`Äf_£ùiÚ_™”_Ãxt
(&
m_hªdËrs_™”
))

381 
Äf_pwr_mgmt_shutdown_hªdËr_t
 * 
p_hªdËr
 =

382 (
Äf_pwr_mgmt_shutdown_hªdËr_t
 *è
	`Äf_£ùiÚ_™”_g‘
(&
m_hªdËrs_™”
);

383 ià((*
p_hªdËr
)(
m_pwr_mgmt_evt
))

385 
	`NRF_LOG_INFO
("SysOfàhªdË¸0x%08X =>„—dy", ()*
p_hªdËr
);

390 
	`NRF_LOG_INFO
("SysOfàhªdË¸0x%08X => blockšg", ()*
p_hªdËr
);

395 
	`PWR_MGMT_CPU_USAGE_MONITOR_SUMMARY
();

396 
	`NRF_LOG_INFO
("Shutdown complete.");

397 
	`NRF_LOG_FINAL_FLUSH
();

399 ià((
m_pwr_mgmt_evt
 =ğ
NRF_PWR_MGMT_EVT_PREPARE_RESET
)

400 || (
m_pwr_mgmt_evt
 =ğ
NRF_PWR_MGMT_EVT_PREPARE_DFU
))

402 
	`NVIC_Sy¡emRe£t
();

407 #ifdeà
SOFTDEVICE_PRESENT


408 ià(
	`Äf_sdh_is_’abËd
())

410 
»t_code_t
 
»t_code
 = 
	`sd_pow”_sy¡em_off
();

411 
	`ASSERT
((
»t_code
 =ğ
NRF_SUCCESS
è|| (»t_cod=ğ
NRF_ERROR_SOFTDEVICE_NOT_ENABLED
));

412 
	`UNUSED_VARIABLE
(
»t_code
);

415 
	`Äf_pow”_sy¡em_off
();

417 
	}
}

419 #ià
NRF_PWR_MGMT_CONFIG_USE_SCHEDULER


422 
	$scheduËr_shutdown_hªdËr
(* 
p_ev’t_d©a
, 
ušt16_t
 
ev’t_size
)

424 
	`UNUSED_PARAMETER
(
p_ev’t_d©a
);

425 
	`UNUSED_PARAMETER
(
ev’t_size
);

426 
	`shutdown_´oûss
();

427 
	}
}

430 
	$Äf_pwr_mgmt_shutdown
(
Äf_pwr_mgmt_shutdown_t
 
shutdown_ty³
)

433 ià(!
	`Äf_mtx_Œylock
(&
m_sysoff_mtx
))

438 ià(
shutdown_ty³
 !ğ
NRF_PWR_MGMT_SHUTDOWN_CONTINUE
)

440 ià(
m_shutdown_¡¬‹d
)

442 
	`Äf_mtx_uÆock
(&
m_sysoff_mtx
);

447 
m_pwr_mgmt_evt
 = (
Äf_pwr_mgmt_evt_t
)
shutdown_ty³
;

448 
m_shutdown_¡¬‹d
 = 
Œue
;

452 
	`ASSERT
(
m_shutdown_¡¬‹d
);

453 
	`NRF_LOG_INFO
("ShutdowÀ»que¡ %d", 
shutdown_ty³
);

455 #ià
NRF_PWR_MGMT_CONFIG_USE_SCHEDULER


456 
»t_code_t
 
»t_code
 = 
	`­p_sched_ev’t_put
(
NULL
, 0, 
scheduËr_shutdown_hªdËr
);

457 
	`APP_ERROR_CHECK
(
»t_code
);

459 
	`shutdown_´oûss
();

462 
	`Äf_mtx_uÆock
(&
m_sysoff_mtx
);

463 
	}
}

	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\libraries\scheduler\app_scheduler.c

40 
	~"sdk_commÚ.h
"

41 #ià
NRF_MODULE_ENABLED
(
APP_SCHEDULER
)

42 
	~"­p_scheduËr.h
"

43 
	~<¡dlib.h
>

44 
	~<¡dšt.h
>

45 
	~<¡ršg.h
>

46 
	~"Äf_soc.h
"

47 
	~"Äf_as£¹.h
"

48 
	~"­p_ut_¶©fÜm.h
"

53 
­p_sched_ev’t_hªdËr_t
 
	mhªdËr
;

54 
ušt16_t
 
	mev’t_d©a_size
;

55 } 
	tev’t_h—d”_t
;

57 
STATIC_ASSERT
((
ev’t_h—d”_t
è<ğ
APP_SCHED_EVENT_HEADER_SIZE
);

59 
ev’t_h—d”_t
 * 
	gm_queue_ev’t_h—d”s
;

60 
ušt8_t
 * 
	gm_queue_ev’t_d©a
;

61 vŞ©
ušt8_t
 
	gm_queue_¡¬t_šdex
;

62 vŞ©
ušt8_t
 
	gm_queue_’d_šdex
;

63 
ušt16_t
 
	gm_queue_ev’t_size
;

64 
ušt16_t
 
	gm_queue_size
;

66 #ià
APP_SCHEDULER_WITH_PROFILER


67 
ušt16_t
 
	gm_max_queue_utiz©iÚ
;

70 #ià
APP_SCHEDULER_WITH_PAUSE


71 
ušt32_t
 
	gm_scheduËr_·u£d_couÁ”
 = 0;

81 
__INLINE
 
ušt8_t
 
	$Ãxt_šdex
(
ušt8_t
 
šdex
)

83  (
šdex
 < 
m_queue_size
) ? (index + 1) : 0;

84 
	}
}

87 
__INLINE
 
ušt8_t
 
	$­p_sched_queue_fuÎ
()

89 
ušt8_t
 
tmp
 = 
m_queue_¡¬t_šdex
;

90  
	`Ãxt_šdex
(
m_queue_’d_šdex
è=ğ
tmp
;

91 
	}
}

94 
	#APP_SCHED_QUEUE_FULL
(è
	`­p_sched_queue_fuÎ
()

	)

97 
__INLINE
 
ušt8_t
 
	$­p_sched_queue_em±y
()

99 
ušt8_t
 
tmp
 = 
m_queue_¡¬t_šdex
;

100  
m_queue_’d_šdex
 =ğ
tmp
;

101 
	}
}

104 
	#APP_SCHED_QUEUE_EMPTY
(è
	`­p_sched_queue_em±y
()

	)

107 
ušt32_t
 
	$­p_sched_š™
(
ušt16_t
 
ev’t_size
, ušt16_ˆ
queue_size
, * 
p_ev’t_bufãr
)

109 
ušt16_t
 
d©a_¡¬t_šdex
 = (
queue_size
 + 1è* (
ev’t_h—d”_t
);

112 ià(!
	`is_wÜd_®igÃd
(
p_ev’t_bufãr
))

114  
NRF_ERROR_INVALID_PARAM
;

118 
m_queue_ev’t_h—d”s
 = 
p_ev’t_bufãr
;

119 
m_queue_ev’t_d©a
 = &((
ušt8_t
 *)
p_ev’t_bufãr
)[
d©a_¡¬t_šdex
];

120 
m_queue_’d_šdex
 = 0;

121 
m_queue_¡¬t_šdex
 = 0;

122 
m_queue_ev’t_size
 = 
ev’t_size
;

123 
m_queue_size
 = 
queue_size
;

125 #ià
APP_SCHEDULER_WITH_PROFILER


126 
m_max_queue_utiz©iÚ
 = 0;

129  
NRF_SUCCESS
;

130 
	}
}

133 
ušt16_t
 
	$­p_sched_queue_¥aû_g‘
()

135 
ušt16_t
 
¡¬t
 = 
m_queue_¡¬t_šdex
;

136 
ušt16_t
 
’d
 = 
m_queue_’d_šdex
;

137 
ušt16_t
 
ä“_¥aû
 = 
m_queue_size
 - ((
’d
 >ğ
¡¬t
) ?

138 (
’d
 - 
¡¬t
è: (
m_queue_size
 + 1 - start +ƒnd));

139  
ä“_¥aû
;

140 
	}
}

143 #ià
APP_SCHEDULER_WITH_PROFILER


144 
	$queue_utiz©iÚ_check
()

146 
ušt16_t
 
¡¬t
 = 
m_queue_¡¬t_šdex
;

147 
ušt16_t
 
’d
 = 
m_queue_’d_šdex
;

148 
ušt16_t
 
queue_utiz©iÚ
 = (
’d
 >ğ
¡¬t
) ? (end - start) :

149 (
m_queue_size
 + 1 - 
¡¬t
 + 
’d
);

151 ià(
queue_utiz©iÚ
 > 
m_max_queue_utiz©iÚ
)

153 
m_max_queue_utiz©iÚ
 = 
queue_utiz©iÚ
;

155 
	}
}

157 
ušt16_t
 
	$­p_sched_queue_utiz©iÚ_g‘
()

159  
m_max_queue_utiz©iÚ
;

160 
	}
}

164 
ušt32_t
 
	$­p_sched_ev’t_put
(cÚ¡ * 
p_ev’t_d©a
,

165 
ušt16_t
 
ev’t_d©a_size
,

166 
­p_sched_ev’t_hªdËr_t
 
hªdËr
)

168 
ušt32_t
 
”r_code
;

170 ià(
ev’t_d©a_size
 <ğ
m_queue_ev’t_size
)

172 
ušt16_t
 
ev’t_šdex
 = 0xFFFF;

174 
	`CRITICAL_REGION_ENTER
();

176 ià(!
	`APP_SCHED_QUEUE_FULL
())

178 
ev’t_šdex
 = 
m_queue_’d_šdex
;

179 
m_queue_’d_šdex
 = 
	`Ãxt_šdex
(m_queue_end_index);

181 #ià
APP_SCHEDULER_WITH_PROFILER


184 
	`queue_utiz©iÚ_check
();

188 
	`CRITICAL_REGION_EXIT
();

190 ià(
ev’t_šdex
 != 0xFFFF)

194 
m_queue_ev’t_h—d”s
[
ev’t_šdex
].
hªdËr
 = handler;

195 ià((
p_ev’t_d©a
 !ğ
NULL
è&& (
ev’t_d©a_size
 > 0))

197 
	`memıy
(&
m_queue_ev’t_d©a
[
ev’t_šdex
 * 
m_queue_ev’t_size
],

198 
p_ev’t_d©a
,

199 
ev’t_d©a_size
);

200 
m_queue_ev’t_h—d”s
[
ev’t_šdex
].
ev’t_d©a_size
 =ƒvent_data_size;

204 
m_queue_ev’t_h—d”s
[
ev’t_šdex
].
ev’t_d©a_size
 = 0;

207 
”r_code
 = 
NRF_SUCCESS
;

211 
”r_code
 = 
NRF_ERROR_NO_MEM
;

216 
”r_code
 = 
NRF_ERROR_INVALID_LENGTH
;

219  
”r_code
;

220 
	}
}

223 #ià
APP_SCHEDULER_WITH_PAUSE


224 
	$­p_sched_·u£
()

226 
	`CRITICAL_REGION_ENTER
();

228 ià(
m_scheduËr_·u£d_couÁ”
 < 
UINT32_MAX
)

230 
m_scheduËr_·u£d_couÁ”
++;

232 
	`CRITICAL_REGION_EXIT
();

233 
	}
}

235 
	$­p_sched_»sume
()

237 
	`CRITICAL_REGION_ENTER
();

239 ià(
m_scheduËr_·u£d_couÁ”
 > 0)

241 
m_scheduËr_·u£d_couÁ”
--;

243 
	`CRITICAL_REGION_EXIT
();

244 
	}
}

253 
__INLINE
 
boŞ
 
	$is_­p_sched_·u£d
()

255 #ià
APP_SCHEDULER_WITH_PAUSE


256  (
m_scheduËr_·u£d_couÁ”
 > 0);

258  
çl£
;

260 
	}
}

263 
	$­p_sched_execu‹
()

265 !
	`is_­p_sched_·u£d
(è&& !
	`APP_SCHED_QUEUE_EMPTY
())

270 
ušt16_t
 
ev’t_šdex
 = 
m_queue_¡¬t_šdex
;

272 * 
p_ev’t_d©a
;

273 
ušt16_t
 
ev’t_d©a_size
;

274 
­p_sched_ev’t_hªdËr_t
 
ev’t_hªdËr
;

276 
p_ev’t_d©a
 = &
m_queue_ev’t_d©a
[
ev’t_šdex
 * 
m_queue_ev’t_size
];

277 
ev’t_d©a_size
 = 
m_queue_ev’t_h—d”s
[
ev’t_šdex
].event_data_size;

278 
ev’t_hªdËr
 = 
m_queue_ev’t_h—d”s
[
ev’t_šdex
].
hªdËr
;

280 
	`ev’t_hªdËr
(
p_ev’t_d©a
, 
ev’t_d©a_size
);

285 
m_queue_¡¬t_šdex
 = 
	`Ãxt_šdex
(m_queue_start_index);

287 
	}
}

	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\libraries\sensorsim\sensorsim.c

40 
	~"£nsÜsim.h
"

43 
	$£nsÜsim_š™
(
£nsÜsim_¡©e_t
 * 
p_¡©e
,

44 cÚ¡ 
£nsÜsim_cfg_t
 * 
p_cfg
)

46 ià(
p_cfg
->
¡¬t_©_max
)

48 
p_¡©e
->
cu¼’t_v®
 = 
p_cfg
->
max
;

49 
p_¡©e
->
is_šü—sšg
 = 
çl£
;

53 
p_¡©e
->
cu¼’t_v®
 = 
p_cfg
->
mš
;

54 
p_¡©e
->
is_šü—sšg
 = 
Œue
;

56 
	}
}

59 
ušt32_t
 
	$£nsÜsim_m—su»
(
£nsÜsim_¡©e_t
 * 
p_¡©e
,

60 cÚ¡ 
£nsÜsim_cfg_t
 * 
p_cfg
)

62 ià(
p_¡©e
->
is_šü—sšg
)

64 
	`£nsÜsim_šüem’t
(
p_¡©e
, 
p_cfg
);

68 
	`£nsÜsim_deüem’t
(
p_¡©e
, 
p_cfg
);

70  
p_¡©e
->
cu¼’t_v®
;

71 
	}
}

73 
	$£nsÜsim_šüem’t
(
£nsÜsim_¡©e_t
 * 
p_¡©e
,

74 cÚ¡ 
£nsÜsim_cfg_t
 * 
p_cfg
)

76 ià(
p_cfg
->
max
 - 
p_¡©e
->
cu¼’t_v®
 >…_cfg->
šü
)

78 
p_¡©e
->
cu¼’t_v®
 +ğ
p_cfg
->
šü
;

82 
p_¡©e
->
cu¼’t_v®
 = 
p_cfg
->
max
;

83 
p_¡©e
->
is_šü—sšg
 = 
çl£
;

85 
	}
}

88 
	$£nsÜsim_deüem’t
(
£nsÜsim_¡©e_t
 * 
p_¡©e
,

89 cÚ¡ 
£nsÜsim_cfg_t
 * 
p_cfg
)

91 ià(
p_¡©e
->
cu¼’t_v®
 - 
p_cfg
->
mš
 >…_cfg->
šü
)

93 
p_¡©e
->
cu¼’t_v®
 -ğ
p_cfg
->
šü
;

97 
p_¡©e
->
cu¼’t_v®
 = 
p_cfg
->
mš
;

98 
p_¡©e
->
is_šü—sšg
 = 
Œue
;

100 
	}
}

	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\libraries\strerror\nrf_strerror.c

41 
	~"sdk_commÚ.h
"

42 #ià
NRF_MODULE_ENABLED
(
NRF_STRERROR
)

43 
	~"Äf_¡»¼Ü.h
"

50 
	#NRF_STRERROR_ENTITY
(
mÃmÚic
è{.
code
 = mÃmÚic, .
Çme
 = #mÃmÚic}

	)

57 
»t_code_t
 
	mcode
;

58 cÚ¡ * 
	mÇme
;

59 }
	tÄf_¡»¼Ü_desc_t
;

66 cÚ¡ 
	gm_unknown_¡r
[] = "Unknownƒrror code";

76 
Äf_¡»¼Ü_desc_t
 cÚ¡ 
	gÄf_¡»¼Ü_¬¿y
[] =

78 
NRF_STRERROR_ENTITY
(
NRF_SUCCESS
),

79 
NRF_STRERROR_ENTITY
(
NRF_ERROR_SVC_HANDLER_MISSING
),

80 
NRF_STRERROR_ENTITY
(
NRF_ERROR_SOFTDEVICE_NOT_ENABLED
),

81 
NRF_STRERROR_ENTITY
(
NRF_ERROR_INTERNAL
),

82 
NRF_STRERROR_ENTITY
(
NRF_ERROR_NO_MEM
),

83 
NRF_STRERROR_ENTITY
(
NRF_ERROR_NOT_FOUND
),

84 
NRF_STRERROR_ENTITY
(
NRF_ERROR_NOT_SUPPORTED
),

85 
NRF_STRERROR_ENTITY
(
NRF_ERROR_INVALID_PARAM
),

86 
NRF_STRERROR_ENTITY
(
NRF_ERROR_INVALID_STATE
),

87 
NRF_STRERROR_ENTITY
(
NRF_ERROR_INVALID_LENGTH
),

88 
NRF_STRERROR_ENTITY
(
NRF_ERROR_INVALID_FLAGS
),

89 
NRF_STRERROR_ENTITY
(
NRF_ERROR_INVALID_DATA
),

90 
NRF_STRERROR_ENTITY
(
NRF_ERROR_DATA_SIZE
),

91 
NRF_STRERROR_ENTITY
(
NRF_ERROR_TIMEOUT
),

92 
NRF_STRERROR_ENTITY
(
NRF_ERROR_NULL
),

93 
NRF_STRERROR_ENTITY
(
NRF_ERROR_FORBIDDEN
),

94 
NRF_STRERROR_ENTITY
(
NRF_ERROR_INVALID_ADDR
),

95 
NRF_STRERROR_ENTITY
(
NRF_ERROR_BUSY
),

96 #ifdeà
NRF_ERROR_CONN_COUNT


97 
NRF_STRERROR_ENTITY
(
NRF_ERROR_CONN_COUNT
),

99 #ifdeà
NRF_ERROR_RESOURCES


100 
NRF_STRERROR_ENTITY
(
NRF_ERROR_RESOURCES
),

104 
NRF_STRERROR_ENTITY
(
NRF_ERROR_MODULE_NOT_INITIALIZED
),

105 
NRF_STRERROR_ENTITY
(
NRF_ERROR_MUTEX_INIT_FAILED
),

106 
NRF_STRERROR_ENTITY
(
NRF_ERROR_MUTEX_LOCK_FAILED
),

107 
NRF_STRERROR_ENTITY
(
NRF_ERROR_MUTEX_UNLOCK_FAILED
),

108 
NRF_STRERROR_ENTITY
(
NRF_ERROR_MUTEX_COND_INIT_FAILED
),

109 
NRF_STRERROR_ENTITY
(
NRF_ERROR_MODULE_ALREADY_INITIALIZED
),

110 
NRF_STRERROR_ENTITY
(
NRF_ERROR_STORAGE_FULL
),

111 
NRF_STRERROR_ENTITY
(
NRF_ERROR_API_NOT_IMPLEMENTED
),

112 
NRF_STRERROR_ENTITY
(
NRF_ERROR_FEATURE_NOT_ENABLED
),

113 
NRF_STRERROR_ENTITY
(
NRF_ERROR_IO_PENDING
),

116 
NRF_STRERROR_ENTITY
(
NRF_ERROR_DRV_TWI_ERR_OVERRUN
),

117 
NRF_STRERROR_ENTITY
(
NRF_ERROR_DRV_TWI_ERR_ANACK
),

118 
NRF_STRERROR_ENTITY
(
NRF_ERROR_DRV_TWI_ERR_DNACK
),

121 
NRF_STRERROR_ENTITY
(
NRF_ERROR_BLE_IPSP_RX_PKT_TRUNCATED
),

122 
NRF_STRERROR_ENTITY
(
NRF_ERROR_BLE_IPSP_CHANNEL_ALREADY_EXISTS
),

123 
NRF_STRERROR_ENTITY
(
NRF_ERROR_BLE_IPSP_LINK_DISCONNECTED
),

124 
NRF_STRERROR_ENTITY
(
NRF_ERROR_BLE_IPSP_PEER_REJECTED
)

128 cÚ¡ * 
	$Äf_¡»¼Ü_g‘
(
»t_code_t
 
code
)

130 cÚ¡ * 
p_»t
 = 
	`Äf_¡»¼Ü_fšd
(
code
);

131  (
p_»t
 =ğ
NULL
è? 
m_unknown_¡r
 :…_ret;

132 
	}
}

134 cÚ¡ * 
	$Äf_¡»¼Ü_fšd
(
»t_code_t
 
code
)

136 
Äf_¡»¼Ü_desc_t
 cÚ¡ * 
p_¡¬t
;

137 
Äf_¡»¼Ü_desc_t
 cÚ¡ * 
p_’d
;

138 
p_¡¬t
 = 
Äf_¡»¼Ü_¬¿y
;

139 
p_’d
 = 
Äf_¡»¼Ü_¬¿y
 + 
	`ARRAY_SIZE
(nrf_strerror_array);

141 
p_¡¬t
 < 
p_’d
)

143 
Äf_¡»¼Ü_desc_t
 cÚ¡ * 
p_mid
 = 
p_¡¬t
 + ((
p_’d
 -…_start) / 2);

144 
»t_code_t
 
mid_c
 = 
p_mid
->
code
;

145 ià(
mid_c
 > 
code
)

147 
p_’d
 = 
p_mid
;

149 ià(
mid_c
 < 
code
)

151 
p_¡¬t
 = 
p_mid
 + 1;

155  
p_mid
->
Çme
;

158  
NULL
;

159 
	}
}

	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\libraries\timer\app_timer.c

40 
	~"sdk_commÚ.h
"

41 #ià
NRF_MODULE_ENABLED
(
APP_TIMER
)

42 
	~"­p_tim”.h
"

43 
	~<¡dlib.h
>

44 
	~"Äf.h
"

45 
	~"Äf_³rh”®s.h
"

46 
	~"Äf_soc.h
"

47 
	~"­p_”rÜ.h
"

48 
	~"Äf_d–ay.h
"

49 
	~"­p_ut_¶©fÜm.h
"

50 #ià
APP_TIMER_CONFIG_USE_SCHEDULER


51 
	~"­p_scheduËr.h
"

54 
	#RTC1_IRQ_PRI
 
APP_TIMER_CONFIG_IRQ_PRIORITY


	)

55 
	#SWI_IRQ_PRI
 
APP_TIMER_CONFIG_IRQ_PRIORITY


	)

60 
STATIC_ASSERT
(
RTC1_IRQ_PRI
 =ğ
SWI_IRQ_PRI
);

62 
	#MAX_RTC_COUNTER_VAL
 0x00FFFFFF

	)

64 
	#RTC_COMPARE_OFFSET_MIN
 3

	)

66 
	#MAX_RTC_TASKS_DELAY
 47

	)

68 #ifdeà
EGU_PRESENT


69 
	#SWI_PART
(
_id
è
	`CONCAT_2
(
SWI
,_id)

	)

70 
	#EGU_PART
(
_id
è
	`CONCAT_2
(
_EGU
,_id)

	)

71 
	#SWI_IRQ_n
(
_id
è
	`CONCAT_3
(
	`SWI_PART
(_id), 
	`EGU_PART
(_id),
_IRQn
)

	)

72 
	#SWI_IRQ_HªdËr_n
(
_id
è
	`CONCAT_3
(
	`SWI_PART
(_id), 
	`EGU_PART
(_id),
_IRQHªdËr
)

	)

74 
	#SWI_IRQ_n
(
_id
è
	`CONCAT_3
(
SWI
,_id,
_IRQn
)

	)

75 
	#SWI_IRQ_HªdËr_n
(
_id
è
	`CONCAT_3
(
SWI
,_id,
_IRQHªdËr
)

	)

78 
	#SWI_IRQn
 
	`SWI_IRQ_n
(
APP_TIMER_CONFIG_SWI_NUMBER
)

	)

79 
	#SWI_IRQHªdËr
 
	`SWI_IRQ_HªdËr_n
(
APP_TIMER_CONFIG_SWI_NUMBER
)

	)

82 
	#MODULE_INITIALIZED
 (
m_İ_queue
.
size
 !ğ0è

	)

87 
ušt32_t
 
	mticks_to_expœe
;

88 
ušt32_t
 
	mticks_©_¡¬t
;

89 
ušt32_t
 
	mticks_fœ¡_š‹rv®
;

90 
ušt32_t
 
	mticks_³riodic_š‹rv®
;

91 
boŞ
 
	mis_ruÂšg
;

92 
­p_tim”_mode_t
 
	mmode
;

93 
­p_tim”_timeout_hªdËr_t
 
	mp_timeout_hªdËr
;

94 * 
	mp_cÚ‹xt
;

95 * 
	mÃxt
;

96 } 
	ttim”_node_t
;

98 
STATIC_ASSERT
((
tim”_node_t
è=ğ
APP_TIMER_NODE_SIZE
);

103 
	mTIMER_USER_OP_TYPE_NONE
,

104 
	mTIMER_USER_OP_TYPE_START
,

105 
	mTIMER_USER_OP_TYPE_STOP
,

106 
	mTIMER_USER_OP_TYPE_STOP_ALL


107 } 
	ttim”_u£r_İ_ty³_t
;

112 
ušt32_t
 
	mticks_©_¡¬t
;

113 
ušt32_t
 
	mticks_fœ¡_š‹rv®
;

114 
ušt32_t
 
	mticks_³riodic_š‹rv®
;

115 * 
	mp_cÚ‹xt
;

116 } 
	ttim”_u£r_İ_¡¬t_t
;

121 
tim”_u£r_İ_ty³_t
 
	mİ_ty³
;

122 
tim”_node_t
 * 
	mp_node
;

125 
tim”_u£r_İ_¡¬t_t
 
	m¡¬t
;

126 } 
	m·¿ms
;

127 } 
	ttim”_u£r_İ_t
;

136 
ušt8_t
 
	mfœ¡
;

137 
ušt8_t
 
	mÏ¡
;

138 
ušt8_t
 
	msize
;

139 
tim”_u£r_İ_t
 
	mu£r_İ_queue
[
APP_TIMER_CONFIG_OP_QUEUE_SIZE
+1];

140 } 
	ttim”_İ_queue_t
;

142 
STATIC_ASSERT
((
tim”_İ_queue_t
) % 4 == 0);

144 
	#CONTEXT_QUEUE_SIZE_MAX
 (2)

	)

146 
tim”_İ_queue_t
 
	gm_İ_queue
;

147 
tim”_node_t
 * 
	gmp_tim”_id_h—d
;

148 
ušt32_t
 
	gm_ticks_Ï‹¡
;

149 
ušt32_t
 
	gm_ticks_–­£d
[
CONTEXT_QUEUE_SIZE_MAX
];

150 
ušt8_t
 
	gm_ticks_–­£d_q_»ad_šd
;

151 
ušt8_t
 
	gm_ticks_–­£d_q_wr™e_šd
;

152 
boŞ
 
	gm_¹c1_ruÂšg
;

153 
boŞ
 
	gm_¹c1_»£t
;

155 #ià
APP_TIMER_WITH_PROFILER


156 
ušt8_t
 
	gm_max_u£r_İ_queue_utiz©iÚ
;

163 
	$¹c1_š™
(
ušt32_t
 
´esÿËr
)

165 
NRF_RTC1
->
PRESCALER
 = 
´esÿËr
;

166 
	`NVIC_S‘PriÜ™y
(
RTC1_IRQn
, 
RTC1_IRQ_PRI
);

167 
	}
}

172 
	$¹c1_¡¬t
()

174 
NRF_RTC1
->
EVTENSET
 = 
RTC_EVTEN_COMPARE0_Msk
;

175 
NRF_RTC1
->
INTENSET
 = 
RTC_INTENSET_COMPARE0_Msk
;

177 
	`NVIC_CË¬P’dšgIRQ
(
RTC1_IRQn
);

178 
	`NVIC_EÇbËIRQ
(
RTC1_IRQn
);

180 
NRF_RTC1
->
TASKS_START
 = 1;

181 
	`Äf_d–ay_us
(
MAX_RTC_TASKS_DELAY
);

183 
m_¹c1_ruÂšg
 = 
Œue
;

184 
	}
}

189 
	$¹c1_¡İ
()

191 
	`NVIC_Di§bËIRQ
(
RTC1_IRQn
);

193 
NRF_RTC1
->
EVTENCLR
 = 
RTC_EVTEN_COMPARE0_Msk
;

194 
NRF_RTC1
->
INTENCLR
 = 
RTC_INTENSET_COMPARE0_Msk
;

196 
NRF_RTC1
->
TASKS_STOP
 = 1;

197 
	`Äf_d–ay_us
(
MAX_RTC_TASKS_DELAY
);

199 
NRF_RTC1
->
TASKS_CLEAR
 = 1;

200 
m_ticks_Ï‹¡
 = 0;

201 
	`Äf_d–ay_us
(
MAX_RTC_TASKS_DELAY
);

203 
m_¹c1_ruÂšg
 = 
çl£
;

204 
	}
}

211 
__INLINE
 
ušt32_t
 
	$¹c1_couÁ”_g‘
()

213  
NRF_RTC1
->
COUNTER
;

214 
	}
}

221 
__INLINE
 
ušt32_t
 
	$ticks_diff_g‘
(
ušt32_t
 
ticks_now
, ušt32_ˆ
ticks_Şd
)

223  ((
ticks_now
 - 
ticks_Şd
è& 
MAX_RTC_COUNTER_VAL
);

224 
	}
}

232 
__INLINE
 
	$¹c1_com·»0_£t
(
ušt32_t
 
v®ue
)

234 
NRF_RTC1
->
CC
[0] = 
v®ue
;

235 
	}
}

242 
	$tim”_li¡_š£¹
(
tim”_node_t
 * 
p_tim”
)

244 ià(
mp_tim”_id_h—d
 =ğ
NULL
)

246 
mp_tim”_id_h—d
 = 
p_tim”
;

250 ià(
p_tim”
->
ticks_to_expœe
 <ğ
mp_tim”_id_h—d
->ticks_to_expire)

252 
mp_tim”_id_h—d
->
ticks_to_expœe
 -ğ
p_tim”
->ticks_to_expire;

254 
p_tim”
->
Ãxt
 = 
mp_tim”_id_h—d
;

255 
mp_tim”_id_h—d
 = 
p_tim”
;

259 
tim”_node_t
 * 
p_´evious
;

260 
tim”_node_t
 * 
p_cu¼’t
;

261 
ušt32_t
 
ticks_to_expœe
;

263 
ticks_to_expœe
 = 
p_tim”
->ticks_to_expire;

264 
p_´evious
 = 
mp_tim”_id_h—d
;

265 
p_cu¼’t
 = 
mp_tim”_id_h—d
;

267 (
p_cu¼’t
 !ğ
NULL
è&& (
ticks_to_expœe
 >…_current->ticks_to_expire))

269 
ticks_to_expœe
 -ğ
p_cu¼’t
->ticks_to_expire;

270 
p_´evious
 = 
p_cu¼’t
;

271 
p_cu¼’t
 =…_cu¼’t->
Ãxt
;

274 ià(
p_cu¼’t
 !ğ
NULL
)

276 
p_cu¼’t
->
ticks_to_expœe
 -=icks_to_expire;

279 
p_tim”
->
ticks_to_expœe
 =icks_to_expire;

280 
p_tim”
->
Ãxt
 = 
p_cu¼’t
;

281 
p_´evious
->
Ãxt
 = 
p_tim”
;

284 
	}
}

293 
boŞ
 
	$tim”_li¡_»move
(
tim”_node_t
 * 
p_tim”
)

295 
tim”_node_t
 * 
p_Şd_h—d
;

296 
tim”_node_t
 * 
p_´evious
;

297 
tim”_node_t
 * 
p_cu¼’t
;

298 
ušt32_t
 
timeout
;

301 
p_Şd_h—d
 = 
mp_tim”_id_h—d
;

302 
p_´evious
 = 
mp_tim”_id_h—d
;

303 
p_cu¼’t
 = 
p_´evious
;

305 
p_cu¼’t
 !ğ
NULL
)

307 ià(
p_cu¼’t
 =ğ
p_tim”
)

311 
p_´evious
 = 
p_cu¼’t
;

312 
p_cu¼’t
 =…_cu¼’t->
Ãxt
;

316 ià(
p_cu¼’t
 =ğ
NULL
)

318  
çl£
;

322 ià(
p_´evious
 =ğ
p_cu¼’t
)

324 
mp_tim”_id_h—d
 = mp_tim”_id_h—d->
Ãxt
;

327 ià(
mp_tim”_id_h—d
 =ğ
NULL
)

329 
NRF_RTC1
->
TASKS_CLEAR
 = 1;

330 
m_ticks_Ï‹¡
 = 0;

331 
m_¹c1_»£t
 = 
Œue
;

332 
	`Äf_d–ay_us
(
MAX_RTC_TASKS_DELAY
);

337 
timeout
 = 
p_cu¼’t
->
ticks_to_expœe
;

340 
p_´evious
->
Ãxt
 = 
p_cu¼’t
->next;

343 
p_cu¼’t
 = 
p_´evious
->
Ãxt
;

344 ià(
p_cu¼’t
 !ğ
NULL
)

346 
p_cu¼’t
->
ticks_to_expœe
 +ğ
timeout
;

349  (
p_Şd_h—d
 !ğ
mp_tim”_id_h—d
);

350 
	}
}

355 
	$tim”_timeouts_check_sched
()

357 
	`NVIC_S‘P’dšgIRQ
(
RTC1_IRQn
);

358 
	}
}

363 
	$tim”_li¡_hªdËr_sched
()

365 
	`NVIC_S‘P’dšgIRQ
(
SWI_IRQn
);

366 
	}
}

368 #ià
APP_TIMER_CONFIG_USE_SCHEDULER


369 
	$timeout_hªdËr_scheduËd_exec
(* 
p_ev’t_d©a
, 
ušt16_t
 
ev’t_size
)

371 
	`APP_ERROR_CHECK_BOOL
(
ev’t_size
 =ğ(
­p_tim”_ev’t_t
));

372 
­p_tim”_ev’t_t
 cÚ¡ * 
p_tim”_ev’t
 = (­p_tim”_ev’t_ˆ*)
p_ev’t_d©a
;

374 
p_tim”_ev’t
->
	`timeout_hªdËr
Õ_tim”_ev’t->
p_cÚ‹xt
);

375 
	}
}

383 
	$timeout_hªdËr_exec
(
tim”_node_t
 * 
p_tim”
)

385 #ià
APP_TIMER_CONFIG_USE_SCHEDULER


386 
­p_tim”_ev’t_t
 
tim”_ev’t
;

388 
tim”_ev’t
.
timeout_hªdËr
 = 
p_tim”
->
p_timeout_hªdËr
;

389 
tim”_ev’t
.
p_cÚ‹xt
 = 
p_tim”
->p_context;

390 
ušt32_t
 
”r_code
 = 
	`­p_sched_ev’t_put
(&
tim”_ev’t
, Ñim”_ev’t), 
timeout_hªdËr_scheduËd_exec
);

391 
	`APP_ERROR_CHECK
(
”r_code
);

393 
p_tim”
->
	`p_timeout_hªdËr
Õ_tim”->
p_cÚ‹xt
);

395 
	}
}

400 
	$tim”_timeouts_check
()

403 ià(
mp_tim”_id_h—d
 !ğ
NULL
)

405 
tim”_node_t
 * 
p_tim”
;

406 
tim”_node_t
 * 
p_´evious_tim”
;

407 
ušt32_t
 
ticks_–­£d
;

408 
ušt32_t
 
ticks_expœed
;

411 
ticks_expœed
 = 0;

414 
ticks_–­£d
 = 
	`ticks_diff_g‘
(
	`¹c1_couÁ”_g‘
(), 
m_ticks_Ï‹¡
);

417 
p_tim”
 = 
mp_tim”_id_h—d
;

420 
p_tim”
 !ğ
NULL
)

423 ià(
ticks_–­£d
 < 
p_tim”
->
ticks_to_expœe
)

429 
ticks_–­£d
 -ğ
p_tim”
->
ticks_to_expœe
;

430 
ticks_expœed
 +ğ
p_tim”
->
ticks_to_expœe
;

433 
p_´evious_tim”
 = 
p_tim”
;

434 
p_tim”
 =…_tim”->
Ãxt
;

437 ià(
p_´evious_tim”
->
is_ruÂšg
)

439 
p_´evious_tim”
->
is_ruÂšg
 = 
çl£
;

440 
	`timeout_hªdËr_exec
(
p_´evious_tim”
);

445 ià(
m_ticks_–­£d_q_»ad_šd
 =ğ
m_ticks_–­£d_q_wr™e_šd
)

452 ià(++
m_ticks_–­£d_q_wr™e_šd
 =ğ
CONTEXT_QUEUE_SIZE_MAX
)

456 
m_ticks_–­£d_q_wr™e_šd
 = 0;

461 
m_ticks_–­£d
[
m_ticks_–­£d_q_wr™e_šd
] = 
ticks_expœed
;

463 
	`tim”_li¡_hªdËr_sched
();

465 
	}
}

474 
boŞ
 
	$–­£d_ticks_acquœe
(
ušt32_t
 * 
p_ticks_–­£d
)

477 ià(
m_ticks_–­£d_q_»ad_šd
 !ğ
m_ticks_–­£d_q_wr™e_šd
)

480 
m_ticks_–­£d_q_»ad_šd
++;

481 ià(
m_ticks_–­£d_q_»ad_šd
 =ğ
CONTEXT_QUEUE_SIZE_MAX
)

483 
m_ticks_–­£d_q_»ad_šd
 = 0;

486 *
p_ticks_–­£d
 = 
m_ticks_–­£d
[
m_ticks_–­£d_q_»ad_šd
];

488 
m_ticks_Ï‹¡
 +ğ*
p_ticks_–­£d
;

489 
m_ticks_Ï‹¡
 &ğ
MAX_RTC_COUNTER_VAL
;

491  
Œue
;

496 *
p_ticks_–­£d
 = 0;

497  
çl£
;

499 
	}
}

508 
	$expœed_tim”s_hªdËr
(
ušt32_t
 
ticks_–­£d
,

509 
ušt32_t
 
ticks_´evious
,

510 
tim”_node_t
 ** 
p_»¡¬t_li¡_h—d
)

512 
ušt32_t
 
ticks_expœed
 = 0;

514 
mp_tim”_id_h—d
 !ğ
NULL
)

516 
tim”_node_t
 * 
p_tim”
;

517 
tim”_node_t
 * 
p_tim”_expœed
;

520 
p_tim”
 = 
mp_tim”_id_h—d
;

523 ià(
ticks_–­£d
 < 
p_tim”
->
ticks_to_expœe
)

525 
p_tim”
->
ticks_to_expœe
 -ğ
ticks_–­£d
;

530 
ticks_–­£d
 -ğ
p_tim”
->
ticks_to_expœe
;

531 
ticks_expœed
 +ğ
p_tim”
->
ticks_to_expœe
;

534 
p_tim”
->
ticks_to_expœe
 = 0;

537 
p_tim”_expœed
 = 
mp_tim”_id_h—d
;

538 
mp_tim”_id_h—d
 = 
p_tim”
->
Ãxt
;

541 ià(
p_tim”
->
ticks_³riodic_š‹rv®
 != 0)

543 
p_tim”
->
ticks_©_¡¬t
 = (
ticks_´evious
 + 
ticks_expœed
è& 
MAX_RTC_COUNTER_VAL
;

544 
p_tim”
->
ticks_fœ¡_š‹rv®
 =…_tim”->
ticks_³riodic_š‹rv®
;

545 
p_tim”
->
Ãxt
 = *
p_»¡¬t_li¡_h—d
;

546 *
p_»¡¬t_li¡_h—d
 = 
p_tim”_expœed
;

549 
	}
}

558 
boŞ
 
	$li¡_š£¹iÚs_hªdËr
(
tim”_node_t
 * 
p_»¡¬t_li¡_h—d
)

560 
boŞ
 
com·»_upd©e
 = 
çl£
;

562 
tim”_node_t
 * 
p_tim”_id_Şd_h—d
;

565 
p_tim”_id_Şd_h—d
 = 
mp_tim”_id_h—d
;

568 (
p_»¡¬t_li¡_h—d
 !ğ
NULL
è|| (
m_İ_queue
.
fœ¡
 !ğm_İ_queue.
Ï¡
))

570 
tim”_node_t
 * 
p_tim”
;

572 ià(
p_»¡¬t_li¡_h—d
 !ğ
NULL
)

574 
p_tim”
 = 
p_»¡¬t_li¡_h—d
;

575 
p_»¡¬t_li¡_h—d
 = 
p_tim”
->
Ãxt
;

579 
tim”_u£r_İ_t
 * 
p_u£r_İ
 = &
m_İ_queue
.
u£r_İ_queue
[m_İ_queue.
fœ¡
];

581 
m_İ_queue
.
fœ¡
++;

582 ià(
m_İ_queue
.
fœ¡
 =ğm_İ_queue.
size
)

584 
m_İ_queue
.
fœ¡
 = 0;

587 
p_tim”
 = 
p_u£r_İ
->
p_node
;

589 
p_u£r_İ
->
İ_ty³
)

591 
TIMER_USER_OP_TYPE_STOP
:

593 ià(
	`tim”_li¡_»move
(
p_u£r_İ
->
p_node
))

595 
com·»_upd©e
 = 
Œue
;

598 
p_tim”
->
is_ruÂšg
 = 
çl£
;

601 
TIMER_USER_OP_TYPE_STOP_ALL
:

603 
mp_tim”_id_h—d
 !ğ
NULL
)

605 
tim”_node_t
 * 
p_h—d
 = 
mp_tim”_id_h—d
;

607 
p_h—d
->
is_ruÂšg
 = 
çl£
;

608 
mp_tim”_id_h—d
 = 
p_h—d
->
Ãxt
;

611 
TIMER_USER_OP_TYPE_START
:

618 ià(
p_tim”
->
is_ruÂšg
)

623 
p_tim”
->
ticks_©_¡¬t
 = 
p_u£r_İ
->
·¿ms
.
¡¬t
.ticks_at_start;

624 
p_tim”
->
ticks_fœ¡_š‹rv®
 = 
p_u£r_İ
->
·¿ms
.
¡¬t
.ticks_first_interval;

625 
p_tim”
->
ticks_³riodic_š‹rv®
 = 
p_u£r_İ
->
·¿ms
.
¡¬t
.ticks_periodic_interval;

626 
p_tim”
->
p_cÚ‹xt
 = 
p_u£r_İ
->
·¿ms
.
¡¬t
.p_context;

628 ià(
m_¹c1_»£t
)

630 
p_tim”
->
ticks_©_¡¬t
 = 0;

636 ((
p_tim”
->
ticks_©_¡¬t
 - 
m_ticks_Ï‹¡
è& 
MAX_RTC_COUNTER_VAL
)

638 (
MAX_RTC_COUNTER_VAL
 / 2)

641 
p_tim”
->
ticks_to_expœe
 = 
	`ticks_diff_g‘
Õ_tim”->
ticks_©_¡¬t
, 
m_ticks_Ï‹¡
) +

642 
p_tim”
->
ticks_fœ¡_š‹rv®
;

646 
ušt32_t
 
d–_cu¼’t_¡¬t
;

648 
d–_cu¼’t_¡¬t
 = 
	`ticks_diff_g‘
(
m_ticks_Ï‹¡
, 
p_tim”
->
ticks_©_¡¬t
);

649 ià(
p_tim”
->
ticks_fœ¡_š‹rv®
 > 
d–_cu¼’t_¡¬t
)

651 
p_tim”
->
ticks_to_expœe
 =…_tim”->
ticks_fœ¡_š‹rv®
 - 
d–_cu¼’t_¡¬t
;

655 
p_tim”
->
ticks_to_expœe
 = 0;

659 
p_tim”
->
ticks_©_¡¬t
 = 0;

660 
p_tim”
->
ticks_fœ¡_š‹rv®
 = 0;

661 
p_tim”
->
is_ruÂšg
 = 
Œue
;

662 
p_tim”
->
Ãxt
 = 
NULL
;

665 
	`tim”_li¡_š£¹
(
p_tim”
);

668  (
com·»_upd©e
 || (
mp_tim”_id_h—d
 !ğ
p_tim”_id_Şd_h—d
));

669 
	}
}

674 
	$com·»_»g_upd©e
(
tim”_node_t
 * 
p_tim”_id_h—d_Şd
)

677 ià(
mp_tim”_id_h—d
 !ğ
NULL
)

679 
ušt32_t
 
ticks_to_expœe
 = 
mp_tim”_id_h—d
->ticks_to_expire;

680 
ušt32_t
 
´e_couÁ”_v®
 = 
	`¹c1_couÁ”_g‘
();

681 
ušt32_t
 
cc
 = 
m_ticks_Ï‹¡
;

682 
ušt32_t
 
ticks_–­£d
 = 
	`ticks_diff_g‘
(
´e_couÁ”_v®
, 
cc
è+ 
RTC_COMPARE_OFFSET_MIN
;

684 ià(!
m_¹c1_ruÂšg
)

687 
	`¹c1_¡¬t
();

690 
cc
 +ğ(
ticks_–­£d
 < 
ticks_to_expœe
) ?icks_to_expire :icks_elapsed;

691 
cc
 &ğ
MAX_RTC_COUNTER_VAL
;

693 
	`¹c1_com·»0_£t
(
cc
);

695 
ušt32_t
 
po¡_couÁ”_v®
 = 
	`¹c1_couÁ”_g‘
();

698 (
	`ticks_diff_g‘
(
po¡_couÁ”_v®
, 
´e_couÁ”_v®
è+ 
RTC_COMPARE_OFFSET_MIN
)

700 
	`ticks_diff_g‘
(
cc
, 
´e_couÁ”_v®
)

708 
	`¹c1_com·»0_£t
(
	`¹c1_couÁ”_g‘
());

709 
	`Äf_d–ay_us
(
MAX_RTC_TASKS_DELAY
);

710 
	`tim”_timeouts_check_sched
();

715 #ià(
APP_TIMER_KEEPS_RTC_ACTIVE
 == 0)

717 
	`¹c1_¡İ
();

720 
	}
}

725 
	$tim”_li¡_hªdËr
()

727 
tim”_node_t
 * 
p_»¡¬t_li¡_h—d
 = 
NULL
;

729 
ušt32_t
 
ticks_–­£d
;

730 
ušt32_t
 
ticks_´evious
;

731 
boŞ
 
ticks_have_–­£d
;

732 
boŞ
 
com·»_upd©e
 = 
çl£
;

733 
tim”_node_t
 * 
p_tim”_id_h—d_Şd
;

735 #ià
APP_TIMER_WITH_PROFILER


737 
ušt8_t
 
size
 = 
m_İ_queue
.size;

738 
ušt8_t
 
fœ¡
 = 
m_İ_queue
.first;

739 
ušt8_t
 
Ï¡
 = 
m_İ_queue
.last;

740 
ušt8_t
 
utiz©iÚ
 = (
fœ¡
 <ğ
Ï¡
è? (Ï¡ - fœ¡è: (
size
 + 1 - first +†ast);

742 ià(
utiz©iÚ
 > 
m_max_u£r_İ_queue_utiz©iÚ
)

744 
m_max_u£r_İ_queue_utiz©iÚ
 = 
utiz©iÚ
;

750 
ticks_´evious
 = 
m_ticks_Ï‹¡
;

751 
p_tim”_id_h—d_Şd
 = 
mp_tim”_id_h—d
;

754 
ticks_have_–­£d
 = 
	`–­£d_ticks_acquœe
(&
ticks_–­£d
);

757 ià(
ticks_have_–­£d
)

759 
	`expœed_tim”s_hªdËr
(
ticks_–­£d
, 
ticks_´evious
, &
p_»¡¬t_li¡_h—d
);

760 
com·»_upd©e
 = 
Œue
;

765 ià(
	`li¡_š£¹iÚs_hªdËr
(
p_»¡¬t_li¡_h—d
))

767 
com·»_upd©e
 = 
Œue
;

771 ià(
com·»_upd©e
)

773 
	`com·»_»g_upd©e
(
p_tim”_id_h—d_Şd
);

775 
m_¹c1_»£t
 = 
çl£
;

776 
	}
}

783 
	$u£r_İ_’que
(
ušt8_t
 
Ï¡_šdex
)

785 
m_İ_queue
.
Ï¡
 = 
Ï¡_šdex
;

786 
	}
}

795 
tim”_u£r_İ_t
 * 
	$u£r_İ_®loc
Ğ
ušt8_t
 * 
p_Ï¡_šdex
)

797 
ušt8_t
 
Ï¡
;

798 
tim”_u£r_İ_t
 * 
p_u£r_İ
;

800 
Ï¡
 = 
m_İ_queue
.last + 1;

801 ià(
Ï¡
 =ğ
m_İ_queue
.
size
)

804 
Ï¡
 = 0;

806 ià(
Ï¡
 =ğ
m_İ_queue
.
fœ¡
)

809  
NULL
;

812 *
p_Ï¡_šdex
 = 
Ï¡
;

813 
p_u£r_İ
 = &
m_İ_queue
.
u£r_İ_queue
[m_İ_queue.
Ï¡
];

815  
p_u£r_İ
;

816 
	}
}

829 
ušt32_t
 
	$tim”_¡¬t_İ_scheduË
(
tim”_node_t
 * 
p_node
,

830 
ušt32_t
 
timeout_š™Ÿl
,

831 
ušt32_t
 
timeout_³riodic
,

832 * 
p_cÚ‹xt
)

834 
ušt8_t
 
Ï¡_šdex
;

835 
ušt32_t
 
”r_code
 = 
NRF_SUCCESS
;

837 
	`CRITICAL_REGION_ENTER
();

838 
tim”_u£r_İ_t
 * 
p_u£r_İ
 = 
	`u£r_İ_®loc
(&
Ï¡_šdex
);

839 ià(
p_u£r_İ
 =ğ
NULL
)

841 
”r_code
 = 
NRF_ERROR_NO_MEM
;

845 
p_u£r_İ
->
İ_ty³
 = 
TIMER_USER_OP_TYPE_START
;

846 
p_u£r_İ
->
p_node
 =…_node;

847 
p_u£r_İ
->
·¿ms
.
¡¬t
.
ticks_©_¡¬t
 = 
	`¹c1_couÁ”_g‘
();

848 
p_u£r_İ
->
·¿ms
.
¡¬t
.
ticks_fœ¡_š‹rv®
 = 
timeout_š™Ÿl
;

849 
p_u£r_İ
->
·¿ms
.
¡¬t
.
ticks_³riodic_š‹rv®
 = 
timeout_³riodic
;

850 
p_u£r_İ
->
·¿ms
.
¡¬t
.
p_cÚ‹xt
 =…_context;

852 
	`u£r_İ_’que
(
Ï¡_šdex
);

854 
	`CRITICAL_REGION_EXIT
();

856 ià(
”r_code
 =ğ
NRF_SUCCESS
)

858 
	`tim”_li¡_hªdËr_sched
();

861  
”r_code
;

862 
	}
}

873 
ušt32_t
 
	$tim”_¡İ_İ_scheduË
(
tim”_node_t
 * 
p_node
,

874 
tim”_u£r_İ_ty³_t
 
İ_ty³
)

876 
ušt8_t
 
Ï¡_šdex
;

877 
ušt32_t
 
”r_code
 = 
NRF_SUCCESS
;

879 
	`CRITICAL_REGION_ENTER
();

880 
tim”_u£r_İ_t
 * 
p_u£r_İ
 = 
	`u£r_İ_®loc
(&
Ï¡_šdex
);

881 ià(
p_u£r_İ
 =ğ
NULL
)

883 
”r_code
 = 
NRF_ERROR_NO_MEM
;

887 
p_u£r_İ
->
İ_ty³
 = op_type;

888 
p_u£r_İ
->
p_node
 =…_node;

890 
	`u£r_İ_’que
(
Ï¡_šdex
);

892 
	`CRITICAL_REGION_EXIT
();

894 ià(
”r_code
 =ğ
NRF_SUCCESS
)

896 
	`tim”_li¡_hªdËr_sched
();

899  
”r_code
;

900 
	}
}

906 
	$RTC1_IRQHªdËr
()

909 
NRF_RTC1
->
EVENTS_COMPARE
[0] = 0;

910 
NRF_RTC1
->
EVENTS_COMPARE
[1] = 0;

911 
NRF_RTC1
->
EVENTS_COMPARE
[2] = 0;

912 
NRF_RTC1
->
EVENTS_COMPARE
[3] = 0;

913 
NRF_RTC1
->
EVENTS_TICK
 = 0;

914 
NRF_RTC1
->
EVENTS_OVRFLW
 = 0;

917 
	`tim”_timeouts_check
();

918 
	}
}

925 
	$SWI_IRQHªdËr
()

927 
	`tim”_li¡_hªdËr
();

928 
	}
}

931 
»t_code_t
 
	$­p_tim”_š™
()

934 
	`¹c1_¡İ
();

937 
m_İ_queue
.
fœ¡
 = 0;

938 
m_İ_queue
.
Ï¡
 = 0;

939 
m_İ_queue
.
size
 = 
APP_TIMER_CONFIG_OP_QUEUE_SIZE
+1;

941 
mp_tim”_id_h—d
 = 
NULL
;

942 
m_ticks_–­£d_q_»ad_šd
 = 0;

943 
m_ticks_–­£d_q_wr™e_šd
 = 0;

945 #ià
APP_TIMER_WITH_PROFILER


946 
m_max_u£r_İ_queue_utiz©iÚ
 = 0;

949 
	`NVIC_CË¬P’dšgIRQ
(
SWI_IRQn
);

950 
	`NVIC_S‘PriÜ™y
(
SWI_IRQn
, 
SWI_IRQ_PRI
);

951 
	`NVIC_EÇbËIRQ
(
SWI_IRQn
);

953 
	`¹c1_š™
(
APP_TIMER_CONFIG_RTC_FREQUENCY
);

955 
m_ticks_Ï‹¡
 = 
	`¹c1_couÁ”_g‘
();

957  
NRF_SUCCESS
;

958 
	}
}

961 
»t_code_t
 
	$­p_tim”_ü—‹
(
­p_tim”_id_t
 cÚ¡ * 
p_tim”_id
,

962 
­p_tim”_mode_t
 
mode
,

963 
­p_tim”_timeout_hªdËr_t
 
timeout_hªdËr
)

966 
	`VERIFY_MODULE_INITIALIZED
();

968 ià(
timeout_hªdËr
 =ğ
NULL
)

970  
NRF_ERROR_INVALID_PARAM
;

972 ià(
p_tim”_id
 =ğ
NULL
)

974  
NRF_ERROR_INVALID_PARAM
;

976 ià(((
tim”_node_t
*)*
p_tim”_id
)->
is_ruÂšg
)

978  
NRF_ERROR_INVALID_STATE
;

981 
tim”_node_t
 * 
p_node
 = (tim”_node_ˆ*)*
p_tim”_id
;

982 
p_node
->
is_ruÂšg
 = 
çl£
;

983 
p_node
->
mode
 = mode;

984 
p_node
->
p_timeout_hªdËr
 = 
timeout_hªdËr
;

985  
NRF_SUCCESS
;

986 
	}
}

988 
»t_code_t
 
	$­p_tim”_¡¬t
(
­p_tim”_id_t
 
tim”_id
, 
ušt32_t
 
timeout_ticks
, * 
p_cÚ‹xt
)

990 
ušt32_t
 
timeout_³riodic
;

991 
tim”_node_t
 * 
p_node
 = (tim”_node_t*)
tim”_id
;

994 
	`VERIFY_MODULE_INITIALIZED
();

996 ià(
tim”_id
 == 0)

998  
NRF_ERROR_INVALID_STATE
;

1000 ià(
timeout_ticks
 < 
APP_TIMER_MIN_TIMEOUT_TICKS
)

1002  
NRF_ERROR_INVALID_PARAM
;

1004 ià(
p_node
->
p_timeout_hªdËr
 =ğ
NULL
)

1006  
NRF_ERROR_INVALID_STATE
;

1010 
timeout_³riodic
 = (
p_node
->
mode
 =ğ
APP_TIMER_MODE_REPEATED
è? 
timeout_ticks
 : 0;

1012  
	`tim”_¡¬t_İ_scheduË
(
p_node
,

1013 
timeout_ticks
,

1014 
timeout_³riodic
,

1015 
p_cÚ‹xt
);

1016 
	}
}

1019 
»t_code_t
 
	$­p_tim”_¡İ
(
­p_tim”_id_t
 
tim”_id
)

1021 
tim”_node_t
 * 
p_node
 = (tim”_node_t*)
tim”_id
;

1023 
	`VERIFY_MODULE_INITIALIZED
();

1025 ià((
tim”_id
 =ğ
NULL
è|| (
p_node
->
p_timeout_hªdËr
 == NULL))

1027  
NRF_ERROR_INVALID_STATE
;

1030 
p_node
->
is_ruÂšg
 = 
çl£
;

1033  
	`tim”_¡İ_İ_scheduË
(
p_node
, 
TIMER_USER_OP_TYPE_STOP
);

1034 
	}
}

1037 
»t_code_t
 
	$­p_tim”_¡İ_®l
()

1040 
	`VERIFY_MODULE_INITIALIZED
();

1042  
	`tim”_¡İ_İ_scheduË
(
NULL
, 
TIMER_USER_OP_TYPE_STOP_ALL
);

1043 
	}
}

1046 
ušt32_t
 
	$­p_tim”_út_g‘
()

1048  
	`¹c1_couÁ”_g‘
();

1049 
	}
}

1052 
ušt32_t
 
	$­p_tim”_út_diff_compu‹
(
ušt32_t
 
ticks_to
,

1053 
ušt32_t
 
ticks_äom
)

1055  
	`ticks_diff_g‘
(
ticks_to
, 
ticks_äom
);

1056 
	}
}

1058 #ià
APP_TIMER_WITH_PROFILER


1059 
ušt8_t
 
	$­p_tim”_İ_queue_utiz©iÚ_g‘
()

1061  
m_max_u£r_İ_queue_utiz©iÚ
;

1062 
	}
}

1065 
	$­p_tim”_·u£
()

1067 
NRF_RTC1
->
TASKS_STOP
 = 1;

1068 
	}
}

1070 
	$­p_tim”_»sume
()

1072 
NRF_RTC1
->
TASKS_START
 = 1;

1073 
	}
}

	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\libraries\util\app_error.c

49 
	~"Äf.h
"

50 
	~<¡dio.h
>

51 
	~"­p_”rÜ.h
"

52 
	~"nÜdic_commÚ.h
"

53 
	~"sdk_”rÜs.h
"

64 
	$­p_”rÜ_hªdËr_b¬e
(
»t_code_t
 
”rÜ_code
)

66 
”rÜ_šfo_t
 
”rÜ_šfo
 =

68 .
lše_num
 = 0,

69 .
p_fe_Çme
 = 
NULL
,

70 .
”r_code
 = 
”rÜ_code
,

73 
	`­p_”rÜ_çuÉ_hªdËr
(
NRF_FAULT_ID_SDK_ERROR
, 0, (
ušt32_t
)(&
”rÜ_šfo
));

75 
	`UNUSED_VARIABLE
(
”rÜ_šfo
);

76 
	}
}

78 
	$­p_”rÜ_§ve_ªd_¡İ
(
ušt32_t
 
id
, ušt32_ˆ
pc
, ušt32_ˆ
šfo
)

83 
ušt32_t
 
çuÉ_id
;

84 
ušt32_t
 
pc
;

85 
ušt32_t
 
”rÜ_šfo
;

86 
as£¹_šfo_t
 * 
p_as£¹_šfo
;

87 
”rÜ_šfo_t
 * 
p_”rÜ_šfo
;

88 
»t_code_t
 
”r_code
;

89 
ušt32_t
 
lše_num
;

90 cÚ¡ 
ušt8_t
 * 
p_fe_Çme
;

91 } 
m_”rÜ_d©a
 = {0};

95 vŞ©
boŞ
 
loİ
 = 
Œue
;

96 
	`UNUSED_VARIABLE
(
loİ
);

98 
m_”rÜ_d©a
.
çuÉ_id
 = 
id
;

99 
m_”rÜ_d©a
.
pc
 =…c;

100 
m_”rÜ_d©a
.
”rÜ_šfo
 = 
šfo
;

102 
id
)

104 
NRF_FAULT_ID_SDK_ASSERT
:

105 
m_”rÜ_d©a
.
p_as£¹_šfo
 = (
as£¹_šfo_t
 *)
šfo
;

106 
m_”rÜ_d©a
.
lše_num
 = m_”rÜ_d©a.
p_as£¹_šfo
->line_num;

107 
m_”rÜ_d©a
.
p_fe_Çme
 = m_”rÜ_d©a.
p_as£¹_šfo
->p_file_name;

110 
NRF_FAULT_ID_SDK_ERROR
:

111 
m_”rÜ_d©a
.
p_”rÜ_šfo
 = (
”rÜ_šfo_t
 *)
šfo
;

112 
m_”rÜ_d©a
.
”r_code
 = m_”rÜ_d©a.
p_”rÜ_šfo
->err_code;

113 
m_”rÜ_d©a
.
lše_num
 = m_”rÜ_d©a.
p_”rÜ_šfo
->line_num;

114 
m_”rÜ_d©a
.
p_fe_Çme
 = m_”rÜ_d©a.
p_”rÜ_šfo
->p_file_name;

118 
	`UNUSED_VARIABLE
(
m_”rÜ_d©a
);

121 
	`__di§bË_œq
();

122 
loİ
);

124 
	`__’abË_œq
();

125 
	}
}

	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\libraries\util\app_error_handler_gcc.c

40 
	~"sdk_commÚ.h
"

41 
	~"comp”_ab¡¿ùiÚ.h
"

42 
	~"­p_”rÜ.h
"

44 #ià
defšed
 (
__CORTEX_M
) && (__CORTEX_M == 0x04)

45 
	$­p_”rÜ_hªdËr
(
»t_code_t
 
”rÜ_code
, 
ušt32_t
 
lše_num
, cÚ¡ 
ušt8_t
 * 
p_fe_Çme
è
	`__©Œibu‹__
(Ğ
Çked
 ));

47 
	$­p_”rÜ_hªdËr
(
»t_code_t
 
”rÜ_code
, 
ušt32_t
 
lše_num
, cÚ¡ 
ušt8_t
 * 
p_fe_Çme
)

49 
__ASM
 volatile(

75 "I" (
APP_ERROR_ERROR_INFO_SIZE_ALIGNED_8BYTE
),

76 "I" (
APP_ERROR_ERROR_INFO_OFFSET_ERR_CODE
),

77 "I" (
APP_ERROR_ERROR_INFO_OFFSET_P_FILE_NAME
),

78 "I" (
APP_ERROR_ERROR_INFO_OFFSET_LINE_NUM
),

79 "X" (
NRF_FAULT_ID_SDK_ERROR
),

80 "X" (
­p_”rÜ_çuÉ_hªdËr
)

84 
	}
}

85 #–ià
defšed
(
__CORTEX_M
) && (__CORTEX_M == 0x00)

87 
	$­p_”rÜ_hªdËr
(
»t_code_t
 
”rÜ_code
, 
ušt32_t
 
lše_num
, cÚ¡ 
ušt8_t
 * 
p_fe_Çme
)

89 
”rÜ_šfo_t
 
”rÜ_šfo
 = {

90 .
lše_num
 =†ine_num,

91 .
p_fe_Çme
 =…_file_name,

92 .
”r_code
 = 
”rÜ_code
,

94 
	`­p_”rÜ_çuÉ_hªdËr
(
NRF_FAULT_ID_SDK_ERROR
, 0, (
ušt32_t
)(&
”rÜ_šfo
));

96 
	`UNUSED_VARIABLE
(
”rÜ_šfo
);

97 
	}
}

99 #”rÜ 
Arch™eùu»
 
nÙ
 
suµÜ‹d


	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\libraries\util\app_error_weak.c

40 
	~"­p_”rÜ.h
"

42 
	~"Äf_log.h
"

43 
	~"Äf_log_ù¾.h
"

44 
	~"Äf_¡»¼Ü.h
"

46 #ià
defšed
(
SOFTDEVICE_PRESENT
) && SOFTDEVICE_PRESENT

47 
	~"Äf_sdm.h
"

55 
__WEAK
 
	$­p_”rÜ_çuÉ_hªdËr
(
ušt32_t
 
id
, ušt32_ˆ
pc
, ušt32_ˆ
šfo
)

57 
	`__di§bË_œq
();

58 
	`NRF_LOG_FINAL_FLUSH
();

60 #iâdeà
DEBUG


61 
	`NRF_LOG_ERROR
("Fatalƒrror");

63 
id
)

65 #ià
	`defšed
(
SOFTDEVICE_PRESENT
) && SOFTDEVICE_PRESENT

66 
NRF_FAULT_ID_SD_ASSERT
:

67 
	`NRF_LOG_ERROR
("SOFTDEVICE: ASSERTION FAILED");

69 
NRF_FAULT_ID_APP_MEMACC
:

70 
	`NRF_LOG_ERROR
("SOFTDEVICE: INVALID MEMORY ACCESS");

73 
NRF_FAULT_ID_SDK_ASSERT
:

75 
as£¹_šfo_t
 * 
p_šfo
 = (as£¹_šfo_ˆ*)
šfo
;

76 
	`NRF_LOG_ERROR
("ASSERTION FAILED‡t %s:%u",

77 
p_šfo
->
p_fe_Çme
,

78 
p_šfo
->
lše_num
);

81 
NRF_FAULT_ID_SDK_ERROR
:

83 
”rÜ_šfo_t
 * 
p_šfo
 = (”rÜ_šfo_ˆ*)
šfo
;

84 
	`NRF_LOG_ERROR
("ERROR %u [%s]‡t %s:%u\r\nPC‡t: 0x%08x",

85 
p_šfo
->
”r_code
,

86 
	`Äf_¡»¼Ü_g‘
(
p_šfo
->
”r_code
),

87 
p_šfo
->
p_fe_Çme
,

88 
p_šfo
->
lše_num
,

89 
pc
);

90 
	`NRF_LOG_ERROR
("End ofƒrror„eport");

94 
	`NRF_LOG_ERROR
("UNKNOWN FAULT‡ˆ0x%08X", 
pc
);

99 
NRF_BREAKPOINT_COND
;

102 #iâdeà
DEBUG


103 
	`NRF_LOG_WARNING
("System„eset");

104 
	`NVIC_Sy¡emRe£t
();

106 
	`­p_”rÜ_§ve_ªd_¡İ
(
id
, 
pc
, 
šfo
);

108 
	}
}

	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\libraries\util\app_util_platform.c

40 
	~"­p_ut_¶©fÜm.h
"

42 #ifdeà
SOFTDEVICE_PRESENT


44 
Äf_nvic_¡©e_t
 
	gÄf_nvic_¡©e
;

47 
ušt32_t
 
	gm_š_ü™iÿl_»giÚ
 = 0;

49 
	$­p_ut_di§bË_œq
()

51 
	`__di§bË_œq
();

52 
m_š_ü™iÿl_»giÚ
++;

53 
	}
}

55 
	$­p_ut_’abË_œq
()

57 
m_š_ü™iÿl_»giÚ
--;

58 ià(
m_š_ü™iÿl_»giÚ
 == 0)

60 
	`__’abË_œq
();

62 
	}
}

64 
	$­p_ut_ü™iÿl_»giÚ_’‹r
(
ušt8_t
 *
p_Ã¡ed
)

66 #ià
__CORTEX_M
 == (0x04U)

67 
	`ASSERT
(
APP_LEVEL_PRIVILEGED
 =ğ
	`´ivege_Ëv–_g‘
())

70 #ià
	`defšed
(
SOFTDEVICE_PRESENT
)

72 (è
	`sd_nvic_ü™iÿl_»giÚ_’‹r
(
p_Ã¡ed
);

74 
	`­p_ut_di§bË_œq
();

76 
	}
}

78 
	$­p_ut_ü™iÿl_»giÚ_ex™
(
ušt8_t
 
Ã¡ed
)

80 #ià
__CORTEX_M
 == (0x04U)

81 
	`ASSERT
(
APP_LEVEL_PRIVILEGED
 =ğ
	`´ivege_Ëv–_g‘
())

84 #ià
	`defšed
(
SOFTDEVICE_PRESENT
)

86 (è
	`sd_nvic_ü™iÿl_»giÚ_ex™
(
Ã¡ed
);

88 
	`­p_ut_’abË_œq
();

90 
	}
}

93 
ušt8_t
 
	$´ivege_Ëv–_g‘
()

95 #ià
__CORTEX_M
 =ğ(0x00Uè|| 
	`defšed
(
_WIN32
è|| defšed(
__unix
è|| defšed(
__APPLE__
)

97  
APP_LEVEL_PRIVILEGED
;

98 #–ià
__CORTEX_M
 == (0x04U)

99 
ušt32_t
 
i¤_veùÜ_num
 = 
	`__g‘_IPSR
(è& 
IPSR_ISR_Msk
 ;

100 ià(0 =ğ
i¤_veùÜ_num
)

103 
št32_t
 
cÚŒŞ
 = 
	`__g‘_CONTROL
();

104  
cÚŒŞ
 & 
CONTROL_nPRIV_Msk
 ? 
APP_LEVEL_UNPRIVILEGED
 : 
APP_LEVEL_PRIVILEGED
;

109  
APP_LEVEL_PRIVILEGED
;

112 
	}
}

115 
ušt8_t
 
	$cu¼’t_št_´iÜ™y_g‘
()

117 
ušt32_t
 
i¤_veùÜ_num
 = 
	`__g‘_IPSR
(è& 
IPSR_ISR_Msk
 ;

118 ià(
i¤_veùÜ_num
 > 0)

120 
št32_t
 
œq_ty³
 = ((št32_t)
i¤_veùÜ_num
 - 
EXTERNAL_INT_VECTOR_OFFSET
);

121  (
	`NVIC_G‘PriÜ™y
((
IRQn_Ty³
)
œq_ty³
) & 0xFF);

125  
APP_IRQ_PRIORITY_THREAD
;

127 
	}
}

	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\libraries\util\nrf_assert.c

40 
	~"Äf_as£¹.h
"

41 
	~"­p_”rÜ.h
"

42 
	~"nÜdic_commÚ.h
"

44 
__WEAK
 
	$as£¹_Äf_ÿÎback
(
ušt16_t
 
lše_num
, cÚ¡ 
ušt8_t
 * 
fe_Çme
)

46 
as£¹_šfo_t
 
as£¹_šfo
 =

48 .
lše_num
 =†ine_num,

49 .
p_fe_Çme
 = 
fe_Çme
,

51 
	`­p_”rÜ_çuÉ_hªdËr
(
NRF_FAULT_ID_SDK_ASSERT
, 0, (
ušt32_t
)(&
as£¹_šfo
));

53 
	`UNUSED_VARIABLE
(
as£¹_šfo
);

54 
	}
}

	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\softdevice\common\nrf_sdh.c

41 
	~"sdk_commÚ.h
"

42 #ià
NRF_MODULE_ENABLED
(
NRF_SDH
)

44 
	~"Äf_sdh.h
"

46 
	~<¡dšt.h
>

48 
	~"Äf_sdm.h
"

49 
	~"Äf_nvic.h
"

50 
	~"sdk_cÚfig.h
"

51 
	~"­p_”rÜ.h
"

52 
	~"­p_ut_¶©fÜm.h
"

55 
	#NRF_LOG_MODULE_NAME
 
Äf_sdh


	)

56 #ià
NRF_SDH_LOG_ENABLED


57 
	#NRF_LOG_LEVEL
 
NRF_SDH_LOG_LEVEL


	)

58 
	#NRF_LOG_INFO_COLOR
 
NRF_SDH_INFO_COLOR


	)

59 
	#NRF_LOG_DEBUG_COLOR
 
NRF_SDH_DEBUG_COLOR


	)

61 
	#NRF_LOG_LEVEL
 0

	)

63 
	~"Äf_log.h
"

64 
NRF_LOG_MODULE_REGISTER
();

69 #ià(
NRF_SDH_DISPATCH_MODEL
 =ğ
NRF_SDH_DISPATCH_MODEL_APPSH
)

70 #ià(!
APP_SCHEDULER_ENABLED
)

71 #”rÜ 
­p_scheduËr
 
is
 
»quœed
 
wh’
 
NRF_SDH_DISPATCH_MODEL
 i 
£t
 
to
 
NRF_SDH_DISPATCH_MODEL_APPSH


73 
	~"­p_scheduËr.h
"

76 #iàĞ(
NRF_SDH_CLOCK_LF_SRC
 =ğ
NRF_CLOCK_LF_SRC_RC
) \

77 && (
	gNRF_SDH_CLOCK_LF_ACCURACY
 !ğ
NRF_CLOCK_LF_ACCURACY_500_PPM
))

78 #w¬nšg 
PËa£
 
£Ëù
 
NRF_CLOCK_LF_ACCURACY_500_PPM
 
wh’
 
usšg
 
NRF_CLOCK_LF_SRC_RC


83 
NRF_SECTION_SET_DEF
(
sdh_»q_ob£rv”s
, 
Äf_sdh_»q_ob£rv”_t
, 
NRF_SDH_REQ_OBSERVER_PRIO_LEVELS
);

86 
NRF_SECTION_SET_DEF
(
sdh_¡©e_ob£rv”s
, 
Äf_sdh_¡©e_ob£rv”_t
, 
NRF_SDH_STATE_OBSERVER_PRIO_LEVELS
);

89 
NRF_SECTION_SET_DEF
(
sdh_¡ack_ob£rv”s
, 
Äf_sdh_¡ack_ob£rv”_t
, 
NRF_SDH_STACK_OBSERVER_PRIO_LEVELS
);

92 
boŞ
 
	gm_Äf_sdh_’abËd
;

93 
boŞ
 
	gm_Äf_sdh_su¥’ded
;

94 
boŞ
 
	gm_Äf_sdh_cÚtšue
;

101 
»t_code_t
 
	$sdh_»que¡_ob£rv”_nÙify
(
Äf_sdh_»q_evt_t
 
»q
)

103 
Äf_£ùiÚ_™”_t
 
™”
;

105 
	`NRF_LOG_DEBUG
("S‹„eque¡: 0x%08X", 
»q
);

107 
	`Äf_£ùiÚ_™”_š™
(&
™”
, &
sdh_»q_ob£rv”s
);

108 
	`Äf_£ùiÚ_™”_g‘
(&
™”
è!ğ
NULL
;

109 
	`Äf_£ùiÚ_™”_Ãxt
(&
™”
))

111 
Äf_sdh_»q_ob£rv”_t
 * 
p_ob£rv”
;

112 
Äf_sdh_»q_evt_hªdËr_t
 
hªdËr
;

114 
p_ob£rv”
 = (
Äf_sdh_»q_ob£rv”_t
 *è
	`Äf_£ùiÚ_™”_g‘
(&
™”
);

115 
hªdËr
 = 
p_ob£rv”
->handler;

117 ià(
	`hªdËr
(
»q
, 
p_ob£rv”
->
p_cÚ‹xt
))

119 
	`NRF_LOG_DEBUG
("NÙify ob£rv” 0x%08X =>„—dy", 
p_ob£rv”
);

124 
	`NRF_LOG_DEBUG
("NÙify ob£rv” 0x%08X => blockšg", 
p_ob£rv”
);

125  
NRF_ERROR_BUSY
;

128  
NRF_SUCCESS
;

129 
	}
}

136 
	$sdh_¡©e_ob£rv”_nÙify
(
Äf_sdh_¡©e_evt_t
 
evt
)

138 
Äf_£ùiÚ_™”_t
 
™”
;

140 
	`NRF_LOG_DEBUG
("S‹ chªge: 0x%08X", 
evt
);

142 
	`Äf_£ùiÚ_™”_š™
(&
™”
, &
sdh_¡©e_ob£rv”s
);

143 
	`Äf_£ùiÚ_™”_g‘
(&
™”
è!ğ
NULL
;

144 
	`Äf_£ùiÚ_™”_Ãxt
(&
™”
))

146 
Äf_sdh_¡©e_ob£rv”_t
 * 
p_ob£rv”
;

147 
Äf_sdh_¡©e_evt_hªdËr_t
 
hªdËr
;

149 
p_ob£rv”
 = (
Äf_sdh_¡©e_ob£rv”_t
 *è
	`Äf_£ùiÚ_™”_g‘
(&
™”
);

150 
hªdËr
 = 
p_ob£rv”
->handler;

152 
	`hªdËr
(
evt
, 
p_ob£rv”
->
p_cÚ‹xt
);

154 
	}
}

157 
	$soádeviûs_evt_œq_’abË
()

159 #ifdeà
SOFTDEVICE_PRESENT


160 
»t_code_t
 
»t_code
 = 
	`sd_nvic_EÇbËIRQ
((
IRQn_Ty³
)
SD_EVT_IRQn
);

161 
	`APP_ERROR_CHECK
(
»t_code
);

164 
	`NVIC_EÇbËIRQ
(
SD_EVT_IRQn
);

166 
	}
}

169 
	$soádeviû_evt_œq_di§bË
()

171 #ifdeà
SOFTDEVICE_PRESENT


172 
»t_code_t
 
»t_code
 = 
	`sd_nvic_Di§bËIRQ
((
IRQn_Ty³
)
SD_EVT_IRQn
);

173 
	`APP_ERROR_CHECK
(
»t_code
);

176 
	`NVIC_Di§bËIRQ
(
SD_EVT_IRQn
);

178 
	}
}

181 #iâdeà
S140


182 
	$swi_š‹¼u±_´iÜ™y_wÜk¬ound
()

188 #ifdeà
SOFTDEVICE_PRESENT


189 
»t_code_t
 
»t_code
;

190 
»t_code
 = 
	`sd_nvic_S‘PriÜ™y
(
SD_EVT_IRQn
, 
APP_IRQ_PRIORITY_LOWEST
);

191 
	`APP_ERROR_CHECK
(
»t_code
);

192 
»t_code
 = 
	`sd_nvic_S‘PriÜ™y
(
RADIO_NOTIFICATION_IRQn
, 
APP_IRQ_PRIORITY_LOWEST
);

193 
	`APP_ERROR_CHECK
(
»t_code
);

196 
	`NVIC_S‘PriÜ™y
(
SD_EVT_IRQn
, 
APP_IRQ_PRIORITY_LOWEST
);

197 
	`NVIC_S‘PriÜ™y
(
RADIO_NOTIFICATION_IRQn
, 
APP_IRQ_PRIORITY_LOWEST
);

199 
	}
}

203 
»t_code_t
 
	$Äf_sdh_’abË_»que¡
()

205 
»t_code_t
 
»t_code
;

207 ià(
m_Äf_sdh_’abËd
)

209  
NRF_ERROR_INVALID_STATE
;

212 
m_Äf_sdh_cÚtšue
 = 
Œue
;

215 ià(
	`sdh_»que¡_ob£rv”_nÙify
(
NRF_SDH_EVT_ENABLE_REQUEST
è=ğ
NRF_ERROR_BUSY
)

218  
NRF_SUCCESS
;

222 
	`sdh_¡©e_ob£rv”_nÙify
(
NRF_SDH_EVT_STATE_ENABLE_PREPARE
);

224 
Äf_şock_lf_cfg_t
 cÚ¡ 
şock_lf_cfg
 =

226 .
sourû
 = 
NRF_SDH_CLOCK_LF_SRC
,

227 .
rc_ùiv
 = 
NRF_SDH_CLOCK_LF_RC_CTIV
,

228 .
rc_‹mp_ùiv
 = 
NRF_SDH_CLOCK_LF_RC_TEMP_CTIV
,

229 .
accu¿cy
 = 
NRF_SDH_CLOCK_LF_ACCURACY


232 
	`CRITICAL_REGION_ENTER
();

233 #ifdeà
ANT_LICENSE_KEY


234 
»t_code
 = 
	`sd_soádeviû_’abË
(&
şock_lf_cfg
, 
­p_”rÜ_çuÉ_hªdËr
, 
ANT_LICENSE_KEY
);

236 
»t_code
 = 
	`sd_soádeviû_’abË
(&
şock_lf_cfg
, 
­p_”rÜ_çuÉ_hªdËr
);

238 
m_Äf_sdh_’abËd
 = (
»t_code
 =ğ
NRF_SUCCESS
);

239 
	`CRITICAL_REGION_EXIT
();

241 ià(
»t_code
 !ğ
NRF_SUCCESS
)

243  
»t_code
;

246 
m_Äf_sdh_cÚtšue
 = 
çl£
;

247 
m_Äf_sdh_su¥’ded
 = 
çl£
;

249 #iâdeà
S140


252 
	`swi_š‹¼u±_´iÜ™y_wÜk¬ound
();

257 
	`soádeviûs_evt_œq_’abË
();

260 
	`sdh_¡©e_ob£rv”_nÙify
(
NRF_SDH_EVT_STATE_ENABLED
);

262  
NRF_SUCCESS
;

263 
	}
}

266 
»t_code_t
 
	$Äf_sdh_di§bË_»que¡
()

268 
»t_code_t
 
»t_code
;

270 ià(!
m_Äf_sdh_’abËd
)

272  
NRF_ERROR_INVALID_STATE
;

275 
m_Äf_sdh_cÚtšue
 = 
Œue
;

278 ià(
	`sdh_»que¡_ob£rv”_nÙify
(
NRF_SDH_EVT_DISABLE_REQUEST
è=ğ
NRF_ERROR_BUSY
)

281  
NRF_SUCCESS
;

285 
	`sdh_¡©e_ob£rv”_nÙify
(
NRF_SDH_EVT_STATE_DISABLE_PREPARE
);

287 
	`CRITICAL_REGION_ENTER
();

288 
»t_code
 = 
	`sd_soádeviû_di§bË
();

289 
m_Äf_sdh_’abËd
 = 
çl£
;

290 
	`CRITICAL_REGION_EXIT
();

292 ià(
»t_code
 !ğ
NRF_SUCCESS
)

294  
»t_code
;

297 
m_Äf_sdh_cÚtšue
 = 
çl£
;

299 
	`soádeviû_evt_œq_di§bË
();

302 
	`sdh_¡©e_ob£rv”_nÙify
(
NRF_SDH_EVT_STATE_DISABLED
);

304  
NRF_SUCCESS
;

305 
	}
}

308 
»t_code_t
 
	$Äf_sdh_»que¡_cÚtšue
()

310 ià(!
m_Äf_sdh_cÚtšue
)

312  
NRF_ERROR_INVALID_STATE
;

315 ià(
m_Äf_sdh_’abËd
)

317  
	`Äf_sdh_di§bË_»que¡
();

321  
	`Äf_sdh_’abË_»que¡
();

323 
	}
}

326 
boŞ
 
	$Äf_sdh_is_’abËd
()

328  
m_Äf_sdh_’abËd
;

329 
	}
}

332 
	$Äf_sdh_su¥’d
()

334 ià(!
m_Äf_sdh_’abËd
)

339 
	`soádeviû_evt_œq_di§bË
();

340 
m_Äf_sdh_su¥’ded
 = 
Œue
;

341 
	}
}

344 
	$Äf_sdh_»sume
()

346 ià((!
m_Äf_sdh_su¥’ded
è|| (!
m_Äf_sdh_’abËd
))

352 #ifdeà
SOFTDEVICE_PRESENT


353 
»t_code_t
 
»t_code
 = 
	`sd_nvic_S‘P’dšgIRQ
((
IRQn_Ty³
)
SD_EVT_IRQn
);

354 
	`APP_ERROR_CHECK
(
»t_code
);

356 
	`NVIC_S‘P’dšgIRQ
((
IRQn_Ty³
)
SD_EVT_IRQn
);

359 
	`soádeviûs_evt_œq_’abË
();

361 
m_Äf_sdh_su¥’ded
 = 
çl£
;

362 
	}
}

365 
boŞ
 
	$Äf_sdh_is_su¥’ded
()

367  (!
m_Äf_sdh_’abËd
è|| (
m_Äf_sdh_su¥’ded
);

368 
	}
}

371 
	$Äf_sdh_evts_pŞl
()

373 
Äf_£ùiÚ_™”_t
 
™”
;

376 
	`Äf_£ùiÚ_™”_š™
(&
™”
, &
sdh_¡ack_ob£rv”s
);

377 
	`Äf_£ùiÚ_™”_g‘
(&
™”
è!ğ
NULL
;

378 
	`Äf_£ùiÚ_™”_Ãxt
(&
™”
))

380 
Äf_sdh_¡ack_ob£rv”_t
 * 
p_ob£rv”
;

381 
Äf_sdh_¡ack_evt_hªdËr_t
 
hªdËr
;

383 
p_ob£rv”
 = (
Äf_sdh_¡ack_ob£rv”_t
 *è
	`Äf_£ùiÚ_™”_g‘
(&
™”
);

384 
hªdËr
 = 
p_ob£rv”
->handler;

386 
	`hªdËr
(
p_ob£rv”
->
p_cÚ‹xt
);

388 
	}
}

391 #ià(
NRF_SDH_DISPATCH_MODEL
 =ğ
NRF_SDH_DISPATCH_MODEL_INTERRUPT
)

393 
	$SD_EVT_IRQHªdËr
()

395 
	`Äf_sdh_evts_pŞl
();

396 
	}
}

398 #–ià(
NRF_SDH_DISPATCH_MODEL
 =ğ
NRF_SDH_DISPATCH_MODEL_APPSH
)

407 
	$­psh_ev’ts_pŞl
(* 
p_ev’t_d©a
, 
ušt16_t
 
ev’t_size
)

409 
	`UNUSED_PARAMETER
(
p_ev’t_d©a
);

410 
	`UNUSED_PARAMETER
(
ev’t_size
);

412 
	`Äf_sdh_evts_pŞl
();

413 
	}
}

416 
	$SD_EVT_IRQHªdËr
()

418 
»t_code_t
 
»t_code
 = 
	`­p_sched_ev’t_put
(
NULL
, 0, 
­psh_ev’ts_pŞl
);

419 
	`APP_ERROR_CHECK
(
»t_code
);

420 
	}
}

422 #–ià(
NRF_SDH_DISPATCH_MODEL
 =ğ
NRF_SDH_DISPATCH_MODEL_POLLING
)

	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\softdevice\common\nrf_sdh_ble.c

41 
	~"sdk_commÚ.h
"

42 #ià
NRF_MODULE_ENABLED
(
NRF_SDH_BLE
)

44 
	~"Äf_sdh_bË.h
"

46 
	~"Äf_sdh.h
"

47 
	~"­p_”rÜ.h
"

48 
	~"Äf_¡»¼Ü.h
"

51 
	#NRF_LOG_MODULE_NAME
 
Äf_sdh_bË


	)

52 #ià
NRF_SDH_BLE_LOG_ENABLED


53 
	#NRF_LOG_LEVEL
 
NRF_SDH_BLE_LOG_LEVEL


	)

54 
	#NRF_LOG_INFO_COLOR
 
NRF_SDH_BLE_INFO_COLOR


	)

55 
	#NRF_LOG_DEBUG_COLOR
 
NRF_SDH_BLE_DEBUG_COLOR


	)

57 
	#NRF_LOG_LEVEL
 0

	)

59 
	~"Äf_log.h
"

60 
NRF_LOG_MODULE_REGISTER
();

64 
NRF_SECTION_SET_DEF
(
sdh_bË_ob£rv”s
, 
Äf_sdh_bË_evt_ob£rv”_t
, 
NRF_SDH_BLE_OBSERVER_PRIO_LEVELS
);

68 #ià
defšed
(
__CC_ARM
)

69 
ušt32_t
 
Image$$RW_IRAM1$$Ba£
;

70 
ušt32_t
 cÚ¡ * cÚ¡ 
	gm_¿m_¡¬t
 = &
Image$$RW_IRAM1$$Ba£
;

71 #–ià
defšed
(
__ICCARM__
)

72 
ušt32_t
 
__ICFEDIT_»giÚ_RAM_¡¬t__
;

73 
ušt32_t
 cÚ¡ * cÚ¡ 
	gm_¿m_¡¬t
 = &
__ICFEDIT_»giÚ_RAM_¡¬t__
;

74 #–ià
defšed
(
__SES_ARM
)

75 
ušt32_t
 
__­p_¿m_¡¬t__
;

76 
ušt32_t
 cÚ¡ * cÚ¡ 
	gm_¿m_¡¬t
 = &
__­p_¿m_¡¬t__
;

77 #–ià
defšed
(
__GNUC__
)

78 
ušt32_t
 
__d©a_¡¬t__
;

79 
ušt32_t
 cÚ¡ * cÚ¡ 
	gm_¿m_¡¬t
 = &
__d©a_¡¬t__
;

83 
	#RAM_START
 0x20000000

	)

84 
	#APP_RAM_START
 (
ušt32_t
)
m_¿m_¡¬t


	)

87 
boŞ
 
	gm_¡ack_is_’abËd
;

90 
»t_code_t
 
	$Äf_sdh_bË_­p_¿m_¡¬t_g‘
(
ušt32_t
 * 
p_­p_¿m_¡¬t
)

92 ià(
p_­p_¿m_¡¬t
 =ğ
NULL
)

94  
NRF_ERROR_NULL
;

97 *
p_­p_¿m_¡¬t
 = 
APP_RAM_START
;

99  
NRF_SUCCESS
;

100 
	}
}

103 
»t_code_t
 
	$Äf_sdh_bË_deçuÉ_cfg_£t
(
ušt8_t
 
cÚn_cfg_g
, 
ušt32_t
 * 
p_¿m_¡¬t
)

105 
ušt32_t
 
»t_code
;

107 
»t_code
 = 
	`Äf_sdh_bË_­p_¿m_¡¬t_g‘
(
p_¿m_¡¬t
);

108 ià(
»t_code
 !ğ
NRF_SUCCESS
)

110  
»t_code
;

113 #ifdeà
S112


114 
	`STATIC_ASSERT
(
NRF_SDH_BLE_CENTRAL_LINK_COUNT
 == 0, "When using s112, NRF_SDH_BLE_CENTRAL_LINK_COUNT must be 0.");

121 
bË_cfg_t
 
bË_cfg
;

123 #ià(
NRF_SDH_BLE_TOTAL_LINK_COUNT
 != 0)

125 
	`mem£t
(&
bË_cfg
, 0, (ble_cfg));

126 
bË_cfg
.
cÚn_cfg
.
cÚn_cfg_g
 = conn_cfg_tag;

127 
bË_cfg
.
cÚn_cfg
.
·¿ms
.
g­_cÚn_cfg
.
cÚn_couÁ
 = 
NRF_SDH_BLE_TOTAL_LINK_COUNT
;

128 
bË_cfg
.
cÚn_cfg
.
·¿ms
.
g­_cÚn_cfg
.
ev’t_Ëngth
 = 
NRF_SDH_BLE_GAP_EVENT_LENGTH
;

130 
»t_code
 = 
	`sd_bË_cfg_£t
(
BLE_CONN_CFG_GAP
, &
bË_cfg
, *
p_¿m_¡¬t
);

131 ià(
»t_code
 !ğ
NRF_SUCCESS
)

133 
	`NRF_LOG_ERROR
("sd_ble_cfg_set()„eturned %s when‡ttemptingo set BLE_CONN_CFG_GAP.",

134 
	`Äf_¡»¼Ü_g‘
(
»t_code
));

138 
	`mem£t
(&
bË_cfg
, 0, (ble_cfg));

139 
bË_cfg
.
g­_cfg
.
rŞe_couÁ_cfg
.
³rh_rŞe_couÁ
 = 
NRF_SDH_BLE_PERIPHERAL_LINK_COUNT
;

140 #iâdeà
S112


141 
bË_cfg
.
g­_cfg
.
rŞe_couÁ_cfg
.
ûÁ¿l_rŞe_couÁ
 = 
NRF_SDH_BLE_CENTRAL_LINK_COUNT
;

142 
bË_cfg
.
g­_cfg
.
rŞe_couÁ_cfg
.
ûÁ¿l_£c_couÁ
 = 
	`MIN
(
NRF_SDH_BLE_CENTRAL_LINK_COUNT
,

143 
BLE_GAP_ROLE_COUNT_CENTRAL_SEC_DEFAULT
);

146 
»t_code
 = 
	`sd_bË_cfg_£t
(
BLE_GAP_CFG_ROLE_COUNT
, &
bË_cfg
, *
p_¿m_¡¬t
);

147 ià(
»t_code
 !ğ
NRF_SUCCESS
)

149 
	`NRF_LOG_ERROR
("sd_ble_cfg_set()„eturned %s when‡ttemptingo set BLE_GAP_CFG_ROLE_COUNT.",

150 
	`Äf_¡»¼Ü_g‘
(
»t_code
));

154 #ià(
NRF_SDH_BLE_GATT_MAX_MTU_SIZE
 != 23)

155 
	`mem£t
(&
bË_cfg
, 0x00, (ble_cfg));

156 
bË_cfg
.
cÚn_cfg
.
cÚn_cfg_g
 = conn_cfg_tag;

157 
bË_cfg
.
cÚn_cfg
.
·¿ms
.
g©t_cÚn_cfg
.
©t_mtu
 = 
NRF_SDH_BLE_GATT_MAX_MTU_SIZE
;

159 
»t_code
 = 
	`sd_bË_cfg_£t
(
BLE_CONN_CFG_GATT
, &
bË_cfg
, *
p_¿m_¡¬t
);

160 ià(
»t_code
 !ğ
NRF_SUCCESS
)

162 
	`NRF_LOG_ERROR
("sd_ble_cfg_set()„eturned %s when‡ttemptingo set BLE_CONN_CFG_GATT.",

163 
	`Äf_¡»¼Ü_g‘
(
»t_code
));

169 
	`mem£t
(&
bË_cfg
, 0, (ble_cfg));

170 
bË_cfg
.
commÚ_cfg
.
vs_uuid_cfg
.
vs_uuid_couÁ
 = 
NRF_SDH_BLE_VS_UUID_COUNT
;

172 
»t_code
 = 
	`sd_bË_cfg_£t
(
BLE_COMMON_CFG_VS_UUID
, &
bË_cfg
, *
p_¿m_¡¬t
);

173 ià(
»t_code
 !ğ
NRF_SUCCESS
)

175 
	`NRF_LOG_ERROR
("sd_ble_cfg_set()„eturned %s when‡ttemptingo set BLE_COMMON_CFG_VS_UUID.",

176 
	`Äf_¡»¼Ü_g‘
(
»t_code
));

180 
	`mem£t
(&
bË_cfg
, 0x00, (ble_cfg));

181 
bË_cfg
.
g©ts_cfg
.
©Œ_b_size
.©Œ_b_sizğ
NRF_SDH_BLE_GATTS_ATTR_TAB_SIZE
;

183 
»t_code
 = 
	`sd_bË_cfg_£t
(
BLE_GATTS_CFG_ATTR_TAB_SIZE
, &
bË_cfg
, *
p_¿m_¡¬t
);

184 ià(
»t_code
 !ğ
NRF_SUCCESS
)

186 
	`NRF_LOG_ERROR
("sd_ble_cfg_set()„eturned %s when‡ttemptingo set BLE_GATTS_CFG_ATTR_TAB_SIZE.",

187 
	`Äf_¡»¼Ü_g‘
(
»t_code
));

191 
	`mem£t
(&
bË_cfg
, 0x00, (ble_cfg));

192 
bË_cfg
.
g©ts_cfg
.
£rviû_chªged
.£rviû_chªged = 
NRF_SDH_BLE_SERVICE_CHANGED
;

194 
»t_code
 = 
	`sd_bË_cfg_£t
(
BLE_GATTS_CFG_SERVICE_CHANGED
, &
bË_cfg
, *
p_¿m_¡¬t
);

195 ià(
»t_code
 !ğ
NRF_SUCCESS
)

197 
	`NRF_LOG_ERROR
("sd_ble_cfg_set()„eturned %s when‡ttemptingo set BLE_GATTS_CFG_SERVICE_CHANGED.",

198 
	`Äf_¡»¼Ü_g‘
(
»t_code
));

201  
NRF_SUCCESS
;

202 
	}
}

206 
ušt32_t
 
	$¿m_’d_add»ss_g‘
()

208 
ušt32_t
 
¿m_tÙ®_size
;

210 #ifdeà
NRF51


211 
ušt32_t
 
block_size
 = 
NRF_FICR
->
SIZERAMBLOCKS
;

212 
¿m_tÙ®_size
 = 
block_size
 * 
NRF_FICR
->
NUMRAMBLOCK
;

214 
¿m_tÙ®_size
 = 
NRF_FICR
->
INFO
.
RAM
 * 1024;

217  
RAM_START
 + 
¿m_tÙ®_size
;

218 
	}
}

221 
»t_code_t
 
	$Äf_sdh_bË_’abË
(
ušt32_t
 * cÚ¡ 
p_­p_¿m_¡¬t
)

224 
ušt32_t
 cÚ¡ 
­p_¿m_¡¬t_lšk
 = *
p_­p_¿m_¡¬t
;

226 
»t_code_t
 
»t_code
 = 
	`sd_bË_’abË
(
p_­p_¿m_¡¬t
);

227 ià(*
p_­p_¿m_¡¬t
 > 
­p_¿m_¡¬t_lšk
)

229 
	`NRF_LOG_WARNING
("Insufficient RAM‡llocated forhe SoftDevice.");

231 
	`NRF_LOG_WARNING
("Changehe RAM start†ocation from 0x%xo 0x%x.",

232 
­p_¿m_¡¬t_lšk
, *
p_­p_¿m_¡¬t
);

233 
	`NRF_LOG_WARNING
("Maximum RAM size for‡pplication is 0x%x.",

234 
	`¿m_’d_add»ss_g‘
(è- (*
p_­p_¿m_¡¬t
));

238 
	`NRF_LOG_DEBUG
("RAM s¹ © 0x%x", 
­p_¿m_¡¬t_lšk
);

239 ià(*
p_­p_¿m_¡¬t
 !ğ
­p_¿m_¡¬t_lšk
)

241 
	`NRF_LOG_DEBUG
("RAM s¹†oÿtiÚ cª badju¡edØ0x%x.", *
p_­p_¿m_¡¬t
);

243 
	`NRF_LOG_DEBUG
("RAM size for‡pplication can be‡djustedo 0x%x.",

244 
	`¿m_’d_add»ss_g‘
(è- (*
p_­p_¿m_¡¬t
));

248 ià(
»t_code
 =ğ
NRF_SUCCESS
)

250 
m_¡ack_is_’abËd
 = 
Œue
;

254 
	`NRF_LOG_ERROR
("sd_bË_’abË(è»tuºed %s.", 
	`Äf_¡»¼Ü_g‘
(
»t_code
));

257  
»t_code
;

258 
	}
}

265 
	$Äf_sdh_bË_evts_pŞl
(* 
p_cÚ‹xt
)

267 
	`UNUSED_VARIABLE
(
p_cÚ‹xt
);

269 
»t_code_t
 
»t_code
;

271 ià(!
m_¡ack_is_’abËd
)

276 
Œue
)

279 
	`__ALIGN
(4è
ušt8_t
 
evt_bufãr
[
NRF_SDH_BLE_EVT_BUF_SIZE
];

282 
bË_evt_t
 * 
p_bË_evt
;

283 
ušt16_t
 
evt_Ën
 = (ušt16_t)(
evt_bufãr
);

285 
»t_code
 = 
	`sd_bË_evt_g‘
(
evt_bufãr
, &
evt_Ën
);

286 ià(
»t_code
 !ğ
NRF_SUCCESS
)

291 
p_bË_evt
 = (
bË_evt_t
 *)
evt_bufãr
;

293 
	`NRF_LOG_DEBUG
("BLEƒv’t: 0x%x.", 
p_bË_evt
->
h—d”
.
evt_id
);

296 
Äf_£ùiÚ_™”_t
 
™”
;

297 
	`Äf_£ùiÚ_™”_š™
(&
™”
, &
sdh_bË_ob£rv”s
);

298 
	`Äf_£ùiÚ_™”_g‘
(&
™”
è!ğ
NULL
;

299 
	`Äf_£ùiÚ_™”_Ãxt
(&
™”
))

301 
Äf_sdh_bË_evt_ob£rv”_t
 * 
p_ob£rv”
;

302 
Äf_sdh_bË_evt_hªdËr_t
 
hªdËr
;

304 
p_ob£rv”
 = (
Äf_sdh_bË_evt_ob£rv”_t
 *)
	`Äf_£ùiÚ_™”_g‘
(&
™”
);

305 
hªdËr
 = 
p_ob£rv”
->handler;

307 
	`hªdËr
(
p_bË_evt
, 
p_ob£rv”
->
p_cÚ‹xt
);

311 ià(
»t_code
 !ğ
NRF_ERROR_NOT_FOUND
)

313 
	`APP_ERROR_HANDLER
(
»t_code
);

315 
	}
}

318 
NRF_SDH_STACK_OBSERVER
(
m_Äf_sdh_bË_evts_pŞl
, 
NRF_SDH_BLE_STACK_OBSERVER_PRIO
) =

320 .
hªdËr
 = 
Äf_sdh_bË_evts_pŞl
,

321 .
	gp_cÚ‹xt
 = 
NULL
,

	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\softdevice\common\nrf_sdh_soc.c

41 
	~"sdk_commÚ.h
"

42 #ià
NRF_MODULE_ENABLED
(
NRF_SDH_SOC
)

44 
	~"Äf_sdh_soc.h
"

46 
	~"Äf_sdh.h
"

47 
	~"Äf_soc.h
"

48 
	~"­p_”rÜ.h
"

51 
	#NRF_LOG_MODULE_NAME
 
Äf_sdh_soc


	)

52 #ià
NRF_SDH_SOC_LOG_ENABLED


53 
	#NRF_LOG_LEVEL
 
NRF_SDH_SOC_LOG_LEVEL


	)

54 
	#NRF_LOG_INFO_COLOR
 
NRF_SDH_SOC_INFO_COLOR


	)

55 
	#NRF_LOG_DEBUG_COLOR
 
NRF_SDH_SOC_DEBUG_COLOR


	)

57 
	#NRF_LOG_LEVEL
 0

	)

59 
	~"Äf_log.h
"

60 
NRF_LOG_MODULE_REGISTER
();

64 
NRF_SECTION_SET_DEF
(
sdh_soc_ob£rv”s
, 
Äf_sdh_soc_evt_ob£rv”_t
, 
NRF_SDH_SOC_OBSERVER_PRIO_LEVELS
);

71 
	$Äf_sdh_soc_evts_pŞl
(* 
p_cÚ‹xt
)

73 
»t_code_t
 
»t_code
;

75 
	`UNUSED_VARIABLE
(
p_cÚ‹xt
);

77 
Œue
)

79 
ušt32_t
 
evt_id
;

81 
»t_code
 = 
	`sd_evt_g‘
(&
evt_id
);

82 ià(
»t_code
 !ğ
NRF_SUCCESS
)

87 
	`NRF_LOG_DEBUG
("SoCƒv’t: 0x%x.", 
evt_id
);

90 
Äf_£ùiÚ_™”_t
 
™”
;

91 
	`Äf_£ùiÚ_™”_š™
(&
™”
, &
sdh_soc_ob£rv”s
);

92 
	`Äf_£ùiÚ_™”_g‘
(&
™”
è!ğ
NULL
;

93 
	`Äf_£ùiÚ_™”_Ãxt
(&
™”
))

95 
Äf_sdh_soc_evt_ob£rv”_t
 * 
p_ob£rv”
;

96 
Äf_sdh_soc_evt_hªdËr_t
 
hªdËr
;

98 
p_ob£rv”
 = (
Äf_sdh_soc_evt_ob£rv”_t
 *è
	`Äf_£ùiÚ_™”_g‘
(&
™”
);

99 
hªdËr
 = 
p_ob£rv”
->handler;

101 
	`hªdËr
(
evt_id
, 
p_ob£rv”
->
p_cÚ‹xt
);

105 ià(
»t_code
 !ğ
NRF_ERROR_NOT_FOUND
)

107 
	`APP_ERROR_HANDLER
(
»t_code
);

109 
	}
}

112 
NRF_SDH_STACK_OBSERVER
(
m_Äf_sdh_soc_evts_pŞl
, 
NRF_SDH_SOC_STACK_OBSERVER_PRIO
) =

114 .
hªdËr
 = 
Äf_sdh_soc_evts_pŞl
,

115 .
	gp_cÚ‹xt
 = 
NULL
,

	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\examples\ble_peripheral\ble_app_hids_mouse\main.c

55 
	~<¡dšt.h
>

56 
	~<¡ršg.h
>

57 
	~"nÜdic_commÚ.h
"

58 
	~"Äf.h
"

59 
	~"Äf_sdm.h
"

60 
	~"­p_”rÜ.h
"

61 
	~"bË.h
"

62 
	~"bË_”r.h
"

63 
	~"bË_hci.h
"

64 
	~"bË_¤v_commÚ.h
"

65 
	~"bË_advd©a.h
"

66 
	~"bË_hids.h
"

67 
	~"bË_bas.h
"

68 
	~"bË_dis.h
"

69 
	~"bË_cÚn_·¿ms.h
"

70 
	~"£nsÜsim.h
"

71 
	~"b¥_bŠ_bË.h
"

72 
	~"­p_scheduËr.h
"

73 
	~"Äf_sdh.h
"

74 
	~"Äf_sdh_soc.h
"

75 
	~"Äf_sdh_bË.h
"

76 
	~"­p_tim”.h
"

77 
	~"³”_mªag”.h
"

78 
	~"bË_adv”tisšg.h
"

79 
	~"fds.h
"

80 
	~"bË_cÚn_¡©e.h
"

81 
	~"Äf_bË_g©t.h
"

82 
	~"Äf_bË_qwr.h
"

83 
	~"Äf_pwr_mgmt.h
"

85 
	~"Äf_log.h
"

86 
	~"Äf_log_ù¾.h
"

87 
	~"Äf_log_deçuÉ_back’ds.h
"

90 
	#DEVICE_NAME
 "nRF5_Mou£"

	)

91 
	#MANUFACTURER_NAME
 "NÜdicSemicÚduùÜ"

	)

93 
	#APP_BLE_OBSERVER_PRIO
 3

	)

94 
	#APP_BLE_CONN_CFG_TAG
 1

	)

96 
	#BATTERY_LEVEL_MEAS_INTERVAL
 
	`APP_TIMER_TICKS
(2000è

	)

97 
	#MIN_BATTERY_LEVEL
 81

	)

98 
	#MAX_BATTERY_LEVEL
 100

	)

99 
	#BATTERY_LEVEL_INCREMENT
 1

	)

101 
	#PNP_ID_VENDOR_ID_SOURCE
 0x02

	)

102 
	#PNP_ID_VENDOR_ID
 0x1915

	)

103 
	#PNP_ID_PRODUCT_ID
 0xEEEE

	)

104 
	#PNP_ID_PRODUCT_VERSION
 0x0001

	)

107 
	#MIN_CONN_INTERVAL
 
	`MSEC_TO_UNITS
(7.5, 
UNIT_1_25_MS
è

	)

108 
	#MAX_CONN_INTERVAL
 
	`MSEC_TO_UNITS
(15, 
UNIT_1_25_MS
è

	)

109 
	#SLAVE_LATENCY
 20

	)

110 
	#CONN_SUP_TIMEOUT
 
	`MSEC_TO_UNITS
(3000, 
UNIT_10_MS
è

	)

112 
	#FIRST_CONN_PARAMS_UPDATE_DELAY
 
	`APP_TIMER_TICKS
(5000è

	)

113 
	#NEXT_CONN_PARAMS_UPDATE_DELAY
 
	`APP_TIMER_TICKS
(30000è

	)

114 
	#MAX_CONN_PARAM_UPDATE_COUNT
 3

	)

116 
	#SEC_PARAM_BOND
 1

	)

117 
	#SEC_PARAM_MITM
 0

	)

118 
	#SEC_PARAM_LESC
 0

	)

119 
	#SEC_PARAM_KEYPRESS
 0

	)

120 
	#SEC_PARAM_IO_CAPABILITIES
 
BLE_GAP_IO_CAPS_NONE


	)

121 
	#SEC_PARAM_OOB
 0

	)

122 
	#SEC_PARAM_MIN_KEY_SIZE
 7

	)

123 
	#SEC_PARAM_MAX_KEY_SIZE
 16

	)

125 
	#MOVEMENT_SPEED
 5

	)

126 
	#INPUT_REPORT_COUNT
 3

	)

127 
	#INPUT_REP_BUTTONS_LEN
 3

	)

128 
	#INPUT_REP_MOVEMENT_LEN
 3

	)

129 
	#INPUT_REP_MEDIA_PLAYER_LEN
 1

	)

130 
	#INPUT_REP_BUTTONS_INDEX
 0

	)

131 
	#INPUT_REP_MOVEMENT_INDEX
 1

	)

132 
	#INPUT_REP_MPLAYER_INDEX
 2

	)

133 
	#INPUT_REP_REF_BUTTONS_ID
 1

	)

134 
	#INPUT_REP_REF_MOVEMENT_ID
 2

	)

135 
	#INPUT_REP_REF_MPLAYER_ID
 3

	)

137 
	#BASE_USB_HID_SPEC_VERSION
 0x0101

	)

139 
	#SCHED_MAX_EVENT_DATA_SIZE
 
APP_TIMER_SCHED_EVENT_DATA_SIZE


	)

140 #ifdeà
SVCALL_AS_NORMAL_FUNCTION


141 
	#SCHED_QUEUE_SIZE
 20

	)

143 
	#SCHED_QUEUE_SIZE
 10

	)

146 
	#DEAD_BEEF
 0xDEADBEEF

	)

148 
	#APP_ADV_FAST_INTERVAL
 0x0028

	)

149 
	#APP_ADV_SLOW_INTERVAL
 0x0C80

	)

151 
	#APP_ADV_FAST_DURATION
 3000

	)

152 
	#APP_ADV_SLOW_DURATION
 18000

	)

155 
APP_TIMER_DEF
(
m_b©‹ry_tim”_id
);

156 
BLE_BAS_DEF
(
m_bas
);

157 
BLE_HIDS_DEF
(
m_hids
,

158 
NRF_SDH_BLE_TOTAL_LINK_COUNT
,

159 
INPUT_REP_BUTTONS_LEN
,

160 
INPUT_REP_MOVEMENT_LEN
,

161 
INPUT_REP_MEDIA_PLAYER_LEN
);

162 
NRF_BLE_GATT_DEF
(
m_g©t
);

163 
NRF_BLE_QWR_DEF
(
m_qwr
);

164 
BLE_ADVERTISING_DEF
(
m_adv”tisšg
);

166 
boŞ
 
	gm_š_boÙ_mode
 = 
çl£
;

167 
ušt16_t
 
	gm_cÚn_hªdË
 = 
BLE_CONN_HANDLE_INVALID
;

168 
pm_³”_id_t
 
	gm_³”_id
;

169 
£nsÜsim_cfg_t
 
	gm_b©‹ry_sim_cfg
;

170 
£nsÜsim_¡©e_t
 
	gm_b©‹ry_sim_¡©e
;

171 
pm_³”_id_t
 
	gm_wh™–i¡_³”s
[
BLE_GAP_WHITELIST_ADDR_MAX_COUNT
];

172 
ušt32_t
 
	gm_wh™–i¡_³”_út
;

173 
bË_uuid_t
 
	gm_adv_uuids
[] =

175 {
BLE_UUID_HUMAN_INTERFACE_DEVICE_SERVICE
, 
BLE_UUID_TYPE_BLE
}

179 
Ú_hids_evt
(
bË_hids_t
 * 
p_hids
, 
bË_hids_evt_t
 * 
p_evt
);

183 
Ú_hids_evt
(
bË_hids_t
 * 
p_hids
, 
bË_hids_evt_t
 * 
p_evt
);

185 
Ú_hids_evt
(
bË_hids_t
 * 
p_hids
, 
bË_hids_evt_t
 * 
p_evt
);

186 
bË_evt_hªdËr
(
bË_evt_t
 cÚ¡ * 
p_bË_evt
, * 
p_cÚ‹xt
);

187 
pm_evt_hªdËr
(
pm_evt_t
 cÚ¡ * 
p_evt
);

188 
Ú_adv_evt
(
bË_adv_evt_t
 
bË_adv_evt
);

189 
bË_adv”tisšg_”rÜ_hªdËr
(
ušt32_t
 
Äf_”rÜ
);

190 
³”_li¡_g‘
(
pm_³”_id_t
 * 
p_³”s
, 
ušt32_t
 * 
p_size
);

191 
adv”tisšg_š™
(
ušt16_t
 
š‹rv®MSecÚds
, ušt16_ˆ
³riodSecÚds
, 
boŞ
 
wh™–i¡EÇbËd
);

204 
	~"fds.h
"

206 
	~"Üd”Proûssšg.h
"

207 
	~"sy¡emTime.h
"

209 
	#DETECTED_DEV_FREE
 0xFF

	)

210 
	#DIRECT_CONN_QUANTITY
 0x3

	)

212 
	#FILE_ORDER
 0xBAAB

	)

213 
	#RECORD_KEY_ORDER
 0xABBA

	)

215 
	#APP_ADV_GLOBAL_INTERVAL
 0x0023

	)

216 
	#APP_ADV_GLOBAL_TIMEOUT
 18000

	)

218 
	#ORDER_FLASHE_PAGE
 254

	)

220 
	#ADV_RECONNECT_SCAN_TIMEOUT
 10000

	)

222 
	#GET_PAGE_ADDRESS
(
X
è(
ušt32_t
)(X*4096)

	)

225 
	#DEBUG_ENABLE


	)

226 #ifdeà 
DEBUG_ENABLE


227 
	#DEBUG_LOG
(...è
	`NRF_LOG_INFO
(
__VA_ARGS__
)

	)

229 
	#DEBUG_LOG
(...)

	)

232 
	#USER_INFO_ENABLE


	)

233 #ifdeà
USER_INFO_ENABLE


234 
	#USER_INFO
(...è
	`NRF_LOG_INFO
(
__VA_ARGS__
)

	)

236 
	#USER_INFO
(...)

	)

242 
	mADV_EVT_START_CONNECT
,

243 
	mADV_EVT_STOP_ADV
,

244 
	mADV_EVT_CONNECT_PREV
,

245 
	mADV_EVT_CONNECT


246 }
	tÄfBLEAdvEvT
;

250 
	mDEV_SCANNING
,

251 
	mDEV_CONNECTION
,

252 }
	tadvCÚnPha£
;

256 
	mADV_IDLE
,

257 
	mADV_ADD_NEW
,

258 
	mADV_RECONNECT_SCAN
,

259 
	mADV_RECONNECT_CONNECT
,

260 }
	tadvTy³T
;

264 
	mCONNECTION_CONNECT
 = 0x0,

265 
	mCONNECTION_START_DISCONNECT
 = 0x1,

266 
	mCONNECTION_DISCONNECT
 = 0x2,

267 }
	tcÚÃùiÚS‹T
;

272 
advCÚnPha£
 
	mpha£
;

273 
ušt16_t
 
	mli¡D‘eùedDev
[
BLE_GAP_WHITELIST_ADDR_MAX_COUNT
];

274 
ušt8_t
 
	mquªt™yD‘eùedDev
;

275 
ušt8_t
 
	mcÚÃùCÁ
;

276 
ušt8_t
 
	mloİCÁ
;

277 
pm_³”_id_t
 
	mm_wh™–i¡_³”s
[
BLE_GAP_WHITELIST_ADDR_MAX_COUNT
];

278 
ušt32_t
 
	mm_wh™–i¡_³”_út
;

279 }
	gadvDœOrdCÚnS‹
 =

281 .
li¡D‘eùedDev
 = {[0 ... 
BLE_GAP_WHITELIST_ADDR_MAX_COUNT
-1] = 
DETECTED_DEV_FREE
}

284 
Üd”T
 
	gdeviûOrd”
;

285 
tim”C®lbacT
 
	g¡İSÿnAdvTim”C®lback
;

286 
tim”C®lbacT
 
	gsw™chToCÚnAdvTim”C®lback
;

288 
boŞ
 
	misD–‘eBÚds
;

289 
boŞ
 
	misR—lAdv
;

290 
boŞ
 
	misAµAdv
;

291 
boŞ
 
	misP»vCÚn
;

292 
ušt16_t
 
	mcÚÃùiÚHªdËr
;

293 
advTy³T
 
	mcu¼’tAdvTy³
;

294 
cÚÃùiÚS‹T
 
	mcÚÃùS‹
;

295 } 
	g­pS‹
 =

297 .
isD–‘eBÚds
 = 
çl£
,

298 .
	gisR—lAdv
 = 
çl£
,

299 .
	gisAµAdv
 = 
çl£
,

300 .
	gisP»vCÚn
 = 
çl£
,

301 .
	gcÚÃùiÚHªdËr
 = 
BLE_CONN_HANDLE_INVALID
,

302 .
	gcu¼’tAdvTy³
 = 
ADV_IDLE
,

303 .
	gcÚÃùS‹
 = 
CONNECTION_DISCONNECT
,

305 
ušt32_t
 
	gsÿnšgTimeout
;

308 
boŞ
 
	$­pAdvG‘P»vCÚn
()

310  
­pS‹
.
isP»vCÚn
;

311 
	}
}

314 
	$­pAdvS‘P»vCÚn
(
boŞ
 
´evCÚnS‘
)

316 
­pS‹
.
isP»vCÚn
 = 
´evCÚnS‘
;

317 
	}
}

320 
advTy³T
 
	$­pAdvG‘Cu¼’tTy³
()

322  
­pS‹
.
cu¼’tAdvTy³
;

323 
	}
}

326 
boŞ
 
	$­pAdvG‘S‹
()

328  
­pS‹
.
isAµAdv
;

329 
	}
}

332 
	$­pAdvS‘R—lS‹
(
boŞ
 
¡©e
)

334 
­pS‹
.
isR—lAdv
 = 
¡©e
;

335 
	}
}

338 
	$­pCÚÃùS‘S‹
(
cÚÃùiÚS‹T
 
cÚnS‹
, 
ušt16_t
 
cÚÃùiÚHªdËr
)

340 
­pS‹
.
cÚÃùiÚHªdËr
 = connectionHandler;

341 
­pS‹
.
cÚÃùS‹
 = 
cÚnS‹
;

342 
	}
}

345 
ušt32_t
 
	$­pG‘Quªt™yBLEP“rs
()

347 
pm_³”_id_t
 
³”Li¡
[
BLE_GAP_WHITELIST_ADDR_MAX_COUNT
];

348 
ušt32_t
 
quªt™yP“rs
 = 0;

349 
	`mem£t
(
³”Li¡
, 
PM_PEER_ID_INVALID
, (peerList));

350 
quªt™yP“rs
 = ((
³”Li¡
è/ (
pm_³”_id_t
));

351 
	`³”_li¡_g‘
(
³”Li¡
, &
quªt™yP“rs
);

352  
quªt™yP“rs
;

353 
	}
}

356 
	$­pUpd©eBLELi¡P“rs
()

358 
	`mem£t
(
advDœOrdCÚnS‹
.
m_wh™–i¡_³”s
, 
PM_PEER_ID_INVALID
, (advDirOrdConnState.m_whitelist_peers));

359 
advDœOrdCÚnS‹
.
m_wh™–i¡_³”_út
 = ×dvDœOrdCÚnS‹.
m_wh™–i¡_³”s
è/ (
pm_³”_id_t
);

360 
	`³”_li¡_g‘
(
advDœOrdCÚnS‹
.
m_wh™–i¡_³”s
, &advDœOrdCÚnS‹.
m_wh™–i¡_³”_út
);

361 
ušt32_t
 
út
 = 0; cÁ < 
advDœOrdCÚnS‹
.
m_wh™–i¡_³”_út
; cnt++)

365 
	}
}

368 
	$­pDiscÚÃù
()

370 
»t_code_t
 
»t
;

371 
	`DEBUG_LOG
("DISCONNECT:");

372 if(
­pS‹
.
cÚÃùS‹
 !ğ
CONNECTION_CONNECT
)

378 
­pS‹
.
cÚÃùS‹
 = 
CONNECTION_START_DISCONNECT
;

379 
­pS‹
.
isR—lAdv
 = 
Œue
;

380 
»t
 = 
	`sd_bË_g­_discÚÃù
(
­pS‹
.
cÚÃùiÚHªdËr
, 
BLE_HCI_REMOTE_USER_TERMINATED_CONNECTION
);

382 
	`APP_ERROR_CHECK
(
»t
);

384 
	}
}

387 
	$­pAdvStİ
()

389 
»t_code_t
 
»t
;

391 
­pS‹
.
cÚÃùS‹
)

393 
CONNECTION_CONNECT
:

394 
­pS‹
.
isAµAdv
 = 
çl£
;

397 
CONNECTION_START_DISCONNECT
:

398 
­pS‹
.
isAµAdv
 = 
çl£
;

401 
CONNECTION_DISCONNECT
:

402 
­pS‹
.
isAµAdv
 = 
çl£
;

403 if(!
­pS‹
.
isR—lAdv
)

408 
­pS‹
.
isR—lAdv
 = 
çl£
;

409 
»t
 = 
	`sd_bË_g­_adv_¡İ
(
m_adv”tisšg
.
adv_hªdË
);

411 
	`APP_ERROR_CHECK
(
»t
);

418 
	}
}

421 
	$­pAdvS¹
()

423 
»t_code_t
 
»t
;

424 
­pS‹
.
cÚÃùS‹
)

426 
CONNECTION_CONNECT
:

428 
­pS‹
.
isAµAdv
 = 
Œue
;

429 
	`DEBUG_LOG
("ADV START: disconnect connection");

430 
	`­pDiscÚÃù
();

432 
CONNECTION_START_DISCONNECT
:

433 
­pS‹
.
isAµAdv
 = 
Œue
;

434 
	`DEBUG_LOG
("ADV START: wait disconnect");

436 
CONNECTION_DISCONNECT
:

437 if(
­pS‹
.
isR—lAdv
)

439 
	`DEBUG_LOG
("ADV START:„unning state");

442 
­pS‹
.
isAµAdv
 = 
Œue
;

443 
­pS‹
.
isR—lAdv
 = 
Œue
;

444 
	`DEBUG_LOG
("ADV START: start");

445 
	`adv”tisšg_š™
(
APP_ADV_GLOBAL_INTERVAL
, 
APP_ADV_GLOBAL_TIMEOUT
, 
Œue
);

446 
»t
 = 
	`bË_adv”tisšg_¡¬t
(&
m_adv”tisšg
, 
BLE_ADV_MODE_FAST
);

447 
	`DEBUG_LOG
("ADV START:„‘ = %d", 
»t
);

448 
	`APP_ERROR_CHECK
(
»t
);

452 
	`DEBUG_LOG
("ADV START: ok");

453 
	}
}

495 
	$adv”tisšg_š™
(
ušt16_t
 
š‹rv®MSecÚds
, ušt16_ˆ
³riodSecÚds
, 
boŞ
 
wh™–i¡EÇbËd
)

497 
»t_code_t
 
”r_code
;

498 
ušt8_t
 
adv_æags
;

499 
bË_adv”tisšg_š™_t
 
š™
;

501 
	`mem£t
(&
š™
, 0, (init));

503 
adv_æags
 = 
BLE_GAP_ADV_FLAGS_LE_ONLY_LIMITED_DISC_MODE
;

504 
š™
.
advd©a
.
Çme_ty³
 = 
BLE_ADVDATA_FULL_NAME
;

505 
š™
.
advd©a
.
šşude_­³¬ªû
 = 
Œue
;

506 
š™
.
advd©a
.
æags
 = 
adv_æags
;

507 
š™
.
advd©a
.
uuids_com¶‘e
.
uuid_út
 = (
m_adv_uuids
) / (m_adv_uuids[0]);

508 
š™
.
advd©a
.
uuids_com¶‘e
.
p_uuids
 = 
m_adv_uuids
;

510 
š™
.
cÚfig
.
bË_adv_wh™–i¡_’abËd
 = 
Œue
;

511 
š™
.
cÚfig
.
bË_adv_dœeùed_high_duty_’abËd
 = 
çl£
;

512 
š™
.
cÚfig
.
bË_adv_dœeùed_’abËd
 = 
çl£
;

513 
š™
.
cÚfig
.
bË_adv_dœeùed_š‹rv®
 = 0;

514 
š™
.
cÚfig
.
bË_adv_dœeùed_timeout
 = 0;

515 
š™
.
cÚfig
.
bË_adv_ç¡_’abËd
 = 
Œue
;

516 
š™
.
cÚfig
.
bË_adv_ç¡_š‹rv®
 = 
š‹rv®MSecÚds
;

517 
š™
.
cÚfig
.
bË_adv_ç¡_timeout
 = 
³riodSecÚds
;

518 
š™
.
cÚfig
.
bË_adv_¦ow_’abËd
 = 
çl£
;

519 
š™
.
cÚfig
.
bË_adv_¦ow_š‹rv®
 = 
APP_ADV_SLOW_INTERVAL
;

520 
š™
.
cÚfig
.
bË_adv_¦ow_timeout
 = 
APP_ADV_SLOW_DURATION
;

522 
š™
.
evt_hªdËr
 = 
Ú_adv_evt
;

523 
š™
.
”rÜ_hªdËr
 = 
bË_adv”tisšg_”rÜ_hªdËr
;

525 
”r_code
 = 
	`bË_adv”tisšg_š™
(&
m_adv”tisšg
, &
š™
);

526 
	`APP_ERROR_CHECK
(
”r_code
);

528 
	`bË_adv”tisšg_cÚn_cfg_g_£t
(&
m_adv”tisšg
, 
APP_BLE_CONN_CFG_TAG
);

529 
	}
}

532 
boŞ
 
	$­pP“rG‘P“rIdInLi¡
(
pm_³”_id_t
 
³”IdIn
)

534 
pm_³”_id_t
 
³”_id
;

536 
³”_id
 = 
	`pm_Ãxt_³”_id_g‘
(
PM_PEER_ID_INVALID
);

538 
³”_id
 !ğ
PM_PEER_ID_INVALID
 )

540 ifĞ
³”IdIn
 =ğ
³”_id
)

542  
Œue
;

544 
³”_id
 = 
	`pm_Ãxt_³”_id_g‘
(peer_id);

546  
çl£
;

547 
	}
}

550 
	$­pAdvRun
(
advTy³T
 
advTy³
, 
ušt16_t
 
³”Id
)

552 
»t_code_t
 
»t
;

554 
advTy³
)

556 
ADV_IDLE
:

557 
	`USER_INFO
("ADV go idle");

558 
­pS‹
.
cu¼’tAdvTy³
 = 
ADV_IDLE
;

559 
	`­pAdvStİ
();

561 
ADV_ADD_NEW
:

562 
	`USER_INFO
("ADV‡dd‚ew");

563 
	`tim”Stİ
(
¡İSÿnAdvTim”C®lback
);

564 
­pS‹
.
cu¼’tAdvTy³
 = 
ADV_ADD_NEW
;

565 
advDœOrdCÚnS‹
.
m_wh™–i¡_³”_út
 = 0;

567 
ADV_RECONNECT_SCAN
:

569 
	`­pUpd©eBLELi¡P“rs
();

570 
	`USER_INFO
("Quªt™y…“¸š FÏsh = %d", 
advDœOrdCÚnS‹
.
m_wh™–i¡_³”_út
);

571 if(
advDœOrdCÚnS‹
.
m_wh™–i¡_³”_út
 == 0)

573 
	`USER_INFO
("ADV‡dd‚ew");

574 
­pS‹
.
cu¼’tAdvTy³
 = 
ADV_ADD_NEW
;

578 
	`USER_INFO
("ADV start scan");

579 
advDœOrdCÚnS‹
.
loİCÁ
 = 0;

580 
­pS‹
.
cu¼’tAdvTy³
 = 
ADV_RECONNECT_SCAN
;

581 
	`tim”Run
(
¡İSÿnAdvTim”C®lback
, 
ADV_RECONNECT_SCAN_TIMEOUT
);

582 
sÿnšgTimeout
 = 
	`g‘Time
();

585 
ADV_RECONNECT_CONNECT
:

586 
	`USER_INFO
("ADV start connect ");

587 
­pS‹
.
cu¼’tAdvTy³
 = 
ADV_RECONNECT_CONNECT
;

589 
advDœOrdCÚnS‹
.
m_wh™–i¡_³”s
[0] = 
³”Id
;

590 
advDœOrdCÚnS‹
.
m_wh™–i¡_³”_út
 = 1;

595 
	`­pAdvStİ
();

597 
»t
 = 
	`pm_wh™–i¡_£t
((
advDœOrdCÚnS‹
.
m_wh™–i¡_³”_út
 =ğ0 ) ? (
NULL
è: (advDœOrdCÚnS‹.
m_wh™–i¡_³”s
),

598 (
advDœOrdCÚnS‹
.
m_wh™–i¡_³”_út
 == 0 ) ? (0) : (advDirOrdConnState.m_whitelist_peer_cnt));

599 
»t
 = 
	`pm_deviû_id’t™›s_li¡_£t
((
advDœOrdCÚnS‹
.
m_wh™–i¡_³”_út
 =ğ0 ) ? (
NULL
è: (advDœOrdCÚnS‹.
m_wh™–i¡_³”s
),

600 (
advDœOrdCÚnS‹
.
m_wh™–i¡_³”_út
 == 0 ) ? (0) : (advDirOrdConnState.m_whitelist_peer_cnt));

601 
	`DEBUG_LOG
("»ˆğ%d", 
»t
);

603 ià(
»t
 !ğ
NRF_ERROR_NOT_SUPPORTED
)

605 
	`APP_ERROR_CHECK
(
»t
);

607 
	`­pAdvS¹
();

608 
	}
}

611 
	$­pAdvIdËProc
(
ÄfBLEAdvEvT
 
šEv
, 
pm_³”_id_t
 
³”Id
)

613 
	`­pAdvStİ
();

614 
	}
}

617 
	$­pAdvAddNewProc
(
ÄfBLEAdvEvT
 
šEv
, 
pm_³”_id_t
 
³”Id
)

619 
šEv
)

621 
ADV_EVT_START_CONNECT
:

623 
ADV_EVT_STOP_ADV
:

625 
ADV_EVT_CONNECT_PREV
:

626 
	`DEBUG_LOG
("Disconnect old device");

627 
	`­pDiscÚÃù
();

629 
ADV_EVT_CONNECT
:

630 
	`DEBUG_LOG
("New dev");

631 
	`­pAdvStİ
();

634 
	}
}

637 
	$­pAdvDœeùProc
(
ÄfBLEAdvEvT
 
šEv
, 
pm_³”_id_t
 
³”Id
)

639 
»t_code_t
 
”r_code
;

640 
šEv
)

642 
ADV_EVT_START_CONNECT
:

643 
	`DEBUG_LOG
("CONNECT");

644 
advDœOrdCÚnS‹
.
pha£
)

646 
DEV_SCANNING
:

648 
ušt8_t
 
pos
;

650 
	`DEBUG_LOG
("_SCANNING_");

652 
ušt8_t
 
út
 = 0;

653 ; 
út
 < 
advDœOrdCÚnS‹
.
m_wh™–i¡_³”_út
; cnt++)

655 if(
advDœOrdCÚnS‹
.
m_wh™–i¡_³”s
[
út
] =ğ
³”Id
)

660 if(
út
 < 
advDœOrdCÚnS‹
.
m_wh™–i¡_³”_út
)

662 
	`DEBUG_LOG
("»movdev %d", 
advDœOrdCÚnS‹
.
m_wh™–i¡_³”s
[
út
] );

663 ; 
út
 < (
advDœOrdCÚnS‹
.
m_wh™–i¡_³”_út
 - 1); cnt++)

665 
advDœOrdCÚnS‹
.
m_wh™–i¡_³”s
[
út
] =‡dvDirOrdConnState.m_whitelist_peers[cnt+1];

667 
advDœOrdCÚnS‹
.
m_wh™–i¡_³”_út
--;

668 
advDœOrdCÚnS‹
.
m_wh™–i¡_³”s
[
út
] = 
PM_PEER_ID_INVALID
;

669 
	`DEBUG_LOG
("PDL quª %d", 
advDœOrdCÚnS‹
.
m_wh™–i¡_³”_út
);

671 
”r_code
 = 
	`pm_wh™–i¡_£t
((
advDœOrdCÚnS‹
.
m_wh™–i¡_³”_út
 =ğ0 ) ? (
NULL
è: (advDœOrdCÚnS‹.
m_wh™–i¡_³”s
),

672 (
advDœOrdCÚnS‹
.
m_wh™–i¡_³”_út
 == 0 ) ? (0) : (advDirOrdConnState.m_whitelist_peer_cnt));

673 
	`APP_ERROR_CHECK
(
”r_code
);

676 
”r_code
 = 
	`pm_deviû_id’t™›s_li¡_£t
((
advDœOrdCÚnS‹
.
m_wh™–i¡_³”_út
 =ğ0 ) ? (
NULL
è: (advDœOrdCÚnS‹.
m_wh™–i¡_³”s
),

677 (
advDœOrdCÚnS‹
.
m_wh™–i¡_³”_út
 == 0 ) ? (0) : (advDirOrdConnState.m_whitelist_peer_cnt));

678 
	`APP_ERROR_CHECK
(
”r_code
);

681 
	`­pDiscÚÃù
();

682 
	`DEBUG_LOG
("--------Dev iÀli¡ ? %d", 
³”Id
);

683 if(
	`Üd”G‘Pos
(
deviûOrd”
, 
³”Id
, &
pos
))

685 
	`DEBUG_LOG
("Dev fšd %d %d ", 
³”Id
, 
pos
);

686 if(
advDœOrdCÚnS‹
.
li¡D‘eùedDev
[
pos
] =ğ
DETECTED_DEV_FREE
)

688 
	`USER_INFO
("Deviû fšd,…“¸ğ%d", 
³”Id
);

689 
advDœOrdCÚnS‹
.
li¡D‘eùedDev
[
pos
] = 
³”Id
;

690 
advDœOrdCÚnS‹
.
quªt™yD‘eùedDev
++;

693 if(
advDœOrdCÚnS‹
.
quªt™yD‘eùedDev
 >ğ
	`Üd”G‘Quªt™y
(
deviûOrd”
))

695 
	`USER_INFO
("TÙ® sÿÀtim(msèğ%d", 
	`g‘Time
(è- 
sÿnšgTimeout
);

696 
	`­pAdvStİ
();

700 
DEV_CONNECTION
:

702 
	`DEBUG_LOG
("_CONNECTION_");

703 
	`USER_INFO
("Deviû cÚÃùed,…“¸ğ%d", 
³”Id
);

704 
	`­pAdvStİ
();

708 
ADV_EVT_STOP_ADV
:

709 
	`DEBUG_LOG
("STOP_ADV");

710 
advDœOrdCÚnS‹
.
pha£
)

712 
DEV_SCANNING
:

714 
ušt8_t
 
út_1
 = 0;

715 
ušt8_t
 
út_2
 = 0;

716 
	`DEBUG_LOG
("_SCANNING_");

717 
	`USER_INFO
("Stop scanning ");

718 
	`USER_INFO
("Fšd deviû %d", 
advDœOrdCÚnS‹
.
quªt™yD‘eùedDev
);

720 if(
advDœOrdCÚnS‹
.
quªt™yD‘eùedDev
 == 0)

722 
	`­pAdvRun
(
ADV_RECONNECT_SCAN
 , 0);

726 
út_1
 = 0; cÁ_1 < 
BLE_GAP_WHITELIST_ADDR_MAX_COUNT
 - 1; cnt_1++)

728 
út_2
 = 
BLE_GAP_WHITELIST_ADDR_MAX_COUNT
-1; cnt_2 > 0; cnt_2--)

730 if(
advDœOrdCÚnS‹
.
li¡D‘eùedDev
[
út_2
 - 1] =ğ
DETECTED_DEV_FREE
 &&

731 
advDœOrdCÚnS‹
.
li¡D‘eùedDev
[
út_2
 ] !ğ
DETECTED_DEV_FREE
)

733 
advDœOrdCÚnS‹
.
li¡D‘eùedDev
[
út_2
 - 1] =‡dvDirOrdConnState.listDetectedDev[cnt_2 ];

734 
advDœOrdCÚnS‹
.
li¡D‘eùedDev
[
út_2
 ] = 
DETECTED_DEV_FREE
;

738 
advDœOrdCÚnS‹
.
cÚÃùCÁ
 = 0;

739 
	`DEBUG_LOG
("+++++++++");

740 
	`­pAdvRun
(
ADV_RECONNECT_CONNECT
 , 
advDœOrdCÚnS‹
.
li¡D‘eùedDev
[advDœOrdCÚnS‹.
cÚÃùCÁ
]);

741 
	`DEBUG_LOG
("---------");

742 
advDœOrdCÚnS‹
.
pha£
 = 
DEV_CONNECTION
;

745 
DEV_CONNECTION
:

750 
	`DEBUG_LOG
("_CONNECTION_");

751 if(
advDœOrdCÚnS‹
.
cÚÃùCÁ
 >ğadvDœOrdCÚnS‹.
quªt™yD‘eùedDev
)

754 
advDœOrdCÚnS‹
.
loİCÁ
++;

756 if(
advDœOrdCÚnS‹
.
loİCÁ
 >ğ
DIRECT_CONN_QUANTITY
)

762 
	`­pUpd©eBLELi¡P“rs
();

763 
	`mem£t
(
advDœOrdCÚnS‹
.
li¡D‘eùedDev
, 
DETECTED_DEV_FREE
, (advDirOrdConnState.listDetectedDev));

764 
advDœOrdCÚnS‹
.
cÚÃùCÁ
 = 0;

765 
advDœOrdCÚnS‹
.
pha£
 = 
DEV_SCANNING
;

766 
	`­pAdvRun
(
ADV_RECONNECT_SCAN
, 0);

769 
advDœOrdCÚnS‹
.
cÚÃùCÁ
++;

770 
	`­pAdvRun
(
ADV_RECONNECT_CONNECT
, 
advDœOrdCÚnS‹
.
li¡D‘eùedDev
[advDœOrdCÚnS‹.
cÚÃùCÁ
]);

777 
	}
}

780 
	$­pAdvProûssšg
(
ÄfBLEAdvEvT
 
šEv
, 
pm_³”_id_t
 
³”Id
)

782 
­pS‹
.
cu¼’tAdvTy³
)

784 
ADV_IDLE
:

785 
	`­pAdvIdËProc
(
šEv
, 
³”Id
);

787 
ADV_ADD_NEW
:

788 
	`DEBUG_LOG
("ADV_ADD_NEW");

789 
	`­pAdvAddNewProc
(
šEv
, 
³”Id
);

791 
ADV_RECONNECT_SCAN
:

792 
	`DEBUG_LOG
("ADV_SCAN");

793 
	`­pAdvDœeùProc
(
šEv
, 
³”Id
);

795 
ADV_RECONNECT_CONNECT
:

796 
	`DEBUG_LOG
("ADV_CONNECT");

797 
	`­pAdvDœeùProc
(
šEv
, 
³”Id
);

800 
	}
}

803 
	$­pAdvSÿnStİCB
()

805 
	`DEBUG_LOG
("Stop Scan");

806 
	`­pAdvStİ
();

807 
	`­pAdvProûssšg
(
ADV_EVT_STOP_ADV
, 0);

808 
	}
}

812 
	$d–‘e_bÚds
()

814 
»t_code_t
 
”r_code
;

816 
	`DEBUG_LOG
("Erase bonds!");

818 
”r_code
 = 
	`pm_³”s_d–‘e
();

819 
	`DEBUG_LOG
("DELETE ERR %d", 
”r_code
);

820 
	`APP_ERROR_CHECK
(
”r_code
);

821 
	}
}

825 
	$­pProûssšg
()

828 if(
­pS‹
.
isAµAdv
 !ğ­pS‹.
isR—lAdv
)

830 if(
­pS‹
.
isAµAdv
)

832 
	`­pAdvS¹
();

836 
	`­pAdvStİ
();

840 if(
­pS‹
.
isD–‘eBÚds
 &&‡µS‹.
cÚÃùS‹
 =ğ
CONNECTION_DISCONNECT
)

842 
­pS‹
.
isD–‘eBÚds
 = 
çl£
;

843 
	`tim”Stİ
(
¡İSÿnAdvTim”C®lback
);

844 
	`DEBUG_LOG
("Clear bonds");

845 if(
	`­pG‘Quªt™yBLEP“rs
() == 0)

849 
	`d–‘e_bÚds
();

850 
	`­pAdvRun
(
ADV_IDLE
, 0);

852 
	`Üd”CËª
(
deviûOrd”
);

853 
	`Üd”Wr™eFÏsh
(
deviûOrd”
, 
	`GET_PAGE_ADDRESS
(
ORDER_FLASHE_PAGE
));

854 
	`DEBUG_LOG
("Numm…“r ğ%d", 
	`­pG‘Quªt™yBLEP“rs
());

856 
	}
}

859 
	$æashMemWr™eBy‹s
(
ušt32_t
 
æashAdd»ss
, 
ušt8_t
 
bufãr
[], ušt32_ˆ
bufãrSize
)

861 
fds_»cÜd_t
 
»cÜd
;

862 
fds_»cÜd_desc_t
 
»cÜd_desc
;

864 
»cÜd
.
fe_id
 = 
FILE_ORDER
;

865 
»cÜd
.
key
 = 
RECORD_KEY_ORDER
;

866 
»cÜd
.
d©a
.
p_d©a
 = 
bufãr
;

867 
»cÜd
.
d©a
.
Ëngth_wÜds
 = (
bufãrSize
+ 3) / 4;

868 
»t_code_t
 
»t
;

869 
fds_fšd_tok’_t
 
áok
;

872 
	`mem£t
(&
áok
, 0x00, (
fds_fšd_tok’_t
));

874 
	`fds_»cÜd_fšd
(
FILE_ORDER
, 
RECORD_KEY_ORDER
, &
»cÜd_desc
, &
áok
è=ğ
FDS_SUCCESS
)

876 
»t
 = 
	`fds_»cÜd_d–‘e
(&
»cÜd_desc
);

877 ià(
»t
 !ğ
FDS_SUCCESS
)

882 
»t
 = 
	`fds_»cÜd_wr™e
(&
»cÜd_desc
, &
»cÜd
);

883 ià(
»t
 !ğ
FDS_SUCCESS
)

887 
	}
}

890 
	$æashMemR—dBy‹s
(
ušt32_t
 
æashAdd»ss
, 
ušt8_t
 
bufãr
[], ušt32_ˆ
bufãrSize
)

892 
fds_æash_»cÜd_t
 
æash_»cÜd
;

893 
fds_»cÜd_desc_t
 
»cÜd_desc
;

894 
fds_fšd_tok’_t
 
áok
;

897 
	`mem£t
(&
áok
, 0x00, (
fds_fšd_tok’_t
));

899 
	`fds_»cÜd_fšd
(
FILE_ORDER
, 
RECORD_KEY_ORDER
, &
»cÜd_desc
, &
áok
è=ğ
FDS_SUCCESS
)

901 
	`DEBUG_LOG
("Read start");

902 ià(
	`fds_»cÜd_İ’
(&
»cÜd_desc
, &
æash_»cÜd
è!ğ
FDS_SUCCESS
)

907 
	`memıy
(
bufãr
, (
ušt8_t
*)
æash_»cÜd
.
p_d©a
, 
bufãrSize
);

910 ià(
	`fds_»cÜd_şo£
(&
»cÜd_desc
è!ğ
FDS_SUCCESS
)

915 
	`DEBUG_LOG
("Read End");

916 
	}
}

932 
	$as£¹_Äf_ÿÎback
(
ušt16_t
 
lše_num
, cÚ¡ 
ušt8_t
 * 
p_fe_Çme
)

934 
	`­p_”rÜ_hªdËr
(
DEAD_BEEF
, 
lše_num
, 
p_fe_Çme
);

935 
	}
}

944 
	$³”_li¡_g‘
(
pm_³”_id_t
 * 
p_³”s
, 
ušt32_t
 * 
p_size
)

946 
pm_³”_id_t
 
³”_id
;

947 
ušt32_t
 
³”s_to_cİy
;

949 
³”s_to_cİy
 = (*
p_size
 < 
BLE_GAP_WHITELIST_ADDR_MAX_COUNT
) ?

950 *
p_size
 : 
BLE_GAP_WHITELIST_ADDR_MAX_COUNT
;

952 
³”_id
 = 
	`pm_Ãxt_³”_id_g‘
(
PM_PEER_ID_INVALID
);

953 *
p_size
 = 0;

955 (
³”_id
 !ğ
PM_PEER_ID_INVALID
è&& (
³”s_to_cİy
--))

957 
p_³”s
[(*
p_size
)++] = 
³”_id
;

958 
³”_id
 = 
	`pm_Ãxt_³”_id_g‘
(peer_id);

960 
	}
}

1007 
	$£rviû_”rÜ_hªdËr
(
ušt32_t
 
Äf_”rÜ
)

1009 
	`APP_ERROR_HANDLER
(
Äf_”rÜ
);

1010 
	}
}

1017 
	$bË_adv”tisšg_”rÜ_hªdËr
(
ušt32_t
 
Äf_”rÜ
)

1019 
	`APP_ERROR_HANDLER
(
Äf_”rÜ
);

1020 
	}
}

1025 
	$b©‹ry_Ëv–_upd©e
()

1027 
»t_code_t
 
”r_code
;

1028 
ušt8_t
 
b©‹ry_Ëv–
;

1030 
b©‹ry_Ëv–
 = (
ušt8_t
)
	`£nsÜsim_m—su»
(&
m_b©‹ry_sim_¡©e
, &
m_b©‹ry_sim_cfg
);

1032 
”r_code
 = 
	`bË_bas_b©‹ry_Ëv–_upd©e
(&
m_bas
, 
b©‹ry_Ëv–
, 
BLE_CONN_HANDLE_ALL
);

1033 ià((
”r_code
 !ğ
NRF_SUCCESS
) &&

1034 (
”r_code
 !ğ
NRF_ERROR_BUSY
) &&

1035 (
”r_code
 !ğ
NRF_ERROR_RESOURCES
) &&

1036 (
”r_code
 !ğ
NRF_ERROR_FORBIDDEN
) &&

1037 (
”r_code
 !ğ
NRF_ERROR_INVALID_STATE
) &&

1038 (
”r_code
 !ğ
BLE_ERROR_GATTS_SYS_ATTR_MISSING
)

1041 
	`APP_ERROR_HANDLER
(
”r_code
);

1043 
	}
}

1053 
	$b©‹ry_Ëv–_m—s_timeout_hªdËr
(* 
p_cÚ‹xt
)

1055 
	`UNUSED_PARAMETER
(
p_cÚ‹xt
);

1056 
	`b©‹ry_Ëv–_upd©e
();

1057 
	}
}

1064 
	$tim”s_š™
()

1066 
»t_code_t
 
”r_code
;

1068 
”r_code
 = 
	`­p_tim”_š™
();

1069 
	`APP_ERROR_CHECK
(
”r_code
);

1072 
”r_code
 = 
	`­p_tim”_ü—‹
(&
m_b©‹ry_tim”_id
,

1073 
APP_TIMER_MODE_REPEATED
,

1074 
b©‹ry_Ëv–_m—s_timeout_hªdËr
);

1075 
	`APP_ERROR_CHECK
(
”r_code
);

1076 
	}
}

1084 
	$g­_·¿ms_š™
()

1086 
»t_code_t
 
”r_code
;

1087 
bË_g­_cÚn_·¿ms_t
 
g­_cÚn_·¿ms
;

1088 
bË_g­_cÚn_£c_mode_t
 
£c_mode
;

1090 
	`BLE_GAP_CONN_SEC_MODE_SET_OPEN
(&
£c_mode
);

1092 
”r_code
 = 
	`sd_bË_g­_deviû_Çme_£t
(&
£c_mode
,

1093 (cÚ¡ 
ušt8_t
 *)
DEVICE_NAME
,

1094 
	`¡¾’
(
DEVICE_NAME
));

1095 
	`APP_ERROR_CHECK
(
”r_code
);

1097 
”r_code
 = 
	`sd_bË_g­_­³¬ªû_£t
(
BLE_APPEARANCE_HID_MOUSE
);

1098 
	`APP_ERROR_CHECK
(
”r_code
);

1100 
	`mem£t
(&
g­_cÚn_·¿ms
, 0, (gap_conn_params));

1102 
g­_cÚn_·¿ms
.
mš_cÚn_š‹rv®
 = 
MIN_CONN_INTERVAL
;

1103 
g­_cÚn_·¿ms
.
max_cÚn_š‹rv®
 = 
MAX_CONN_INTERVAL
;

1104 
g­_cÚn_·¿ms
.
¦ave_Ï‹ncy
 = 
SLAVE_LATENCY
;

1105 
g­_cÚn_·¿ms
.
cÚn_sup_timeout
 = 
CONN_SUP_TIMEOUT
;

1107 
”r_code
 = 
	`sd_bË_g­_µı_£t
(&
g­_cÚn_·¿ms
);

1108 
	`APP_ERROR_CHECK
(
”r_code
);

1109 
	}
}

1114 
	$g©t_š™
()

1116 
»t_code_t
 
”r_code
 = 
	`Äf_bË_g©t_š™
(&
m_g©t
, 
NULL
);

1117 
	`APP_ERROR_CHECK
(
”r_code
);

1118 
	}
}

1128 
	$Äf_qwr_”rÜ_hªdËr
(
ušt32_t
 
Äf_”rÜ
)

1130 
	`APP_ERROR_HANDLER
(
Äf_”rÜ
);

1131 
	}
}

1136 
	$qwr_š™
()

1138 
»t_code_t
 
”r_code
;

1139 
Äf_bË_qwr_š™_t
 
qwr_š™_obj
 = {0};

1141 
qwr_š™_obj
.
”rÜ_hªdËr
 = 
Äf_qwr_”rÜ_hªdËr
;

1143 
”r_code
 = 
	`Äf_bË_qwr_š™
(&
m_qwr
, &
qwr_š™_obj
);

1144 
	`APP_ERROR_CHECK
(
”r_code
);

1145 
	}
}

1150 
	$dis_š™
()

1152 
»t_code_t
 
”r_code
;

1153 
bË_dis_š™_t
 
dis_š™_obj
;

1154 
bË_dis_²p_id_t
 
²p_id
;

1156 
²p_id
.
v’dÜ_id_sourû
 = 
PNP_ID_VENDOR_ID_SOURCE
;

1157 
²p_id
.
v’dÜ_id
 = 
PNP_ID_VENDOR_ID
;

1158 
²p_id
.
´oduù_id
 = 
PNP_ID_PRODUCT_ID
;

1159 
²p_id
.
´oduù_v”siÚ
 = 
PNP_ID_PRODUCT_VERSION
;

1161 
	`mem£t
(&
dis_š™_obj
, 0, (dis_init_obj));

1163 
	`bË_¤v_ascii_to_utf8
(&
dis_š™_obj
.
mªuçù_Çme_¡r
, 
MANUFACTURER_NAME
);

1164 
dis_š™_obj
.
p_²p_id
 = &
²p_id
;

1166 
	`BLE_GAP_CONN_SEC_MODE_SET_ENC_NO_MITM
(&
dis_š™_obj
.
dis_©Œ_md
.
»ad_³rm
);

1167 
	`BLE_GAP_CONN_SEC_MODE_SET_NO_ACCESS
(&
dis_š™_obj
.
dis_©Œ_md
.
wr™e_³rm
);

1169 
”r_code
 = 
	`bË_dis_š™
(&
dis_š™_obj
);

1170 
	`APP_ERROR_CHECK
(
”r_code
);

1171 
	}
}

1176 
	$bas_š™
()

1178 
»t_code_t
 
”r_code
;

1179 
bË_bas_š™_t
 
bas_š™_obj
;

1181 
	`mem£t
(&
bas_š™_obj
, 0, (bas_init_obj));

1183 
bas_š™_obj
.
evt_hªdËr
 = 
NULL
;

1184 
bas_š™_obj
.
suµÜt_nÙifiÿtiÚ
 = 
Œue
;

1185 
bas_š™_obj
.
p_»pÜt_»f
 = 
NULL
;

1186 
bas_š™_obj
.
š™Ÿl_b©t_Ëv–
 = 100;

1188 
	`BLE_GAP_CONN_SEC_MODE_SET_ENC_NO_MITM
(&
bas_š™_obj
.
b©‹ry_Ëv–_ch¬_©Œ_md
.
cccd_wr™e_³rm
);

1189 
	`BLE_GAP_CONN_SEC_MODE_SET_ENC_NO_MITM
(&
bas_š™_obj
.
b©‹ry_Ëv–_ch¬_©Œ_md
.
»ad_³rm
);

1190 
	`BLE_GAP_CONN_SEC_MODE_SET_NO_ACCESS
(&
bas_š™_obj
.
b©‹ry_Ëv–_ch¬_©Œ_md
.
wr™e_³rm
);

1192 
	`BLE_GAP_CONN_SEC_MODE_SET_ENC_NO_MITM
(&
bas_š™_obj
.
b©‹ry_Ëv–_»pÜt_»ad_³rm
);

1194 
”r_code
 = 
	`bË_bas_š™
(&
m_bas
, &
bas_š™_obj
);

1195 
	`APP_ERROR_CHECK
(
”r_code
);

1196 
	}
}

1201 
	$hids_š™
()

1203 
»t_code_t
 
”r_code
;

1204 
bË_hids_š™_t
 
hids_š™_obj
;

1205 
bË_hids_šp_»p_š™_t
 * 
p_šput_»pÜt
;

1206 
ušt8_t
 
hid_šfo_æags
;

1208 
bË_hids_šp_»p_š™_t
 
šp_»p_¬¿y
[
INPUT_REPORT_COUNT
];

1209 
ušt8_t
 
»p_m­_d©a
[] =

1289 
	`mem£t
(
šp_»p_¬¿y
, 0, (inp_rep_array));

1291 
p_šput_»pÜt
 = &
šp_»p_¬¿y
[
INPUT_REP_BUTTONS_INDEX
];

1292 
p_šput_»pÜt
->
max_Ën
 = 
INPUT_REP_BUTTONS_LEN
;

1293 
p_šput_»pÜt
->
»p_»f
.
»pÜt_id
 = 
INPUT_REP_REF_BUTTONS_ID
;

1294 
p_šput_»pÜt
->
»p_»f
.
»pÜt_ty³
 = 
BLE_HIDS_REP_TYPE_INPUT
;

1296 
	`BLE_GAP_CONN_SEC_MODE_SET_ENC_NO_MITM
(&
p_šput_»pÜt
->
£cur™y_mode
.
cccd_wr™e_³rm
);

1297 
	`BLE_GAP_CONN_SEC_MODE_SET_ENC_NO_MITM
(&
p_šput_»pÜt
->
£cur™y_mode
.
»ad_³rm
);

1298 
	`BLE_GAP_CONN_SEC_MODE_SET_ENC_NO_MITM
(&
p_šput_»pÜt
->
£cur™y_mode
.
wr™e_³rm
);

1300 
p_šput_»pÜt
 = &
šp_»p_¬¿y
[
INPUT_REP_MOVEMENT_INDEX
];

1301 
p_šput_»pÜt
->
max_Ën
 = 
INPUT_REP_MOVEMENT_LEN
;

1302 
p_šput_»pÜt
->
»p_»f
.
»pÜt_id
 = 
INPUT_REP_REF_MOVEMENT_ID
;

1303 
p_šput_»pÜt
->
»p_»f
.
»pÜt_ty³
 = 
BLE_HIDS_REP_TYPE_INPUT
;

1305 
	`BLE_GAP_CONN_SEC_MODE_SET_ENC_NO_MITM
(&
p_šput_»pÜt
->
£cur™y_mode
.
cccd_wr™e_³rm
);

1306 
	`BLE_GAP_CONN_SEC_MODE_SET_ENC_NO_MITM
(&
p_šput_»pÜt
->
£cur™y_mode
.
»ad_³rm
);

1307 
	`BLE_GAP_CONN_SEC_MODE_SET_ENC_NO_MITM
(&
p_šput_»pÜt
->
£cur™y_mode
.
wr™e_³rm
);

1309 
p_šput_»pÜt
 = &
šp_»p_¬¿y
[
INPUT_REP_MPLAYER_INDEX
];

1310 
p_šput_»pÜt
->
max_Ën
 = 
INPUT_REP_MEDIA_PLAYER_LEN
;

1311 
p_šput_»pÜt
->
»p_»f
.
»pÜt_id
 = 
INPUT_REP_REF_MPLAYER_ID
;

1312 
p_šput_»pÜt
->
»p_»f
.
»pÜt_ty³
 = 
BLE_HIDS_REP_TYPE_INPUT
;

1314 
	`BLE_GAP_CONN_SEC_MODE_SET_ENC_NO_MITM
(&
p_šput_»pÜt
->
£cur™y_mode
.
cccd_wr™e_³rm
);

1315 
	`BLE_GAP_CONN_SEC_MODE_SET_ENC_NO_MITM
(&
p_šput_»pÜt
->
£cur™y_mode
.
»ad_³rm
);

1316 
	`BLE_GAP_CONN_SEC_MODE_SET_ENC_NO_MITM
(&
p_šput_»pÜt
->
£cur™y_mode
.
wr™e_³rm
);

1318 
hid_šfo_æags
 = 
HID_INFO_FLAG_REMOTE_WAKE_MSK
 | 
HID_INFO_FLAG_NORMALLY_CONNECTABLE_MSK
;

1320 
	`mem£t
(&
hids_š™_obj
, 0, (hids_init_obj));

1322 
hids_š™_obj
.
evt_hªdËr
 = 
Ú_hids_evt
;

1323 
hids_š™_obj
.
”rÜ_hªdËr
 = 
£rviû_”rÜ_hªdËr
;

1324 
hids_š™_obj
.
is_kb
 = 
çl£
;

1325 
hids_š™_obj
.
is_mou£
 = 
Œue
;

1326 
hids_š™_obj
.
šp_»p_couÁ
 = 
INPUT_REPORT_COUNT
;

1327 
hids_š™_obj
.
p_šp_»p_¬¿y
 = 
šp_»p_¬¿y
;

1328 
hids_š™_obj
.
ou_»p_couÁ
 = 0;

1329 
hids_š™_obj
.
p_ou_»p_¬¿y
 = 
NULL
;

1330 
hids_š™_obj
.
ã©u»_»p_couÁ
 = 0;

1331 
hids_š™_obj
.
p_ã©u»_»p_¬¿y
 = 
NULL
;

1332 
hids_š™_obj
.
»p_m­
.
d©a_Ën
 = (
»p_m­_d©a
);

1333 
hids_š™_obj
.
»p_m­
.
p_d©a
 = 
»p_m­_d©a
;

1334 
hids_š™_obj
.
hid_šfÜm©iÚ
.
bcd_hid
 = 
BASE_USB_HID_SPEC_VERSION
;

1335 
hids_š™_obj
.
hid_šfÜm©iÚ
.
b_couÁry_code
 = 0;

1336 
hids_š™_obj
.
hid_šfÜm©iÚ
.
æags
 = 
hid_šfo_æags
;

1337 
hids_š™_obj
.
šşuded_£rviûs_couÁ
 = 0;

1338 
hids_š™_obj
.
p_šşuded_£rviûs_¬¿y
 = 
NULL
;

1340 
	`BLE_GAP_CONN_SEC_MODE_SET_ENC_NO_MITM
(&
hids_š™_obj
.
»p_m­
.
£cur™y_mode
.
»ad_³rm
);

1341 
	`BLE_GAP_CONN_SEC_MODE_SET_NO_ACCESS
(&
hids_š™_obj
.
»p_m­
.
£cur™y_mode
.
wr™e_³rm
);

1342 
	`BLE_GAP_CONN_SEC_MODE_SET_ENC_NO_MITM
(&
hids_š™_obj
.
hid_šfÜm©iÚ
.
£cur™y_mode
.
»ad_³rm
);

1343 
	`BLE_GAP_CONN_SEC_MODE_SET_NO_ACCESS
(&
hids_š™_obj
.
hid_šfÜm©iÚ
.
£cur™y_mode
.
wr™e_³rm
);

1345 
	`BLE_GAP_CONN_SEC_MODE_SET_ENC_NO_MITM
(

1346 &
hids_š™_obj
.
£cur™y_mode_boÙ_mou£_šp_»p
.
cccd_wr™e_³rm
);

1347 
	`BLE_GAP_CONN_SEC_MODE_SET_ENC_NO_MITM
(

1348 &
hids_š™_obj
.
£cur™y_mode_boÙ_mou£_šp_»p
.
»ad_³rm
);

1349 
	`BLE_GAP_CONN_SEC_MODE_SET_ENC_NO_MITM
(

1350 &
hids_š™_obj
.
£cur™y_mode_boÙ_mou£_šp_»p
.
wr™e_³rm
);

1352 
	`BLE_GAP_CONN_SEC_MODE_SET_ENC_NO_MITM
(&
hids_š™_obj
.
£cur™y_mode_´ÙocŞ
.
»ad_³rm
);

1353 
	`BLE_GAP_CONN_SEC_MODE_SET_ENC_NO_MITM
(&
hids_š™_obj
.
£cur™y_mode_´ÙocŞ
.
wr™e_³rm
);

1354 
	`BLE_GAP_CONN_SEC_MODE_SET_NO_ACCESS
(&
hids_š™_obj
.
£cur™y_mode_ù¾_pošt
.
»ad_³rm
);

1355 
	`BLE_GAP_CONN_SEC_MODE_SET_ENC_NO_MITM
(&
hids_š™_obj
.
£cur™y_mode_ù¾_pošt
.
wr™e_³rm
);

1357 
”r_code
 = 
	`bË_hids_š™
(&
m_hids
, &
hids_š™_obj
);

1358 
	`APP_ERROR_CHECK
(
”r_code
);

1359 
	}
}

1364 
	$£rviûs_š™
()

1366 
	`qwr_š™
();

1367 
	`dis_š™
();

1368 
	`bas_š™
();

1369 
	`hids_š™
();

1370 
	}
}

1375 
	$£nsÜ_simuÏtÜ_š™
()

1377 
m_b©‹ry_sim_cfg
.
mš
 = 
MIN_BATTERY_LEVEL
;

1378 
m_b©‹ry_sim_cfg
.
max
 = 
MAX_BATTERY_LEVEL
;

1379 
m_b©‹ry_sim_cfg
.
šü
 = 
BATTERY_LEVEL_INCREMENT
;

1380 
m_b©‹ry_sim_cfg
.
¡¬t_©_max
 = 
Œue
;

1382 
	`£nsÜsim_š™
(&
m_b©‹ry_sim_¡©e
, &
m_b©‹ry_sim_cfg
);

1383 
	}
}

1390 
	$cÚn_·¿ms_”rÜ_hªdËr
(
ušt32_t
 
Äf_”rÜ
)

1392 
	`APP_ERROR_HANDLER
(
Äf_”rÜ
);

1393 
	}
}

1398 
	$cÚn_·¿ms_š™
()

1400 
»t_code_t
 
”r_code
;

1401 
bË_cÚn_·¿ms_š™_t
 
ı_š™
;

1403 
	`mem£t
(&
ı_š™
, 0, (cp_init));

1405 
ı_š™
.
p_cÚn_·¿ms
 = 
NULL
;

1406 
ı_š™
.
fœ¡_cÚn_·¿ms_upd©e_d–ay
 = 
FIRST_CONN_PARAMS_UPDATE_DELAY
;

1407 
ı_š™
.
Ãxt_cÚn_·¿ms_upd©e_d–ay
 = 
NEXT_CONN_PARAMS_UPDATE_DELAY
;

1408 
ı_š™
.
max_cÚn_·¿ms_upd©e_couÁ
 = 
MAX_CONN_PARAM_UPDATE_COUNT
;

1409 
ı_š™
.
¡¬t_Ú_nÙify_cccd_hªdË
 = 
BLE_GATT_HANDLE_INVALID
;

1410 
ı_š™
.
discÚÃù_Ú_ç
 = 
çl£
;

1411 
ı_š™
.
evt_hªdËr
 = 
NULL
;

1412 
ı_š™
.
”rÜ_hªdËr
 = 
cÚn_·¿ms_”rÜ_hªdËr
;

1414 
”r_code
 = 
	`bË_cÚn_·¿ms_š™
(&
ı_š™
);

1415 
	`APP_ERROR_CHECK
(
”r_code
);

1416 
	}
}

1421 
	$tim”s_¡¬t
()

1423 
»t_code_t
 
”r_code
;

1425 
”r_code
 = 
	`­p_tim”_¡¬t
(
m_b©‹ry_tim”_id
, 
BATTERY_LEVEL_MEAS_INTERVAL
, 
NULL
);

1426 
	`APP_ERROR_CHECK
(
”r_code
);

1427 
	}
}

1434 
	$¦“p_mode_’‹r
()

1436 
»t_code_t
 
”r_code
;

1438 
”r_code
 = 
	`b¥_šdiÿtiÚ_£t
(
BSP_INDICATE_IDLE
);

1439 
	`APP_ERROR_CHECK
(
”r_code
);

1442 
”r_code
 = 
	`b¥_bŠ_bË_¦“p_mode_´•¬e
();

1443 
	`APP_ERROR_CHECK
(
”r_code
);

1446 
”r_code
 = 
	`sd_pow”_sy¡em_off
();

1447 
	`APP_ERROR_CHECK
(
”r_code
);

1448 
	}
}

1458 
	$Ú_hids_evt
(
bË_hids_t
 * 
p_hids
, 
bË_hids_evt_t
 * 
p_evt
)

1460 
p_evt
->
evt_ty³
)

1462 
BLE_HIDS_EVT_BOOT_MODE_ENTERED
:

1463 
m_š_boÙ_mode
 = 
Œue
;

1466 
BLE_HIDS_EVT_REPORT_MODE_ENTERED
:

1467 
m_š_boÙ_mode
 = 
çl£
;

1470 
BLE_HIDS_EVT_NOTIF_ENABLED
:

1477 
	}
}

1484 
	$bË_¡ack_š™
()

1486 
»t_code_t
 
”r_code
;

1488 
”r_code
 = 
	`Äf_sdh_’abË_»que¡
();

1489 
	`APP_ERROR_CHECK
(
”r_code
);

1493 
ušt32_t
 
¿m_¡¬t
 = 0;

1494 
”r_code
 = 
	`Äf_sdh_bË_deçuÉ_cfg_£t
(
APP_BLE_CONN_CFG_TAG
, &
¿m_¡¬t
);

1495 
	`APP_ERROR_CHECK
(
”r_code
);

1498 
”r_code
 = 
	`Äf_sdh_bË_’abË
(&
¿m_¡¬t
);

1499 
	`APP_ERROR_CHECK
(
”r_code
);

1502 
	`NRF_SDH_BLE_OBSERVER
(
m_bË_ob£rv”
, 
APP_BLE_OBSERVER_PRIO
, 
bË_evt_hªdËr
, 
NULL
);

1503 
	}
}

1508 
	$³”_mªag”_š™
()

1510 
bË_g­_£c_·¿ms_t
 
£c_·¿m
;

1511 
»t_code_t
 
”r_code
;

1513 
”r_code
 = 
	`pm_š™
();

1514 
	`APP_ERROR_CHECK
(
”r_code
);

1516 
	`mem£t
(&
£c_·¿m
, 0, (
bË_g­_£c_·¿ms_t
));

1519 
£c_·¿m
.
bÚd
 = 
SEC_PARAM_BOND
;

1520 
£c_·¿m
.
m™m
 = 
SEC_PARAM_MITM
;

1521 
£c_·¿m
.
Ësc
 = 
SEC_PARAM_LESC
;

1522 
£c_·¿m
.
key´ess
 = 
SEC_PARAM_KEYPRESS
;

1523 
£c_·¿m
.
io_ÿps
 = 
SEC_PARAM_IO_CAPABILITIES
;

1524 
£c_·¿m
.
oob
 = 
SEC_PARAM_OOB
;

1525 
£c_·¿m
.
mš_key_size
 = 
SEC_PARAM_MIN_KEY_SIZE
;

1526 
£c_·¿m
.
max_key_size
 = 
SEC_PARAM_MAX_KEY_SIZE
;

1527 
£c_·¿m
.
kdi¡_own
.
’c
 = 1;

1528 
£c_·¿m
.
kdi¡_own
.
id
 = 1;

1529 
£c_·¿m
.
kdi¡_³”
.
’c
 = 1;

1530 
£c_·¿m
.
kdi¡_³”
.
id
 = 1;

1532 
”r_code
 = 
	`pm_£c_·¿ms_£t
(&
£c_·¿m
);

1533 
	`APP_ERROR_CHECK
(
”r_code
);

1535 
”r_code
 = 
	`pm_»gi¡”
(
pm_evt_hªdËr
);

1536 
	`APP_ERROR_CHECK
(
”r_code
);

1537 
	}
}

1544 
	$scheduËr_š™
()

1546 
	`APP_SCHED_INIT
(
SCHED_MAX_EVENT_DATA_SIZE
, 
SCHED_QUEUE_SIZE
);

1547 
	}
}

1555 
	$mou£_movem’t_£nd
(
št16_t
 
x_d–
, iÁ16_ˆ
y_d–
)

1557 
»t_code_t
 
”r_code
;

1559 ià(
m_š_boÙ_mode
)

1561 
x_d–
 = 
	`MIN
(x_delta, 0x00ff);

1562 
y_d–
 = 
	`MIN
(y_delta, 0x00ff);

1564 
”r_code
 = 
	`bË_hids_boÙ_mou£_šp_»p_£nd
(&
m_hids
,

1566 (
št8_t
)
x_d–
,

1567 (
št8_t
)
y_d–
,

1569 
NULL
,

1570 
m_cÚn_hªdË
);

1574 
ušt8_t
 
bufãr
[
INPUT_REP_MOVEMENT_LEN
];

1576 
	`APP_ERROR_CHECK_BOOL
(
INPUT_REP_MOVEMENT_LEN
 == 3);

1578 
x_d–
 = 
	`MIN
(x_delta, 0x0fff);

1579 
y_d–
 = 
	`MIN
(y_delta, 0x0fff);

1581 
bufãr
[0] = 
x_d–
 & 0x00ff;

1582 
bufãr
[1] = ((
y_d–
 & 0x000fè<< 4è| ((
x_d–
 & 0x0f00) >> 8);

1583 
bufãr
[2] = (
y_d–
 & 0x0ff0) >> 4;

1585 
”r_code
 = 
	`bË_hids_šp_»p_£nd
(&
m_hids
,

1586 
INPUT_REP_MOVEMENT_INDEX
,

1587 
INPUT_REP_MOVEMENT_LEN
,

1588 
bufãr
,

1589 
m_cÚn_hªdË
);

1592 ià((
”r_code
 !ğ
NRF_SUCCESS
) &&

1593 (
”r_code
 !ğ
NRF_ERROR_INVALID_STATE
) &&

1594 (
”r_code
 !ğ
NRF_ERROR_RESOURCES
) &&

1595 (
”r_code
 !ğ
NRF_ERROR_BUSY
) &&

1596 (
”r_code
 !ğ
BLE_ERROR_GATTS_SYS_ATTR_MISSING
)

1599 
	`APP_ERROR_HANDLER
(
”r_code
);

1601 
	}
}

1608 
	$b¥_ev’t_hªdËr
(
b¥_ev’t_t
 
ev’t
)

1610 
»t_code_t
 
”r_code
;

1612 
ev’t
)

1614 
BSP_EVENT_SLEEP
:

1615 
	`¦“p_mode_’‹r
();

1618 
BSP_EVENT_DISCONNECT
:

1619 
”r_code
 = 
	`sd_bË_g­_discÚÃù
(
m_cÚn_hªdË
,

1620 
BLE_HCI_REMOTE_USER_TERMINATED_CONNECTION
);

1621 ià(
”r_code
 !ğ
NRF_ERROR_INVALID_STATE
)

1623 
	`APP_ERROR_CHECK
(
”r_code
);

1627 
BSP_EVENT_WHITELIST_OFF
:

1628 ià(
m_cÚn_hªdË
 =ğ
BLE_CONN_HANDLE_INVALID
)

1630 
”r_code
 = 
	`bË_adv”tisšg_»¡¬t_w™hout_wh™–i¡
(&
m_adv”tisšg
);

1631 ià(
”r_code
 !ğ
NRF_ERROR_INVALID_STATE
)

1633 
	`APP_ERROR_CHECK
(
”r_code
);

1638 
BSP_EVENT_KEY_0
:

1639 ià(
m_cÚn_hªdË
 !ğ
BLE_CONN_HANDLE_INVALID
)

1641 
	`mou£_movem’t_£nd
(-
MOVEMENT_SPEED
, 0);

1645 
BSP_EVENT_KEY_1
:

1646 ià(
m_cÚn_hªdË
 !ğ
BLE_CONN_HANDLE_INVALID
)

1648 
	`mou£_movem’t_£nd
(0, -
MOVEMENT_SPEED
);

1652 
BSP_EVENT_KEY_2
:

1653 
	`DEBUG_LOG
("Clear‡ll bonds");

1654 
­pS‹
.
isD–‘eBÚds
 = 
Œue
;

1658 
BSP_EVENT_KEY_3
:

1659 
	`DEBUG_LOG
("ADD_NEW‡dv start");

1660 
	`­pAdvRun
(
ADV_ADD_NEW
, 0);

1666 
	}
}

1673 
	$bu‰Ús_Ëds_š™
(
boŞ
 * 
p_”a£_bÚds
)

1675 
»t_code_t
 
”r_code
;

1676 
b¥_ev’t_t
 
¡¬tup_ev’t
;

1678 
”r_code
 = 
	`b¥_š™
(
BSP_INIT_LEDS
 | 
BSP_INIT_BUTTONS
, 
b¥_ev’t_hªdËr
);

1680 
	`APP_ERROR_CHECK
(
”r_code
);

1682 
”r_code
 = 
	`b¥_bŠ_bË_š™
(
NULL
, &
¡¬tup_ev’t
);

1683 
	`APP_ERROR_CHECK
(
”r_code
);

1685 *
p_”a£_bÚds
 = (
¡¬tup_ev’t
 =ğ
BSP_EVENT_CLEAR_BONDING_DATA
);

1686 
	}
}

1691 
	$log_š™
()

1693 
»t_code_t
 
”r_code
 = 
	`NRF_LOG_INIT
(
NULL
);

1694 
	`APP_ERROR_CHECK
(
”r_code
);

1696 
	`NRF_LOG_DEFAULT_BACKENDS_INIT
();

1697 
	}
}

1702 
	$pow”_mªagem’t_š™
()

1704 
»t_code_t
 
”r_code
;

1705 
”r_code
 = 
	`Äf_pwr_mgmt_š™
();

1706 
	`APP_ERROR_CHECK
(
”r_code
);

1707 
	}
}

1714 
	$idË_¡©e_hªdË
()

1716 
	`­p_sched_execu‹
();

1717 ià(
	`NRF_LOG_PROCESS
(è=ğ
çl£
)

1719 
	`Äf_pwr_mgmt_run
();

1721 
	}
}

1725 
	$fds_evt_hªdËr
(
fds_evt_t
 cÚ¡ * 
p_fds_evt
)

1738 
p_fds_evt
->
id
)

1740 
FDS_EVT_INIT
:

1741 ià(
p_fds_evt
->
»suÉ
 !ğ
FDS_SUCCESS
)

1749 
	}
}

1756 
	$maš
()

1758 
»t_code_t
 
»t
;

1759 
boŞ
 
”a£_bÚds
;

1762 
	`log_š™
();

1763 
	`USER_INFO
("APPLICATION STARTED");

1765 
	`š™U£rTim”
();

1766 
¡İSÿnAdvTim”C®lback
 = 
	`tim”G‘C®lback
(
­pAdvSÿnStİCB
);

1767 
deviûOrd”
 = 
	`Üd”M®loc
();

1769 
»t
 = 
	`fds_»gi¡”
(
fds_evt_hªdËr
);

1770 ià(
»t
 !ğ
FDS_SUCCESS
)

1772 
	`APP_ERROR_CHECK
(
»t
);

1774 
»t
 = 
	`fds_š™
();

1775 ià(
»t
 !ğ
FDS_SUCCESS
)

1777 
	`APP_ERROR_CHECK
(
»t
);

1780 
	`Üd”R—dFÏsh
(
deviûOrd”
, 
	`GET_PAGE_ADDRESS
(
ORDER_FLASHE_PAGE
));

1781 
	`USER_INFO
("Quªt™y i‹m š ord” = %d", 
	`Üd”G‘Quªt™y
(
deviûOrd”
));

1782 
ušt8_t
 
út
 = 0; cÁ < 
ORDER_ITEM_QUANTITY
; cnt++ )

1784 
	`USER_INFO
("™em = %d", 
	`Üd”G‘I‹m
(
deviûOrd”
, 
út
));

1788 
	`tim”s_š™
();

1789 
	`bu‰Ús_Ëds_š™
(&
”a£_bÚds
);

1790 
	`pow”_mªagem’t_š™
();

1791 
	`bË_¡ack_š™
();

1792 
	`scheduËr_š™
();

1793 
	`g­_·¿ms_š™
();

1794 
	`g©t_š™
();

1796 
	`£rviûs_š™
();

1797 
	`£nsÜ_simuÏtÜ_š™
();

1798 
	`cÚn_·¿ms_š™
();

1799 
	`³”_mªag”_š™
();

1802 if(
	`Üd”G‘Quªt™y
(
deviûOrd”
è!ğ
	`­pG‘Quªt™yBLEP“rs
())

1804 
	`USER_INFO
("Quantity items on order‡nd flash don'tƒqual, clear‡ll");

1805 
	`Üd”CËª
(
deviûOrd”
);

1806 
	`Üd”Wr™eFÏsh
(
deviûOrd”
, 
	`GET_PAGE_ADDRESS
(
ORDER_FLASHE_PAGE
));

1807 if(
	`­pG‘Quªt™yBLEP“rs
() != 0)

1809 
	`d–‘e_bÚds
();

1814 
	`tim”s_¡¬t
();

1816 
	`adv”tisšg_š™
(
APP_ADV_GLOBAL_INTERVAL
, 
APP_ADV_GLOBAL_TIMEOUT
, 
Œue
);

1817 
	`­pAdvRun
(
ADV_RECONNECT_SCAN
, 0);

1822 
	`idË_¡©e_hªdË
();

1824 
	`­pProûssšg
();

1825 
	`u£rProûssšgTim”C®lbackFun
();

1828 
	}
}

1838 
	$bË_evt_hªdËr
(
bË_evt_t
 cÚ¡ * 
p_bË_evt
, * 
p_cÚ‹xt
)

1840 
»t_code_t
 
”r_code
;

1842 
p_bË_evt
->
h—d”
.
evt_id
)

1844 
BLE_GAP_EVT_CONNECTED
: 
	`DEBUG_LOG
("CONNECTED"); ;

1845 
BLE_GAP_EVT_DISCONNECTED
: 
	`DEBUG_LOG
("DISCONNECTED"); ;

1846 
BLE_GAP_EVT_CONN_PARAM_UPDATE
: 
	`DEBUG_LOG
("CONN_PARAM_UPDATE"); ;

1847 
BLE_GAP_EVT_SEC_PARAMS_REQUEST
: 
	`DEBUG_LOG
("SEC_PARAMS_REQUEST"); ;

1848 
BLE_GAP_EVT_SEC_INFO_REQUEST
: 
	`DEBUG_LOG
("SEC_INFO_REQUEST"); ;

1849 
BLE_GAP_EVT_PASSKEY_DISPLAY
: 
	`DEBUG_LOG
("PASSKEY_DISPLAY"); ;

1850 
BLE_GAP_EVT_KEY_PRESSED
: 
	`DEBUG_LOG
("KEY_PRESSED"); ;

1851 
BLE_GAP_EVT_AUTH_KEY_REQUEST
: 
	`DEBUG_LOG
("AUTH_KEY_REQUEST"); ;

1852 
BLE_GAP_EVT_LESC_DHKEY_REQUEST
: 
	`DEBUG_LOG
("LESC_DHKEY_REQUEST"); ;

1853 
BLE_GAP_EVT_AUTH_STATUS
: 
	`DEBUG_LOG
("AUTH_STATUS"); ;

1854 
BLE_GAP_EVT_CONN_SEC_UPDATE
: 
	`DEBUG_LOG
("CONN_SEC_UPDATE"); ;

1855 
BLE_GAP_EVT_TIMEOUT
: 
	`DEBUG_LOG
("TIMEOUT"); ;

1856 
BLE_GAP_EVT_RSSI_CHANGED
: 
	`DEBUG_LOG
("RSSI_CHANGED"); ;

1857 
BLE_GAP_EVT_ADV_REPORT
: 
	`DEBUG_LOG
("ADV_REPORT"); ;

1858 
BLE_GAP_EVT_SEC_REQUEST
: 
	`DEBUG_LOG
("SEC_REQUEST"); ;

1859 
BLE_GAP_EVT_CONN_PARAM_UPDATE_REQUEST
: 
	`DEBUG_LOG
("CONN_PARAM_UPDATE_REQUEST"); ;

1860 
BLE_GAP_EVT_SCAN_REQ_REPORT
: 
	`DEBUG_LOG
("SCAN_REQ_REPORT"); ;

1861 
BLE_GAP_EVT_PHY_UPDATE
: 
	`DEBUG_LOG
("PHY_UPDATE"); ;

1862 
BLE_GAP_EVT_DATA_LENGTH_UPDATE_REQUEST
: 
	`DEBUG_LOG
("DATA_LENGTH_UPDATE_REQUEST"); ;

1863 
BLE_GAP_EVT_DATA_LENGTH_UPDATE
: 
	`DEBUG_LOG
("DATA_LENGTH_UPDATE"); ;

1868 
p_bË_evt
->
h—d”
.
evt_id
)

1870 
BLE_GAP_EVT_CONNECTED
:

1872 
”r_code
 = 
	`b¥_šdiÿtiÚ_£t
(
BSP_INDICATE_CONNECTED
);

1873 
	`APP_ERROR_CHECK
(
”r_code
);

1875 
m_cÚn_hªdË
 = 
p_bË_evt
->
evt
.
g­_evt
.
cÚn_hªdË
;

1877 
”r_code
 = 
	`Äf_bË_qwr_cÚn_hªdË_assign
(&
m_qwr
, 
m_cÚn_hªdË
);

1878 
	`APP_ERROR_CHECK
(
”r_code
);

1881 if(
	`­pAdvG‘P»vCÚn
())

1883 
	`DEBUG_LOG
("CON:rue");

1886 
	`DEBUG_LOG
("CON: false");

1887 
	`­pAdvS‘R—lS‹
(
çl£
);

1888 
	`­pCÚÃùS‘S‹
(
CONNECTION_CONNECT
, 
m_cÚn_hªdË
);

1889 
	`­pAdvProûssšg
(
ADV_EVT_CONNECT
,0);

1894 
BLE_GAP_EVT_DISCONNECTED
:

1895 
	`DEBUG_LOG
("Disconnected");

1897 
	`­pAdvS‘P»vCÚn
(
çl£
);

1898 
	`­pCÚÃùS‘S‹
(
CONNECTION_DISCONNECT
, 
BLE_CONN_HANDLE_INVALID
);

1901 
m_cÚn_hªdË
 = 
BLE_CONN_HANDLE_INVALID
;

1904 
BLE_GAP_EVT_PHY_UPDATE_REQUEST
:

1906 
	`DEBUG_LOG
("PHY update„equest.");

1907 
bË_g­_phys_t
 cÚ¡ 
phys
 =

1909 .
rx_phys
 = 
BLE_GAP_PHY_AUTO
,

1910 .
tx_phys
 = 
BLE_GAP_PHY_AUTO
,

1912 
”r_code
 = 
	`sd_bË_g­_phy_upd©e
(
p_bË_evt
->
evt
.
g­_evt
.
cÚn_hªdË
, &
phys
);

1913 
	`APP_ERROR_CHECK
(
”r_code
);

1916 
BLE_GATTC_EVT_TIMEOUT
:

1918 
	`DEBUG_LOG
("GATT Client Timeout.");

1919 
”r_code
 = 
	`sd_bË_g­_discÚÃù
(
p_bË_evt
->
evt
.
g©tc_evt
.
cÚn_hªdË
,

1920 
BLE_HCI_REMOTE_USER_TERMINATED_CONNECTION
);

1921 
	`APP_ERROR_CHECK
(
”r_code
);

1924 
BLE_GATTS_EVT_TIMEOUT
:

1926 
	`DEBUG_LOG
("GATT Server Timeout.");

1927 
”r_code
 = 
	`sd_bË_g­_discÚÃù
(
p_bË_evt
->
evt
.
g©ts_evt
.
cÚn_hªdË
,

1928 
BLE_HCI_REMOTE_USER_TERMINATED_CONNECTION
);

1929 
	`APP_ERROR_CHECK
(
”r_code
);

1936 
	}
}

1946 
	$pm_evt_hªdËr
(
pm_evt_t
 cÚ¡ * 
p_evt
)

1948 
»t_code_t
 
”r_code
;

1950 
p_evt
->
evt_id
)

1952 
PM_EVT_BONDED_PEER_CONNECTED
: 
	`DEBUG_LOG
("PM_EVT_BONDED_PEER_CONNECTED"); ;

1953 
PM_EVT_CONN_SEC_START
: 
	`DEBUG_LOG
("PM_EVT_CONN_SEC_START"); ;

1954 
PM_EVT_CONN_SEC_SUCCEEDED
: 
	`DEBUG_LOG
("PM_EVT_CONN_SEC_SUCCEEDED"); ;

1955 
PM_EVT_CONN_SEC_FAILED
: 
	`DEBUG_LOG
("PM_EVT_CONN_SEC_FAILED"); ;

1956 
PM_EVT_CONN_SEC_CONFIG_REQ
: 
	`DEBUG_LOG
("PM_EVT_CONN_SEC_CONFIG_REQ"); ;

1957 
PM_EVT_CONN_SEC_PARAMS_REQ
: 
	`DEBUG_LOG
("PM_EVT_CONN_SEC_PARAMS_REQ"); ;

1958 
PM_EVT_STORAGE_FULL
: 
	`DEBUG_LOG
("PM_EVT_STORAGE_FULL"); ;

1959 
PM_EVT_ERROR_UNEXPECTED
: 
	`DEBUG_LOG
("PM_EVT_ERROR_UNEXPECTED"); ;

1960 
PM_EVT_PEER_DATA_UPDATE_SUCCEEDED
: 
	`DEBUG_LOG
("PM_EVT_PEER_DATA_UPDATE_SUCCEEDED"); ;

1961 
PM_EVT_PEER_DATA_UPDATE_FAILED
: 
	`DEBUG_LOG
("PM_EVT_PEER_DATA_UPDATE_FAILED"); ;

1962 
PM_EVT_PEER_DELETE_SUCCEEDED
: 
	`DEBUG_LOG
("PM_EVT_PEER_DELETE_SUCCEEDED"); ;

1963 
PM_EVT_PEER_DELETE_FAILED
: 
	`DEBUG_LOG
("PM_EVT_PEER_DELETE_FAILED"); ;

1964 
PM_EVT_PEERS_DELETE_SUCCEEDED
: 
	`DEBUG_LOG
("PM_EVT_PEERS_DELETE_SUCCEEDED"); ;

1965 
PM_EVT_PEERS_DELETE_FAILED
: 
	`DEBUG_LOG
("PM_EVT_PEERS_DELETE_FAILED"); ;

1966 
PM_EVT_LOCAL_DB_CACHE_APPLIED
: 
	`DEBUG_LOG
("PM_EVT_LOCAL_DB_CACHE_APPLIED"); ;

1967 
PM_EVT_LOCAL_DB_CACHE_APPLY_FAILED
: 
	`DEBUG_LOG
("PM_EVT_LOCAL_DB_CACHE_APPLY_FAILED"); ;

1968 
PM_EVT_SERVICE_CHANGED_IND_SENT
: 
	`DEBUG_LOG
("PM_EVT_SERVICE_CHANGED_IND_SENT"); ;

1969 
PM_EVT_SERVICE_CHANGED_IND_CONFIRMED
: 
	`DEBUG_LOG
("PM_EVT_SERVICE_CHANGED_IND_CONFIRMED"); ;

1970 
PM_EVT_SLAVE_SECURITY_REQ
: 
	`DEBUG_LOG
("PM_EVT_SLAVE_SECURITY_REQ"); ;

1975 
p_evt
->
evt_id
)

1977 
PM_EVT_BONDED_PEER_CONNECTED
:

1979 
	`DEBUG_LOG
("Connectedo‡…reviously bonded device.");

1981 
	`­pAdvS‘P»vCÚn
(
Œue
);

1982 
	`­pAdvS‘R—lS‹
(
çl£
);

1983 
	`­pCÚÃùS‘S‹
(
CONNECTION_CONNECT
, 
p_evt
->
cÚn_hªdË
);

1984 
	`­pAdvProûssšg
(
ADV_EVT_START_CONNECT
, 
p_evt
->
³”_id
);

1988 
PM_EVT_CONN_SEC_SUCCEEDED
:

1990 
	`DEBUG_LOG
("Connection secured:„ole: %d, conn_handle: 0x%x,…rocedure: %d.",

1991 
	`bË_cÚn_¡©e_rŞe
(
p_evt
->
cÚn_hªdË
),

1992 
p_evt
->
cÚn_hªdË
,

1993 
p_evt
->
·¿ms
.
cÚn_£c_sucûeded
.
´oûdu»
);

1995 
m_³”_id
 = 
p_evt
->
³”_id
;

1998 
	`Üd”S‘Fœ¡
(
deviûOrd”
, 
p_evt
->
³”_id
);

1999 
	`Üd”Wr™eFÏsh
(
deviûOrd”
, 
	`GET_PAGE_ADDRESS
(
ORDER_FLASHE_PAGE
));

2003 
PM_EVT_CONN_SEC_FAILED
:

2006 
	`­pAdvS¹
();

2010 
PM_EVT_CONN_SEC_CONFIG_REQ
:

2013 
pm_cÚn_£c_cÚfig_t
 
cÚn_£c_cÚfig
 = {.
®low_»·œšg
 = 
çl£
};

2014 
	`pm_cÚn_£c_cÚfig_»¶y
(
p_evt
->
cÚn_hªdË
, &
cÚn_£c_cÚfig
);

2017 
PM_EVT_STORAGE_FULL
:

2020 
”r_code
 = 
	`fds_gc
();

2021 ià(
”r_code
 =ğ
FDS_ERR_NO_SPACE_IN_QUEUES
)

2027 
	`APP_ERROR_CHECK
(
”r_code
);

2031 
PM_EVT_PEERS_DELETE_SUCCEEDED
:

2036 
PM_EVT_PEER_DATA_UPDATE_SUCCEEDED
:

2038 iàĞ
p_evt
->
·¿ms
.
³”_d©a_upd©e_sucûeded
.
æash_chªged


2039 && (
p_evt
->
·¿ms
.
³”_d©a_upd©e_sucûeded
.
d©a_id
 =ğ
PM_PEER_DATA_ID_BONDING
))

2041 
	`DEBUG_LOG
("New Bond,‡ddhe…eerohe whitelist if…ossible");

2042 
	`DEBUG_LOG
("\tm_whitelist_peer_cnt %d, MAX_PEERS_WLIST %d",

2043 
m_wh™–i¡_³”_út
 + 1,

2044 
BLE_GAP_WHITELIST_ADDR_MAX_COUNT
);

2045 
	`USER_INFO
("Added‚ew deviû, P“¸Id = %d", 
p_evt
->
³”_id
);

2047 ià(
m_wh™–i¡_³”_út
 < 
BLE_GAP_WHITELIST_ADDR_MAX_COUNT
)

2050 
m_wh™–i¡_³”s
[
m_wh™–i¡_³”_út
++] = 
m_³”_id
;

2053 
”r_code
 = 
	`pm_wh™–i¡_£t
(
m_wh™–i¡_³”s
, 
m_wh™–i¡_³”_út
);

2054 
	`APP_ERROR_CHECK
(
”r_code
);

2056 
”r_code
 = 
	`pm_deviû_id’t™›s_li¡_£t
(
m_wh™–i¡_³”s
, 
m_wh™–i¡_³”_út
);

2057 ià(
”r_code
 !ğ
NRF_ERROR_NOT_SUPPORTED
)

2059 
	`APP_ERROR_CHECK
(
”r_code
);

2065 
PM_EVT_PEER_DATA_UPDATE_FAILED
:

2068 
	`APP_ERROR_CHECK
(
p_evt
->
·¿ms
.
³”_d©a_upd©e_çed
.
”rÜ
);

2071 
PM_EVT_PEER_DELETE_FAILED
:

2074 
	`APP_ERROR_CHECK
(
p_evt
->
·¿ms
.
³”_d–‘e_çed
.
”rÜ
);

2077 
PM_EVT_PEERS_DELETE_FAILED
:

2080 
	`APP_ERROR_CHECK
(
p_evt
->
·¿ms
.
³”s_d–‘e_çed_evt
.
”rÜ
);

2083 
PM_EVT_ERROR_UNEXPECTED
:

2086 
	`APP_ERROR_CHECK
(
p_evt
->
·¿ms
.
”rÜ_uÃx³ùed
.
”rÜ
);

2089 
PM_EVT_CONN_SEC_START
:

2090 
PM_EVT_PEER_DELETE_SUCCEEDED
:

2091 
PM_EVT_LOCAL_DB_CACHE_APPLIED
:

2092 
PM_EVT_LOCAL_DB_CACHE_APPLY_FAILED
:

2094 
PM_EVT_SERVICE_CHANGED_IND_SENT
:

2095 
PM_EVT_SERVICE_CHANGED_IND_CONFIRMED
:

2099 
	}
}

2111 
	$Ú_adv_evt
(
bË_adv_evt_t
 
bË_adv_evt
)

2113 
»t_code_t
 
”r_code
;

2115 
	`DEBUG_LOG
("ADV_EV %d", 
bË_adv_evt
);

2118 ifĞ(
	`­pAdvG‘S‹
(è=ğ
çl£
è&& (
bË_adv_evt
 !ğ
BLE_ADV_EVT_IDLE
))

2120 
	`DEBUG_LOG
("Stop Adv");

2122 
	`­pAdvStİ
();

2127 
bË_adv_evt
)

2129 
BLE_ADV_EVT_DIRECTED_HIGH_DUTY
:

2130 
	`DEBUG_LOG
("Directed‡dvertising.");

2131 
”r_code
 = 
	`b¥_šdiÿtiÚ_£t
(
BSP_INDICATE_ADVERTISING_DIRECTED
);

2132 
	`APP_ERROR_CHECK
(
”r_code
);

2135 
BLE_ADV_EVT_FAST
:

2136 
	`DEBUG_LOG
("Fast‡dvertising.");

2137 
”r_code
 = 
	`b¥_šdiÿtiÚ_£t
(
BSP_INDICATE_ADVERTISING
);

2138 
	`APP_ERROR_CHECK
(
”r_code
);

2141 
BLE_ADV_EVT_SLOW
:

2142 
	`DEBUG_LOG
("Slow‡dvertising.");

2143 
”r_code
 = 
	`b¥_šdiÿtiÚ_£t
(
BSP_INDICATE_ADVERTISING_SLOW
);

2144 
	`APP_ERROR_CHECK
(
”r_code
);

2147 
BLE_ADV_EVT_FAST_WHITELIST
:

2148 
	`DEBUG_LOG
("Fast‡dvertising with whitelist.");

2149 
”r_code
 = 
	`b¥_šdiÿtiÚ_£t
(
BSP_INDICATE_ADVERTISING_WHITELIST
);

2150 
	`APP_ERROR_CHECK
(
”r_code
);

2153 
BLE_ADV_EVT_SLOW_WHITELIST
:

2154 
	`DEBUG_LOG
("Slow‡dvertising with whitelist.");

2155 
”r_code
 = 
	`b¥_šdiÿtiÚ_£t
(
BSP_INDICATE_ADVERTISING_WHITELIST
);

2156 
	`APP_ERROR_CHECK
(
”r_code
);

2157 
”r_code
 = 
	`bË_adv”tisšg_»¡¬t_w™hout_wh™–i¡
(&
m_adv”tisšg
);

2158 
	`APP_ERROR_CHECK
(
”r_code
);

2161 
BLE_ADV_EVT_IDLE
:

2162 
”r_code
 = 
	`b¥_šdiÿtiÚ_£t
(
BSP_INDICATE_IDLE
);

2163 
	`APP_ERROR_CHECK
(
”r_code
);

2165 
	`­pAdvS‘R—lS‹
(
çl£
);

2166 
	`­pAdvStİ
();

2167 
	`USER_INFO
("ADV was stoped");

2172 
BLE_ADV_EVT_WHITELIST_REQUEST
:

2174 
bË_g­_addr_t
 
wh™–i¡_addrs
[
BLE_GAP_WHITELIST_ADDR_MAX_COUNT
];

2175 
bË_g­_œk_t
 
wh™–i¡_œks
[
BLE_GAP_WHITELIST_ADDR_MAX_COUNT
];

2176 
ušt32_t
 
addr_út
 = 
BLE_GAP_WHITELIST_ADDR_MAX_COUNT
;

2177 
ušt32_t
 
œk_út
 = 
BLE_GAP_WHITELIST_ADDR_MAX_COUNT
;

2179 
”r_code
 = 
	`pm_wh™–i¡_g‘
(
wh™–i¡_addrs
, &
addr_út
,

2180 
wh™–i¡_œks
, &
œk_út
);

2181 
	`APP_ERROR_CHECK
(
”r_code
);

2182 
	`DEBUG_LOG
("pm_whitelist_get„eturns %d‡ddr in whitelist‡nd %d irk whitelist",

2183 
addr_út
,

2184 
œk_út
);

2187 
”r_code
 = 
	`bË_adv”tisšg_wh™–i¡_»¶y
(&
m_adv”tisšg
,

2188 
wh™–i¡_addrs
,

2189 
addr_út
,

2190 
wh™–i¡_œks
,

2191 
œk_út
);

2192 
	`APP_ERROR_CHECK
(
”r_code
);

2196 
BLE_ADV_EVT_PEER_ADDR_REQUEST
:

2198 
pm_³”_d©a_bÚdšg_t
 
³”_bÚdšg_d©a
;

2201 ià(
m_³”_id
 !ğ
PM_PEER_ID_INVALID
)

2204 
”r_code
 = 
	`pm_³”_d©a_bÚdšg_lßd
(
m_³”_id
, &
³”_bÚdšg_d©a
);

2205 ià(
”r_code
 !ğ
NRF_ERROR_NOT_FOUND
)

2207 
	`APP_ERROR_CHECK
(
”r_code
);

2209 
bË_g­_addr_t
 * 
p_³”_addr
 = &(
³”_bÚdšg_d©a
.
³”_bË_id
.
id_addr_šfo
);

2210 
”r_code
 = 
	`bË_adv”tisšg_³”_addr_»¶y
(&
m_adv”tisšg
, 
p_³”_addr
);

2211 
	`APP_ERROR_CHECK
(
”r_code
);

2221 
	}
}

	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\examples\ble_peripheral\ble_app_hids_mouse\pca10056\s140\config\sdk_config.h

43 #iâdeà
SDK_CONFIG_H


44 
	#SDK_CONFIG_H


	)

46 #ifdeà
USE_APP_CONFIG


47 
	~"­p_cÚfig.h
"

55 #iâdeà
BSP_BTN_BLE_ENABLED


56 
	#BSP_BTN_BLE_ENABLED
 1

	)

68 #iâdeà
BLE_ADVERTISING_ENABLED


69 
	#BLE_ADVERTISING_ENABLED
 1

	)

75 #iâdeà
BLE_DTM_ENABLED


76 
	#BLE_DTM_ENABLED
 0

	)

82 #iâdeà
BLE_RACP_ENABLED


83 
	#BLE_RACP_ENABLED
 0

	)

88 #iâdeà
NRF_BLE_CONN_PARAMS_ENABLED


89 
	#NRF_BLE_CONN_PARAMS_ENABLED
 1

	)

94 #iâdeà
NRF_BLE_CONN_PARAMS_MAX_SLAVE_LATENCY_DEVIATION


95 
	#NRF_BLE_CONN_PARAMS_MAX_SLAVE_LATENCY_DEVIATION
 499

	)

101 #iâdeà
NRF_BLE_CONN_PARAMS_MAX_SUPERVISION_TIMEOUT_DEVIATION


102 
	#NRF_BLE_CONN_PARAMS_MAX_SUPERVISION_TIMEOUT_DEVIATION
 65535

	)

110 #iâdeà
NRF_BLE_GATT_ENABLED


111 
	#NRF_BLE_GATT_ENABLED
 1

	)

116 #iâdeà
NRF_BLE_QWR_ENABLED


117 
	#NRF_BLE_QWR_ENABLED
 1

	)

120 #iâdeà
NRF_BLE_QWR_MAX_ATTR


121 
	#NRF_BLE_QWR_MAX_ATTR
 0

	)

128 #iâdeà
PEER_MANAGER_ENABLED


129 
	#PEER_MANAGER_ENABLED
 1

	)

132 #iâdeà
PM_MAX_REGISTRANTS


133 
	#PM_MAX_REGISTRANTS
 3

	)

139 #iâdeà
PM_FLASH_BUFFERS


140 
	#PM_FLASH_BUFFERS
 2

	)

148 #iâdeà
PM_CENTRAL_ENABLED


149 
	#PM_CENTRAL_ENABLED
 0

	)

158 #iâdeà
PM_SERVICE_CHANGED_ENABLED


159 
	#PM_SERVICE_CHANGED_ENABLED
 1

	)

167 #iâdeà
PM_PEER_RANKS_ENABLED


168 
	#PM_PEER_RANKS_ENABLED
 1

	)

182 #iâdeà
BLE_ANCS_C_ENABLED


183 
	#BLE_ANCS_C_ENABLED
 0

	)

189 #iâdeà
BLE_ANS_C_ENABLED


190 
	#BLE_ANS_C_ENABLED
 0

	)

196 #iâdeà
BLE_BAS_C_ENABLED


197 
	#BLE_BAS_C_ENABLED
 0

	)

202 #iâdeà
BLE_BAS_ENABLED


203 
	#BLE_BAS_ENABLED
 1

	)

207 #iâdeà
BLE_BAS_CONFIG_LOG_ENABLED


208 
	#BLE_BAS_CONFIG_LOG_ENABLED
 0

	)

218 #iâdeà
BLE_BAS_CONFIG_LOG_LEVEL


219 
	#BLE_BAS_CONFIG_LOG_LEVEL
 3

	)

234 #iâdeà
BLE_BAS_CONFIG_INFO_COLOR


235 
	#BLE_BAS_CONFIG_INFO_COLOR
 0

	)

250 #iâdeà
BLE_BAS_CONFIG_DEBUG_COLOR


251 
	#BLE_BAS_CONFIG_DEBUG_COLOR
 0

	)

261 #iâdeà
BLE_CSCS_ENABLED


262 
	#BLE_CSCS_ENABLED
 0

	)

268 #iâdeà
BLE_CTS_C_ENABLED


269 
	#BLE_CTS_C_ENABLED
 0

	)

275 #iâdeà
BLE_DIS_ENABLED


276 
	#BLE_DIS_ENABLED
 1

	)

282 #iâdeà
BLE_GLS_ENABLED


283 
	#BLE_GLS_ENABLED
 0

	)

289 #iâdeà
BLE_HIDS_ENABLED


290 
	#BLE_HIDS_ENABLED
 1

	)

296 #iâdeà
BLE_HRS_C_ENABLED


297 
	#BLE_HRS_C_ENABLED
 0

	)

303 #iâdeà
BLE_HRS_ENABLED


304 
	#BLE_HRS_ENABLED
 0

	)

310 #iâdeà
BLE_HTS_ENABLED


311 
	#BLE_HTS_ENABLED
 0

	)

317 #iâdeà
BLE_IAS_C_ENABLED


318 
	#BLE_IAS_C_ENABLED
 0

	)

323 #iâdeà
BLE_IAS_ENABLED


324 
	#BLE_IAS_ENABLED
 0

	)

328 #iâdeà
BLE_IAS_CONFIG_LOG_ENABLED


329 
	#BLE_IAS_CONFIG_LOG_ENABLED
 0

	)

339 #iâdeà
BLE_IAS_CONFIG_LOG_LEVEL


340 
	#BLE_IAS_CONFIG_LOG_LEVEL
 3

	)

355 #iâdeà
BLE_IAS_CONFIG_INFO_COLOR


356 
	#BLE_IAS_CONFIG_INFO_COLOR
 0

	)

371 #iâdeà
BLE_IAS_CONFIG_DEBUG_COLOR


372 
	#BLE_IAS_CONFIG_DEBUG_COLOR
 0

	)

382 #iâdeà
BLE_LBS_C_ENABLED


383 
	#BLE_LBS_C_ENABLED
 0

	)

389 #iâdeà
BLE_LBS_ENABLED


390 
	#BLE_LBS_ENABLED
 0

	)

396 #iâdeà
BLE_LLS_ENABLED


397 
	#BLE_LLS_ENABLED
 0

	)

403 #iâdeà
BLE_NUS_C_ENABLED


404 
	#BLE_NUS_C_ENABLED
 0

	)

409 #iâdeà
BLE_NUS_ENABLED


410 
	#BLE_NUS_ENABLED
 0

	)

414 #iâdeà
BLE_NUS_CONFIG_LOG_ENABLED


415 
	#BLE_NUS_CONFIG_LOG_ENABLED
 0

	)

425 #iâdeà
BLE_NUS_CONFIG_LOG_LEVEL


426 
	#BLE_NUS_CONFIG_LOG_LEVEL
 3

	)

441 #iâdeà
BLE_NUS_CONFIG_INFO_COLOR


442 
	#BLE_NUS_CONFIG_INFO_COLOR
 0

	)

457 #iâdeà
BLE_NUS_CONFIG_DEBUG_COLOR


458 
	#BLE_NUS_CONFIG_DEBUG_COLOR
 0

	)

468 #iâdeà
BLE_RSCS_C_ENABLED


469 
	#BLE_RSCS_C_ENABLED
 0

	)

475 #iâdeà
BLE_RSCS_ENABLED


476 
	#BLE_RSCS_ENABLED
 0

	)

482 #iâdeà
BLE_TPS_ENABLED


483 
	#BLE_TPS_ENABLED
 0

	)

494 #iâdeà
NRF_MPU_ENABLED


495 
	#NRF_MPU_ENABLED
 0

	)

500 #iâdeà
NRF_MPU_CLI_CMDS


501 
	#NRF_MPU_CLI_CMDS
 0

	)

508 #iâdeà
NRF_STACK_GUARD_ENABLED


509 
	#NRF_STACK_GUARD_ENABLED
 0

	)

522 #iâdeà
NRF_STACK_GUARD_CONFIG_SIZE


523 
	#NRF_STACK_GUARD_CONFIG_SIZE
 7

	)

536 #iâdeà
NRF_CRYPTO_ENABLED


537 
	#NRF_CRYPTO_ENABLED
 1

	)

549 #iâdeà
NRF_CRYPTO_ALLOCATOR


550 
	#NRF_CRYPTO_ALLOCATOR
 0

	)

557 #iâdeà
NRF_CRYPTO_BACKEND_CC310_BL_ENABLED


558 
	#NRF_CRYPTO_BACKEND_CC310_BL_ENABLED
 0

	)

563 #iâdeà
NRF_CRYPTO_BACKEND_CC310_BL_ECC_SECP224R1_ENABLED


564 
	#NRF_CRYPTO_BACKEND_CC310_BL_ECC_SECP224R1_ENABLED
 0

	)

570 #iâdeà
NRF_CRYPTO_BACKEND_CC310_BL_ECC_SECP256R1_ENABLED


571 
	#NRF_CRYPTO_BACKEND_CC310_BL_ECC_SECP256R1_ENABLED
 1

	)

579 #iâdeà
NRF_CRYPTO_BACKEND_CC310_BL_HASH_SHA256_ENABLED


580 
	#NRF_CRYPTO_BACKEND_CC310_BL_HASH_SHA256_ENABLED
 1

	)

588 #iâdeà
NRF_CRYPTO_BACKEND_CC310_BL_HASH_LITTLE_ENDIAN_DIGEST_ENABLED


589 
	#NRF_CRYPTO_BACKEND_CC310_BL_HASH_LITTLE_ENDIAN_DIGEST_ENABLED
 0

	)

597 #iâdeà
NRF_CRYPTO_BACKEND_CC310_BL_HASH_AUTOMATIC_RAM_BUFFER_ENABLED


598 
	#NRF_CRYPTO_BACKEND_CC310_BL_HASH_AUTOMATIC_RAM_BUFFER_ENABLED
 0

	)

604 #iâdeà
NRF_CRYPTO_BACKEND_CC310_BL_HASH_AUTOMATIC_RAM_BUFFER_SIZE


605 
	#NRF_CRYPTO_BACKEND_CC310_BL_HASH_AUTOMATIC_RAM_BUFFER_SIZE
 4096

	)

613 #iâdeà
NRF_CRYPTO_BACKEND_CC310_BL_ECC_LITTLE_ENDIAN_ENABLED


614 
	#NRF_CRYPTO_BACKEND_CC310_BL_ECC_LITTLE_ENDIAN_ENABLED
 0

	)

623 #iâdeà
NRF_CRYPTO_BACKEND_CC310_ENABLED


624 
	#NRF_CRYPTO_BACKEND_CC310_ENABLED
 0

	)

629 #iâdeà
NRF_CRYPTO_BACKEND_CC310_AES_CBC_ENABLED


630 
	#NRF_CRYPTO_BACKEND_CC310_AES_CBC_ENABLED
 1

	)

636 #iâdeà
NRF_CRYPTO_BACKEND_CC310_AES_CTR_ENABLED


637 
	#NRF_CRYPTO_BACKEND_CC310_AES_CTR_ENABLED
 1

	)

643 #iâdeà
NRF_CRYPTO_BACKEND_CC310_AES_ECB_ENABLED


644 
	#NRF_CRYPTO_BACKEND_CC310_AES_ECB_ENABLED
 1

	)

650 #iâdeà
NRF_CRYPTO_BACKEND_CC310_AES_CBC_MAC_ENABLED


651 
	#NRF_CRYPTO_BACKEND_CC310_AES_CBC_MAC_ENABLED
 1

	)

657 #iâdeà
NRF_CRYPTO_BACKEND_CC310_AES_CMAC_ENABLED


658 
	#NRF_CRYPTO_BACKEND_CC310_AES_CMAC_ENABLED
 1

	)

664 #iâdeà
NRF_CRYPTO_BACKEND_CC310_AES_CCM_ENABLED


665 
	#NRF_CRYPTO_BACKEND_CC310_AES_CCM_ENABLED
 1

	)

671 #iâdeà
NRF_CRYPTO_BACKEND_CC310_AES_CCM_STAR_ENABLED


672 
	#NRF_CRYPTO_BACKEND_CC310_AES_CCM_STAR_ENABLED
 1

	)

678 #iâdeà
NRF_CRYPTO_BACKEND_CC310_CHACHA_POLY_ENABLED


679 
	#NRF_CRYPTO_BACKEND_CC310_CHACHA_POLY_ENABLED
 1

	)

685 #iâdeà
NRF_CRYPTO_BACKEND_CC310_ECC_SECP160R1_ENABLED


686 
	#NRF_CRYPTO_BACKEND_CC310_ECC_SECP160R1_ENABLED
 1

	)

692 #iâdeà
NRF_CRYPTO_BACKEND_CC310_ECC_SECP160R2_ENABLED


693 
	#NRF_CRYPTO_BACKEND_CC310_ECC_SECP160R2_ENABLED
 1

	)

699 #iâdeà
NRF_CRYPTO_BACKEND_CC310_ECC_SECP192R1_ENABLED


700 
	#NRF_CRYPTO_BACKEND_CC310_ECC_SECP192R1_ENABLED
 1

	)

706 #iâdeà
NRF_CRYPTO_BACKEND_CC310_ECC_SECP224R1_ENABLED


707 
	#NRF_CRYPTO_BACKEND_CC310_ECC_SECP224R1_ENABLED
 1

	)

713 #iâdeà
NRF_CRYPTO_BACKEND_CC310_ECC_SECP256R1_ENABLED


714 
	#NRF_CRYPTO_BACKEND_CC310_ECC_SECP256R1_ENABLED
 1

	)

720 #iâdeà
NRF_CRYPTO_BACKEND_CC310_ECC_SECP384R1_ENABLED


721 
	#NRF_CRYPTO_BACKEND_CC310_ECC_SECP384R1_ENABLED
 1

	)

727 #iâdeà
NRF_CRYPTO_BACKEND_CC310_ECC_SECP521R1_ENABLED


728 
	#NRF_CRYPTO_BACKEND_CC310_ECC_SECP521R1_ENABLED
 1

	)

734 #iâdeà
NRF_CRYPTO_BACKEND_CC310_ECC_SECP160K1_ENABLED


735 
	#NRF_CRYPTO_BACKEND_CC310_ECC_SECP160K1_ENABLED
 1

	)

741 #iâdeà
NRF_CRYPTO_BACKEND_CC310_ECC_SECP192K1_ENABLED


742 
	#NRF_CRYPTO_BACKEND_CC310_ECC_SECP192K1_ENABLED
 1

	)

748 #iâdeà
NRF_CRYPTO_BACKEND_CC310_ECC_SECP224K1_ENABLED


749 
	#NRF_CRYPTO_BACKEND_CC310_ECC_SECP224K1_ENABLED
 1

	)

755 #iâdeà
NRF_CRYPTO_BACKEND_CC310_ECC_SECP256K1_ENABLED


756 
	#NRF_CRYPTO_BACKEND_CC310_ECC_SECP256K1_ENABLED
 1

	)

764 #iâdeà
NRF_CRYPTO_BACKEND_CC310_HASH_SHA256_ENABLED


765 
	#NRF_CRYPTO_BACKEND_CC310_HASH_SHA256_ENABLED
 1

	)

773 #iâdeà
NRF_CRYPTO_BACKEND_CC310_HASH_SHA512_ENABLED


774 
	#NRF_CRYPTO_BACKEND_CC310_HASH_SHA512_ENABLED
 1

	)

782 #iâdeà
NRF_CRYPTO_BACKEND_CC310_HMAC_SHA256_ENABLED


783 
	#NRF_CRYPTO_BACKEND_CC310_HMAC_SHA256_ENABLED
 1

	)

791 #iâdeà
NRF_CRYPTO_BACKEND_CC310_HMAC_SHA512_ENABLED


792 
	#NRF_CRYPTO_BACKEND_CC310_HMAC_SHA512_ENABLED
 1

	)

798 #iâdeà
NRF_CRYPTO_BACKEND_CC310_RNG_ENABLED


799 
	#NRF_CRYPTO_BACKEND_CC310_RNG_ENABLED
 1

	)

806 #iâdeà
NRF_CRYPTO_BACKEND_CIFRA_ENABLED


807 
	#NRF_CRYPTO_BACKEND_CIFRA_ENABLED
 0

	)

812 #iâdeà
NRF_CRYPTO_BACKEND_CIFRA_AES_EAX_ENABLED


813 
	#NRF_CRYPTO_BACKEND_CIFRA_AES_EAX_ENABLED
 1

	)

820 #iâdeà
NRF_CRYPTO_BACKEND_MBEDTLS_ENABLED


821 
	#NRF_CRYPTO_BACKEND_MBEDTLS_ENABLED
 0

	)

826 #iâdeà
NRF_CRYPTO_BACKEND_MBEDTLS_AES_CBC_ENABLED


827 
	#NRF_CRYPTO_BACKEND_MBEDTLS_AES_CBC_ENABLED
 1

	)

833 #iâdeà
NRF_CRYPTO_BACKEND_MBEDTLS_AES_CTR_ENABLED


834 
	#NRF_CRYPTO_BACKEND_MBEDTLS_AES_CTR_ENABLED
 1

	)

840 #iâdeà
NRF_CRYPTO_BACKEND_MBEDTLS_AES_CFB_ENABLED


841 
	#NRF_CRYPTO_BACKEND_MBEDTLS_AES_CFB_ENABLED
 1

	)

847 #iâdeà
NRF_CRYPTO_BACKEND_MBEDTLS_AES_ECB_ENABLED


848 
	#NRF_CRYPTO_BACKEND_MBEDTLS_AES_ECB_ENABLED
 1

	)

854 #iâdeà
NRF_CRYPTO_BACKEND_MBEDTLS_AES_CBC_MAC_ENABLED


855 
	#NRF_CRYPTO_BACKEND_MBEDTLS_AES_CBC_MAC_ENABLED
 1

	)

861 #iâdeà
NRF_CRYPTO_BACKEND_MBEDTLS_AES_CMAC_ENABLED


862 
	#NRF_CRYPTO_BACKEND_MBEDTLS_AES_CMAC_ENABLED
 1

	)

868 #iâdeà
NRF_CRYPTO_BACKEND_MBEDTLS_AES_CCM_ENABLED


869 
	#NRF_CRYPTO_BACKEND_MBEDTLS_AES_CCM_ENABLED
 1

	)

875 #iâdeà
NRF_CRYPTO_BACKEND_MBEDTLS_AES_GCM_ENABLED


876 
	#NRF_CRYPTO_BACKEND_MBEDTLS_AES_GCM_ENABLED
 1

	)

884 #iâdeà
NRF_CRYPTO_BACKEND_MBEDTLS_ECC_SECP192R1_ENABLED


885 
	#NRF_CRYPTO_BACKEND_MBEDTLS_ECC_SECP192R1_ENABLED
 1

	)

893 #iâdeà
NRF_CRYPTO_BACKEND_MBEDTLS_ECC_SECP224R1_ENABLED


894 
	#NRF_CRYPTO_BACKEND_MBEDTLS_ECC_SECP224R1_ENABLED
 1

	)

902 #iâdeà
NRF_CRYPTO_BACKEND_MBEDTLS_ECC_SECP256R1_ENABLED


903 
	#NRF_CRYPTO_BACKEND_MBEDTLS_ECC_SECP256R1_ENABLED
 1

	)

911 #iâdeà
NRF_CRYPTO_BACKEND_MBEDTLS_ECC_SECP384R1_ENABLED


912 
	#NRF_CRYPTO_BACKEND_MBEDTLS_ECC_SECP384R1_ENABLED
 1

	)

920 #iâdeà
NRF_CRYPTO_BACKEND_MBEDTLS_ECC_SECP521R1_ENABLED


921 
	#NRF_CRYPTO_BACKEND_MBEDTLS_ECC_SECP521R1_ENABLED
 1

	)

929 #iâdeà
NRF_CRYPTO_BACKEND_MBEDTLS_ECC_SECP192K1_ENABLED


930 
	#NRF_CRYPTO_BACKEND_MBEDTLS_ECC_SECP192K1_ENABLED
 1

	)

938 #iâdeà
NRF_CRYPTO_BACKEND_MBEDTLS_ECC_SECP224K1_ENABLED


939 
	#NRF_CRYPTO_BACKEND_MBEDTLS_ECC_SECP224K1_ENABLED
 1

	)

947 #iâdeà
NRF_CRYPTO_BACKEND_MBEDTLS_ECC_SECP256K1_ENABLED


948 
	#NRF_CRYPTO_BACKEND_MBEDTLS_ECC_SECP256K1_ENABLED
 1

	)

956 #iâdeà
NRF_CRYPTO_BACKEND_MBEDTLS_ECC_BP256R1_ENABLED


957 
	#NRF_CRYPTO_BACKEND_MBEDTLS_ECC_BP256R1_ENABLED
 1

	)

965 #iâdeà
NRF_CRYPTO_BACKEND_MBEDTLS_ECC_BP384R1_ENABLED


966 
	#NRF_CRYPTO_BACKEND_MBEDTLS_ECC_BP384R1_ENABLED
 1

	)

974 #iâdeà
NRF_CRYPTO_BACKEND_MBEDTLS_ECC_BP512R1_ENABLED


975 
	#NRF_CRYPTO_BACKEND_MBEDTLS_ECC_BP512R1_ENABLED
 1

	)

983 #iâdeà
NRF_CRYPTO_BACKEND_MBEDTLS_ECC_CURVE25519_ENABLED


984 
	#NRF_CRYPTO_BACKEND_MBEDTLS_ECC_CURVE25519_ENABLED
 1

	)

992 #iâdeà
NRF_CRYPTO_BACKEND_MBEDTLS_HASH_SHA256_ENABLED


993 
	#NRF_CRYPTO_BACKEND_MBEDTLS_HASH_SHA256_ENABLED
 1

	)

1001 #iâdeà
NRF_CRYPTO_BACKEND_MBEDTLS_HASH_SHA512_ENABLED


1002 
	#NRF_CRYPTO_BACKEND_MBEDTLS_HASH_SHA512_ENABLED
 1

	)

1010 #iâdeà
NRF_CRYPTO_BACKEND_MBEDTLS_HMAC_SHA256_ENABLED


1011 
	#NRF_CRYPTO_BACKEND_MBEDTLS_HMAC_SHA256_ENABLED
 1

	)

1019 #iâdeà
NRF_CRYPTO_BACKEND_MBEDTLS_HMAC_SHA512_ENABLED


1020 
	#NRF_CRYPTO_BACKEND_MBEDTLS_HMAC_SHA512_ENABLED
 1

	)

1027 #iâdeà
NRF_CRYPTO_BACKEND_MICRO_ECC_ENABLED


1028 
	#NRF_CRYPTO_BACKEND_MICRO_ECC_ENABLED
 0

	)

1035 #iâdeà
NRF_CRYPTO_BACKEND_MICRO_ECC_ECC_SECP192R1_ENABLED


1036 
	#NRF_CRYPTO_BACKEND_MICRO_ECC_ECC_SECP192R1_ENABLED
 1

	)

1044 #iâdeà
NRF_CRYPTO_BACKEND_MICRO_ECC_ECC_SECP224R1_ENABLED


1045 
	#NRF_CRYPTO_BACKEND_MICRO_ECC_ECC_SECP224R1_ENABLED
 1

	)

1053 #iâdeà
NRF_CRYPTO_BACKEND_MICRO_ECC_ECC_SECP256R1_ENABLED


1054 
	#NRF_CRYPTO_BACKEND_MICRO_ECC_ECC_SECP256R1_ENABLED
 1

	)

1062 #iâdeà
NRF_CRYPTO_BACKEND_MICRO_ECC_ECC_SECP256K1_ENABLED


1063 
	#NRF_CRYPTO_BACKEND_MICRO_ECC_ECC_SECP256K1_ENABLED
 1

	)

1071 #iâdeà
NRF_CRYPTO_BACKEND_MICRO_ECC_PUBLIC_KEY_TRUSTED_ENABLED


1072 
	#NRF_CRYPTO_BACKEND_MICRO_ECC_PUBLIC_KEY_TRUSTED_ENABLED
 0

	)

1080 #iâdeà
NRF_CRYPTO_BACKEND_MICRO_ECC_LITTLE_ENDIAN_ENABLED


1081 
	#NRF_CRYPTO_BACKEND_MICRO_ECC_LITTLE_ENDIAN_ENABLED
 0

	)

1090 #iâdeà
NRF_CRYPTO_BACKEND_NRF_HW_RNG_ENABLED


1091 
	#NRF_CRYPTO_BACKEND_NRF_HW_RNG_ENABLED
 0

	)

1098 #iâdeà
NRF_CRYPTO_BACKEND_NRF_HW_RNG_MBEDTLS_CTR_DRBG_ENABLED


1099 
	#NRF_CRYPTO_BACKEND_NRF_HW_RNG_MBEDTLS_CTR_DRBG_ENABLED
 1

	)

1108 #iâdeà
NRF_CRYPTO_BACKEND_NRF_SW_ENABLED


1109 
	#NRF_CRYPTO_BACKEND_NRF_SW_ENABLED
 0

	)

1116 #iâdeà
NRF_CRYPTO_BACKEND_NRF_SW_HASH_SHA256_ENABLED


1117 
	#NRF_CRYPTO_BACKEND_NRF_SW_HASH_SHA256_ENABLED
 1

	)

1125 #iâdeà
NRF_CRYPTO_BACKEND_NRF_SW_HASH_LITTLE_ENDIAN_DIGEST_ENABLED


1126 
	#NRF_CRYPTO_BACKEND_NRF_SW_HASH_LITTLE_ENDIAN_DIGEST_ENABLED
 1

	)

1135 #iâdeà
NRF_CRYPTO_BACKEND_OBERON_ENABLED


1136 
	#NRF_CRYPTO_BACKEND_OBERON_ENABLED
 0

	)

1141 #iâdeà
NRF_CRYPTO_BACKEND_OBERON_CHACHA_POLY_ENABLED


1142 
	#NRF_CRYPTO_BACKEND_OBERON_CHACHA_POLY_ENABLED
 1

	)

1150 #iâdeà
NRF_CRYPTO_BACKEND_OBERON_ECC_SECP256R1_ENABLED


1151 
	#NRF_CRYPTO_BACKEND_OBERON_ECC_SECP256R1_ENABLED
 1

	)

1159 #iâdeà
NRF_CRYPTO_BACKEND_OBERON_ECC_CURVE25519_ENABLED


1160 
	#NRF_CRYPTO_BACKEND_OBERON_ECC_CURVE25519_ENABLED
 1

	)

1168 #iâdeà
NRF_CRYPTO_BACKEND_OBERON_ECC_ED25519_ENABLED


1169 
	#NRF_CRYPTO_BACKEND_OBERON_ECC_ED25519_ENABLED
 1

	)

1177 #iâdeà
NRF_CRYPTO_BACKEND_OBERON_HASH_SHA256_ENABLED


1178 
	#NRF_CRYPTO_BACKEND_OBERON_HASH_SHA256_ENABLED
 1

	)

1186 #iâdeà
NRF_CRYPTO_BACKEND_OBERON_HASH_SHA512_ENABLED


1187 
	#NRF_CRYPTO_BACKEND_OBERON_HASH_SHA512_ENABLED
 1

	)

1195 #iâdeà
NRF_CRYPTO_BACKEND_OBERON_HMAC_SHA256_ENABLED


1196 
	#NRF_CRYPTO_BACKEND_OBERON_HMAC_SHA256_ENABLED
 1

	)

1204 #iâdeà
NRF_CRYPTO_BACKEND_OBERON_HMAC_SHA512_ENABLED


1205 
	#NRF_CRYPTO_BACKEND_OBERON_HMAC_SHA512_ENABLED
 1

	)

1224 #iâdeà
BLE_DFU_ENABLED


1225 
	#BLE_DFU_ENABLED
 0

	)

1231 #iâdeà
NRF_DFU_BLE_BUTTONLESS_SUPPORTS_BONDS


1232 
	#NRF_DFU_BLE_BUTTONLESS_SUPPORTS_BONDS
 0

	)

1246 #iâdeà
CLOCK_ENABLED


1247 
	#CLOCK_ENABLED
 1

	)

1255 #iâdeà
CLOCK_CONFIG_LF_SRC


1256 
	#CLOCK_CONFIG_LF_SRC
 1

	)

1272 #iâdeà
CLOCK_CONFIG_IRQ_PRIORITY


1273 
	#CLOCK_CONFIG_IRQ_PRIORITY
 7

	)

1280 #iâdeà
COMP_ENABLED


1281 
	#COMP_ENABLED
 0

	)

1291 #iâdeà
COMP_CONFIG_REF


1292 
	#COMP_CONFIG_REF
 1

	)

1300 #iâdeà
COMP_CONFIG_MAIN_MODE


1301 
	#COMP_CONFIG_MAIN_MODE
 0

	)

1310 #iâdeà
COMP_CONFIG_SPEED_MODE


1311 
	#COMP_CONFIG_SPEED_MODE
 2

	)

1319 #iâdeà
COMP_CONFIG_HYST


1320 
	#COMP_CONFIG_HYST
 0

	)

1330 #iâdeà
COMP_CONFIG_ISOURCE


1331 
	#COMP_CONFIG_ISOURCE
 0

	)

1345 #iâdeà
COMP_CONFIG_INPUT


1346 
	#COMP_CONFIG_INPUT
 0

	)

1362 #iâdeà
COMP_CONFIG_IRQ_PRIORITY


1363 
	#COMP_CONFIG_IRQ_PRIORITY
 7

	)

1371 #iâdeà
EGU_ENABLED


1372 
	#EGU_ENABLED
 0

	)

1377 #iâdeà
GPIOTE_ENABLED


1378 
	#GPIOTE_ENABLED
 1

	)

1381 #iâdeà
GPIOTE_CONFIG_NUM_OF_LOW_POWER_EVENTS


1382 
	#GPIOTE_CONFIG_NUM_OF_LOW_POWER_EVENTS
 4

	)

1398 #iâdeà
GPIOTE_CONFIG_IRQ_PRIORITY


1399 
	#GPIOTE_CONFIG_IRQ_PRIORITY
 7

	)

1406 #iâdeà
I2S_ENABLED


1407 
	#I2S_ENABLED
 0

	)

1412 #iâdeà
I2S_CONFIG_SCK_PIN


1413 
	#I2S_CONFIG_SCK_PIN
 31

	)

1419 #iâdeà
I2S_CONFIG_LRCK_PIN


1420 
	#I2S_CONFIG_LRCK_PIN
 30

	)

1424 #iâdeà
I2S_CONFIG_MCK_PIN


1425 
	#I2S_CONFIG_MCK_PIN
 255

	)

1431 #iâdeà
I2S_CONFIG_SDOUT_PIN


1432 
	#I2S_CONFIG_SDOUT_PIN
 29

	)

1438 #iâdeà
I2S_CONFIG_SDIN_PIN


1439 
	#I2S_CONFIG_SDIN_PIN
 28

	)

1447 #iâdeà
I2S_CONFIG_MASTER


1448 
	#I2S_CONFIG_MASTER
 0

	)

1456 #iâdeà
I2S_CONFIG_FORMAT


1457 
	#I2S_CONFIG_FORMAT
 0

	)

1465 #iâdeà
I2S_CONFIG_ALIGN


1466 
	#I2S_CONFIG_ALIGN
 0

	)

1475 #iâdeà
I2S_CONFIG_SWIDTH


1476 
	#I2S_CONFIG_SWIDTH
 1

	)

1485 #iâdeà
I2S_CONFIG_CHANNELS


1486 
	#I2S_CONFIG_CHANNELS
 1

	)

1511 #iâdeà
I2S_CONFIG_MCK_SETUP


1512 
	#I2S_CONFIG_MCK_SETUP
 536870912

	)

1527 #iâdeà
I2S_CONFIG_RATIO


1528 
	#I2S_CONFIG_RATIO
 2000

	)

1544 #iâdeà
I2S_CONFIG_IRQ_PRIORITY


1545 
	#I2S_CONFIG_IRQ_PRIORITY
 7

	)

1550 #iâdeà
I2S_CONFIG_LOG_ENABLED


1551 
	#I2S_CONFIG_LOG_ENABLED
 0

	)

1561 #iâdeà
I2S_CONFIG_LOG_LEVEL


1562 
	#I2S_CONFIG_LOG_LEVEL
 3

	)

1577 #iâdeà
I2S_CONFIG_INFO_COLOR


1578 
	#I2S_CONFIG_INFO_COLOR
 0

	)

1593 #iâdeà
I2S_CONFIG_DEBUG_COLOR


1594 
	#I2S_CONFIG_DEBUG_COLOR
 0

	)

1603 #iâdeà
LPCOMP_ENABLED


1604 
	#LPCOMP_ENABLED
 0

	)

1626 #iâdeà
LPCOMP_CONFIG_REFERENCE


1627 
	#LPCOMP_CONFIG_REFERENCE
 3

	)

1636 #iâdeà
LPCOMP_CONFIG_DETECTION


1637 
	#LPCOMP_CONFIG_DETECTION
 2

	)

1651 #iâdeà
LPCOMP_CONFIG_INPUT


1652 
	#LPCOMP_CONFIG_INPUT
 0

	)

1658 #iâdeà
LPCOMP_CONFIG_HYST


1659 
	#LPCOMP_CONFIG_HYST
 0

	)

1675 #iâdeà
LPCOMP_CONFIG_IRQ_PRIORITY


1676 
	#LPCOMP_CONFIG_IRQ_PRIORITY
 7

	)

1683 #iâdeà
NRFX_CLOCK_ENABLED


1684 
	#NRFX_CLOCK_ENABLED
 1

	)

1692 #iâdeà
NRFX_CLOCK_CONFIG_LF_SRC


1693 
	#NRFX_CLOCK_CONFIG_LF_SRC
 1

	)

1707 #iâdeà
NRFX_CLOCK_CONFIG_IRQ_PRIORITY


1708 
	#NRFX_CLOCK_CONFIG_IRQ_PRIORITY
 7

	)

1713 #iâdeà
NRFX_CLOCK_CONFIG_LOG_ENABLED


1714 
	#NRFX_CLOCK_CONFIG_LOG_ENABLED
 0

	)

1724 #iâdeà
NRFX_CLOCK_CONFIG_LOG_LEVEL


1725 
	#NRFX_CLOCK_CONFIG_LOG_LEVEL
 3

	)

1740 #iâdeà
NRFX_CLOCK_CONFIG_INFO_COLOR


1741 
	#NRFX_CLOCK_CONFIG_INFO_COLOR
 0

	)

1756 #iâdeà
NRFX_CLOCK_CONFIG_DEBUG_COLOR


1757 
	#NRFX_CLOCK_CONFIG_DEBUG_COLOR
 0

	)

1766 #iâdeà
NRFX_COMP_ENABLED


1767 
	#NRFX_COMP_ENABLED
 0

	)

1777 #iâdeà
NRFX_COMP_CONFIG_REF


1778 
	#NRFX_COMP_CONFIG_REF
 1

	)

1786 #iâdeà
NRFX_COMP_CONFIG_MAIN_MODE


1787 
	#NRFX_COMP_CONFIG_MAIN_MODE
 0

	)

1796 #iâdeà
NRFX_COMP_CONFIG_SPEED_MODE


1797 
	#NRFX_COMP_CONFIG_SPEED_MODE
 2

	)

1805 #iâdeà
NRFX_COMP_CONFIG_HYST


1806 
	#NRFX_COMP_CONFIG_HYST
 0

	)

1816 #iâdeà
NRFX_COMP_CONFIG_ISOURCE


1817 
	#NRFX_COMP_CONFIG_ISOURCE
 0

	)

1831 #iâdeà
NRFX_COMP_CONFIG_INPUT


1832 
	#NRFX_COMP_CONFIG_INPUT
 0

	)

1846 #iâdeà
NRFX_COMP_CONFIG_IRQ_PRIORITY


1847 
	#NRFX_COMP_CONFIG_IRQ_PRIORITY
 7

	)

1852 #iâdeà
NRFX_COMP_CONFIG_LOG_ENABLED


1853 
	#NRFX_COMP_CONFIG_LOG_ENABLED
 0

	)

1863 #iâdeà
NRFX_COMP_CONFIG_LOG_LEVEL


1864 
	#NRFX_COMP_CONFIG_LOG_LEVEL
 3

	)

1879 #iâdeà
NRFX_COMP_CONFIG_INFO_COLOR


1880 
	#NRFX_COMP_CONFIG_INFO_COLOR
 0

	)

1895 #iâdeà
NRFX_COMP_CONFIG_DEBUG_COLOR


1896 
	#NRFX_COMP_CONFIG_DEBUG_COLOR
 0

	)

1905 #iâdeà
NRFX_GPIOTE_ENABLED


1906 
	#NRFX_GPIOTE_ENABLED
 1

	)

1909 #iâdeà
NRFX_GPIOTE_CONFIG_NUM_OF_LOW_POWER_EVENTS


1910 
	#NRFX_GPIOTE_CONFIG_NUM_OF_LOW_POWER_EVENTS
 1

	)

1924 #iâdeà
NRFX_GPIOTE_CONFIG_IRQ_PRIORITY


1925 
	#NRFX_GPIOTE_CONFIG_IRQ_PRIORITY
 7

	)

1930 #iâdeà
NRFX_GPIOTE_CONFIG_LOG_ENABLED


1931 
	#NRFX_GPIOTE_CONFIG_LOG_ENABLED
 0

	)

1941 #iâdeà
NRFX_GPIOTE_CONFIG_LOG_LEVEL


1942 
	#NRFX_GPIOTE_CONFIG_LOG_LEVEL
 3

	)

1957 #iâdeà
NRFX_GPIOTE_CONFIG_INFO_COLOR


1958 
	#NRFX_GPIOTE_CONFIG_INFO_COLOR
 0

	)

1973 #iâdeà
NRFX_GPIOTE_CONFIG_DEBUG_COLOR


1974 
	#NRFX_GPIOTE_CONFIG_DEBUG_COLOR
 0

	)

1983 #iâdeà
NRFX_I2S_ENABLED


1984 
	#NRFX_I2S_ENABLED
 0

	)

1989 #iâdeà
NRFX_I2S_CONFIG_SCK_PIN


1990 
	#NRFX_I2S_CONFIG_SCK_PIN
 31

	)

1996 #iâdeà
NRFX_I2S_CONFIG_LRCK_PIN


1997 
	#NRFX_I2S_CONFIG_LRCK_PIN
 30

	)

2001 #iâdeà
NRFX_I2S_CONFIG_MCK_PIN


2002 
	#NRFX_I2S_CONFIG_MCK_PIN
 255

	)

2008 #iâdeà
NRFX_I2S_CONFIG_SDOUT_PIN


2009 
	#NRFX_I2S_CONFIG_SDOUT_PIN
 29

	)

2015 #iâdeà
NRFX_I2S_CONFIG_SDIN_PIN


2016 
	#NRFX_I2S_CONFIG_SDIN_PIN
 28

	)

2024 #iâdeà
NRFX_I2S_CONFIG_MASTER


2025 
	#NRFX_I2S_CONFIG_MASTER
 0

	)

2033 #iâdeà
NRFX_I2S_CONFIG_FORMAT


2034 
	#NRFX_I2S_CONFIG_FORMAT
 0

	)

2042 #iâdeà
NRFX_I2S_CONFIG_ALIGN


2043 
	#NRFX_I2S_CONFIG_ALIGN
 0

	)

2052 #iâdeà
NRFX_I2S_CONFIG_SWIDTH


2053 
	#NRFX_I2S_CONFIG_SWIDTH
 1

	)

2062 #iâdeà
NRFX_I2S_CONFIG_CHANNELS


2063 
	#NRFX_I2S_CONFIG_CHANNELS
 1

	)

2088 #iâdeà
NRFX_I2S_CONFIG_MCK_SETUP


2089 
	#NRFX_I2S_CONFIG_MCK_SETUP
 536870912

	)

2104 #iâdeà
NRFX_I2S_CONFIG_RATIO


2105 
	#NRFX_I2S_CONFIG_RATIO
 2000

	)

2119 #iâdeà
NRFX_I2S_CONFIG_IRQ_PRIORITY


2120 
	#NRFX_I2S_CONFIG_IRQ_PRIORITY
 7

	)

2125 #iâdeà
NRFX_I2S_CONFIG_LOG_ENABLED


2126 
	#NRFX_I2S_CONFIG_LOG_ENABLED
 0

	)

2136 #iâdeà
NRFX_I2S_CONFIG_LOG_LEVEL


2137 
	#NRFX_I2S_CONFIG_LOG_LEVEL
 3

	)

2152 #iâdeà
NRFX_I2S_CONFIG_INFO_COLOR


2153 
	#NRFX_I2S_CONFIG_INFO_COLOR
 0

	)

2168 #iâdeà
NRFX_I2S_CONFIG_DEBUG_COLOR


2169 
	#NRFX_I2S_CONFIG_DEBUG_COLOR
 0

	)

2178 #iâdeà
NRFX_LPCOMP_ENABLED


2179 
	#NRFX_LPCOMP_ENABLED
 0

	)

2201 #iâdeà
NRFX_LPCOMP_CONFIG_REFERENCE


2202 
	#NRFX_LPCOMP_CONFIG_REFERENCE
 3

	)

2211 #iâdeà
NRFX_LPCOMP_CONFIG_DETECTION


2212 
	#NRFX_LPCOMP_CONFIG_DETECTION
 2

	)

2226 #iâdeà
NRFX_LPCOMP_CONFIG_INPUT


2227 
	#NRFX_LPCOMP_CONFIG_INPUT
 0

	)

2233 #iâdeà
NRFX_LPCOMP_CONFIG_HYST


2234 
	#NRFX_LPCOMP_CONFIG_HYST
 0

	)

2248 #iâdeà
NRFX_LPCOMP_CONFIG_IRQ_PRIORITY


2249 
	#NRFX_LPCOMP_CONFIG_IRQ_PRIORITY
 7

	)

2254 #iâdeà
NRFX_LPCOMP_CONFIG_LOG_ENABLED


2255 
	#NRFX_LPCOMP_CONFIG_LOG_ENABLED
 0

	)

2265 #iâdeà
NRFX_LPCOMP_CONFIG_LOG_LEVEL


2266 
	#NRFX_LPCOMP_CONFIG_LOG_LEVEL
 3

	)

2281 #iâdeà
NRFX_LPCOMP_CONFIG_INFO_COLOR


2282 
	#NRFX_LPCOMP_CONFIG_INFO_COLOR
 0

	)

2297 #iâdeà
NRFX_LPCOMP_CONFIG_DEBUG_COLOR


2298 
	#NRFX_LPCOMP_CONFIG_DEBUG_COLOR
 0

	)

2307 #iâdeà
NRFX_PDM_ENABLED


2308 
	#NRFX_PDM_ENABLED
 0

	)

2315 #iâdeà
NRFX_PDM_CONFIG_MODE


2316 
	#NRFX_PDM_CONFIG_MODE
 1

	)

2324 #iâdeà
NRFX_PDM_CONFIG_EDGE


2325 
	#NRFX_PDM_CONFIG_EDGE
 0

	)

2334 #iâdeà
NRFX_PDM_CONFIG_CLOCK_FREQ


2335 
	#NRFX_PDM_CONFIG_CLOCK_FREQ
 138412032

	)

2349 #iâdeà
NRFX_PDM_CONFIG_IRQ_PRIORITY


2350 
	#NRFX_PDM_CONFIG_IRQ_PRIORITY
 7

	)

2355 #iâdeà
NRFX_PDM_CONFIG_LOG_ENABLED


2356 
	#NRFX_PDM_CONFIG_LOG_ENABLED
 0

	)

2366 #iâdeà
NRFX_PDM_CONFIG_LOG_LEVEL


2367 
	#NRFX_PDM_CONFIG_LOG_LEVEL
 3

	)

2382 #iâdeà
NRFX_PDM_CONFIG_INFO_COLOR


2383 
	#NRFX_PDM_CONFIG_INFO_COLOR
 0

	)

2398 #iâdeà
NRFX_PDM_CONFIG_DEBUG_COLOR


2399 
	#NRFX_PDM_CONFIG_DEBUG_COLOR
 0

	)

2408 #iâdeà
NRFX_POWER_ENABLED


2409 
	#NRFX_POWER_ENABLED
 0

	)

2422 #iâdeà
NRFX_POWER_CONFIG_IRQ_PRIORITY


2423 
	#NRFX_POWER_CONFIG_IRQ_PRIORITY
 7

	)

2431 #iâdeà
NRFX_POWER_CONFIG_DEFAULT_DCDCEN


2432 
	#NRFX_POWER_CONFIG_DEFAULT_DCDCEN
 0

	)

2440 #iâdeà
NRFX_POWER_CONFIG_DEFAULT_DCDCENHV


2441 
	#NRFX_POWER_CONFIG_DEFAULT_DCDCENHV
 0

	)

2448 #iâdeà
NRFX_PPI_ENABLED


2449 
	#NRFX_PPI_ENABLED
 0

	)

2453 #iâdeà
NRFX_PPI_CONFIG_LOG_ENABLED


2454 
	#NRFX_PPI_CONFIG_LOG_ENABLED
 0

	)

2464 #iâdeà
NRFX_PPI_CONFIG_LOG_LEVEL


2465 
	#NRFX_PPI_CONFIG_LOG_LEVEL
 3

	)

2480 #iâdeà
NRFX_PPI_CONFIG_INFO_COLOR


2481 
	#NRFX_PPI_CONFIG_INFO_COLOR
 0

	)

2496 #iâdeà
NRFX_PPI_CONFIG_DEBUG_COLOR


2497 
	#NRFX_PPI_CONFIG_DEBUG_COLOR
 0

	)

2506 #iâdeà
NRFX_PRS_ENABLED


2507 
	#NRFX_PRS_ENABLED
 1

	)

2512 #iâdeà
NRFX_PRS_BOX_0_ENABLED


2513 
	#NRFX_PRS_BOX_0_ENABLED
 0

	)

2519 #iâdeà
NRFX_PRS_BOX_1_ENABLED


2520 
	#NRFX_PRS_BOX_1_ENABLED
 0

	)

2526 #iâdeà
NRFX_PRS_BOX_2_ENABLED


2527 
	#NRFX_PRS_BOX_2_ENABLED
 0

	)

2533 #iâdeà
NRFX_PRS_BOX_3_ENABLED


2534 
	#NRFX_PRS_BOX_3_ENABLED
 0

	)

2540 #iâdeà
NRFX_PRS_BOX_4_ENABLED


2541 
	#NRFX_PRS_BOX_4_ENABLED
 1

	)

2546 #iâdeà
NRFX_PRS_CONFIG_LOG_ENABLED


2547 
	#NRFX_PRS_CONFIG_LOG_ENABLED
 0

	)

2557 #iâdeà
NRFX_PRS_CONFIG_LOG_LEVEL


2558 
	#NRFX_PRS_CONFIG_LOG_LEVEL
 3

	)

2573 #iâdeà
NRFX_PRS_CONFIG_INFO_COLOR


2574 
	#NRFX_PRS_CONFIG_INFO_COLOR
 0

	)

2589 #iâdeà
NRFX_PRS_CONFIG_DEBUG_COLOR


2590 
	#NRFX_PRS_CONFIG_DEBUG_COLOR
 0

	)

2599 #iâdeà
NRFX_PWM_ENABLED


2600 
	#NRFX_PWM_ENABLED
 0

	)

2605 #iâdeà
NRFX_PWM0_ENABLED


2606 
	#NRFX_PWM0_ENABLED
 0

	)

2612 #iâdeà
NRFX_PWM1_ENABLED


2613 
	#NRFX_PWM1_ENABLED
 0

	)

2619 #iâdeà
NRFX_PWM2_ENABLED


2620 
	#NRFX_PWM2_ENABLED
 0

	)

2626 #iâdeà
NRFX_PWM3_ENABLED


2627 
	#NRFX_PWM3_ENABLED
 0

	)

2633 #iâdeà
NRFX_PWM_DEFAULT_CONFIG_OUT0_PIN


2634 
	#NRFX_PWM_DEFAULT_CONFIG_OUT0_PIN
 31

	)

2640 #iâdeà
NRFX_PWM_DEFAULT_CONFIG_OUT1_PIN


2641 
	#NRFX_PWM_DEFAULT_CONFIG_OUT1_PIN
 31

	)

2647 #iâdeà
NRFX_PWM_DEFAULT_CONFIG_OUT2_PIN


2648 
	#NRFX_PWM_DEFAULT_CONFIG_OUT2_PIN
 31

	)

2654 #iâdeà
NRFX_PWM_DEFAULT_CONFIG_OUT3_PIN


2655 
	#NRFX_PWM_DEFAULT_CONFIG_OUT3_PIN
 31

	)

2669 #iâdeà
NRFX_PWM_DEFAULT_CONFIG_BASE_CLOCK


2670 
	#NRFX_PWM_DEFAULT_CONFIG_BASE_CLOCK
 4

	)

2678 #iâdeà
NRFX_PWM_DEFAULT_CONFIG_COUNT_MODE


2679 
	#NRFX_PWM_DEFAULT_CONFIG_COUNT_MODE
 0

	)

2683 #iâdeà
NRFX_PWM_DEFAULT_CONFIG_TOP_VALUE


2684 
	#NRFX_PWM_DEFAULT_CONFIG_TOP_VALUE
 1000

	)

2694 #iâdeà
NRFX_PWM_DEFAULT_CONFIG_LOAD_MODE


2695 
	#NRFX_PWM_DEFAULT_CONFIG_LOAD_MODE
 0

	)

2703 #iâdeà
NRFX_PWM_DEFAULT_CONFIG_STEP_MODE


2704 
	#NRFX_PWM_DEFAULT_CONFIG_STEP_MODE
 0

	)

2718 #iâdeà
NRFX_PWM_DEFAULT_CONFIG_IRQ_PRIORITY


2719 
	#NRFX_PWM_DEFAULT_CONFIG_IRQ_PRIORITY
 7

	)

2724 #iâdeà
NRFX_PWM_CONFIG_LOG_ENABLED


2725 
	#NRFX_PWM_CONFIG_LOG_ENABLED
 0

	)

2735 #iâdeà
NRFX_PWM_CONFIG_LOG_LEVEL


2736 
	#NRFX_PWM_CONFIG_LOG_LEVEL
 3

	)

2751 #iâdeà
NRFX_PWM_CONFIG_INFO_COLOR


2752 
	#NRFX_PWM_CONFIG_INFO_COLOR
 0

	)

2767 #iâdeà
NRFX_PWM_CONFIG_DEBUG_COLOR


2768 
	#NRFX_PWM_CONFIG_DEBUG_COLOR
 0

	)

2777 #iâdeà
NRFX_QDEC_ENABLED


2778 
	#NRFX_QDEC_ENABLED
 0

	)

2791 #iâdeà
NRFX_QDEC_CONFIG_REPORTPER


2792 
	#NRFX_QDEC_CONFIG_REPORTPER
 0

	)

2806 #iâdeà
NRFX_QDEC_CONFIG_SAMPLEPER


2807 
	#NRFX_QDEC_CONFIG_SAMPLEPER
 7

	)

2813 #iâdeà
NRFX_QDEC_CONFIG_PIO_A


2814 
	#NRFX_QDEC_CONFIG_PIO_A
 31

	)

2820 #iâdeà
NRFX_QDEC_CONFIG_PIO_B


2821 
	#NRFX_QDEC_CONFIG_PIO_B
 31

	)

2827 #iâdeà
NRFX_QDEC_CONFIG_PIO_LED


2828 
	#NRFX_QDEC_CONFIG_PIO_LED
 31

	)

2832 #iâdeà
NRFX_QDEC_CONFIG_LEDPRE


2833 
	#NRFX_QDEC_CONFIG_LEDPRE
 511

	)

2841 #iâdeà
NRFX_QDEC_CONFIG_LEDPOL


2842 
	#NRFX_QDEC_CONFIG_LEDPOL
 1

	)

2848 #iâdeà
NRFX_QDEC_CONFIG_DBFEN


2849 
	#NRFX_QDEC_CONFIG_DBFEN
 0

	)

2855 #iâdeà
NRFX_QDEC_CONFIG_SAMPLE_INTEN


2856 
	#NRFX_QDEC_CONFIG_SAMPLE_INTEN
 0

	)

2870 #iâdeà
NRFX_QDEC_CONFIG_IRQ_PRIORITY


2871 
	#NRFX_QDEC_CONFIG_IRQ_PRIORITY
 7

	)

2876 #iâdeà
NRFX_QDEC_CONFIG_LOG_ENABLED


2877 
	#NRFX_QDEC_CONFIG_LOG_ENABLED
 0

	)

2887 #iâdeà
NRFX_QDEC_CONFIG_LOG_LEVEL


2888 
	#NRFX_QDEC_CONFIG_LOG_LEVEL
 3

	)

2903 #iâdeà
NRFX_QDEC_CONFIG_INFO_COLOR


2904 
	#NRFX_QDEC_CONFIG_INFO_COLOR
 0

	)

2919 #iâdeà
NRFX_QDEC_CONFIG_DEBUG_COLOR


2920 
	#NRFX_QDEC_CONFIG_DEBUG_COLOR
 0

	)

2929 #iâdeà
NRFX_QSPI_ENABLED


2930 
	#NRFX_QSPI_ENABLED
 0

	)

2935 #iâdeà
NRFX_QSPI_CONFIG_SCK_DELAY


2936 
	#NRFX_QSPI_CONFIG_SCK_DELAY
 1

	)

2940 #iâdeà
NRFX_QSPI_CONFIG_XIP_OFFSET


2941 
	#NRFX_QSPI_CONFIG_XIP_OFFSET
 0

	)

2952 #iâdeà
NRFX_QSPI_CONFIG_READOC


2953 
	#NRFX_QSPI_CONFIG_READOC
 0

	)

2963 #iâdeà
NRFX_QSPI_CONFIG_WRITEOC


2964 
	#NRFX_QSPI_CONFIG_WRITEOC
 0

	)

2972 #iâdeà
NRFX_QSPI_CONFIG_ADDRMODE


2973 
	#NRFX_QSPI_CONFIG_ADDRMODE
 0

	)

2981 #iâdeà
NRFX_QSPI_CONFIG_MODE


2982 
	#NRFX_QSPI_CONFIG_MODE
 0

	)

3004 #iâdeà
NRFX_QSPI_CONFIG_FREQUENCY


3005 
	#NRFX_QSPI_CONFIG_FREQUENCY
 15

	)

3009 #iâdeà
NRFX_QSPI_PIN_SCK


3010 
	#NRFX_QSPI_PIN_SCK
 
NRF_QSPI_PIN_NOT_CONNECTED


	)

3014 #iâdeà
NRFX_QSPI_PIN_CSN


3015 
	#NRFX_QSPI_PIN_CSN
 
NRF_QSPI_PIN_NOT_CONNECTED


	)

3019 #iâdeà
NRFX_QSPI_PIN_IO0


3020 
	#NRFX_QSPI_PIN_IO0
 
NRF_QSPI_PIN_NOT_CONNECTED


	)

3024 #iâdeà
NRFX_QSPI_PIN_IO1


3025 
	#NRFX_QSPI_PIN_IO1
 
NRF_QSPI_PIN_NOT_CONNECTED


	)

3029 #iâdeà
NRFX_QSPI_PIN_IO2


3030 
	#NRFX_QSPI_PIN_IO2
 
NRF_QSPI_PIN_NOT_CONNECTED


	)

3034 #iâdeà
NRFX_QSPI_PIN_IO3


3035 
	#NRFX_QSPI_PIN_IO3
 
NRF_QSPI_PIN_NOT_CONNECTED


	)

3049 #iâdeà
NRFX_QSPI_CONFIG_IRQ_PRIORITY


3050 
	#NRFX_QSPI_CONFIG_IRQ_PRIORITY
 7

	)

3057 #iâdeà
NRFX_RNG_ENABLED


3058 
	#NRFX_RNG_ENABLED
 0

	)

3063 #iâdeà
NRFX_RNG_CONFIG_ERROR_CORRECTION


3064 
	#NRFX_RNG_CONFIG_ERROR_CORRECTION
 1

	)

3078 #iâdeà
NRFX_RNG_CONFIG_IRQ_PRIORITY


3079 
	#NRFX_RNG_CONFIG_IRQ_PRIORITY
 7

	)

3084 #iâdeà
NRFX_RNG_CONFIG_LOG_ENABLED


3085 
	#NRFX_RNG_CONFIG_LOG_ENABLED
 0

	)

3095 #iâdeà
NRFX_RNG_CONFIG_LOG_LEVEL


3096 
	#NRFX_RNG_CONFIG_LOG_LEVEL
 3

	)

3111 #iâdeà
NRFX_RNG_CONFIG_INFO_COLOR


3112 
	#NRFX_RNG_CONFIG_INFO_COLOR
 0

	)

3127 #iâdeà
NRFX_RNG_CONFIG_DEBUG_COLOR


3128 
	#NRFX_RNG_CONFIG_DEBUG_COLOR
 0

	)

3137 #iâdeà
NRFX_RTC_ENABLED


3138 
	#NRFX_RTC_ENABLED
 0

	)

3143 #iâdeà
NRFX_RTC0_ENABLED


3144 
	#NRFX_RTC0_ENABLED
 0

	)

3150 #iâdeà
NRFX_RTC1_ENABLED


3151 
	#NRFX_RTC1_ENABLED
 0

	)

3157 #iâdeà
NRFX_RTC2_ENABLED


3158 
	#NRFX_RTC2_ENABLED
 0

	)

3162 #iâdeà
NRFX_RTC_MAXIMUM_LATENCY_US


3163 
	#NRFX_RTC_MAXIMUM_LATENCY_US
 2000

	)

3169 #iâdeà
NRFX_RTC_DEFAULT_CONFIG_FREQUENCY


3170 
	#NRFX_RTC_DEFAULT_CONFIG_FREQUENCY
 32768

	)

3176 #iâdeà
NRFX_RTC_DEFAULT_CONFIG_RELIABLE


3177 
	#NRFX_RTC_DEFAULT_CONFIG_RELIABLE
 0

	)

3191 #iâdeà
NRFX_RTC_DEFAULT_CONFIG_IRQ_PRIORITY


3192 
	#NRFX_RTC_DEFAULT_CONFIG_IRQ_PRIORITY
 7

	)

3197 #iâdeà
NRFX_RTC_CONFIG_LOG_ENABLED


3198 
	#NRFX_RTC_CONFIG_LOG_ENABLED
 0

	)

3208 #iâdeà
NRFX_RTC_CONFIG_LOG_LEVEL


3209 
	#NRFX_RTC_CONFIG_LOG_LEVEL
 3

	)

3224 #iâdeà
NRFX_RTC_CONFIG_INFO_COLOR


3225 
	#NRFX_RTC_CONFIG_INFO_COLOR
 0

	)

3240 #iâdeà
NRFX_RTC_CONFIG_DEBUG_COLOR


3241 
	#NRFX_RTC_CONFIG_DEBUG_COLOR
 0

	)

3250 #iâdeà
NRFX_SAADC_ENABLED


3251 
	#NRFX_SAADC_ENABLED
 0

	)

3260 #iâdeà
NRFX_SAADC_CONFIG_RESOLUTION


3261 
	#NRFX_SAADC_CONFIG_RESOLUTION
 1

	)

3276 #iâdeà
NRFX_SAADC_CONFIG_OVERSAMPLE


3277 
	#NRFX_SAADC_CONFIG_OVERSAMPLE
 0

	)

3283 #iâdeà
NRFX_SAADC_CONFIG_LP_MODE


3284 
	#NRFX_SAADC_CONFIG_LP_MODE
 0

	)

3298 #iâdeà
NRFX_SAADC_CONFIG_IRQ_PRIORITY


3299 
	#NRFX_SAADC_CONFIG_IRQ_PRIORITY
 7

	)

3304 #iâdeà
NRFX_SAADC_CONFIG_LOG_ENABLED


3305 
	#NRFX_SAADC_CONFIG_LOG_ENABLED
 0

	)

3315 #iâdeà
NRFX_SAADC_CONFIG_LOG_LEVEL


3316 
	#NRFX_SAADC_CONFIG_LOG_LEVEL
 3

	)

3331 #iâdeà
NRFX_SAADC_CONFIG_INFO_COLOR


3332 
	#NRFX_SAADC_CONFIG_INFO_COLOR
 0

	)

3347 #iâdeà
NRFX_SAADC_CONFIG_DEBUG_COLOR


3348 
	#NRFX_SAADC_CONFIG_DEBUG_COLOR
 0

	)

3357 #iâdeà
NRFX_SPIM_ENABLED


3358 
	#NRFX_SPIM_ENABLED
 0

	)

3363 #iâdeà
NRFX_SPIM0_ENABLED


3364 
	#NRFX_SPIM0_ENABLED
 0

	)

3370 #iâdeà
NRFX_SPIM1_ENABLED


3371 
	#NRFX_SPIM1_ENABLED
 0

	)

3377 #iâdeà
NRFX_SPIM2_ENABLED


3378 
	#NRFX_SPIM2_ENABLED
 0

	)

3384 #iâdeà
NRFX_SPIM3_ENABLED


3385 
	#NRFX_SPIM3_ENABLED
 0

	)

3391 #iâdeà
NRFX_SPIM_EXTENDED_ENABLED


3392 
	#NRFX_SPIM_EXTENDED_ENABLED
 0

	)

3401 #iâdeà
NRFX_SPIM_MISO_PULL_CFG


3402 
	#NRFX_SPIM_MISO_PULL_CFG
 1

	)

3416 #iâdeà
NRFX_SPIM_DEFAULT_CONFIG_IRQ_PRIORITY


3417 
	#NRFX_SPIM_DEFAULT_CONFIG_IRQ_PRIORITY
 7

	)

3422 #iâdeà
NRFX_SPIM_CONFIG_LOG_ENABLED


3423 
	#NRFX_SPIM_CONFIG_LOG_ENABLED
 0

	)

3433 #iâdeà
NRFX_SPIM_CONFIG_LOG_LEVEL


3434 
	#NRFX_SPIM_CONFIG_LOG_LEVEL
 3

	)

3449 #iâdeà
NRFX_SPIM_CONFIG_INFO_COLOR


3450 
	#NRFX_SPIM_CONFIG_INFO_COLOR
 0

	)

3465 #iâdeà
NRFX_SPIM_CONFIG_DEBUG_COLOR


3466 
	#NRFX_SPIM_CONFIG_DEBUG_COLOR
 0

	)

3475 #iâdeà
NRFX_SPIS_ENABLED


3476 
	#NRFX_SPIS_ENABLED
 0

	)

3481 #iâdeà
NRFX_SPIS0_ENABLED


3482 
	#NRFX_SPIS0_ENABLED
 0

	)

3488 #iâdeà
NRFX_SPIS1_ENABLED


3489 
	#NRFX_SPIS1_ENABLED
 0

	)

3495 #iâdeà
NRFX_SPIS2_ENABLED


3496 
	#NRFX_SPIS2_ENABLED
 0

	)

3510 #iâdeà
NRFX_SPIS_DEFAULT_CONFIG_IRQ_PRIORITY


3511 
	#NRFX_SPIS_DEFAULT_CONFIG_IRQ_PRIORITY
 7

	)

3517 #iâdeà
NRFX_SPIS_DEFAULT_DEF


3518 
	#NRFX_SPIS_DEFAULT_DEF
 255

	)

3524 #iâdeà
NRFX_SPIS_DEFAULT_ORC


3525 
	#NRFX_SPIS_DEFAULT_ORC
 255

	)

3530 #iâdeà
NRFX_SPIS_CONFIG_LOG_ENABLED


3531 
	#NRFX_SPIS_CONFIG_LOG_ENABLED
 0

	)

3541 #iâdeà
NRFX_SPIS_CONFIG_LOG_LEVEL


3542 
	#NRFX_SPIS_CONFIG_LOG_LEVEL
 3

	)

3557 #iâdeà
NRFX_SPIS_CONFIG_INFO_COLOR


3558 
	#NRFX_SPIS_CONFIG_INFO_COLOR
 0

	)

3573 #iâdeà
NRFX_SPIS_CONFIG_DEBUG_COLOR


3574 
	#NRFX_SPIS_CONFIG_DEBUG_COLOR
 0

	)

3583 #iâdeà
NRFX_SPI_ENABLED


3584 
	#NRFX_SPI_ENABLED
 0

	)

3589 #iâdeà
NRFX_SPI0_ENABLED


3590 
	#NRFX_SPI0_ENABLED
 0

	)

3596 #iâdeà
NRFX_SPI1_ENABLED


3597 
	#NRFX_SPI1_ENABLED
 0

	)

3603 #iâdeà
NRFX_SPI2_ENABLED


3604 
	#NRFX_SPI2_ENABLED
 0

	)

3613 #iâdeà
NRFX_SPI_MISO_PULL_CFG


3614 
	#NRFX_SPI_MISO_PULL_CFG
 1

	)

3628 #iâdeà
NRFX_SPI_DEFAULT_CONFIG_IRQ_PRIORITY


3629 
	#NRFX_SPI_DEFAULT_CONFIG_IRQ_PRIORITY
 7

	)

3634 #iâdeà
NRFX_SPI_CONFIG_LOG_ENABLED


3635 
	#NRFX_SPI_CONFIG_LOG_ENABLED
 0

	)

3645 #iâdeà
NRFX_SPI_CONFIG_LOG_LEVEL


3646 
	#NRFX_SPI_CONFIG_LOG_LEVEL
 3

	)

3661 #iâdeà
NRFX_SPI_CONFIG_INFO_COLOR


3662 
	#NRFX_SPI_CONFIG_INFO_COLOR
 0

	)

3677 #iâdeà
NRFX_SPI_CONFIG_DEBUG_COLOR


3678 
	#NRFX_SPI_CONFIG_DEBUG_COLOR
 0

	)

3687 #iâdeà
NRFX_SWI_ENABLED


3688 
	#NRFX_SWI_ENABLED
 0

	)

3693 #iâdeà
NRFX_EGU_ENABLED


3694 
	#NRFX_EGU_ENABLED
 0

	)

3700 #iâdeà
NRFX_SWI0_DISABLED


3701 
	#NRFX_SWI0_DISABLED
 0

	)

3707 #iâdeà
NRFX_SWI1_DISABLED


3708 
	#NRFX_SWI1_DISABLED
 0

	)

3714 #iâdeà
NRFX_SWI2_DISABLED


3715 
	#NRFX_SWI2_DISABLED
 0

	)

3721 #iâdeà
NRFX_SWI3_DISABLED


3722 
	#NRFX_SWI3_DISABLED
 0

	)

3728 #iâdeà
NRFX_SWI4_DISABLED


3729 
	#NRFX_SWI4_DISABLED
 0

	)

3735 #iâdeà
NRFX_SWI5_DISABLED


3736 
	#NRFX_SWI5_DISABLED
 0

	)

3741 #iâdeà
NRFX_SWI_CONFIG_LOG_ENABLED


3742 
	#NRFX_SWI_CONFIG_LOG_ENABLED
 0

	)

3752 #iâdeà
NRFX_SWI_CONFIG_LOG_LEVEL


3753 
	#NRFX_SWI_CONFIG_LOG_LEVEL
 3

	)

3768 #iâdeà
NRFX_SWI_CONFIG_INFO_COLOR


3769 
	#NRFX_SWI_CONFIG_INFO_COLOR
 0

	)

3784 #iâdeà
NRFX_SWI_CONFIG_DEBUG_COLOR


3785 
	#NRFX_SWI_CONFIG_DEBUG_COLOR
 0

	)

3794 #iâdeà
NRFX_TIMER_ENABLED


3795 
	#NRFX_TIMER_ENABLED
 0

	)

3800 #iâdeà
NRFX_TIMER0_ENABLED


3801 
	#NRFX_TIMER0_ENABLED
 0

	)

3807 #iâdeà
NRFX_TIMER1_ENABLED


3808 
	#NRFX_TIMER1_ENABLED
 0

	)

3814 #iâdeà
NRFX_TIMER2_ENABLED


3815 
	#NRFX_TIMER2_ENABLED
 0

	)

3821 #iâdeà
NRFX_TIMER3_ENABLED


3822 
	#NRFX_TIMER3_ENABLED
 0

	)

3828 #iâdeà
NRFX_TIMER4_ENABLED


3829 
	#NRFX_TIMER4_ENABLED
 0

	)

3845 #iâdeà
NRFX_TIMER_DEFAULT_CONFIG_FREQUENCY


3846 
	#NRFX_TIMER_DEFAULT_CONFIG_FREQUENCY
 0

	)

3854 #iâdeà
NRFX_TIMER_DEFAULT_CONFIG_MODE


3855 
	#NRFX_TIMER_DEFAULT_CONFIG_MODE
 0

	)

3865 #iâdeà
NRFX_TIMER_DEFAULT_CONFIG_BIT_WIDTH


3866 
	#NRFX_TIMER_DEFAULT_CONFIG_BIT_WIDTH
 0

	)

3880 #iâdeà
NRFX_TIMER_DEFAULT_CONFIG_IRQ_PRIORITY


3881 
	#NRFX_TIMER_DEFAULT_CONFIG_IRQ_PRIORITY
 7

	)

3886 #iâdeà
NRFX_TIMER_CONFIG_LOG_ENABLED


3887 
	#NRFX_TIMER_CONFIG_LOG_ENABLED
 0

	)

3897 #iâdeà
NRFX_TIMER_CONFIG_LOG_LEVEL


3898 
	#NRFX_TIMER_CONFIG_LOG_LEVEL
 3

	)

3913 #iâdeà
NRFX_TIMER_CONFIG_INFO_COLOR


3914 
	#NRFX_TIMER_CONFIG_INFO_COLOR
 0

	)

3929 #iâdeà
NRFX_TIMER_CONFIG_DEBUG_COLOR


3930 
	#NRFX_TIMER_CONFIG_DEBUG_COLOR
 0

	)

3939 #iâdeà
NRFX_TWIM_ENABLED


3940 
	#NRFX_TWIM_ENABLED
 0

	)

3945 #iâdeà
NRFX_TWIM0_ENABLED


3946 
	#NRFX_TWIM0_ENABLED
 0

	)

3952 #iâdeà
NRFX_TWIM1_ENABLED


3953 
	#NRFX_TWIM1_ENABLED
 0

	)

3962 #iâdeà
NRFX_TWIM_DEFAULT_CONFIG_FREQUENCY


3963 
	#NRFX_TWIM_DEFAULT_CONFIG_FREQUENCY
 26738688

	)

3969 #iâdeà
NRFX_TWIM_DEFAULT_CONFIG_HOLD_BUS_UNINIT


3970 
	#NRFX_TWIM_DEFAULT_CONFIG_HOLD_BUS_UNINIT
 0

	)

3984 #iâdeà
NRFX_TWIM_DEFAULT_CONFIG_IRQ_PRIORITY


3985 
	#NRFX_TWIM_DEFAULT_CONFIG_IRQ_PRIORITY
 7

	)

3990 #iâdeà
NRFX_TWIM_CONFIG_LOG_ENABLED


3991 
	#NRFX_TWIM_CONFIG_LOG_ENABLED
 0

	)

4001 #iâdeà
NRFX_TWIM_CONFIG_LOG_LEVEL


4002 
	#NRFX_TWIM_CONFIG_LOG_LEVEL
 3

	)

4017 #iâdeà
NRFX_TWIM_CONFIG_INFO_COLOR


4018 
	#NRFX_TWIM_CONFIG_INFO_COLOR
 0

	)

4033 #iâdeà
NRFX_TWIM_CONFIG_DEBUG_COLOR


4034 
	#NRFX_TWIM_CONFIG_DEBUG_COLOR
 0

	)

4043 #iâdeà
NRFX_TWIS_ENABLED


4044 
	#NRFX_TWIS_ENABLED
 0

	)

4049 #iâdeà
NRFX_TWIS0_ENABLED


4050 
	#NRFX_TWIS0_ENABLED
 0

	)

4056 #iâdeà
NRFX_TWIS1_ENABLED


4057 
	#NRFX_TWIS1_ENABLED
 0

	)

4065 #iâdeà
NRFX_TWIS_ASSUME_INIT_AFTER_RESET_ONLY


4066 
	#NRFX_TWIS_ASSUME_INIT_AFTER_RESET_ONLY
 0

	)

4074 #iâdeà
NRFX_TWIS_NO_SYNC_MODE


4075 
	#NRFX_TWIS_NO_SYNC_MODE
 0

	)

4079 #iâdeà
NRFX_TWIS_DEFAULT_CONFIG_ADDR0


4080 
	#NRFX_TWIS_DEFAULT_CONFIG_ADDR0
 0

	)

4084 #iâdeà
NRFX_TWIS_DEFAULT_CONFIG_ADDR1


4085 
	#NRFX_TWIS_DEFAULT_CONFIG_ADDR1
 0

	)

4094 #iâdeà
NRFX_TWIS_DEFAULT_CONFIG_SCL_PULL


4095 
	#NRFX_TWIS_DEFAULT_CONFIG_SCL_PULL
 0

	)

4104 #iâdeà
NRFX_TWIS_DEFAULT_CONFIG_SDA_PULL


4105 
	#NRFX_TWIS_DEFAULT_CONFIG_SDA_PULL
 0

	)

4119 #iâdeà
NRFX_TWIS_DEFAULT_CONFIG_IRQ_PRIORITY


4120 
	#NRFX_TWIS_DEFAULT_CONFIG_IRQ_PRIORITY
 7

	)

4125 #iâdeà
NRFX_TWIS_CONFIG_LOG_ENABLED


4126 
	#NRFX_TWIS_CONFIG_LOG_ENABLED
 0

	)

4136 #iâdeà
NRFX_TWIS_CONFIG_LOG_LEVEL


4137 
	#NRFX_TWIS_CONFIG_LOG_LEVEL
 3

	)

4152 #iâdeà
NRFX_TWIS_CONFIG_INFO_COLOR


4153 
	#NRFX_TWIS_CONFIG_INFO_COLOR
 0

	)

4168 #iâdeà
NRFX_TWIS_CONFIG_DEBUG_COLOR


4169 
	#NRFX_TWIS_CONFIG_DEBUG_COLOR
 0

	)

4178 #iâdeà
NRFX_TWI_ENABLED


4179 
	#NRFX_TWI_ENABLED
 0

	)

4184 #iâdeà
NRFX_TWI0_ENABLED


4185 
	#NRFX_TWI0_ENABLED
 0

	)

4191 #iâdeà
NRFX_TWI1_ENABLED


4192 
	#NRFX_TWI1_ENABLED
 0

	)

4201 #iâdeà
NRFX_TWI_DEFAULT_CONFIG_FREQUENCY


4202 
	#NRFX_TWI_DEFAULT_CONFIG_FREQUENCY
 26738688

	)

4208 #iâdeà
NRFX_TWI_DEFAULT_CONFIG_HOLD_BUS_UNINIT


4209 
	#NRFX_TWI_DEFAULT_CONFIG_HOLD_BUS_UNINIT
 0

	)

4223 #iâdeà
NRFX_TWI_DEFAULT_CONFIG_IRQ_PRIORITY


4224 
	#NRFX_TWI_DEFAULT_CONFIG_IRQ_PRIORITY
 7

	)

4229 #iâdeà
NRFX_TWI_CONFIG_LOG_ENABLED


4230 
	#NRFX_TWI_CONFIG_LOG_ENABLED
 0

	)

4240 #iâdeà
NRFX_TWI_CONFIG_LOG_LEVEL


4241 
	#NRFX_TWI_CONFIG_LOG_LEVEL
 3

	)

4256 #iâdeà
NRFX_TWI_CONFIG_INFO_COLOR


4257 
	#NRFX_TWI_CONFIG_INFO_COLOR
 0

	)

4272 #iâdeà
NRFX_TWI_CONFIG_DEBUG_COLOR


4273 
	#NRFX_TWI_CONFIG_DEBUG_COLOR
 0

	)

4282 #iâdeà
NRFX_UARTE_ENABLED


4283 
	#NRFX_UARTE_ENABLED
 1

	)

4286 #iâdeà
NRFX_UARTE0_ENABLED


4287 
	#NRFX_UARTE0_ENABLED
 0

	)

4291 #iâdeà
NRFX_UARTE1_ENABLED


4292 
	#NRFX_UARTE1_ENABLED
 0

	)

4300 #iâdeà
NRFX_UARTE_DEFAULT_CONFIG_HWFC


4301 
	#NRFX_UARTE_DEFAULT_CONFIG_HWFC
 0

	)

4309 #iâdeà
NRFX_UARTE_DEFAULT_CONFIG_PARITY


4310 
	#NRFX_UARTE_DEFAULT_CONFIG_PARITY
 0

	)

4334 #iâdeà
NRFX_UARTE_DEFAULT_CONFIG_BAUDRATE


4335 
	#NRFX_UARTE_DEFAULT_CONFIG_BAUDRATE
 30801920

	)

4349 #iâdeà
NRFX_UARTE_DEFAULT_CONFIG_IRQ_PRIORITY


4350 
	#NRFX_UARTE_DEFAULT_CONFIG_IRQ_PRIORITY
 7

	)

4355 #iâdeà
NRFX_UARTE_CONFIG_LOG_ENABLED


4356 
	#NRFX_UARTE_CONFIG_LOG_ENABLED
 0

	)

4366 #iâdeà
NRFX_UARTE_CONFIG_LOG_LEVEL


4367 
	#NRFX_UARTE_CONFIG_LOG_LEVEL
 3

	)

4382 #iâdeà
NRFX_UARTE_CONFIG_INFO_COLOR


4383 
	#NRFX_UARTE_CONFIG_INFO_COLOR
 0

	)

4398 #iâdeà
NRFX_UARTE_CONFIG_DEBUG_COLOR


4399 
	#NRFX_UARTE_CONFIG_DEBUG_COLOR
 0

	)

4408 #iâdeà
NRFX_UART_ENABLED


4409 
	#NRFX_UART_ENABLED
 1

	)

4412 #iâdeà
NRFX_UART0_ENABLED


4413 
	#NRFX_UART0_ENABLED
 0

	)

4421 #iâdeà
NRFX_UART_DEFAULT_CONFIG_HWFC


4422 
	#NRFX_UART_DEFAULT_CONFIG_HWFC
 0

	)

4430 #iâdeà
NRFX_UART_DEFAULT_CONFIG_PARITY


4431 
	#NRFX_UART_DEFAULT_CONFIG_PARITY
 0

	)

4455 #iâdeà
NRFX_UART_DEFAULT_CONFIG_BAUDRATE


4456 
	#NRFX_UART_DEFAULT_CONFIG_BAUDRATE
 30924800

	)

4470 #iâdeà
NRFX_UART_DEFAULT_CONFIG_IRQ_PRIORITY


4471 
	#NRFX_UART_DEFAULT_CONFIG_IRQ_PRIORITY
 7

	)

4476 #iâdeà
NRFX_UART_CONFIG_LOG_ENABLED


4477 
	#NRFX_UART_CONFIG_LOG_ENABLED
 0

	)

4487 #iâdeà
NRFX_UART_CONFIG_LOG_LEVEL


4488 
	#NRFX_UART_CONFIG_LOG_LEVEL
 3

	)

4503 #iâdeà
NRFX_UART_CONFIG_INFO_COLOR


4504 
	#NRFX_UART_CONFIG_INFO_COLOR
 0

	)

4519 #iâdeà
NRFX_UART_CONFIG_DEBUG_COLOR


4520 
	#NRFX_UART_CONFIG_DEBUG_COLOR
 0

	)

4529 #iâdeà
NRFX_WDT_ENABLED


4530 
	#NRFX_WDT_ENABLED
 0

	)

4539 #iâdeà
NRFX_WDT_CONFIG_BEHAVIOUR


4540 
	#NRFX_WDT_CONFIG_BEHAVIOUR
 1

	)

4546 #iâdeà
NRFX_WDT_CONFIG_RELOAD_VALUE


4547 
	#NRFX_WDT_CONFIG_RELOAD_VALUE
 2000

	)

4561 #iâdeà
NRFX_WDT_CONFIG_IRQ_PRIORITY


4562 
	#NRFX_WDT_CONFIG_IRQ_PRIORITY
 7

	)

4567 #iâdeà
NRFX_WDT_CONFIG_LOG_ENABLED


4568 
	#NRFX_WDT_CONFIG_LOG_ENABLED
 0

	)

4578 #iâdeà
NRFX_WDT_CONFIG_LOG_LEVEL


4579 
	#NRFX_WDT_CONFIG_LOG_LEVEL
 3

	)

4594 #iâdeà
NRFX_WDT_CONFIG_INFO_COLOR


4595 
	#NRFX_WDT_CONFIG_INFO_COLOR
 0

	)

4610 #iâdeà
NRFX_WDT_CONFIG_DEBUG_COLOR


4611 
	#NRFX_WDT_CONFIG_DEBUG_COLOR
 0

	)

4620 #iâdeà
PDM_ENABLED


4621 
	#PDM_ENABLED
 0

	)

4628 #iâdeà
PDM_CONFIG_MODE


4629 
	#PDM_CONFIG_MODE
 1

	)

4637 #iâdeà
PDM_CONFIG_EDGE


4638 
	#PDM_CONFIG_EDGE
 0

	)

4647 #iâdeà
PDM_CONFIG_CLOCK_FREQ


4648 
	#PDM_CONFIG_CLOCK_FREQ
 138412032

	)

4664 #iâdeà
PDM_CONFIG_IRQ_PRIORITY


4665 
	#PDM_CONFIG_IRQ_PRIORITY
 7

	)

4672 #iâdeà
POWER_ENABLED


4673 
	#POWER_ENABLED
 0

	)

4688 #iâdeà
POWER_CONFIG_IRQ_PRIORITY


4689 
	#POWER_CONFIG_IRQ_PRIORITY
 7

	)

4697 #iâdeà
POWER_CONFIG_DEFAULT_DCDCEN


4698 
	#POWER_CONFIG_DEFAULT_DCDCEN
 0

	)

4706 #iâdeà
POWER_CONFIG_DEFAULT_DCDCENHV


4707 
	#POWER_CONFIG_DEFAULT_DCDCENHV
 0

	)

4715 #iâdeà
PPI_ENABLED


4716 
	#PPI_ENABLED
 0

	)

4721 #iâdeà
PWM_ENABLED


4722 
	#PWM_ENABLED
 0

	)

4727 #iâdeà
PWM_DEFAULT_CONFIG_OUT0_PIN


4728 
	#PWM_DEFAULT_CONFIG_OUT0_PIN
 31

	)

4734 #iâdeà
PWM_DEFAULT_CONFIG_OUT1_PIN


4735 
	#PWM_DEFAULT_CONFIG_OUT1_PIN
 31

	)

4741 #iâdeà
PWM_DEFAULT_CONFIG_OUT2_PIN


4742 
	#PWM_DEFAULT_CONFIG_OUT2_PIN
 31

	)

4748 #iâdeà
PWM_DEFAULT_CONFIG_OUT3_PIN


4749 
	#PWM_DEFAULT_CONFIG_OUT3_PIN
 31

	)

4763 #iâdeà
PWM_DEFAULT_CONFIG_BASE_CLOCK


4764 
	#PWM_DEFAULT_CONFIG_BASE_CLOCK
 4

	)

4772 #iâdeà
PWM_DEFAULT_CONFIG_COUNT_MODE


4773 
	#PWM_DEFAULT_CONFIG_COUNT_MODE
 0

	)

4777 #iâdeà
PWM_DEFAULT_CONFIG_TOP_VALUE


4778 
	#PWM_DEFAULT_CONFIG_TOP_VALUE
 1000

	)

4788 #iâdeà
PWM_DEFAULT_CONFIG_LOAD_MODE


4789 
	#PWM_DEFAULT_CONFIG_LOAD_MODE
 0

	)

4797 #iâdeà
PWM_DEFAULT_CONFIG_STEP_MODE


4798 
	#PWM_DEFAULT_CONFIG_STEP_MODE
 0

	)

4814 #iâdeà
PWM_DEFAULT_CONFIG_IRQ_PRIORITY


4815 
	#PWM_DEFAULT_CONFIG_IRQ_PRIORITY
 7

	)

4821 #iâdeà
PWM0_ENABLED


4822 
	#PWM0_ENABLED
 0

	)

4828 #iâdeà
PWM1_ENABLED


4829 
	#PWM1_ENABLED
 0

	)

4835 #iâdeà
PWM2_ENABLED


4836 
	#PWM2_ENABLED
 0

	)

4842 #iâdeà
PWM3_ENABLED


4843 
	#PWM3_ENABLED
 0

	)

4850 #iâdeà
QDEC_ENABLED


4851 
	#QDEC_ENABLED
 0

	)

4864 #iâdeà
QDEC_CONFIG_REPORTPER


4865 
	#QDEC_CONFIG_REPORTPER
 0

	)

4879 #iâdeà
QDEC_CONFIG_SAMPLEPER


4880 
	#QDEC_CONFIG_SAMPLEPER
 7

	)

4886 #iâdeà
QDEC_CONFIG_PIO_A


4887 
	#QDEC_CONFIG_PIO_A
 31

	)

4893 #iâdeà
QDEC_CONFIG_PIO_B


4894 
	#QDEC_CONFIG_PIO_B
 31

	)

4900 #iâdeà
QDEC_CONFIG_PIO_LED


4901 
	#QDEC_CONFIG_PIO_LED
 31

	)

4905 #iâdeà
QDEC_CONFIG_LEDPRE


4906 
	#QDEC_CONFIG_LEDPRE
 511

	)

4914 #iâdeà
QDEC_CONFIG_LEDPOL


4915 
	#QDEC_CONFIG_LEDPOL
 1

	)

4921 #iâdeà
QDEC_CONFIG_DBFEN


4922 
	#QDEC_CONFIG_DBFEN
 0

	)

4928 #iâdeà
QDEC_CONFIG_SAMPLE_INTEN


4929 
	#QDEC_CONFIG_SAMPLE_INTEN
 0

	)

4945 #iâdeà
QDEC_CONFIG_IRQ_PRIORITY


4946 
	#QDEC_CONFIG_IRQ_PRIORITY
 7

	)

4953 #iâdeà
QSPI_ENABLED


4954 
	#QSPI_ENABLED
 0

	)

4959 #iâdeà
QSPI_CONFIG_SCK_DELAY


4960 
	#QSPI_CONFIG_SCK_DELAY
 1

	)

4964 #iâdeà
QSPI_CONFIG_XIP_OFFSET


4965 
	#QSPI_CONFIG_XIP_OFFSET
 0

	)

4976 #iâdeà
QSPI_CONFIG_READOC


4977 
	#QSPI_CONFIG_READOC
 0

	)

4987 #iâdeà
QSPI_CONFIG_WRITEOC


4988 
	#QSPI_CONFIG_WRITEOC
 0

	)

4996 #iâdeà
QSPI_CONFIG_ADDRMODE


4997 
	#QSPI_CONFIG_ADDRMODE
 0

	)

5005 #iâdeà
QSPI_CONFIG_MODE


5006 
	#QSPI_CONFIG_MODE
 0

	)

5028 #iâdeà
QSPI_CONFIG_FREQUENCY


5029 
	#QSPI_CONFIG_FREQUENCY
 15

	)

5033 #iâdeà
QSPI_PIN_SCK


5034 
	#QSPI_PIN_SCK
 
NRF_QSPI_PIN_NOT_CONNECTED


	)

5038 #iâdeà
QSPI_PIN_CSN


5039 
	#QSPI_PIN_CSN
 
NRF_QSPI_PIN_NOT_CONNECTED


	)

5043 #iâdeà
QSPI_PIN_IO0


5044 
	#QSPI_PIN_IO0
 
NRF_QSPI_PIN_NOT_CONNECTED


	)

5048 #iâdeà
QSPI_PIN_IO1


5049 
	#QSPI_PIN_IO1
 
NRF_QSPI_PIN_NOT_CONNECTED


	)

5053 #iâdeà
QSPI_PIN_IO2


5054 
	#QSPI_PIN_IO2
 
NRF_QSPI_PIN_NOT_CONNECTED


	)

5058 #iâdeà
QSPI_PIN_IO3


5059 
	#QSPI_PIN_IO3
 
NRF_QSPI_PIN_NOT_CONNECTED


	)

5075 #iâdeà
QSPI_CONFIG_IRQ_PRIORITY


5076 
	#QSPI_CONFIG_IRQ_PRIORITY
 7

	)

5083 #iâdeà
RNG_ENABLED


5084 
	#RNG_ENABLED
 0

	)

5089 #iâdeà
RNG_CONFIG_ERROR_CORRECTION


5090 
	#RNG_CONFIG_ERROR_CORRECTION
 1

	)

5094 #iâdeà
RNG_CONFIG_POOL_SIZE


5095 
	#RNG_CONFIG_POOL_SIZE
 64

	)

5111 #iâdeà
RNG_CONFIG_IRQ_PRIORITY


5112 
	#RNG_CONFIG_IRQ_PRIORITY
 7

	)

5119 #iâdeà
RTC_ENABLED


5120 
	#RTC_ENABLED
 0

	)

5125 #iâdeà
RTC_DEFAULT_CONFIG_FREQUENCY


5126 
	#RTC_DEFAULT_CONFIG_FREQUENCY
 32768

	)

5132 #iâdeà
RTC_DEFAULT_CONFIG_RELIABLE


5133 
	#RTC_DEFAULT_CONFIG_RELIABLE
 0

	)

5149 #iâdeà
RTC_DEFAULT_CONFIG_IRQ_PRIORITY


5150 
	#RTC_DEFAULT_CONFIG_IRQ_PRIORITY
 7

	)

5156 #iâdeà
RTC0_ENABLED


5157 
	#RTC0_ENABLED
 0

	)

5163 #iâdeà
RTC1_ENABLED


5164 
	#RTC1_ENABLED
 0

	)

5170 #iâdeà
RTC2_ENABLED


5171 
	#RTC2_ENABLED
 0

	)

5175 #iâdeà
NRF_MAXIMUM_LATENCY_US


5176 
	#NRF_MAXIMUM_LATENCY_US
 2000

	)

5183 #iâdeà
SAADC_ENABLED


5184 
	#SAADC_ENABLED
 0

	)

5193 #iâdeà
SAADC_CONFIG_RESOLUTION


5194 
	#SAADC_CONFIG_RESOLUTION
 1

	)

5209 #iâdeà
SAADC_CONFIG_OVERSAMPLE


5210 
	#SAADC_CONFIG_OVERSAMPLE
 0

	)

5216 #iâdeà
SAADC_CONFIG_LP_MODE


5217 
	#SAADC_CONFIG_LP_MODE
 0

	)

5233 #iâdeà
SAADC_CONFIG_IRQ_PRIORITY


5234 
	#SAADC_CONFIG_IRQ_PRIORITY
 7

	)

5241 #iâdeà
SPIS_ENABLED


5242 
	#SPIS_ENABLED
 0

	)

5257 #iâdeà
SPIS_DEFAULT_CONFIG_IRQ_PRIORITY


5258 
	#SPIS_DEFAULT_CONFIG_IRQ_PRIORITY
 7

	)

5268 #iâdeà
SPIS_DEFAULT_MODE


5269 
	#SPIS_DEFAULT_MODE
 0

	)

5277 #iâdeà
SPIS_DEFAULT_BIT_ORDER


5278 
	#SPIS_DEFAULT_BIT_ORDER
 0

	)

5284 #iâdeà
SPIS_DEFAULT_DEF


5285 
	#SPIS_DEFAULT_DEF
 255

	)

5291 #iâdeà
SPIS_DEFAULT_ORC


5292 
	#SPIS_DEFAULT_ORC
 255

	)

5298 #iâdeà
SPIS0_ENABLED


5299 
	#SPIS0_ENABLED
 0

	)

5305 #iâdeà
SPIS1_ENABLED


5306 
	#SPIS1_ENABLED
 0

	)

5312 #iâdeà
SPIS2_ENABLED


5313 
	#SPIS2_ENABLED
 0

	)

5320 #iâdeà
SPI_ENABLED


5321 
	#SPI_ENABLED
 0

	)

5336 #iâdeà
SPI_DEFAULT_CONFIG_IRQ_PRIORITY


5337 
	#SPI_DEFAULT_CONFIG_IRQ_PRIORITY
 7

	)

5346 #iâdeà
NRF_SPI_DRV_MISO_PULLUP_CFG


5347 
	#NRF_SPI_DRV_MISO_PULLUP_CFG
 1

	)

5352 #iâdeà
SPI0_ENABLED


5353 
	#SPI0_ENABLED
 0

	)

5358 #iâdeà
SPI0_USE_EASY_DMA


5359 
	#SPI0_USE_EASY_DMA
 1

	)

5366 #iâdeà
SPI1_ENABLED


5367 
	#SPI1_ENABLED
 0

	)

5372 #iâdeà
SPI1_USE_EASY_DMA


5373 
	#SPI1_USE_EASY_DMA
 1

	)

5380 #iâdeà
SPI2_ENABLED


5381 
	#SPI2_ENABLED
 0

	)

5386 #iâdeà
SPI2_USE_EASY_DMA


5387 
	#SPI2_USE_EASY_DMA
 1

	)

5396 #iâdeà
TIMER_ENABLED


5397 
	#TIMER_ENABLED
 0

	)

5412 #iâdeà
TIMER_DEFAULT_CONFIG_FREQUENCY


5413 
	#TIMER_DEFAULT_CONFIG_FREQUENCY
 0

	)

5421 #iâdeà
TIMER_DEFAULT_CONFIG_MODE


5422 
	#TIMER_DEFAULT_CONFIG_MODE
 0

	)

5432 #iâdeà
TIMER_DEFAULT_CONFIG_BIT_WIDTH


5433 
	#TIMER_DEFAULT_CONFIG_BIT_WIDTH
 0

	)

5449 #iâdeà
TIMER_DEFAULT_CONFIG_IRQ_PRIORITY


5450 
	#TIMER_DEFAULT_CONFIG_IRQ_PRIORITY
 7

	)

5456 #iâdeà
TIMER0_ENABLED


5457 
	#TIMER0_ENABLED
 0

	)

5463 #iâdeà
TIMER1_ENABLED


5464 
	#TIMER1_ENABLED
 0

	)

5470 #iâdeà
TIMER2_ENABLED


5471 
	#TIMER2_ENABLED
 0

	)

5477 #iâdeà
TIMER3_ENABLED


5478 
	#TIMER3_ENABLED
 0

	)

5484 #iâdeà
TIMER4_ENABLED


5485 
	#TIMER4_ENABLED
 0

	)

5492 #iâdeà
TWIS_ENABLED


5493 
	#TWIS_ENABLED
 0

	)

5498 #iâdeà
TWIS0_ENABLED


5499 
	#TWIS0_ENABLED
 0

	)

5505 #iâdeà
TWIS1_ENABLED


5506 
	#TWIS1_ENABLED
 0

	)

5514 #iâdeà
TWIS_ASSUME_INIT_AFTER_RESET_ONLY


5515 
	#TWIS_ASSUME_INIT_AFTER_RESET_ONLY
 0

	)

5523 #iâdeà
TWIS_NO_SYNC_MODE


5524 
	#TWIS_NO_SYNC_MODE
 0

	)

5528 #iâdeà
TWIS_DEFAULT_CONFIG_ADDR0


5529 
	#TWIS_DEFAULT_CONFIG_ADDR0
 0

	)

5533 #iâdeà
TWIS_DEFAULT_CONFIG_ADDR1


5534 
	#TWIS_DEFAULT_CONFIG_ADDR1
 0

	)

5543 #iâdeà
TWIS_DEFAULT_CONFIG_SCL_PULL


5544 
	#TWIS_DEFAULT_CONFIG_SCL_PULL
 0

	)

5553 #iâdeà
TWIS_DEFAULT_CONFIG_SDA_PULL


5554 
	#TWIS_DEFAULT_CONFIG_SDA_PULL
 0

	)

5570 #iâdeà
TWIS_DEFAULT_CONFIG_IRQ_PRIORITY


5571 
	#TWIS_DEFAULT_CONFIG_IRQ_PRIORITY
 7

	)

5578 #iâdeà
TWI_ENABLED


5579 
	#TWI_ENABLED
 0

	)

5587 #iâdeà
TWI_DEFAULT_CONFIG_FREQUENCY


5588 
	#TWI_DEFAULT_CONFIG_FREQUENCY
 26738688

	)

5594 #iâdeà
TWI_DEFAULT_CONFIG_CLR_BUS_INIT


5595 
	#TWI_DEFAULT_CONFIG_CLR_BUS_INIT
 0

	)

5601 #iâdeà
TWI_DEFAULT_CONFIG_HOLD_BUS_UNINIT


5602 
	#TWI_DEFAULT_CONFIG_HOLD_BUS_UNINIT
 0

	)

5618 #iâdeà
TWI_DEFAULT_CONFIG_IRQ_PRIORITY


5619 
	#TWI_DEFAULT_CONFIG_IRQ_PRIORITY
 7

	)

5624 #iâdeà
TWI0_ENABLED


5625 
	#TWI0_ENABLED
 0

	)

5630 #iâdeà
TWI0_USE_EASY_DMA


5631 
	#TWI0_USE_EASY_DMA
 0

	)

5638 #iâdeà
TWI1_ENABLED


5639 
	#TWI1_ENABLED
 0

	)

5644 #iâdeà
TWI1_USE_EASY_DMA


5645 
	#TWI1_USE_EASY_DMA
 0

	)

5654 #iâdeà
UART_ENABLED


5655 
	#UART_ENABLED
 1

	)

5662 #iâdeà
UART_DEFAULT_CONFIG_HWFC


5663 
	#UART_DEFAULT_CONFIG_HWFC
 0

	)

5671 #iâdeà
UART_DEFAULT_CONFIG_PARITY


5672 
	#UART_DEFAULT_CONFIG_PARITY
 0

	)

5694 #iâdeà
UART_DEFAULT_CONFIG_BAUDRATE


5695 
	#UART_DEFAULT_CONFIG_BAUDRATE
 30801920

	)

5711 #iâdeà
UART_DEFAULT_CONFIG_IRQ_PRIORITY


5712 
	#UART_DEFAULT_CONFIG_IRQ_PRIORITY
 7

	)

5718 #iâdeà
UART_EASY_DMA_SUPPORT


5719 
	#UART_EASY_DMA_SUPPORT
 1

	)

5725 #iâdeà
UART_LEGACY_SUPPORT


5726 
	#UART_LEGACY_SUPPORT
 1

	)

5731 #iâdeà
UART0_ENABLED


5732 
	#UART0_ENABLED
 1

	)

5737 #iâdeà
UART0_CONFIG_USE_EASY_DMA


5738 
	#UART0_CONFIG_USE_EASY_DMA
 1

	)

5745 #iâdeà
UART1_ENABLED


5746 
	#UART1_ENABLED
 0

	)

5754 #iâdeà
USBD_ENABLED


5755 
	#USBD_ENABLED
 0

	)

5770 #iâdeà
USBD_CONFIG_IRQ_PRIORITY


5771 
	#USBD_CONFIG_IRQ_PRIORITY
 7

	)

5779 #iâdeà
USBD_CONFIG_DMASCHEDULER_MODE


5780 
	#USBD_CONFIG_DMASCHEDULER_MODE
 0

	)

5787 #iâdeà
WDT_ENABLED


5788 
	#WDT_ENABLED
 0

	)

5797 #iâdeà
WDT_CONFIG_BEHAVIOUR


5798 
	#WDT_CONFIG_BEHAVIOUR
 1

	)

5804 #iâdeà
WDT_CONFIG_RELOAD_VALUE


5805 
	#WDT_CONFIG_RELOAD_VALUE
 2000

	)

5821 #iâdeà
WDT_CONFIG_IRQ_PRIORITY


5822 
	#WDT_CONFIG_IRQ_PRIORITY
 7

	)

5836 #iâdeà
NRF_TWI_SENSOR_ENABLED


5837 
	#NRF_TWI_SENSOR_ENABLED
 0

	)

5849 #iâdeà
APP_GPIOTE_ENABLED


5850 
	#APP_GPIOTE_ENABLED
 0

	)

5856 #iâdeà
APP_PWM_ENABLED


5857 
	#APP_PWM_ENABLED
 0

	)

5862 #iâdeà
APP_SCHEDULER_ENABLED


5863 
	#APP_SCHEDULER_ENABLED
 1

	)

5868 #iâdeà
APP_SCHEDULER_WITH_PAUSE


5869 
	#APP_SCHEDULER_WITH_PAUSE
 0

	)

5875 #iâdeà
APP_SCHEDULER_WITH_PROFILER


5876 
	#APP_SCHEDULER_WITH_PROFILER
 0

	)

5883 #iâdeà
APP_SDCARD_ENABLED


5884 
	#APP_SDCARD_ENABLED
 0

	)

5892 #iâdeà
APP_SDCARD_SPI_INSTANCE


5893 
	#APP_SDCARD_SPI_INSTANCE
 0

	)

5906 #iâdeà
APP_SDCARD_FREQ_INIT


5907 
	#APP_SDCARD_FREQ_INIT
 67108864

	)

5920 #iâdeà
APP_SDCARD_FREQ_DATA


5921 
	#APP_SDCARD_FREQ_DATA
 1073741824

	)

5928 #iâdeà
APP_TIMER_ENABLED


5929 
	#APP_TIMER_ENABLED
 1

	)

5940 #iâdeà
APP_TIMER_CONFIG_RTC_FREQUENCY


5941 
	#APP_TIMER_CONFIG_RTC_FREQUENCY
 0

	)

5957 #iâdeà
APP_TIMER_CONFIG_IRQ_PRIORITY


5958 
	#APP_TIMER_CONFIG_IRQ_PRIORITY
 7

	)

5967 #iâdeà
APP_TIMER_CONFIG_OP_QUEUE_SIZE


5968 
	#APP_TIMER_CONFIG_OP_QUEUE_SIZE
 10

	)

5974 #iâdeà
APP_TIMER_CONFIG_USE_SCHEDULER


5975 
	#APP_TIMER_CONFIG_USE_SCHEDULER
 1

	)

5984 #iâdeà
APP_TIMER_KEEPS_RTC_ACTIVE


5985 
	#APP_TIMER_KEEPS_RTC_ACTIVE
 0

	)

5994 #iâdeà
APP_TIMER_WITH_PROFILER


5995 
	#APP_TIMER_WITH_PROFILER
 0

	)

6001 #iâdeà
APP_TIMER_CONFIG_SWI_NUMBER


6002 
	#APP_TIMER_CONFIG_SWI_NUMBER
 0

	)

6013 #iâdeà
APP_USBD_AUDIO_ENABLED


6014 
	#APP_USBD_AUDIO_ENABLED
 0

	)

6020 #iâdeà
APP_USBD_CDC_ACM_ENABLED


6021 
	#APP_USBD_CDC_ACM_ENABLED
 0

	)

6026 #iâdeà
APP_USBD_ENABLED


6027 
	#APP_USBD_ENABLED
 0

	)

6034 #iâdeà
APP_USBD_VID


6035 
	#APP_USBD_VID
 0

	)

6043 #iâdeà
APP_USBD_PID


6044 
	#APP_USBD_PID
 0

	)

6052 #iâdeà
APP_USBD_DEVICE_VER_MAJOR


6053 
	#APP_USBD_DEVICE_VER_MAJOR
 1

	)

6061 #iâdeà
APP_USBD_DEVICE_VER_MINOR


6062 
	#APP_USBD_DEVICE_VER_MINOR
 0

	)

6068 #iâdeà
APP_USBD_CONFIG_SELF_POWERED


6069 
	#APP_USBD_CONFIG_SELF_POWERED
 1

	)

6075 #iâdeà
APP_USBD_CONFIG_MAX_POWER


6076 
	#APP_USBD_CONFIG_MAX_POWER
 500

	)

6084 #iâdeà
APP_USBD_CONFIG_POWER_EVENTS_PROCESS


6085 
	#APP_USBD_CONFIG_POWER_EVENTS_PROCESS
 1

	)

6095 #iâdeà
APP_USBD_CONFIG_EVENT_QUEUE_ENABLE


6096 
	#APP_USBD_CONFIG_EVENT_QUEUE_ENABLE
 1

	)

6103 #iâdeà
APP_USBD_CONFIG_EVENT_QUEUE_SIZE


6104 
	#APP_USBD_CONFIG_EVENT_QUEUE_SIZE
 32

	)

6118 #iâdeà
APP_USBD_CONFIG_SOF_HANDLING_MODE


6119 
	#APP_USBD_CONFIG_SOF_HANDLING_MODE
 1

	)

6133 #iâdeà
APP_USBD_CONFIG_SOF_TIMESTAMP_PROVIDE


6134 
	#APP_USBD_CONFIG_SOF_TIMESTAMP_PROVIDE
 0

	)

6139 #iâdeà
APP_USBD_CONFIG_LOG_ENABLED


6140 
	#APP_USBD_CONFIG_LOG_ENABLED
 0

	)

6150 #iâdeà
APP_USBD_CONFIG_LOG_LEVEL


6151 
	#APP_USBD_CONFIG_LOG_LEVEL
 3

	)

6166 #iâdeà
APP_USBD_CONFIG_INFO_COLOR


6167 
	#APP_USBD_CONFIG_INFO_COLOR
 0

	)

6182 #iâdeà
APP_USBD_CONFIG_DEBUG_COLOR


6183 
	#APP_USBD_CONFIG_DEBUG_COLOR
 0

	)

6193 #iâdeà
APP_USBD_HID_ENABLED


6194 
	#APP_USBD_HID_ENABLED
 0

	)

6200 #iâdeà
APP_USBD_HID_GENERIC_ENABLED


6201 
	#APP_USBD_HID_GENERIC_ENABLED
 0

	)

6207 #iâdeà
APP_USBD_HID_KBD_ENABLED


6208 
	#APP_USBD_HID_KBD_ENABLED
 0

	)

6214 #iâdeà
APP_USBD_HID_MOUSE_ENABLED


6215 
	#APP_USBD_HID_MOUSE_ENABLED
 0

	)

6221 #iâdeà
APP_USBD_MSC_ENABLED


6222 
	#APP_USBD_MSC_ENABLED
 0

	)

6228 #iâdeà
CRC16_ENABLED


6229 
	#CRC16_ENABLED
 1

	)

6235 #iâdeà
CRC32_ENABLED


6236 
	#CRC32_ENABLED
 0

	)

6242 #iâdeà
ECC_ENABLED


6243 
	#ECC_ENABLED
 0

	)

6248 #iâdeà
FDS_ENABLED


6249 
	#FDS_ENABLED
 1

	)

6260 #iâdeà
FDS_VIRTUAL_PAGES


6261 
	#FDS_VIRTUAL_PAGES
 3

	)

6273 #iâdeà
FDS_VIRTUAL_PAGE_SIZE


6274 
	#FDS_VIRTUAL_PAGE_SIZE
 1024

	)

6292 #iâdeà
FDS_BACKEND


6293 
	#FDS_BACKEND
 2

	)

6305 #iâdeà
FDS_OP_QUEUE_SIZE


6306 
	#FDS_OP_QUEUE_SIZE
 4

	)

6321 #iâdeà
FDS_CRC_CHECK_ON_READ


6322 
	#FDS_CRC_CHECK_ON_READ
 0

	)

6332 #iâdeà
FDS_CRC_CHECK_ON_WRITE


6333 
	#FDS_CRC_CHECK_ON_WRITE
 0

	)

6345 #iâdeà
FDS_MAX_USERS


6346 
	#FDS_MAX_USERS
 4

	)

6356 #iâdeà
HARDFAULT_HANDLER_ENABLED


6357 
	#HARDFAULT_HANDLER_ENABLED
 0

	)

6370 #iâdeà
HARDFAULT_HANDLER_GDB_PSP_BACKTRACE


6371 
	#HARDFAULT_HANDLER_GDB_PSP_BACKTRACE
 1

	)

6378 #iâdeà
HCI_MEM_POOL_ENABLED


6379 
	#HCI_MEM_POOL_ENABLED
 0

	)

6382 #iâdeà
HCI_TX_BUF_SIZE


6383 
	#HCI_TX_BUF_SIZE
 600

	)

6387 #iâdeà
HCI_RX_BUF_SIZE


6388 
	#HCI_RX_BUF_SIZE
 600

	)

6392 #iâdeà
HCI_RX_BUF_QUEUE_SIZE


6393 
	#HCI_RX_BUF_QUEUE_SIZE
 4

	)

6400 #iâdeà
HCI_SLIP_ENABLED


6401 
	#HCI_SLIP_ENABLED
 0

	)

6422 #iâdeà
HCI_UART_BAUDRATE


6423 
	#HCI_UART_BAUDRATE
 30801920

	)

6431 #iâdeà
HCI_UART_FLOW_CONTROL


6432 
	#HCI_UART_FLOW_CONTROL
 0

	)

6436 #iâdeà
HCI_UART_RX_PIN


6437 
	#HCI_UART_RX_PIN
 8

	)

6441 #iâdeà
HCI_UART_TX_PIN


6442 
	#HCI_UART_TX_PIN
 6

	)

6446 #iâdeà
HCI_UART_RTS_PIN


6447 
	#HCI_UART_RTS_PIN
 5

	)

6451 #iâdeà
HCI_UART_CTS_PIN


6452 
	#HCI_UART_CTS_PIN
 7

	)

6459 #iâdeà
HCI_TRANSPORT_ENABLED


6460 
	#HCI_TRANSPORT_ENABLED
 0

	)

6463 #iâdeà
HCI_MAX_PACKET_SIZE_IN_BITS


6464 
	#HCI_MAX_PACKET_SIZE_IN_BITS
 8000

	)

6472 #iâdeà
LED_SOFTBLINK_ENABLED


6473 
	#LED_SOFTBLINK_ENABLED
 0

	)

6479 #iâdeà
LOW_POWER_PWM_ENABLED


6480 
	#LOW_POWER_PWM_ENABLED
 0

	)

6485 #iâdeà
MEM_MANAGER_ENABLED


6486 
	#MEM_MANAGER_ENABLED
 0

	)

6491 #iâdeà
MEMORY_MANAGER_SMALL_BLOCK_COUNT


6492 
	#MEMORY_MANAGER_SMALL_BLOCK_COUNT
 1

	)

6498 #iâdeà
MEMORY_MANAGER_SMALL_BLOCK_SIZE


6499 
	#MEMORY_MANAGER_SMALL_BLOCK_SIZE
 32

	)

6505 #iâdeà
MEMORY_MANAGER_MEDIUM_BLOCK_COUNT


6506 
	#MEMORY_MANAGER_MEDIUM_BLOCK_COUNT
 0

	)

6512 #iâdeà
MEMORY_MANAGER_MEDIUM_BLOCK_SIZE


6513 
	#MEMORY_MANAGER_MEDIUM_BLOCK_SIZE
 256

	)

6519 #iâdeà
MEMORY_MANAGER_LARGE_BLOCK_COUNT


6520 
	#MEMORY_MANAGER_LARGE_BLOCK_COUNT
 0

	)

6526 #iâdeà
MEMORY_MANAGER_LARGE_BLOCK_SIZE


6527 
	#MEMORY_MANAGER_LARGE_BLOCK_SIZE
 256

	)

6533 #iâdeà
MEMORY_MANAGER_XLARGE_BLOCK_COUNT


6534 
	#MEMORY_MANAGER_XLARGE_BLOCK_COUNT
 0

	)

6540 #iâdeà
MEMORY_MANAGER_XLARGE_BLOCK_SIZE


6541 
	#MEMORY_MANAGER_XLARGE_BLOCK_SIZE
 1320

	)

6547 #iâdeà
MEMORY_MANAGER_XXLARGE_BLOCK_COUNT


6548 
	#MEMORY_MANAGER_XXLARGE_BLOCK_COUNT
 0

	)

6554 #iâdeà
MEMORY_MANAGER_XXLARGE_BLOCK_SIZE


6555 
	#MEMORY_MANAGER_XXLARGE_BLOCK_SIZE
 3444

	)

6561 #iâdeà
MEMORY_MANAGER_XSMALL_BLOCK_COUNT


6562 
	#MEMORY_MANAGER_XSMALL_BLOCK_COUNT
 0

	)

6568 #iâdeà
MEMORY_MANAGER_XSMALL_BLOCK_SIZE


6569 
	#MEMORY_MANAGER_XSMALL_BLOCK_SIZE
 64

	)

6575 #iâdeà
MEMORY_MANAGER_XXSMALL_BLOCK_COUNT


6576 
	#MEMORY_MANAGER_XXSMALL_BLOCK_COUNT
 0

	)

6582 #iâdeà
MEMORY_MANAGER_XXSMALL_BLOCK_SIZE


6583 
	#MEMORY_MANAGER_XXSMALL_BLOCK_SIZE
 32

	)

6588 #iâdeà
MEM_MANAGER_CONFIG_LOG_ENABLED


6589 
	#MEM_MANAGER_CONFIG_LOG_ENABLED
 0

	)

6599 #iâdeà
MEM_MANAGER_CONFIG_LOG_LEVEL


6600 
	#MEM_MANAGER_CONFIG_LOG_LEVEL
 3

	)

6615 #iâdeà
MEM_MANAGER_CONFIG_INFO_COLOR


6616 
	#MEM_MANAGER_CONFIG_INFO_COLOR
 0

	)

6631 #iâdeà
MEM_MANAGER_CONFIG_DEBUG_COLOR


6632 
	#MEM_MANAGER_CONFIG_DEBUG_COLOR
 0

	)

6640 #iâdeà
MEM_MANAGER_DISABLE_API_PARAM_CHECK


6641 
	#MEM_MANAGER_DISABLE_API_PARAM_CHECK
 0

	)

6648 #iâdeà
NRF_BALLOC_ENABLED


6649 
	#NRF_BALLOC_ENABLED
 1

	)

6653 #iâdeà
NRF_BALLOC_CONFIG_DEBUG_ENABLED


6654 
	#NRF_BALLOC_CONFIG_DEBUG_ENABLED
 0

	)

6659 #iâdeà
NRF_BALLOC_CONFIG_HEAD_GUARD_WORDS


6660 
	#NRF_BALLOC_CONFIG_HEAD_GUARD_WORDS
 1

	)

6666 #iâdeà
NRF_BALLOC_CONFIG_TAIL_GUARD_WORDS


6667 
	#NRF_BALLOC_CONFIG_TAIL_GUARD_WORDS
 1

	)

6673 #iâdeà
NRF_BALLOC_CONFIG_BASIC_CHECKS_ENABLED


6674 
	#NRF_BALLOC_CONFIG_BASIC_CHECKS_ENABLED
 0

	)

6680 #iâdeà
NRF_BALLOC_CONFIG_DOUBLE_FREE_CHECK_ENABLED


6681 
	#NRF_BALLOC_CONFIG_DOUBLE_FREE_CHECK_ENABLED
 0

	)

6687 #iâdeà
NRF_BALLOC_CONFIG_DATA_TRASHING_CHECK_ENABLED


6688 
	#NRF_BALLOC_CONFIG_DATA_TRASHING_CHECK_ENABLED
 0

	)

6694 #iâdeà
NRF_BALLOC_CLI_CMDS


6695 
	#NRF_BALLOC_CLI_CMDS
 0

	)

6704 #iâdeà
NRF_CSENSE_ENABLED


6705 
	#NRF_CSENSE_ENABLED
 0

	)

6708 #iâdeà
NRF_CSENSE_PAD_HYSTERESIS


6709 
	#NRF_CSENSE_PAD_HYSTERESIS
 15

	)

6713 #iâdeà
NRF_CSENSE_PAD_DEVIATION


6714 
	#NRF_CSENSE_PAD_DEVIATION
 70

	)

6718 #iâdeà
NRF_CSENSE_MIN_PAD_VALUE


6719 
	#NRF_CSENSE_MIN_PAD_VALUE
 20

	)

6723 #iâdeà
NRF_CSENSE_MAX_PADS_NUMBER


6724 
	#NRF_CSENSE_MAX_PADS_NUMBER
 20

	)

6728 #iâdeà
NRF_CSENSE_MAX_VALUE


6729 
	#NRF_CSENSE_MAX_VALUE
 1000

	)

6735 #iâdeà
NRF_CSENSE_OUTPUT_PIN


6736 
	#NRF_CSENSE_OUTPUT_PIN
 26

	)

6743 #iâdeà
NRF_DRV_CSENSE_ENABLED


6744 
	#NRF_DRV_CSENSE_ENABLED
 0

	)

6750 #iâdeà
USE_COMP


6751 
	#USE_COMP
 0

	)

6754 #iâdeà
TIMER0_FOR_CSENSE


6755 
	#TIMER0_FOR_CSENSE
 1

	)

6759 #iâdeà
TIMER1_FOR_CSENSE


6760 
	#TIMER1_FOR_CSENSE
 2

	)

6768 #iâdeà
MEASUREMENT_PERIOD


6769 
	#MEASUREMENT_PERIOD
 20

	)

6779 #iâdeà
NRF_FPRINTF_ENABLED


6780 
	#NRF_FPRINTF_ENABLED
 1

	)

6785 #iâdeà
NRF_FSTORAGE_ENABLED


6786 
	#NRF_FSTORAGE_ENABLED
 1

	)

6799 #iâdeà
NRF_FSTORAGE_PARAM_CHECK_DISABLED


6800 
	#NRF_FSTORAGE_PARAM_CHECK_DISABLED
 0

	)

6813 #iâdeà
NRF_FSTORAGE_SD_QUEUE_SIZE


6814 
	#NRF_FSTORAGE_SD_QUEUE_SIZE
 4

	)

6821 #iâdeà
NRF_FSTORAGE_SD_MAX_RETRIES


6822 
	#NRF_FSTORAGE_SD_MAX_RETRIES
 8

	)

6831 #iâdeà
NRF_FSTORAGE_SD_MAX_WRITE_SIZE


6832 
	#NRF_FSTORAGE_SD_MAX_WRITE_SIZE
 4096

	)

6843 #iâdeà
NRF_GFX_ENABLED


6844 
	#NRF_GFX_ENABLED
 0

	)

6850 #iâdeà
NRF_MEMOBJ_ENABLED


6851 
	#NRF_MEMOBJ_ENABLED
 1

	)

6856 #iâdeà
NRF_PWR_MGMT_ENABLED


6857 
	#NRF_PWR_MGMT_ENABLED
 1

	)

6863 #iâdeà
NRF_PWR_MGMT_CONFIG_DEBUG_PIN_ENABLED


6864 
	#NRF_PWR_MGMT_CONFIG_DEBUG_PIN_ENABLED
 0

	)

6918 #iâdeà
NRF_PWR_MGMT_SLEEP_DEBUG_PIN


6919 
	#NRF_PWR_MGMT_SLEEP_DEBUG_PIN
 31

	)

6929 #iâdeà
NRF_PWR_MGMT_CONFIG_CPU_USAGE_MONITOR_ENABLED


6930 
	#NRF_PWR_MGMT_CONFIG_CPU_USAGE_MONITOR_ENABLED
 0

	)

6935 #iâdeà
NRF_PWR_MGMT_CONFIG_STANDBY_TIMEOUT_ENABLED


6936 
	#NRF_PWR_MGMT_CONFIG_STANDBY_TIMEOUT_ENABLED
 0

	)

6941 #iâdeà
NRF_PWR_MGMT_CONFIG_STANDBY_TIMEOUT_S


6942 
	#NRF_PWR_MGMT_CONFIG_STANDBY_TIMEOUT_S
 3

	)

6950 #iâdeà
NRF_PWR_MGMT_CONFIG_FPU_SUPPORT_ENABLED


6951 
	#NRF_PWR_MGMT_CONFIG_FPU_SUPPORT_ENABLED
 1

	)

6957 #iâdeà
NRF_PWR_MGMT_CONFIG_AUTO_SHUTDOWN_RETRY


6958 
	#NRF_PWR_MGMT_CONFIG_AUTO_SHUTDOWN_RETRY
 0

	)

6964 #iâdeà
NRF_PWR_MGMT_CONFIG_USE_SCHEDULER


6965 
	#NRF_PWR_MGMT_CONFIG_USE_SCHEDULER
 0

	)

6971 #iâdeà
NRF_PWR_MGMT_CONFIG_HANDLER_PRIORITY_COUNT


6972 
	#NRF_PWR_MGMT_CONFIG_HANDLER_PRIORITY_COUNT
 3

	)

6979 #iâdeà
NRF_QUEUE_ENABLED


6980 
	#NRF_QUEUE_ENABLED
 0

	)

6985 #iâdeà
NRF_QUEUE_CLI_CMDS


6986 
	#NRF_QUEUE_CLI_CMDS
 0

	)

6994 #iâdeà
NRF_SECTION_ITER_ENABLED


6995 
	#NRF_SECTION_ITER_ENABLED
 1

	)

7001 #iâdeà
NRF_SORTLIST_ENABLED


7002 
	#NRF_SORTLIST_ENABLED
 0

	)

7008 #iâdeà
NRF_SPI_MNGR_ENABLED


7009 
	#NRF_SPI_MNGR_ENABLED
 0

	)

7015 #iâdeà
NRF_STRERROR_ENABLED


7016 
	#NRF_STRERROR_ENABLED
 1

	)

7022 #iâdeà
NRF_TWI_MNGR_ENABLED


7023 
	#NRF_TWI_MNGR_ENABLED
 0

	)

7029 #iâdeà
SLIP_ENABLED


7030 
	#SLIP_ENABLED
 0

	)

7035 #iâdeà
TASK_MANAGER_ENABLED


7036 
	#TASK_MANAGER_ENABLED
 0

	)

7041 #iâdeà
TASK_MANAGER_CLI_CMDS


7042 
	#TASK_MANAGER_CLI_CMDS
 0

	)

7046 #iâdeà
TASK_MANAGER_CONFIG_MAX_TASKS


7047 
	#TASK_MANAGER_CONFIG_MAX_TASKS
 2

	)

7051 #iâdeà
TASK_MANAGER_CONFIG_STACK_SIZE


7052 
	#TASK_MANAGER_CONFIG_STACK_SIZE
 1024

	)

7058 #iâdeà
TASK_MANAGER_CONFIG_STACK_PROFILER_ENABLED


7059 
	#TASK_MANAGER_CONFIG_STACK_PROFILER_ENABLED
 1

	)

7071 #iâdeà
TASK_MANAGER_CONFIG_STACK_GUARD


7072 
	#TASK_MANAGER_CONFIG_STACK_GUARD
 7

	)

7083 #iâdeà
BUTTON_ENABLED


7084 
	#BUTTON_ENABLED
 1

	)

7090 #iâdeà
BUTTON_HIGH_ACCURACY_ENABLED


7091 
	#BUTTON_HIGH_ACCURACY_ENABLED
 0

	)

7103 #iâdeà
NRF_CLI_ENABLED


7104 
	#NRF_CLI_ENABLED
 0

	)

7108 #iâdeà
NRF_CLI_ARGC_MAX


7109 
	#NRF_CLI_ARGC_MAX
 12

	)

7115 #iâdeà
NRF_CLI_BUILD_IN_CMDS_ENABLED


7116 
	#NRF_CLI_BUILD_IN_CMDS_ENABLED
 1

	)

7120 #iâdeà
NRF_CLI_CMD_BUFF_SIZE


7121 
	#NRF_CLI_CMD_BUFF_SIZE
 128

	)

7127 #iâdeà
NRF_CLI_ECHO_STATUS


7128 
	#NRF_CLI_ECHO_STATUS
 1

	)

7134 #iâdeà
NRF_CLI_WILDCARD_ENABLED


7135 
	#NRF_CLI_WILDCARD_ENABLED
 0

	)

7139 #iâdeà
NRF_CLI_PRINTF_BUFF_SIZE


7140 
	#NRF_CLI_PRINTF_BUFF_SIZE
 23

	)

7145 #iâdeà
NRF_CLI_HISTORY_ENABLED


7146 
	#NRF_CLI_HISTORY_ENABLED
 1

	)

7149 #iâdeà
NRF_CLI_HISTORY_ELEMENT_SIZE


7150 
	#NRF_CLI_HISTORY_ELEMENT_SIZE
 32

	)

7154 #iâdeà
NRF_CLI_HISTORY_ELEMENT_COUNT


7155 
	#NRF_CLI_HISTORY_ELEMENT_COUNT
 8

	)

7163 #iâdeà
NRF_CLI_VT100_COLORS_ENABLED


7164 
	#NRF_CLI_VT100_COLORS_ENABLED
 1

	)

7170 #iâdeà
NRF_CLI_STATISTICS_ENABLED


7171 
	#NRF_CLI_STATISTICS_ENABLED
 1

	)

7177 #iâdeà
NRF_CLI_LOG_BACKEND


7178 
	#NRF_CLI_LOG_BACKEND
 1

	)

7184 #iâdeà
NRF_CLI_USES_TASK_MANAGER_ENABLED


7185 
	#NRF_CLI_USES_TASK_MANAGER_ENABLED
 0

	)

7199 #iâdeà
NRF_LOG_BACKEND_RTT_ENABLED


7200 
	#NRF_LOG_BACKEND_RTT_ENABLED
 1

	)

7208 #iâdeà
NRF_LOG_BACKEND_RTT_TEMP_BUFFER_SIZE


7209 
	#NRF_LOG_BACKEND_RTT_TEMP_BUFFER_SIZE
 320

	)

7213 #iâdeà
NRF_LOG_BACKEND_RTT_TX_RETRY_DELAY_MS


7214 
	#NRF_LOG_BACKEND_RTT_TX_RETRY_DELAY_MS
 1

	)

7224 #iâdeà
NRF_LOG_BACKEND_RTT_TX_RETRY_CNT


7225 
	#NRF_LOG_BACKEND_RTT_TX_RETRY_CNT
 3

	)

7232 #iâdeà
NRF_LOG_BACKEND_UART_ENABLED


7233 
	#NRF_LOG_BACKEND_UART_ENABLED
 0

	)

7236 #iâdeà
NRF_LOG_BACKEND_UART_TX_PIN


7237 
	#NRF_LOG_BACKEND_UART_TX_PIN
 6

	)

7259 #iâdeà
NRF_LOG_BACKEND_UART_BAUDRATE


7260 
	#NRF_LOG_BACKEND_UART_BAUDRATE
 30801920

	)

7269 #iâdeà
NRF_LOG_BACKEND_UART_TEMP_BUFFER_SIZE


7270 
	#NRF_LOG_BACKEND_UART_TEMP_BUFFER_SIZE
 64

	)

7278 #iâdeà
NRF_LOG_STR_FORMATTER_TIMESTAMP_FORMAT_ENABLED


7279 
	#NRF_LOG_STR_FORMATTER_TIMESTAMP_FORMAT_ENABLED
 1

	)

7287 #iâdeà
NRF_LOG_ENABLED


7288 
	#NRF_LOG_ENABLED
 1

	)

7292 #iâdeà
NRF_LOG_USES_COLORS


7293 
	#NRF_LOG_USES_COLORS
 0

	)

7307 #iâdeà
NRF_LOG_COLOR_DEFAULT


7308 
	#NRF_LOG_COLOR_DEFAULT
 0

	)

7323 #iâdeà
NRF_LOG_ERROR_COLOR


7324 
	#NRF_LOG_ERROR_COLOR
 2

	)

7339 #iâdeà
NRF_LOG_WARNING_COLOR


7340 
	#NRF_LOG_WARNING_COLOR
 4

	)

7353 #iâdeà
NRF_LOG_DEFAULT_LEVEL


7354 
	#NRF_LOG_DEFAULT_LEVEL
 3

	)

7362 #iâdeà
NRF_LOG_DEFERRED


7363 
	#NRF_LOG_DEFERRED
 1

	)

7380 #iâdeà
NRF_LOG_BUFSIZE


7381 
	#NRF_LOG_BUFSIZE
 1024

	)

7390 #iâdeà
NRF_LOG_ALLOW_OVERFLOW


7391 
	#NRF_LOG_ALLOW_OVERFLOW
 1

	)

7398 #iâdeà
NRF_LOG_USES_TIMESTAMP


7399 
	#NRF_LOG_USES_TIMESTAMP
 0

	)

7402 #iâdeà
NRF_LOG_TIMESTAMP_DEFAULT_FREQUENCY


7403 
	#NRF_LOG_TIMESTAMP_DEFAULT_FREQUENCY
 32768

	)

7411 #iâdeà
NRF_LOG_FILTERS_ENABLED


7412 
	#NRF_LOG_FILTERS_ENABLED
 0

	)

7418 #iâdeà
NRF_LOG_CLI_CMDS


7419 
	#NRF_LOG_CLI_CMDS
 0

	)

7431 #iâdeà
NRF_LOG_MSGPOOL_ELEMENT_SIZE


7432 
	#NRF_LOG_MSGPOOL_ELEMENT_SIZE
 20

	)

7441 #iâdeà
NRF_LOG_MSGPOOL_ELEMENT_COUNT


7442 
	#NRF_LOG_MSGPOOL_ELEMENT_COUNT
 8

	)

7458 #iâdeà
NRF_MPU_CONFIG_LOG_ENABLED


7459 
	#NRF_MPU_CONFIG_LOG_ENABLED
 0

	)

7469 #iâdeà
NRF_MPU_CONFIG_LOG_LEVEL


7470 
	#NRF_MPU_CONFIG_LOG_LEVEL
 3

	)

7485 #iâdeà
NRF_MPU_CONFIG_INFO_COLOR


7486 
	#NRF_MPU_CONFIG_INFO_COLOR
 0

	)

7501 #iâdeà
NRF_MPU_CONFIG_DEBUG_COLOR


7502 
	#NRF_MPU_CONFIG_DEBUG_COLOR
 0

	)

7509 #iâdeà
NRF_STACK_GUARD_CONFIG_LOG_ENABLED


7510 
	#NRF_STACK_GUARD_CONFIG_LOG_ENABLED
 0

	)

7520 #iâdeà
NRF_STACK_GUARD_CONFIG_LOG_LEVEL


7521 
	#NRF_STACK_GUARD_CONFIG_LOG_LEVEL
 3

	)

7536 #iâdeà
NRF_STACK_GUARD_CONFIG_INFO_COLOR


7537 
	#NRF_STACK_GUARD_CONFIG_INFO_COLOR
 0

	)

7552 #iâdeà
NRF_STACK_GUARD_CONFIG_DEBUG_COLOR


7553 
	#NRF_STACK_GUARD_CONFIG_DEBUG_COLOR
 0

	)

7560 #iâdeà
TASK_MANAGER_CONFIG_LOG_ENABLED


7561 
	#TASK_MANAGER_CONFIG_LOG_ENABLED
 0

	)

7571 #iâdeà
TASK_MANAGER_CONFIG_LOG_LEVEL


7572 
	#TASK_MANAGER_CONFIG_LOG_LEVEL
 3

	)

7587 #iâdeà
TASK_MANAGER_CONFIG_INFO_COLOR


7588 
	#TASK_MANAGER_CONFIG_INFO_COLOR
 0

	)

7603 #iâdeà
TASK_MANAGER_CONFIG_DEBUG_COLOR


7604 
	#TASK_MANAGER_CONFIG_DEBUG_COLOR
 0

	)

7617 #iâdeà
CLOCK_CONFIG_LOG_ENABLED


7618 
	#CLOCK_CONFIG_LOG_ENABLED
 0

	)

7628 #iâdeà
CLOCK_CONFIG_LOG_LEVEL


7629 
	#CLOCK_CONFIG_LOG_LEVEL
 3

	)

7644 #iâdeà
CLOCK_CONFIG_INFO_COLOR


7645 
	#CLOCK_CONFIG_INFO_COLOR
 0

	)

7660 #iâdeà
CLOCK_CONFIG_DEBUG_COLOR


7661 
	#CLOCK_CONFIG_DEBUG_COLOR
 0

	)

7668 #iâdeà
COMP_CONFIG_LOG_ENABLED


7669 
	#COMP_CONFIG_LOG_ENABLED
 0

	)

7679 #iâdeà
COMP_CONFIG_LOG_LEVEL


7680 
	#COMP_CONFIG_LOG_LEVEL
 3

	)

7695 #iâdeà
COMP_CONFIG_INFO_COLOR


7696 
	#COMP_CONFIG_INFO_COLOR
 0

	)

7711 #iâdeà
COMP_CONFIG_DEBUG_COLOR


7712 
	#COMP_CONFIG_DEBUG_COLOR
 0

	)

7719 #iâdeà
GPIOTE_CONFIG_LOG_ENABLED


7720 
	#GPIOTE_CONFIG_LOG_ENABLED
 0

	)

7730 #iâdeà
GPIOTE_CONFIG_LOG_LEVEL


7731 
	#GPIOTE_CONFIG_LOG_LEVEL
 3

	)

7746 #iâdeà
GPIOTE_CONFIG_INFO_COLOR


7747 
	#GPIOTE_CONFIG_INFO_COLOR
 0

	)

7762 #iâdeà
GPIOTE_CONFIG_DEBUG_COLOR


7763 
	#GPIOTE_CONFIG_DEBUG_COLOR
 0

	)

7770 #iâdeà
LPCOMP_CONFIG_LOG_ENABLED


7771 
	#LPCOMP_CONFIG_LOG_ENABLED
 0

	)

7781 #iâdeà
LPCOMP_CONFIG_LOG_LEVEL


7782 
	#LPCOMP_CONFIG_LOG_LEVEL
 3

	)

7797 #iâdeà
LPCOMP_CONFIG_INFO_COLOR


7798 
	#LPCOMP_CONFIG_INFO_COLOR
 0

	)

7813 #iâdeà
LPCOMP_CONFIG_DEBUG_COLOR


7814 
	#LPCOMP_CONFIG_DEBUG_COLOR
 0

	)

7821 #iâdeà
PDM_CONFIG_LOG_ENABLED


7822 
	#PDM_CONFIG_LOG_ENABLED
 0

	)

7832 #iâdeà
PDM_CONFIG_LOG_LEVEL


7833 
	#PDM_CONFIG_LOG_LEVEL
 3

	)

7848 #iâdeà
PDM_CONFIG_INFO_COLOR


7849 
	#PDM_CONFIG_INFO_COLOR
 0

	)

7864 #iâdeà
PDM_CONFIG_DEBUG_COLOR


7865 
	#PDM_CONFIG_DEBUG_COLOR
 0

	)

7872 #iâdeà
PPI_CONFIG_LOG_ENABLED


7873 
	#PPI_CONFIG_LOG_ENABLED
 0

	)

7883 #iâdeà
PPI_CONFIG_LOG_LEVEL


7884 
	#PPI_CONFIG_LOG_LEVEL
 3

	)

7899 #iâdeà
PPI_CONFIG_INFO_COLOR


7900 
	#PPI_CONFIG_INFO_COLOR
 0

	)

7915 #iâdeà
PPI_CONFIG_DEBUG_COLOR


7916 
	#PPI_CONFIG_DEBUG_COLOR
 0

	)

7923 #iâdeà
PWM_CONFIG_LOG_ENABLED


7924 
	#PWM_CONFIG_LOG_ENABLED
 0

	)

7934 #iâdeà
PWM_CONFIG_LOG_LEVEL


7935 
	#PWM_CONFIG_LOG_LEVEL
 3

	)

7950 #iâdeà
PWM_CONFIG_INFO_COLOR


7951 
	#PWM_CONFIG_INFO_COLOR
 0

	)

7966 #iâdeà
PWM_CONFIG_DEBUG_COLOR


7967 
	#PWM_CONFIG_DEBUG_COLOR
 0

	)

7974 #iâdeà
QDEC_CONFIG_LOG_ENABLED


7975 
	#QDEC_CONFIG_LOG_ENABLED
 0

	)

7985 #iâdeà
QDEC_CONFIG_LOG_LEVEL


7986 
	#QDEC_CONFIG_LOG_LEVEL
 3

	)

8001 #iâdeà
QDEC_CONFIG_INFO_COLOR


8002 
	#QDEC_CONFIG_INFO_COLOR
 0

	)

8017 #iâdeà
QDEC_CONFIG_DEBUG_COLOR


8018 
	#QDEC_CONFIG_DEBUG_COLOR
 0

	)

8025 #iâdeà
RNG_CONFIG_LOG_ENABLED


8026 
	#RNG_CONFIG_LOG_ENABLED
 0

	)

8036 #iâdeà
RNG_CONFIG_LOG_LEVEL


8037 
	#RNG_CONFIG_LOG_LEVEL
 3

	)

8052 #iâdeà
RNG_CONFIG_INFO_COLOR


8053 
	#RNG_CONFIG_INFO_COLOR
 0

	)

8068 #iâdeà
RNG_CONFIG_DEBUG_COLOR


8069 
	#RNG_CONFIG_DEBUG_COLOR
 0

	)

8075 #iâdeà
RNG_CONFIG_RANDOM_NUMBER_LOG_ENABLED


8076 
	#RNG_CONFIG_RANDOM_NUMBER_LOG_ENABLED
 0

	)

8083 #iâdeà
RTC_CONFIG_LOG_ENABLED


8084 
	#RTC_CONFIG_LOG_ENABLED
 0

	)

8094 #iâdeà
RTC_CONFIG_LOG_LEVEL


8095 
	#RTC_CONFIG_LOG_LEVEL
 3

	)

8110 #iâdeà
RTC_CONFIG_INFO_COLOR


8111 
	#RTC_CONFIG_INFO_COLOR
 0

	)

8126 #iâdeà
RTC_CONFIG_DEBUG_COLOR


8127 
	#RTC_CONFIG_DEBUG_COLOR
 0

	)

8134 #iâdeà
SAADC_CONFIG_LOG_ENABLED


8135 
	#SAADC_CONFIG_LOG_ENABLED
 0

	)

8145 #iâdeà
SAADC_CONFIG_LOG_LEVEL


8146 
	#SAADC_CONFIG_LOG_LEVEL
 3

	)

8161 #iâdeà
SAADC_CONFIG_INFO_COLOR


8162 
	#SAADC_CONFIG_INFO_COLOR
 0

	)

8177 #iâdeà
SAADC_CONFIG_DEBUG_COLOR


8178 
	#SAADC_CONFIG_DEBUG_COLOR
 0

	)

8185 #iâdeà
SPIS_CONFIG_LOG_ENABLED


8186 
	#SPIS_CONFIG_LOG_ENABLED
 0

	)

8196 #iâdeà
SPIS_CONFIG_LOG_LEVEL


8197 
	#SPIS_CONFIG_LOG_LEVEL
 3

	)

8212 #iâdeà
SPIS_CONFIG_INFO_COLOR


8213 
	#SPIS_CONFIG_INFO_COLOR
 0

	)

8228 #iâdeà
SPIS_CONFIG_DEBUG_COLOR


8229 
	#SPIS_CONFIG_DEBUG_COLOR
 0

	)

8236 #iâdeà
SPI_CONFIG_LOG_ENABLED


8237 
	#SPI_CONFIG_LOG_ENABLED
 0

	)

8247 #iâdeà
SPI_CONFIG_LOG_LEVEL


8248 
	#SPI_CONFIG_LOG_LEVEL
 3

	)

8263 #iâdeà
SPI_CONFIG_INFO_COLOR


8264 
	#SPI_CONFIG_INFO_COLOR
 0

	)

8279 #iâdeà
SPI_CONFIG_DEBUG_COLOR


8280 
	#SPI_CONFIG_DEBUG_COLOR
 0

	)

8287 #iâdeà
TIMER_CONFIG_LOG_ENABLED


8288 
	#TIMER_CONFIG_LOG_ENABLED
 0

	)

8298 #iâdeà
TIMER_CONFIG_LOG_LEVEL


8299 
	#TIMER_CONFIG_LOG_LEVEL
 3

	)

8314 #iâdeà
TIMER_CONFIG_INFO_COLOR


8315 
	#TIMER_CONFIG_INFO_COLOR
 0

	)

8330 #iâdeà
TIMER_CONFIG_DEBUG_COLOR


8331 
	#TIMER_CONFIG_DEBUG_COLOR
 0

	)

8338 #iâdeà
TWIS_CONFIG_LOG_ENABLED


8339 
	#TWIS_CONFIG_LOG_ENABLED
 0

	)

8349 #iâdeà
TWIS_CONFIG_LOG_LEVEL


8350 
	#TWIS_CONFIG_LOG_LEVEL
 3

	)

8365 #iâdeà
TWIS_CONFIG_INFO_COLOR


8366 
	#TWIS_CONFIG_INFO_COLOR
 0

	)

8381 #iâdeà
TWIS_CONFIG_DEBUG_COLOR


8382 
	#TWIS_CONFIG_DEBUG_COLOR
 0

	)

8389 #iâdeà
TWI_CONFIG_LOG_ENABLED


8390 
	#TWI_CONFIG_LOG_ENABLED
 0

	)

8400 #iâdeà
TWI_CONFIG_LOG_LEVEL


8401 
	#TWI_CONFIG_LOG_LEVEL
 3

	)

8416 #iâdeà
TWI_CONFIG_INFO_COLOR


8417 
	#TWI_CONFIG_INFO_COLOR
 0

	)

8432 #iâdeà
TWI_CONFIG_DEBUG_COLOR


8433 
	#TWI_CONFIG_DEBUG_COLOR
 0

	)

8440 #iâdeà
UART_CONFIG_LOG_ENABLED


8441 
	#UART_CONFIG_LOG_ENABLED
 0

	)

8451 #iâdeà
UART_CONFIG_LOG_LEVEL


8452 
	#UART_CONFIG_LOG_LEVEL
 3

	)

8467 #iâdeà
UART_CONFIG_INFO_COLOR


8468 
	#UART_CONFIG_INFO_COLOR
 0

	)

8483 #iâdeà
UART_CONFIG_DEBUG_COLOR


8484 
	#UART_CONFIG_DEBUG_COLOR
 0

	)

8491 #iâdeà
USBD_CONFIG_LOG_ENABLED


8492 
	#USBD_CONFIG_LOG_ENABLED
 0

	)

8502 #iâdeà
USBD_CONFIG_LOG_LEVEL


8503 
	#USBD_CONFIG_LOG_LEVEL
 3

	)

8518 #iâdeà
USBD_CONFIG_INFO_COLOR


8519 
	#USBD_CONFIG_INFO_COLOR
 0

	)

8534 #iâdeà
USBD_CONFIG_DEBUG_COLOR


8535 
	#USBD_CONFIG_DEBUG_COLOR
 0

	)

8542 #iâdeà
WDT_CONFIG_LOG_ENABLED


8543 
	#WDT_CONFIG_LOG_ENABLED
 0

	)

8553 #iâdeà
WDT_CONFIG_LOG_LEVEL


8554 
	#WDT_CONFIG_LOG_LEVEL
 3

	)

8569 #iâdeà
WDT_CONFIG_INFO_COLOR


8570 
	#WDT_CONFIG_INFO_COLOR
 0

	)

8585 #iâdeà
WDT_CONFIG_DEBUG_COLOR


8586 
	#WDT_CONFIG_DEBUG_COLOR
 0

	)

8599 #iâdeà
APP_TIMER_CONFIG_LOG_ENABLED


8600 
	#APP_TIMER_CONFIG_LOG_ENABLED
 0

	)

8610 #iâdeà
APP_TIMER_CONFIG_LOG_LEVEL


8611 
	#APP_TIMER_CONFIG_LOG_LEVEL
 3

	)

8626 #iâdeà
APP_TIMER_CONFIG_INITIAL_LOG_LEVEL


8627 
	#APP_TIMER_CONFIG_INITIAL_LOG_LEVEL
 3

	)

8642 #iâdeà
APP_TIMER_CONFIG_INFO_COLOR


8643 
	#APP_TIMER_CONFIG_INFO_COLOR
 0

	)

8658 #iâdeà
APP_TIMER_CONFIG_DEBUG_COLOR


8659 
	#APP_TIMER_CONFIG_DEBUG_COLOR
 0

	)

8666 #iâdeà
APP_USBD_CDC_ACM_CONFIG_LOG_ENABLED


8667 
	#APP_USBD_CDC_ACM_CONFIG_LOG_ENABLED
 0

	)

8677 #iâdeà
APP_USBD_CDC_ACM_CONFIG_LOG_LEVEL


8678 
	#APP_USBD_CDC_ACM_CONFIG_LOG_LEVEL
 3

	)

8693 #iâdeà
APP_USBD_CDC_ACM_CONFIG_INFO_COLOR


8694 
	#APP_USBD_CDC_ACM_CONFIG_INFO_COLOR
 0

	)

8709 #iâdeà
APP_USBD_CDC_ACM_CONFIG_DEBUG_COLOR


8710 
	#APP_USBD_CDC_ACM_CONFIG_DEBUG_COLOR
 0

	)

8717 #iâdeà
APP_USBD_DUMMY_CONFIG_LOG_ENABLED


8718 
	#APP_USBD_DUMMY_CONFIG_LOG_ENABLED
 0

	)

8728 #iâdeà
APP_USBD_DUMMY_CONFIG_LOG_LEVEL


8729 
	#APP_USBD_DUMMY_CONFIG_LOG_LEVEL
 3

	)

8744 #iâdeà
APP_USBD_DUMMY_CONFIG_INFO_COLOR


8745 
	#APP_USBD_DUMMY_CONFIG_INFO_COLOR
 0

	)

8760 #iâdeà
APP_USBD_DUMMY_CONFIG_DEBUG_COLOR


8761 
	#APP_USBD_DUMMY_CONFIG_DEBUG_COLOR
 0

	)

8768 #iâdeà
APP_USBD_MSC_CONFIG_LOG_ENABLED


8769 
	#APP_USBD_MSC_CONFIG_LOG_ENABLED
 0

	)

8779 #iâdeà
APP_USBD_MSC_CONFIG_LOG_LEVEL


8780 
	#APP_USBD_MSC_CONFIG_LOG_LEVEL
 3

	)

8795 #iâdeà
APP_USBD_MSC_CONFIG_INFO_COLOR


8796 
	#APP_USBD_MSC_CONFIG_INFO_COLOR
 0

	)

8811 #iâdeà
APP_USBD_MSC_CONFIG_DEBUG_COLOR


8812 
	#APP_USBD_MSC_CONFIG_DEBUG_COLOR
 0

	)

8819 #iâdeà
APP_USBD_NRF_DFU_TRIGGER_CONFIG_LOG_ENABLED


8820 
	#APP_USBD_NRF_DFU_TRIGGER_CONFIG_LOG_ENABLED
 0

	)

8830 #iâdeà
APP_USBD_NRF_DFU_TRIGGER_CONFIG_LOG_LEVEL


8831 
	#APP_USBD_NRF_DFU_TRIGGER_CONFIG_LOG_LEVEL
 3

	)

8846 #iâdeà
APP_USBD_NRF_DFU_TRIGGER_CONFIG_INFO_COLOR


8847 
	#APP_USBD_NRF_DFU_TRIGGER_CONFIG_INFO_COLOR
 0

	)

8862 #iâdeà
APP_USBD_NRF_DFU_TRIGGER_CONFIG_DEBUG_COLOR


8863 
	#APP_USBD_NRF_DFU_TRIGGER_CONFIG_DEBUG_COLOR
 0

	)

8870 #iâdeà
NRF_ATFIFO_CONFIG_LOG_ENABLED


8871 
	#NRF_ATFIFO_CONFIG_LOG_ENABLED
 0

	)

8881 #iâdeà
NRF_ATFIFO_CONFIG_LOG_LEVEL


8882 
	#NRF_ATFIFO_CONFIG_LOG_LEVEL
 3

	)

8893 #iâdeà
NRF_ATFIFO_CONFIG_LOG_INIT_FILTER_LEVEL


8894 
	#NRF_ATFIFO_CONFIG_LOG_INIT_FILTER_LEVEL
 3

	)

8909 #iâdeà
NRF_ATFIFO_CONFIG_INFO_COLOR


8910 
	#NRF_ATFIFO_CONFIG_INFO_COLOR
 0

	)

8925 #iâdeà
NRF_ATFIFO_CONFIG_DEBUG_COLOR


8926 
	#NRF_ATFIFO_CONFIG_DEBUG_COLOR
 0

	)

8933 #iâdeà
NRF_BALLOC_CONFIG_LOG_ENABLED


8934 
	#NRF_BALLOC_CONFIG_LOG_ENABLED
 0

	)

8944 #iâdeà
NRF_BALLOC_CONFIG_LOG_LEVEL


8945 
	#NRF_BALLOC_CONFIG_LOG_LEVEL
 3

	)

8960 #iâdeà
NRF_BALLOC_CONFIG_INITIAL_LOG_LEVEL


8961 
	#NRF_BALLOC_CONFIG_INITIAL_LOG_LEVEL
 3

	)

8976 #iâdeà
NRF_BALLOC_CONFIG_INFO_COLOR


8977 
	#NRF_BALLOC_CONFIG_INFO_COLOR
 0

	)

8992 #iâdeà
NRF_BALLOC_CONFIG_DEBUG_COLOR


8993 
	#NRF_BALLOC_CONFIG_DEBUG_COLOR
 0

	)

9000 #iâdeà
NRF_CLI_BLE_UART_CONFIG_LOG_ENABLED


9001 
	#NRF_CLI_BLE_UART_CONFIG_LOG_ENABLED
 0

	)

9011 #iâdeà
NRF_CLI_BLE_UART_CONFIG_LOG_LEVEL


9012 
	#NRF_CLI_BLE_UART_CONFIG_LOG_LEVEL
 3

	)

9027 #iâdeà
NRF_CLI_BLE_UART_CONFIG_INFO_COLOR


9028 
	#NRF_CLI_BLE_UART_CONFIG_INFO_COLOR
 0

	)

9043 #iâdeà
NRF_CLI_BLE_UART_CONFIG_DEBUG_COLOR


9044 
	#NRF_CLI_BLE_UART_CONFIG_DEBUG_COLOR
 0

	)

9051 #iâdeà
NRF_CLI_LIBUARTE_CONFIG_LOG_ENABLED


9052 
	#NRF_CLI_LIBUARTE_CONFIG_LOG_ENABLED
 0

	)

9062 #iâdeà
NRF_CLI_LIBUARTE_CONFIG_LOG_LEVEL


9063 
	#NRF_CLI_LIBUARTE_CONFIG_LOG_LEVEL
 3

	)

9078 #iâdeà
NRF_CLI_LIBUARTE_CONFIG_INFO_COLOR


9079 
	#NRF_CLI_LIBUARTE_CONFIG_INFO_COLOR
 0

	)

9094 #iâdeà
NRF_CLI_LIBUARTE_CONFIG_DEBUG_COLOR


9095 
	#NRF_CLI_LIBUARTE_CONFIG_DEBUG_COLOR
 0

	)

9102 #iâdeà
NRF_CLI_UART_CONFIG_LOG_ENABLED


9103 
	#NRF_CLI_UART_CONFIG_LOG_ENABLED
 0

	)

9113 #iâdeà
NRF_CLI_UART_CONFIG_LOG_LEVEL


9114 
	#NRF_CLI_UART_CONFIG_LOG_LEVEL
 3

	)

9129 #iâdeà
NRF_CLI_UART_CONFIG_INFO_COLOR


9130 
	#NRF_CLI_UART_CONFIG_INFO_COLOR
 0

	)

9145 #iâdeà
NRF_CLI_UART_CONFIG_DEBUG_COLOR


9146 
	#NRF_CLI_UART_CONFIG_DEBUG_COLOR
 0

	)

9153 #iâdeà
NRF_LIBUARTE_CONFIG_LOG_ENABLED


9154 
	#NRF_LIBUARTE_CONFIG_LOG_ENABLED
 0

	)

9164 #iâdeà
NRF_LIBUARTE_CONFIG_LOG_LEVEL


9165 
	#NRF_LIBUARTE_CONFIG_LOG_LEVEL
 3

	)

9180 #iâdeà
NRF_LIBUARTE_CONFIG_INFO_COLOR


9181 
	#NRF_LIBUARTE_CONFIG_INFO_COLOR
 0

	)

9196 #iâdeà
NRF_LIBUARTE_CONFIG_DEBUG_COLOR


9197 
	#NRF_LIBUARTE_CONFIG_DEBUG_COLOR
 0

	)

9204 #iâdeà
NRF_MEMOBJ_CONFIG_LOG_ENABLED


9205 
	#NRF_MEMOBJ_CONFIG_LOG_ENABLED
 0

	)

9215 #iâdeà
NRF_MEMOBJ_CONFIG_LOG_LEVEL


9216 
	#NRF_MEMOBJ_CONFIG_LOG_LEVEL
 3

	)

9231 #iâdeà
NRF_MEMOBJ_CONFIG_INFO_COLOR


9232 
	#NRF_MEMOBJ_CONFIG_INFO_COLOR
 0

	)

9247 #iâdeà
NRF_MEMOBJ_CONFIG_DEBUG_COLOR


9248 
	#NRF_MEMOBJ_CONFIG_DEBUG_COLOR
 0

	)

9255 #iâdeà
NRF_PWR_MGMT_CONFIG_LOG_ENABLED


9256 
	#NRF_PWR_MGMT_CONFIG_LOG_ENABLED
 0

	)

9266 #iâdeà
NRF_PWR_MGMT_CONFIG_LOG_LEVEL


9267 
	#NRF_PWR_MGMT_CONFIG_LOG_LEVEL
 3

	)

9282 #iâdeà
NRF_PWR_MGMT_CONFIG_INFO_COLOR


9283 
	#NRF_PWR_MGMT_CONFIG_INFO_COLOR
 0

	)

9298 #iâdeà
NRF_PWR_MGMT_CONFIG_DEBUG_COLOR


9299 
	#NRF_PWR_MGMT_CONFIG_DEBUG_COLOR
 0

	)

9306 #iâdeà
NRF_QUEUE_CONFIG_LOG_ENABLED


9307 
	#NRF_QUEUE_CONFIG_LOG_ENABLED
 0

	)

9317 #iâdeà
NRF_QUEUE_CONFIG_LOG_LEVEL


9318 
	#NRF_QUEUE_CONFIG_LOG_LEVEL
 3

	)

9329 #iâdeà
NRF_QUEUE_CONFIG_LOG_INIT_FILTER_LEVEL


9330 
	#NRF_QUEUE_CONFIG_LOG_INIT_FILTER_LEVEL
 3

	)

9345 #iâdeà
NRF_QUEUE_CONFIG_INFO_COLOR


9346 
	#NRF_QUEUE_CONFIG_INFO_COLOR
 0

	)

9361 #iâdeà
NRF_QUEUE_CONFIG_DEBUG_COLOR


9362 
	#NRF_QUEUE_CONFIG_DEBUG_COLOR
 0

	)

9369 #iâdeà
NRF_SDH_ANT_LOG_ENABLED


9370 
	#NRF_SDH_ANT_LOG_ENABLED
 0

	)

9380 #iâdeà
NRF_SDH_ANT_LOG_LEVEL


9381 
	#NRF_SDH_ANT_LOG_LEVEL
 3

	)

9396 #iâdeà
NRF_SDH_ANT_INFO_COLOR


9397 
	#NRF_SDH_ANT_INFO_COLOR
 0

	)

9412 #iâdeà
NRF_SDH_ANT_DEBUG_COLOR


9413 
	#NRF_SDH_ANT_DEBUG_COLOR
 0

	)

9420 #iâdeà
NRF_SDH_BLE_LOG_ENABLED


9421 
	#NRF_SDH_BLE_LOG_ENABLED
 1

	)

9431 #iâdeà
NRF_SDH_BLE_LOG_LEVEL


9432 
	#NRF_SDH_BLE_LOG_LEVEL
 3

	)

9447 #iâdeà
NRF_SDH_BLE_INFO_COLOR


9448 
	#NRF_SDH_BLE_INFO_COLOR
 0

	)

9463 #iâdeà
NRF_SDH_BLE_DEBUG_COLOR


9464 
	#NRF_SDH_BLE_DEBUG_COLOR
 0

	)

9471 #iâdeà
NRF_SDH_LOG_ENABLED


9472 
	#NRF_SDH_LOG_ENABLED
 1

	)

9482 #iâdeà
NRF_SDH_LOG_LEVEL


9483 
	#NRF_SDH_LOG_LEVEL
 3

	)

9498 #iâdeà
NRF_SDH_INFO_COLOR


9499 
	#NRF_SDH_INFO_COLOR
 0

	)

9514 #iâdeà
NRF_SDH_DEBUG_COLOR


9515 
	#NRF_SDH_DEBUG_COLOR
 0

	)

9522 #iâdeà
NRF_SDH_SOC_LOG_ENABLED


9523 
	#NRF_SDH_SOC_LOG_ENABLED
 1

	)

9533 #iâdeà
NRF_SDH_SOC_LOG_LEVEL


9534 
	#NRF_SDH_SOC_LOG_LEVEL
 3

	)

9549 #iâdeà
NRF_SDH_SOC_INFO_COLOR


9550 
	#NRF_SDH_SOC_INFO_COLOR
 0

	)

9565 #iâdeà
NRF_SDH_SOC_DEBUG_COLOR


9566 
	#NRF_SDH_SOC_DEBUG_COLOR
 0

	)

9573 #iâdeà
NRF_SORTLIST_CONFIG_LOG_ENABLED


9574 
	#NRF_SORTLIST_CONFIG_LOG_ENABLED
 0

	)

9584 #iâdeà
NRF_SORTLIST_CONFIG_LOG_LEVEL


9585 
	#NRF_SORTLIST_CONFIG_LOG_LEVEL
 3

	)

9600 #iâdeà
NRF_SORTLIST_CONFIG_INFO_COLOR


9601 
	#NRF_SORTLIST_CONFIG_INFO_COLOR
 0

	)

9616 #iâdeà
NRF_SORTLIST_CONFIG_DEBUG_COLOR


9617 
	#NRF_SORTLIST_CONFIG_DEBUG_COLOR
 0

	)

9624 #iâdeà
NRF_TWI_SENSOR_CONFIG_LOG_ENABLED


9625 
	#NRF_TWI_SENSOR_CONFIG_LOG_ENABLED
 0

	)

9635 #iâdeà
NRF_TWI_SENSOR_CONFIG_LOG_LEVEL


9636 
	#NRF_TWI_SENSOR_CONFIG_LOG_LEVEL
 3

	)

9651 #iâdeà
NRF_TWI_SENSOR_CONFIG_INFO_COLOR


9652 
	#NRF_TWI_SENSOR_CONFIG_INFO_COLOR
 0

	)

9667 #iâdeà
NRF_TWI_SENSOR_CONFIG_DEBUG_COLOR


9668 
	#NRF_TWI_SENSOR_CONFIG_DEBUG_COLOR
 0

	)

9681 #iâdeà
SER_HAL_TRANSPORT_CONFIG_LOG_ENABLED


9682 
	#SER_HAL_TRANSPORT_CONFIG_LOG_ENABLED
 0

	)

9692 #iâdeà
SER_HAL_TRANSPORT_CONFIG_LOG_LEVEL


9693 
	#SER_HAL_TRANSPORT_CONFIG_LOG_LEVEL
 3

	)

9708 #iâdeà
SER_HAL_TRANSPORT_CONFIG_INFO_COLOR


9709 
	#SER_HAL_TRANSPORT_CONFIG_INFO_COLOR
 0

	)

9724 #iâdeà
SER_HAL_TRANSPORT_CONFIG_DEBUG_COLOR


9725 
	#SER_HAL_TRANSPORT_CONFIG_DEBUG_COLOR
 0

	)

9748 #iâdeà
NFC_AC_REC_ENABLED


9749 
	#NFC_AC_REC_ENABLED
 0

	)

9755 #iâdeà
NFC_AC_REC_PARSER_ENABLED


9756 
	#NFC_AC_REC_PARSER_ENABLED
 0

	)

9761 #iâdeà
NFC_BLE_OOB_ADVDATA_ENABLED


9762 
	#NFC_BLE_OOB_ADVDATA_ENABLED
 0

	)

9769 #iâdeà
ADVANCED_ADVDATA_SUPPORT


9770 
	#ADVANCED_ADVDATA_SUPPORT
 0

	)

9778 #iâdeà
NFC_BLE_OOB_ADVDATA_PARSER_ENABLED


9779 
	#NFC_BLE_OOB_ADVDATA_PARSER_ENABLED
 0

	)

9784 #iâdeà
NFC_BLE_PAIR_LIB_ENABLED


9785 
	#NFC_BLE_PAIR_LIB_ENABLED
 0

	)

9789 #iâdeà
NFC_BLE_PAIR_LIB_LOG_ENABLED


9790 
	#NFC_BLE_PAIR_LIB_LOG_ENABLED
 0

	)

9800 #iâdeà
NFC_BLE_PAIR_LIB_LOG_LEVEL


9801 
	#NFC_BLE_PAIR_LIB_LOG_LEVEL
 3

	)

9816 #iâdeà
NFC_BLE_PAIR_LIB_INFO_COLOR


9817 
	#NFC_BLE_PAIR_LIB_INFO_COLOR
 0

	)

9832 #iâdeà
NFC_BLE_PAIR_LIB_DEBUG_COLOR


9833 
	#NFC_BLE_PAIR_LIB_DEBUG_COLOR
 0

	)

9845 #iâdeà
BLE_NFC_SEC_PARAM_BOND


9846 
	#BLE_NFC_SEC_PARAM_BOND
 1

	)

9851 #iâdeà
BLE_NFC_SEC_PARAM_KDIST_OWN_ENC


9852 
	#BLE_NFC_SEC_PARAM_KDIST_OWN_ENC
 1

	)

9858 #iâdeà
BLE_NFC_SEC_PARAM_KDIST_OWN_ID


9859 
	#BLE_NFC_SEC_PARAM_KDIST_OWN_ID
 1

	)

9865 #iâdeà
BLE_NFC_SEC_PARAM_KDIST_PEER_ENC


9866 
	#BLE_NFC_SEC_PARAM_KDIST_PEER_ENC
 1

	)

9872 #iâdeà
BLE_NFC_SEC_PARAM_KDIST_PEER_ID


9873 
	#BLE_NFC_SEC_PARAM_KDIST_PEER_ID
 1

	)

9891 #iâdeà
BLE_NFC_SEC_PARAM_MIN_KEY_SIZE


9892 
	#BLE_NFC_SEC_PARAM_MIN_KEY_SIZE
 7

	)

9908 #iâdeà
BLE_NFC_SEC_PARAM_MAX_KEY_SIZE


9909 
	#BLE_NFC_SEC_PARAM_MAX_KEY_SIZE
 16

	)

9920 #iâdeà
NFC_BLE_PAIR_MSG_ENABLED


9921 
	#NFC_BLE_PAIR_MSG_ENABLED
 0

	)

9927 #iâdeà
NFC_CH_COMMON_ENABLED


9928 
	#NFC_CH_COMMON_ENABLED
 0

	)

9934 #iâdeà
NFC_EP_OOB_REC_ENABLED


9935 
	#NFC_EP_OOB_REC_ENABLED
 0

	)

9941 #iâdeà
NFC_HS_REC_ENABLED


9942 
	#NFC_HS_REC_ENABLED
 0

	)

9948 #iâdeà
NFC_LE_OOB_REC_ENABLED


9949 
	#NFC_LE_OOB_REC_ENABLED
 0

	)

9955 #iâdeà
NFC_LE_OOB_REC_PARSER_ENABLED


9956 
	#NFC_LE_OOB_REC_PARSER_ENABLED
 0

	)

9962 #iâdeà
NFC_NDEF_LAUNCHAPP_MSG_ENABLED


9963 
	#NFC_NDEF_LAUNCHAPP_MSG_ENABLED
 0

	)

9969 #iâdeà
NFC_NDEF_LAUNCHAPP_REC_ENABLED


9970 
	#NFC_NDEF_LAUNCHAPP_REC_ENABLED
 0

	)

9975 #iâdeà
NFC_NDEF_MSG_ENABLED


9976 
	#NFC_NDEF_MSG_ENABLED
 0

	)

9983 #iâdeà
NFC_NDEF_MSG_TAG_TYPE


9984 
	#NFC_NDEF_MSG_TAG_TYPE
 2

	)

9991 #iâdeà
NFC_NDEF_MSG_PARSER_ENABLED


9992 
	#NFC_NDEF_MSG_PARSER_ENABLED
 0

	)

9996 #iâdeà
NFC_NDEF_MSG_PARSER_LOG_ENABLED


9997 
	#NFC_NDEF_MSG_PARSER_LOG_ENABLED
 0

	)

10007 #iâdeà
NFC_NDEF_MSG_PARSER_LOG_LEVEL


10008 
	#NFC_NDEF_MSG_PARSER_LOG_LEVEL
 3

	)

10023 #iâdeà
NFC_NDEF_MSG_PARSER_INFO_COLOR


10024 
	#NFC_NDEF_MSG_PARSER_INFO_COLOR
 0

	)

10034 #iâdeà
NFC_NDEF_RECORD_ENABLED


10035 
	#NFC_NDEF_RECORD_ENABLED
 0

	)

10040 #iâdeà
NFC_NDEF_RECORD_PARSER_ENABLED


10041 
	#NFC_NDEF_RECORD_PARSER_ENABLED
 0

	)

10045 #iâdeà
NFC_NDEF_RECORD_PARSER_LOG_ENABLED


10046 
	#NFC_NDEF_RECORD_PARSER_LOG_ENABLED
 0

	)

10056 #iâdeà
NFC_NDEF_RECORD_PARSER_LOG_LEVEL


10057 
	#NFC_NDEF_RECORD_PARSER_LOG_LEVEL
 3

	)

10072 #iâdeà
NFC_NDEF_RECORD_PARSER_INFO_COLOR


10073 
	#NFC_NDEF_RECORD_PARSER_INFO_COLOR
 0

	)

10083 #iâdeà
NFC_NDEF_TEXT_RECORD_ENABLED


10084 
	#NFC_NDEF_TEXT_RECORD_ENABLED
 0

	)

10090 #iâdeà
NFC_NDEF_URI_MSG_ENABLED


10091 
	#NFC_NDEF_URI_MSG_ENABLED
 0

	)

10097 #iâdeà
NFC_NDEF_URI_REC_ENABLED


10098 
	#NFC_NDEF_URI_REC_ENABLED
 0

	)

10103 #iâdeà
NFC_T2T_HAL_ENABLED


10104 
	#NFC_T2T_HAL_ENABLED
 0

	)

10119 #iâdeà
NFCT_CONFIG_IRQ_PRIORITY


10120 
	#NFCT_CONFIG_IRQ_PRIORITY
 7

	)

10125 #iâdeà
HAL_NFC_CONFIG_LOG_ENABLED


10126 
	#HAL_NFC_CONFIG_LOG_ENABLED
 0

	)

10136 #iâdeà
HAL_NFC_CONFIG_LOG_LEVEL


10137 
	#HAL_NFC_CONFIG_LOG_LEVEL
 3

	)

10152 #iâdeà
HAL_NFC_CONFIG_INFO_COLOR


10153 
	#HAL_NFC_CONFIG_INFO_COLOR
 0

	)

10168 #iâdeà
HAL_NFC_CONFIG_DEBUG_COLOR


10169 
	#HAL_NFC_CONFIG_DEBUG_COLOR
 0

	)

10180 #iâdeà
HAL_NFC_CONFIG_LOG_LEVEL


10181 
	#HAL_NFC_CONFIG_LOG_LEVEL
 3

	)

10196 #iâdeà
HAL_NFC_CONFIG_INFO_COLOR


10197 
	#HAL_NFC_CONFIG_INFO_COLOR
 0

	)

10212 #iâdeà
HAL_NFC_CONFIG_DEBUG_COLOR


10213 
	#HAL_NFC_CONFIG_DEBUG_COLOR
 0

	)

10220 #iâdeà
HAL_NFC_CONFIG_DEBUG_PIN_ENABLED


10221 
	#HAL_NFC_CONFIG_DEBUG_PIN_ENABLED
 0

	)

10275 #iâdeà
HAL_NFC_HCLOCK_ON_DEBUG_PIN


10276 
	#HAL_NFC_HCLOCK_ON_DEBUG_PIN
 11

	)

10331 #iâdeà
HAL_NFC_HCLOCK_OFF_DEBUG_PIN


10332 
	#HAL_NFC_HCLOCK_OFF_DEBUG_PIN
 12

	)

10387 #iâdeà
HAL_NFC_NFC_EVENT_DEBUG_PIN


10388 
	#HAL_NFC_NFC_EVENT_DEBUG_PIN
 24

	)

10443 #iâdeà
HAL_NFC_DETECT_EVENT_DEBUG_PIN


10444 
	#HAL_NFC_DETECT_EVENT_DEBUG_PIN
 25

	)

10499 #iâdeà
HAL_NFC_TIMER4_EVENT_DEBUG_PIN


10500 
	#HAL_NFC_TIMER4_EVENT_DEBUG_PIN
 28

	)

10555 #iâdeà
HAL_NFC_HCLOCK_ON_DEBUG_PIN


10556 
	#HAL_NFC_HCLOCK_ON_DEBUG_PIN
 31

	)

10611 #iâdeà
HAL_NFC_HCLOCK_OFF_DEBUG_PIN


10612 
	#HAL_NFC_HCLOCK_OFF_DEBUG_PIN
 31

	)

10667 #iâdeà
HAL_NFC_NFC_EVENT_DEBUG_PIN


10668 
	#HAL_NFC_NFC_EVENT_DEBUG_PIN
 31

	)

10723 #iâdeà
HAL_NFC_DETECT_EVENT_DEBUG_PIN


10724 
	#HAL_NFC_DETECT_EVENT_DEBUG_PIN
 31

	)

10779 #iâdeà
HAL_NFC_TIMER4_EVENT_DEBUG_PIN


10780 
	#HAL_NFC_TIMER4_EVENT_DEBUG_PIN
 31

	)

10789 #iâdeà
NFC_T2T_PARSER_ENABLED


10790 
	#NFC_T2T_PARSER_ENABLED
 0

	)

10794 #iâdeà
NFC_T2T_PARSER_LOG_ENABLED


10795 
	#NFC_T2T_PARSER_LOG_ENABLED
 0

	)

10805 #iâdeà
NFC_T2T_PARSER_LOG_LEVEL


10806 
	#NFC_T2T_PARSER_LOG_LEVEL
 3

	)

10821 #iâdeà
NFC_T2T_PARSER_INFO_COLOR


10822 
	#NFC_T2T_PARSER_INFO_COLOR
 0

	)

10831 #iâdeà
NFC_T4T_APDU_ENABLED


10832 
	#NFC_T4T_APDU_ENABLED
 0

	)

10836 #iâdeà
NFC_T4T_APDU_LOG_ENABLED


10837 
	#NFC_T4T_APDU_LOG_ENABLED
 0

	)

10847 #iâdeà
NFC_T4T_APDU_LOG_LEVEL


10848 
	#NFC_T4T_APDU_LOG_LEVEL
 3

	)

10863 #iâdeà
NFC_T4T_APDU_LOG_COLOR


10864 
	#NFC_T4T_APDU_LOG_COLOR
 0

	)

10873 #iâdeà
NFC_T4T_CC_FILE_PARSER_ENABLED


10874 
	#NFC_T4T_CC_FILE_PARSER_ENABLED
 0

	)

10878 #iâdeà
NFC_T4T_CC_FILE_PARSER_LOG_ENABLED


10879 
	#NFC_T4T_CC_FILE_PARSER_LOG_ENABLED
 0

	)

10889 #iâdeà
NFC_T4T_CC_FILE_PARSER_LOG_LEVEL


10890 
	#NFC_T4T_CC_FILE_PARSER_LOG_LEVEL
 3

	)

10905 #iâdeà
NFC_T4T_CC_FILE_PARSER_INFO_COLOR


10906 
	#NFC_T4T_CC_FILE_PARSER_INFO_COLOR
 0

	)

10915 #iâdeà
NFC_T4T_HAL_ENABLED


10916 
	#NFC_T4T_HAL_ENABLED
 0

	)

10931 #iâdeà
NFCT_CONFIG_IRQ_PRIORITY


10932 
	#NFCT_CONFIG_IRQ_PRIORITY
 7

	)

10937 #iâdeà
HAL_NFC_CONFIG_LOG_ENABLED


10938 
	#HAL_NFC_CONFIG_LOG_ENABLED
 0

	)

10948 #iâdeà
HAL_NFC_CONFIG_LOG_LEVEL


10949 
	#HAL_NFC_CONFIG_LOG_LEVEL
 3

	)

10964 #iâdeà
HAL_NFC_CONFIG_INFO_COLOR


10965 
	#HAL_NFC_CONFIG_INFO_COLOR
 0

	)

10980 #iâdeà
HAL_NFC_CONFIG_DEBUG_COLOR


10981 
	#HAL_NFC_CONFIG_DEBUG_COLOR
 0

	)

10992 #iâdeà
HAL_NFC_CONFIG_LOG_LEVEL


10993 
	#HAL_NFC_CONFIG_LOG_LEVEL
 3

	)

11008 #iâdeà
HAL_NFC_CONFIG_INFO_COLOR


11009 
	#HAL_NFC_CONFIG_INFO_COLOR
 0

	)

11024 #iâdeà
HAL_NFC_CONFIG_DEBUG_COLOR


11025 
	#HAL_NFC_CONFIG_DEBUG_COLOR
 0

	)

11032 #iâdeà
HAL_NFC_CONFIG_DEBUG_PIN_ENABLED


11033 
	#HAL_NFC_CONFIG_DEBUG_PIN_ENABLED
 0

	)

11087 #iâdeà
HAL_NFC_HCLOCK_ON_DEBUG_PIN


11088 
	#HAL_NFC_HCLOCK_ON_DEBUG_PIN
 31

	)

11143 #iâdeà
HAL_NFC_HCLOCK_OFF_DEBUG_PIN


11144 
	#HAL_NFC_HCLOCK_OFF_DEBUG_PIN
 31

	)

11199 #iâdeà
HAL_NFC_NFC_EVENT_DEBUG_PIN


11200 
	#HAL_NFC_NFC_EVENT_DEBUG_PIN
 31

	)

11255 #iâdeà
HAL_NFC_DETECT_EVENT_DEBUG_PIN


11256 
	#HAL_NFC_DETECT_EVENT_DEBUG_PIN
 31

	)

11311 #iâdeà
HAL_NFC_TIMER4_EVENT_DEBUG_PIN


11312 
	#HAL_NFC_TIMER4_EVENT_DEBUG_PIN
 31

	)

11367 #iâdeà
HAL_NFC_HCLOCK_ON_DEBUG_PIN


11368 
	#HAL_NFC_HCLOCK_ON_DEBUG_PIN
 31

	)

11423 #iâdeà
HAL_NFC_HCLOCK_OFF_DEBUG_PIN


11424 
	#HAL_NFC_HCLOCK_OFF_DEBUG_PIN
 31

	)

11479 #iâdeà
HAL_NFC_NFC_EVENT_DEBUG_PIN


11480 
	#HAL_NFC_NFC_EVENT_DEBUG_PIN
 31

	)

11535 #iâdeà
HAL_NFC_DETECT_EVENT_DEBUG_PIN


11536 
	#HAL_NFC_DETECT_EVENT_DEBUG_PIN
 31

	)

11591 #iâdeà
HAL_NFC_TIMER4_EVENT_DEBUG_PIN


11592 
	#HAL_NFC_TIMER4_EVENT_DEBUG_PIN
 31

	)

11601 #iâdeà
NFC_T4T_HL_DETECTION_PROCEDURES_ENABLED


11602 
	#NFC_T4T_HL_DETECTION_PROCEDURES_ENABLED
 0

	)

11606 #iâdeà
NFC_T4T_HL_DETECTION_PROCEDURES_LOG_ENABLED


11607 
	#NFC_T4T_HL_DETECTION_PROCEDURES_LOG_ENABLED
 0

	)

11617 #iâdeà
NFC_T4T_HL_DETECTION_PROCEDURES_LOG_LEVEL


11618 
	#NFC_T4T_HL_DETECTION_PROCEDURES_LOG_LEVEL
 3

	)

11633 #iâdeà
NFC_T4T_HL_DETECTION_PROCEDURES_INFO_COLOR


11634 
	#NFC_T4T_HL_DETECTION_PROCEDURES_INFO_COLOR
 0

	)

11640 #iâdeà
APDU_BUFF_SIZE


11641 
	#APDU_BUFF_SIZE
 250

	)

11645 #iâdeà
CC_STORAGE_BUFF_SIZE


11646 
	#CC_STORAGE_BUFF_SIZE
 64

	)

11653 #iâdeà
NFC_T4T_TLV_BLOCK_PARSER_ENABLED


11654 
	#NFC_T4T_TLV_BLOCK_PARSER_ENABLED
 0

	)

11658 #iâdeà
NFC_T4T_TLV_BLOCK_PARSER_LOG_ENABLED


11659 
	#NFC_T4T_TLV_BLOCK_PARSER_LOG_ENABLED
 0

	)

11669 #iâdeà
NFC_T4T_TLV_BLOCK_PARSER_LOG_LEVEL


11670 
	#NFC_T4T_TLV_BLOCK_PARSER_LOG_LEVEL
 3

	)

11685 #iâdeà
NFC_T4T_TLV_BLOCK_PARSER_INFO_COLOR


11686 
	#NFC_T4T_TLV_BLOCK_PARSER_INFO_COLOR
 0

	)

11706 #iâdeà
SEGGER_RTT_CONFIG_BUFFER_SIZE_UP


11707 
	#SEGGER_RTT_CONFIG_BUFFER_SIZE_UP
 512

	)

11711 #iâdeà
SEGGER_RTT_CONFIG_MAX_NUM_UP_BUFFERS


11712 
	#SEGGER_RTT_CONFIG_MAX_NUM_UP_BUFFERS
 2

	)

11716 #iâdeà
SEGGER_RTT_CONFIG_BUFFER_SIZE_DOWN


11717 
	#SEGGER_RTT_CONFIG_BUFFER_SIZE_DOWN
 16

	)

11721 #iâdeà
SEGGER_RTT_CONFIG_MAX_NUM_DOWN_BUFFERS


11722 
	#SEGGER_RTT_CONFIG_MAX_NUM_DOWN_BUFFERS
 2

	)

11736 #iâdeà
SEGGER_RTT_CONFIG_DEFAULT_MODE


11737 
	#SEGGER_RTT_CONFIG_DEFAULT_MODE
 0

	)

11751 #iâdeà
NRF_SDH_BLE_ENABLED


11752 
	#NRF_SDH_BLE_ENABLED
 1

	)

11764 #iâdeà
NRF_SDH_BLE_GAP_DATA_LENGTH


11765 
	#NRF_SDH_BLE_GAP_DATA_LENGTH
 27

	)

11769 #iâdeà
NRF_SDH_BLE_PERIPHERAL_LINK_COUNT


11770 
	#NRF_SDH_BLE_PERIPHERAL_LINK_COUNT
 1

	)

11774 #iâdeà
NRF_SDH_BLE_CENTRAL_LINK_COUNT


11775 
	#NRF_SDH_BLE_CENTRAL_LINK_COUNT
 0

	)

11781 #iâdeà
NRF_SDH_BLE_TOTAL_LINK_COUNT


11782 
	#NRF_SDH_BLE_TOTAL_LINK_COUNT
 1

	)

11788 #iâdeà
NRF_SDH_BLE_GAP_EVENT_LENGTH


11789 
	#NRF_SDH_BLE_GAP_EVENT_LENGTH
 6

	)

11793 #iâdeà
NRF_SDH_BLE_GATT_MAX_MTU_SIZE


11794 
	#NRF_SDH_BLE_GATT_MAX_MTU_SIZE
 23

	)

11798 #iâdeà
NRF_SDH_BLE_GATTS_ATTR_TAB_SIZE


11799 
	#NRF_SDH_BLE_GATTS_ATTR_TAB_SIZE
 1408

	)

11803 #iâdeà
NRF_SDH_BLE_VS_UUID_COUNT


11804 
	#NRF_SDH_BLE_VS_UUID_COUNT
 0

	)

11810 #iâdeà
NRF_SDH_BLE_SERVICE_CHANGED


11811 
	#NRF_SDH_BLE_SERVICE_CHANGED
 0

	)

11824 #iâdeà
NRF_SDH_BLE_OBSERVER_PRIO_LEVELS


11825 
	#NRF_SDH_BLE_OBSERVER_PRIO_LEVELS
 4

	)

11834 #iâdeà
BLE_ADV_BLE_OBSERVER_PRIO


11835 
	#BLE_ADV_BLE_OBSERVER_PRIO
 1

	)

11841 #iâdeà
BLE_ANCS_C_BLE_OBSERVER_PRIO


11842 
	#BLE_ANCS_C_BLE_OBSERVER_PRIO
 2

	)

11848 #iâdeà
BLE_ANS_C_BLE_OBSERVER_PRIO


11849 
	#BLE_ANS_C_BLE_OBSERVER_PRIO
 2

	)

11855 #iâdeà
BLE_BAS_BLE_OBSERVER_PRIO


11856 
	#BLE_BAS_BLE_OBSERVER_PRIO
 2

	)

11862 #iâdeà
BLE_BAS_C_BLE_OBSERVER_PRIO


11863 
	#BLE_BAS_C_BLE_OBSERVER_PRIO
 2

	)

11869 #iâdeà
BLE_BPS_BLE_OBSERVER_PRIO


11870 
	#BLE_BPS_BLE_OBSERVER_PRIO
 2

	)

11876 #iâdeà
BLE_CONN_PARAMS_BLE_OBSERVER_PRIO


11877 
	#BLE_CONN_PARAMS_BLE_OBSERVER_PRIO
 1

	)

11883 #iâdeà
BLE_CONN_STATE_BLE_OBSERVER_PRIO


11884 
	#BLE_CONN_STATE_BLE_OBSERVER_PRIO
 0

	)

11890 #iâdeà
BLE_CSCS_BLE_OBSERVER_PRIO


11891 
	#BLE_CSCS_BLE_OBSERVER_PRIO
 2

	)

11897 #iâdeà
BLE_CTS_C_BLE_OBSERVER_PRIO


11898 
	#BLE_CTS_C_BLE_OBSERVER_PRIO
 2

	)

11904 #iâdeà
BLE_DB_DISC_BLE_OBSERVER_PRIO


11905 
	#BLE_DB_DISC_BLE_OBSERVER_PRIO
 1

	)

11911 #iâdeà
BLE_DFU_BLE_OBSERVER_PRIO


11912 
	#BLE_DFU_BLE_OBSERVER_PRIO
 2

	)

11918 #iâdeà
BLE_DIS_C_BLE_OBSERVER_PRIO


11919 
	#BLE_DIS_C_BLE_OBSERVER_PRIO
 2

	)

11925 #iâdeà
BLE_GLS_BLE_OBSERVER_PRIO


11926 
	#BLE_GLS_BLE_OBSERVER_PRIO
 2

	)

11932 #iâdeà
BLE_HIDS_BLE_OBSERVER_PRIO


11933 
	#BLE_HIDS_BLE_OBSERVER_PRIO
 2

	)

11939 #iâdeà
BLE_HRS_BLE_OBSERVER_PRIO


11940 
	#BLE_HRS_BLE_OBSERVER_PRIO
 2

	)

11946 #iâdeà
BLE_HRS_C_BLE_OBSERVER_PRIO


11947 
	#BLE_HRS_C_BLE_OBSERVER_PRIO
 2

	)

11953 #iâdeà
BLE_HTS_BLE_OBSERVER_PRIO


11954 
	#BLE_HTS_BLE_OBSERVER_PRIO
 2

	)

11960 #iâdeà
BLE_IAS_BLE_OBSERVER_PRIO


11961 
	#BLE_IAS_BLE_OBSERVER_PRIO
 2

	)

11967 #iâdeà
BLE_IAS_C_BLE_OBSERVER_PRIO


11968 
	#BLE_IAS_C_BLE_OBSERVER_PRIO
 2

	)

11974 #iâdeà
BLE_LBS_BLE_OBSERVER_PRIO


11975 
	#BLE_LBS_BLE_OBSERVER_PRIO
 2

	)

11981 #iâdeà
BLE_LBS_C_BLE_OBSERVER_PRIO


11982 
	#BLE_LBS_C_BLE_OBSERVER_PRIO
 2

	)

11988 #iâdeà
BLE_LESC_OBSERVER_PRIO


11989 
	#BLE_LESC_OBSERVER_PRIO
 2

	)

11995 #iâdeà
BLE_LLS_BLE_OBSERVER_PRIO


11996 
	#BLE_LLS_BLE_OBSERVER_PRIO
 2

	)

12002 #iâdeà
BLE_LNS_BLE_OBSERVER_PRIO


12003 
	#BLE_LNS_BLE_OBSERVER_PRIO
 2

	)

12009 #iâdeà
BLE_NUS_BLE_OBSERVER_PRIO


12010 
	#BLE_NUS_BLE_OBSERVER_PRIO
 2

	)

12016 #iâdeà
BLE_NUS_C_BLE_OBSERVER_PRIO


12017 
	#BLE_NUS_C_BLE_OBSERVER_PRIO
 2

	)

12023 #iâdeà
BLE_OTS_BLE_OBSERVER_PRIO


12024 
	#BLE_OTS_BLE_OBSERVER_PRIO
 2

	)

12030 #iâdeà
BLE_OTS_C_BLE_OBSERVER_PRIO


12031 
	#BLE_OTS_C_BLE_OBSERVER_PRIO
 2

	)

12037 #iâdeà
BLE_RSCS_BLE_OBSERVER_PRIO


12038 
	#BLE_RSCS_BLE_OBSERVER_PRIO
 2

	)

12044 #iâdeà
BLE_RSCS_C_BLE_OBSERVER_PRIO


12045 
	#BLE_RSCS_C_BLE_OBSERVER_PRIO
 2

	)

12051 #iâdeà
BLE_TPS_BLE_OBSERVER_PRIO


12052 
	#BLE_TPS_BLE_OBSERVER_PRIO
 2

	)

12058 #iâdeà
BSP_BTN_BLE_OBSERVER_PRIO


12059 
	#BSP_BTN_BLE_OBSERVER_PRIO
 1

	)

12065 #iâdeà
NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO


12066 
	#NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO
 1

	)

12072 #iâdeà
NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO


12073 
	#NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO
 1

	)

12079 #iâdeà
NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO


12080 
	#NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO
 1

	)

12086 #iâdeà
NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO


12087 
	#NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO
 1

	)

12093 #iâdeà
NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO


12094 
	#NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO
 1

	)

12100 #iâdeà
NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO


12101 
	#NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO
 1

	)

12107 #iâdeà
NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO


12108 
	#NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO
 1

	)

12114 #iâdeà
NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO


12115 
	#NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO
 1

	)

12121 #iâdeà
NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO


12122 
	#NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO
 1

	)

12128 #iâdeà
NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO


12129 
	#NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO
 1

	)

12135 #iâdeà
NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO


12136 
	#NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO
 1

	)

12142 #iâdeà
NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO


12143 
	#NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO
 1

	)

12149 #iâdeà
NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO


12150 
	#NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO
 1

	)

12156 #iâdeà
NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO


12157 
	#NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO
 1

	)

12163 #iâdeà
NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO


12164 
	#NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO
 1

	)

12170 #iâdeà
NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO


12171 
	#NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO
 1

	)

12177 #iâdeà
NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO


12178 
	#NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO
 1

	)

12184 #iâdeà
NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO


12185 
	#NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO
 1

	)

12191 #iâdeà
NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO


12192 
	#NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO
 1

	)

12198 #iâdeà
NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO


12199 
	#NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO
 1

	)

12205 #iâdeà
NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO


12206 
	#NFC_BLE_PAIR_LIB_BLE_OBSERVER_PRIO
 1

	)

12212 #iâdeà
NRF_BLE_BMS_BLE_OBSERVER_PRIO


12213 
	#NRF_BLE_BMS_BLE_OBSERVER_PRIO
 2

	)

12219 #iâdeà
NRF_BLE_CGMS_BLE_OBSERVER_PRIO


12220 
	#NRF_BLE_CGMS_BLE_OBSERVER_PRIO
 2

	)

12226 #iâdeà
NRF_BLE_ES_BLE_OBSERVER_PRIO


12227 
	#NRF_BLE_ES_BLE_OBSERVER_PRIO
 2

	)

12233 #iâdeà
NRF_BLE_GATTS_C_BLE_OBSERVER_PRIO


12234 
	#NRF_BLE_GATTS_C_BLE_OBSERVER_PRIO
 2

	)

12240 #iâdeà
NRF_BLE_GATT_BLE_OBSERVER_PRIO


12241 
	#NRF_BLE_GATT_BLE_OBSERVER_PRIO
 1

	)

12247 #iâdeà
NRF_BLE_QWR_BLE_OBSERVER_PRIO


12248 
	#NRF_BLE_QWR_BLE_OBSERVER_PRIO
 2

	)

12252 #iâdeà
PM_BLE_OBSERVER_PRIO


12253 
	#PM_BLE_OBSERVER_PRIO
 1

	)

12267 #iâdeà
NRF_SDH_ENABLED


12268 
	#NRF_SDH_ENABLED
 1

	)

12284 #iâdeà
NRF_SDH_DISPATCH_MODEL


12285 
	#NRF_SDH_DISPATCH_MODEL
 1

	)

12300 #iâdeà
NRF_SDH_CLOCK_LF_SRC


12301 
	#NRF_SDH_CLOCK_LF_SRC
 1

	)

12305 #iâdeà
NRF_SDH_CLOCK_LF_RC_CTIV


12306 
	#NRF_SDH_CLOCK_LF_RC_CTIV
 0

	)

12313 #iâdeà
NRF_SDH_CLOCK_LF_RC_TEMP_CTIV


12314 
	#NRF_SDH_CLOCK_LF_RC_TEMP_CTIV
 0

	)

12332 #iâdeà
NRF_SDH_CLOCK_LF_ACCURACY


12333 
	#NRF_SDH_CLOCK_LF_ACCURACY
 7

	)

12346 #iâdeà
NRF_SDH_REQ_OBSERVER_PRIO_LEVELS


12347 
	#NRF_SDH_REQ_OBSERVER_PRIO_LEVELS
 2

	)

12354 #iâdeà
NRF_SDH_STATE_OBSERVER_PRIO_LEVELS


12355 
	#NRF_SDH_STATE_OBSERVER_PRIO_LEVELS
 2

	)

12362 #iâdeà
NRF_SDH_STACK_OBSERVER_PRIO_LEVELS


12363 
	#NRF_SDH_STACK_OBSERVER_PRIO_LEVELS
 2

	)

12373 #iâdeà
CLOCK_CONFIG_STATE_OBSERVER_PRIO


12374 
	#CLOCK_CONFIG_STATE_OBSERVER_PRIO
 0

	)

12380 #iâdeà
POWER_CONFIG_STATE_OBSERVER_PRIO


12381 
	#POWER_CONFIG_STATE_OBSERVER_PRIO
 0

	)

12387 #iâdeà
RNG_CONFIG_STATE_OBSERVER_PRIO


12388 
	#RNG_CONFIG_STATE_OBSERVER_PRIO
 0

	)

12402 #iâdeà
NRF_SDH_ANT_STACK_OBSERVER_PRIO


12403 
	#NRF_SDH_ANT_STACK_OBSERVER_PRIO
 0

	)

12411 #iâdeà
NRF_SDH_BLE_STACK_OBSERVER_PRIO


12412 
	#NRF_SDH_BLE_STACK_OBSERVER_PRIO
 0

	)

12420 #iâdeà
NRF_SDH_SOC_STACK_OBSERVER_PRIO


12421 
	#NRF_SDH_SOC_STACK_OBSERVER_PRIO
 0

	)

12435 #iâdeà
NRF_SDH_SOC_ENABLED


12436 
	#NRF_SDH_SOC_ENABLED
 1

	)

12445 #iâdeà
NRF_SDH_SOC_OBSERVER_PRIO_LEVELS


12446 
	#NRF_SDH_SOC_OBSERVER_PRIO_LEVELS
 2

	)

12455 #iâdeà
BLE_ADV_SOC_OBSERVER_PRIO


12456 
	#BLE_ADV_SOC_OBSERVER_PRIO
 1

	)

12462 #iâdeà
BLE_DFU_SOC_OBSERVER_PRIO


12463 
	#BLE_DFU_SOC_OBSERVER_PRIO
 1

	)

12469 #iâdeà
CLOCK_CONFIG_SOC_OBSERVER_PRIO


12470 
	#CLOCK_CONFIG_SOC_OBSERVER_PRIO
 0

	)

12476 #iâdeà
POWER_CONFIG_SOC_OBSERVER_PRIO


12477 
	#POWER_CONFIG_SOC_OBSERVER_PRIO
 0

	)

	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\external\fprintf\nrf_fprintf.c

40 
	~"sdk_commÚ.h
"

41 #ià
NRF_MODULE_ENABLED
(
NRF_FPRINTF
)

42 
	~<¡d¬g.h
>

44 
	~"Äf_as£¹.h
"

45 
	~"Äf_årštf_fÜm©.h
"

47 
	$Äf_årštf_bufãr_æush
(
Äf_årštf_ùx_t
 * cÚ¡ 
p_ùx
)

49 
	`ASSERT
(
p_ùx
 !ğ
NULL
);

51 ià(
p_ùx
->
io_bufãr_út
 == 0)

56 
p_ùx
->
	`fwr™e
Õ_ùx->
p_u£r_ùx
,

57 
p_ùx
->
p_io_bufãr
,

58 
p_ùx
->
io_bufãr_út
);

59 
p_ùx
->
io_bufãr_út
 = 0;

60 
	}
}

62 
	$Äf_årštf
(
Äf_årštf_ùx_t
 * cÚ¡ 
p_ùx
,

63 cÚ¡ * 
p_fmt
,

66 
	`ASSERT
(
p_ùx
 !ğ
NULL
);

67 
	`ASSERT
(
p_ùx
->
fwr™e
 !ğ
NULL
);

68 
	`ASSERT
(
p_ùx
->
p_io_bufãr
 !ğ
NULL
);

69 
	`ASSERT
(
p_ùx
->
io_bufãr_size
 > 0);

71 ià(
p_fmt
 =ğ
NULL
)

76 
va_li¡
 
¬gs
 = {0};

77 
	`va_¡¬t
(
¬gs
, 
p_fmt
);

79 
	`Äf_årštf_fmt
(
p_ùx
, 
p_fmt
, &
¬gs
);

81 
	`va_’d
(
¬gs
);

82 
	}
}

	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\external\fprintf\nrf_fprintf_format.c

59 
	~"sdk_commÚ.h
"

60 #ià
NRF_MODULE_ENABLED
(
NRF_FPRINTF
)

62 
	~<¡d¬g.h
>

64 
	~"Äf_as£¹.h
"

65 
	~"Äf_årštf.h
"

66 
	~"Äf_årštf_fÜm©.h
"

68 
	#NRF_CLI_FORMAT_FLAG_LEFT_JUSTIFY
 (1u << 0)

	)

69 
	#NRF_CLI_FORMAT_FLAG_PAD_ZERO
 (1u << 1)

	)

70 
	#NRF_CLI_FORMAT_FLAG_PRINT_SIGN
 (1u << 2)

	)

72 
	$bufãr_add
(
Äf_årštf_ùx_t
 * cÚ¡ 
p_ùx
, 
c
)

74 
p_ùx
->
p_io_bufãr
[p_ùx->
io_bufãr_út
++] = 
c
;

76 ià(
p_ùx
->
io_bufãr_út
 >ğp_ùx->
io_bufãr_size
)

78 
	`Äf_årštf_bufãr_æush
(
p_ùx
);

80 
	}
}

82 
	$¡ršg_´št
(
Äf_årštf_ùx_t
 * cÚ¡ 
p_ùx
,

83 cÚ¡ * 
p_¡r
,

84 
ušt32_t
 
F›ldWidth
,

85 
ušt32_t
 
FÜm©FÏgs
)

87 
ušt32_t
 
Width
 = 0;

88 
c
;

90 ià((
FÜm©FÏgs
 & 
NRF_CLI_FORMAT_FLAG_LEFT_JUSTIFY
) == NRF_CLI_FORMAT_FLAG_LEFT_JUSTIFY)

92 (
c
 = *
p_¡r
) != '\0')

94 
p_¡r
++;

95 
Width
++;

96 
	`bufãr_add
(
p_ùx
, 
c
);

99 (
F›ldWidth
 > 
Width
) && (FieldWidth > 0))

101 
F›ldWidth
--;

102 
	`bufãr_add
(
p_ùx
, ' ');

107 ià(
p_¡r
 != 0)

109 
Width
 = 
	`¡¾’
(
p_¡r
);

112 (
F›ldWidth
 > 
Width
) && (FieldWidth > 0))

114 
F›ldWidth
--;

115 
	`bufãr_add
(
p_ùx
, ' ');

118 (
c
 = *
p_¡r
) != '\0')

120 
p_¡r
++;

121 
Width
++;

122 
	`bufãr_add
(
p_ùx
, 
c
);

125 
	}
}

127 
	$unsigÃd_´št
(
Äf_årštf_ùx_t
 * cÚ¡ 
p_ùx
,

128 
ušt32_t
 
v
,

129 
ušt32_t
 
Ba£
,

130 
ušt32_t
 
NumDig™s
,

131 
ušt32_t
 
F›ldWidth
,

132 
ušt32_t
 
FÜm©FÏgs
)

134 cÚ¡ 
_aV2C
[16] = {'0', '1', '2', '3', '4', '5', '6', '7', '8', '9',

136 
ušt32_t
 
Div
;

137 
ušt32_t
 
V®ue
;

138 
ušt32_t
 
Width
;

139 
c
;

141 
V®ue
 = 
v
;

145 
Width
 = 1u;

146 
V®ue
 >ğ
Ba£
)

148 
V®ue
 = (V®u/ 
Ba£
);

149 
Width
++;

151 ià(
NumDig™s
 > 
Width
)

153 
Width
 = 
NumDig™s
;

158 ià((
FÜm©FÏgs
 & 
NRF_CLI_FORMAT_FLAG_LEFT_JUSTIFY
) == 0u)

160 ià(
F›ldWidth
 != 0u)

162 ià(((
FÜm©FÏgs
 & 
NRF_CLI_FORMAT_FLAG_PAD_ZERO
) == NRF_CLI_FORMAT_FLAG_PAD_ZERO) &&

163 (
NumDig™s
 == 0u))

165 
c
 = '0';

169 
c
 = ' ';

171 (
F›ldWidth
 !ğ0uè&& (
Width
 < FieldWidth))

173 
F›ldWidth
--;

174 
	`bufãr_add
(
p_ùx
, 
c
);

179 
V®ue
 = 1;

191 ià(
NumDig™s
 > 1u)

193 
NumDig™s
--;

197 
Div
 = 
v
 / 
V®ue
;

199 ià(
Div
 < 
Ba£
)

204 
V®ue
 *ğ
Ba£
;

211 
Div
 = 
v
 / 
V®ue
;

212 
v
 -ğ
Div
 * 
V®ue
;

213 
	`bufãr_add
(
p_ùx
, 
_aV2C
[
Div
]);

214 
V®ue
 /ğ
Ba£
;

215 } 
V®ue
);

219 ià((
FÜm©FÏgs
 & 
NRF_CLI_FORMAT_FLAG_LEFT_JUSTIFY
) == NRF_CLI_FORMAT_FLAG_LEFT_JUSTIFY)

221 ià(
F›ldWidth
 != 0u)

223 (
F›ldWidth
 !ğ0uè&& (
Width
 < FieldWidth))

225 
F›ldWidth
--;

226 
	`bufãr_add
(
p_ùx
, ' ');

230 
	}
}

232 
	$št_´št
(
Äf_årštf_ùx_t
 * cÚ¡ 
p_ùx
,

233 
št32_t
 
v
,

234 
ušt32_t
 
Ba£
,

235 
ušt32_t
 
NumDig™s
,

236 
ušt32_t
 
F›ldWidth
,

237 
ušt32_t
 
FÜm©FÏgs
)

239 
ušt32_t
 
Width
;

240 
št32_t
 
Numb”
;

242 
Numb”
 = (
v
 < 0) ? -v : v;

247 
Width
 = 1u;

248 
Numb”
 >ğ(
št32_t
)
Ba£
)

250 
Numb”
 = (Numb” / (
št32_t
)
Ba£
);

251 
Width
++;

253 ià(
NumDig™s
 > 
Width
)

255 
Width
 = 
NumDig™s
;

257 ià((
F›ldWidth
 > 0uè&& ((
v
 < 0) ||

258 ((
FÜm©FÏgs
 & 
NRF_CLI_FORMAT_FLAG_PRINT_SIGN
) == NRF_CLI_FORMAT_FLAG_PRINT_SIGN)))

260 
F›ldWidth
--;

265 ià((((
FÜm©FÏgs
 & 
NRF_CLI_FORMAT_FLAG_PAD_ZERO
è=ğ0uè|| (
NumDig™s
 != 0u)) &&

266 ((
FÜm©FÏgs
 & 
NRF_CLI_FORMAT_FLAG_LEFT_JUSTIFY
) == 0u))

268 ià(
F›ldWidth
 != 0u)

270 (
F›ldWidth
 !ğ0uè&& (
Width
 < FieldWidth))

272 
F›ldWidth
--;

273 
	`bufãr_add
(
p_ùx
, ' ');

280 ià(
v
 < 0)

282 
v
 = -v;

283 
	`bufãr_add
(
p_ùx
, '-');

285 ià((
FÜm©FÏgs
 & 
NRF_CLI_FORMAT_FLAG_PRINT_SIGN
) == NRF_CLI_FORMAT_FLAG_PRINT_SIGN)

287 
	`bufãr_add
(
p_ùx
, '+');

296 ià(((
FÜm©FÏgs
 & 
NRF_CLI_FORMAT_FLAG_PAD_ZERO
) == NRF_CLI_FORMAT_FLAG_PAD_ZERO) &&

297 ((
FÜm©FÏgs
 & 
NRF_CLI_FORMAT_FLAG_LEFT_JUSTIFY
è=ğ0uè&& (
NumDig™s
 == 0u))

299 ià(
F›ldWidth
 != 0u)

301 (
F›ldWidth
 !ğ0uè&& (
Width
 < FieldWidth))

303 
F›ldWidth
--;

304 
	`bufãr_add
(
p_ùx
, '0');

311 
	`unsigÃd_´št
(
p_ùx
, (
ušt32_t
)
v
, 
Ba£
, 
NumDig™s
, 
F›ldWidth
, 
FÜm©FÏgs
);

312 
	}
}

314 
	$Äf_årštf_fmt
(
Äf_årštf_ùx_t
 * cÚ¡ 
p_ùx
,

315 cÚ¡ * 
p_fmt
,

316 
va_li¡
 * 
p_¬gs
)

318 
	`ASSERT
(
p_ùx
 !ğ
NULL
);

320 
	`ASSERT
(
p_ùx
->
fwr™e
 !ğ
NULL
);

321 
	`ASSERT
(
p_ùx
->
p_io_bufãr
 !ğ
NULL
);

322 
	`ASSERT
(
p_ùx
->
io_bufãr_size
 > 0);

324 ià(
p_fmt
 =ğ
NULL
)

329 
c
;

330 
št32_t
 
v
;

331 
ušt32_t
 
NumDig™s
;

332 
ušt32_t
 
FÜm©FÏgs
;

333 
ušt32_t
 
F›ldWidth
;

337 
c
 = *
p_fmt
;

338 
p_fmt
++;

340 ià(
c
 == 0u)

344 ià(
c
 == '%')

349 
FÜm©FÏgs
 = 0u;

350 
v
 = 1;

354 
c
 = *
p_fmt
;

355 
c
)

358 
FÜm©FÏgs
 |ğ
NRF_CLI_FORMAT_FLAG_LEFT_JUSTIFY
;

359 
p_fmt
++;

362 
FÜm©FÏgs
 |ğ
NRF_CLI_FORMAT_FLAG_PAD_ZERO
;

363 
p_fmt
++;

366 
FÜm©FÏgs
 |ğ
NRF_CLI_FORMAT_FLAG_PRINT_SIGN
;

367 
p_fmt
++;

370 
v
 = 0;

373 } 
v
);

378 
F›ldWidth
 = 0u;

381 ià(
c
 == '*')

384 
F›ldWidth
 +ğ
	`va_¬g
(*
p_¬gs
, );

386 
p_fmt
++;

389 
c
 = *
p_fmt
;

390 ià((
c
 < '0') || (c > '9'))

394 
p_fmt
++;

395 
F›ldWidth
 = (F›ldWidth * 10uè+ (
c
 - '0');

401 
NumDig™s
 = 0u;

402 
c
 = *
p_fmt
;

403 ià(
c
 == '.')

405 
p_fmt
++;

408 
c
 = *
p_fmt
;

409 ià((
c
 < '0') || (c > '9'))

413 
p_fmt
++;

414 
NumDig™s
 = NumDig™ * 10u + (
c
 - '0');

420 
c
 = *
p_fmt
;

423 ià((
c
 == 'l') || (c == 'h'))

425 
p_fmt
++;

426 
c
 = *
p_fmt
;

437 
c
)

441 
c0
;

442 
v
 = 
	`va_¬g
(*
p_¬gs
, 
št32_t
);

443 
c0
 = ()
v
;

444 
	`bufãr_add
(
p_ùx
, 
c0
);

449 
v
 = 
	`va_¬g
(*
p_¬gs
, 
št32_t
);

450 
	`št_´št
(
p_ùx
,

451 
v
,

453 
NumDig™s
,

454 
F›ldWidth
,

455 
FÜm©FÏgs
);

458 
v
 = 
	`va_¬g
(*
p_¬gs
, 
št32_t
);

459 
	`unsigÃd_´št
(
p_ùx
,

460 (
ušt32_t
)
v
,

462 
NumDig™s
,

463 
F›ldWidth
,

464 
FÜm©FÏgs
);

468 
v
 = 
	`va_¬g
(*
p_¬gs
, 
št32_t
);

469 
	`unsigÃd_´št
(
p_ùx
,

470 (
ušt32_t
)
v
,

472 
NumDig™s
,

473 
F›ldWidth
,

474 
FÜm©FÏgs
);

478 cÚ¡ * 
p_s
 = 
	`va_¬g
(*
p_¬gs
, const *);

479 
	`¡ršg_´št
(
p_ùx
, 
p_s
, 
F›ldWidth
, 
FÜm©FÏgs
);

483 
v
 = 
	`va_¬g
(*
p_¬gs
, 
št32_t
);

484 
	`bufãr_add
(
p_ùx
, '0');

485 
	`bufãr_add
(
p_ùx
, 'x');

486 
	`unsigÃd_´št
(
p_ùx
, (
ušt32_t
)
v
, 16u, 8u, 8u, 0);

489 
	`bufãr_add
(
p_ùx
, '%');

495 
p_fmt
++;

499 
	`bufãr_add
(
p_ùx
, 
c
);

501 } *
p_fmt
 != '\0');

503 ià(
p_ùx
->
auto_æush
)

505 
	`Äf_årštf_bufãr_æush
(
p_ùx
);

507 
	}
}

	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\external\segger_rtt\SEGGER_RTT.c

86 
	~"SEGGER_RTT.h
"

88 
	~<¡ršg.h
>

97 #iâdeà 
BUFFER_SIZE_UP


98 
	#BUFFER_SIZE_UP
 1024

100 

	)

101 #iâdeà 
BUFFER_SIZE_DOWN


102 
	#BUFFER_SIZE_DOWN
 16

104 

	)

105 #iâdeà 
SEGGER_RTT_MAX_NUM_UP_BUFFERS


106 
	#SEGGER_RTT_MAX_NUM_UP_BUFFERS
 2

108 

	)

109 #iâdeà 
SEGGER_RTT_MAX_NUM_DOWN_BUFFERS


110 
	#SEGGER_RTT_MAX_NUM_DOWN_BUFFERS
 2

112 

	)

113 #iâdeà
SEGGER_RTT_BUFFER_SECTION


114 #ià
defšed
(
SEGGER_RTT_SECTION
)

115 
	#SEGGER_RTT_BUFFER_SECTION
 
SEGGER_RTT_SECTION


	)

119 #iâdeà 
SEGGER_RTT_ALIGNMENT


120 
	#SEGGER_RTT_ALIGNMENT
 0

	)

123 #iâdeà 
SEGGER_RTT_BUFFER_ALIGNMENT


124 
	#SEGGER_RTT_BUFFER_ALIGNMENT
 0

	)

127 #iâdeà 
SEGGER_RTT_MODE_DEFAULT


128 
	#SEGGER_RTT_MODE_DEFAULT
 
SEGGER_RTT_MODE_NO_BLOCK_SKIP


	)

131 #iâdeà 
SEGGER_RTT_LOCK


132 
	#SEGGER_RTT_LOCK
()

	)

135 #iâdeà 
SEGGER_RTT_UNLOCK


136 
	#SEGGER_RTT_UNLOCK
()

	)

139 #iâdeà 
STRLEN


140 
	#STRLEN
(
a
è
	`¡¾’
(×))

	)

143 #iâdeà 
SEGGER_RTT_MEMCPY_USE_BYTELOOP


144 
	#SEGGER_RTT_MEMCPY_USE_BYTELOOP
 0

	)

147 #iâdeà 
SEGGER_RTT_MEMCPY


148 #ifdeà 
MEMCPY


149 
	#SEGGER_RTT_MEMCPY
(
pDe¡
, 
pSrc
, 
NumBy‹s
è
	`MEMCPY
(ÕDe¡), (pSrc), (NumBy‹s))

	)

151 
	#SEGGER_RTT_MEMCPY
(
pDe¡
, 
pSrc
, 
NumBy‹s
è
	`memıy
(ÕDe¡), (pSrc), (NumBy‹s))

	)

155 #iâdeà 
MIN


156 
	#MIN
(
a
, 
b
è((×è< (b)è? (aè: (b))

	)

159 #iâdeà 
MAX


160 
	#MAX
(
a
, 
b
è((×è> (b)è? (aè: (b))

	)

165 #iâdeà
NULL


166 
	#NULL
 0

	)

175 #ià(
defšed
 
__ICCARM__
è|| (defšed 
__ICCRX__
)

176 
	#RTT_PRAGMA
(
P
è
	`_P¿gma
(#P)

	)

179 #ià
SEGGER_RTT_ALIGNMENT
 || 
SEGGER_RTT_BUFFER_ALIGNMENT


180 #ià(
defšed
 
__GNUC__
)

181 
	#SEGGER_RTT_ALIGN
(
V¬
, 
Alignm’t
èV¬ 
	`__©Œibu‹__
 ((
	`®igÃd
 (Alignm’t)))

	)

182 #–ià(
defšed
 
__ICCARM__
è|| (defšed 
__ICCRX__
)

183 
	#PRAGMA
(
A
è
	`_P¿gma
(#A)

	)

184 
	#SEGGER_RTT_ALIGN
(
V¬
, 
Alignm’t
è
	`RTT_PRAGMA
(
d©a_®ignm’t
=Alignment) \

185 
V¬


	)

186 #–ià(
defšed
 
__CC_ARM
)

187 
	#SEGGER_RTT_ALIGN
(
V¬
, 
Alignm’t
èV¬ 
	`__©Œibu‹__
 ((
	`®igÃd
 (Alignm’t)))

	)

192 
	#SEGGER_RTT_ALIGN
(
V¬
, 
Alignm’t
è
	)
Var

195 #ià
defšed
(
SEGGER_RTT_SECTION
è|| defšed (
SEGGER_RTT_BUFFER_SECTION
)

196 #ià(
defšed
 
__GNUC__
)

197 
	#SEGGER_RTT_PUT_SECTION
(
V¬
, 
SeùiÚ
è
	`__©Œibu‹__
 ((
	`£ùiÚ
 (SeùiÚ))è
	)
Var

198 #–ià(
defšed
 
__ICCARM__
è|| (defšed 
__ICCRX__
)

199 
	#SEGGER_RTT_PUT_SECTION
(
V¬
, 
SeùiÚ
è
	`RTT_PRAGMA
(
loÿtiÚ
=Section) \

200 
V¬


	)

201 #–ià(
defšed
 
__CC_ARM
)

202 
	#SEGGER_RTT_PUT_SECTION
(
V¬
, 
SeùiÚ
è
	`__©Œibu‹__
 ((
	`£ùiÚ
 (SeùiÚ), 
z”o_š™
)è
	)
Var

207 
	#SEGGER_RTT_PUT_SECTION
(
V¬
, 
SeùiÚ
è
	)
Var

211 #ià
SEGGER_RTT_ALIGNMENT


212 
	#SEGGER_RTT_CB_ALIGN
(
V¬
è
	`SEGGER_RTT_ALIGN
(V¬, 
SEGGER_RTT_ALIGNMENT
)

	)

214 
	#SEGGER_RTT_CB_ALIGN
(
V¬
è
	)
Var

217 #ià
SEGGER_RTT_BUFFER_ALIGNMENT


218 
	#SEGGER_RTT_BUFFER_ALIGN
(
V¬
è
	`SEGGER_RTT_ALIGN
(V¬, 
SEGGER_RTT_BUFFER_ALIGNMENT
)

	)

220 
	#SEGGER_RTT_BUFFER_ALIGN
(
V¬
è
	)
Var

224 #ià
defšed
(
SEGGER_RTT_SECTION
)

225 
	#SEGGER_RTT_PUT_CB_SECTION
(
V¬
è
	`SEGGER_RTT_PUT_SECTION
(V¬, 
SEGGER_RTT_SECTION
)

	)

227 
	#SEGGER_RTT_PUT_CB_SECTION
(
V¬
è
	)
Var

230 #ià
defšed
(
SEGGER_RTT_BUFFER_SECTION
)

231 
	#SEGGER_RTT_PUT_BUFFER_SECTION
(
V¬
è
	`SEGGER_RTT_PUT_SECTION
(V¬, 
SEGGER_RTT_BUFFER_SECTION
)

	)

233 
	#SEGGER_RTT_PUT_BUFFER_SECTION
(
V¬
è
	)
Var

243 
	g_aT”mš®Id
[16] = { '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'A', 'B', 'C', 'D', 'E', 'F' };

254 
SEGGER_RTT_PUT_CB_SECTION
(
SEGGER_RTT_CB_ALIGN
(
SEGGER_RTT_CB
 
_SEGGER_RTT
));

256 
SEGGER_RTT_PUT_BUFFER_SECTION
(
SEGGER_RTT_BUFFER_ALIGN
(
_acUpBufãr
 [
BUFFER_SIZE_UP
]));

257 
SEGGER_RTT_PUT_BUFFER_SECTION
(
SEGGER_RTT_BUFFER_ALIGN
(
_acDownBufãr
[
BUFFER_SIZE_DOWN
]));

259 
	g_AùiveT”mš®
;

277 
	#INIT
() do { \

278 ià(
_SEGGER_RTT
.
acID
[0] =ğ'\0'è{ 
	`_DoIn™
(); } \

279 } 0)

	)

280 
	$_DoIn™
() {

281 
SEGGER_RTT_CB
* 
p
;

285 
p
 = &
_SEGGER_RTT
;

286 
p
->
MaxNumUpBufãrs
 = 
SEGGER_RTT_MAX_NUM_UP_BUFFERS
;

287 
p
->
MaxNumDownBufãrs
 = 
SEGGER_RTT_MAX_NUM_DOWN_BUFFERS
;

291 
p
->
aUp
[0].
sName
 = "Terminal";

292 
p
->
aUp
[0].
pBufãr
 = 
_acUpBufãr
;

293 
p
->
aUp
[0].
SizeOfBufãr
 = (
_acUpBufãr
);

294 
p
->
aUp
[0].
RdOff
 = 0u;

295 
p
->
aUp
[0].
WrOff
 = 0u;

296 
p
->
aUp
[0].
FÏgs
 = 
SEGGER_RTT_MODE_DEFAULT
;

300 
p
->
aDown
[0].
sName
 = "Terminal";

301 
p
->
aDown
[0].
pBufãr
 = 
_acDownBufãr
;

302 
p
->
aDown
[0].
SizeOfBufãr
 = (
_acDownBufãr
);

303 
p
->
aDown
[0].
RdOff
 = 0u;

304 
p
->
aDown
[0].
WrOff
 = 0u;

305 
p
->
aDown
[0].
FÏgs
 = 
SEGGER_RTT_MODE_DEFAULT
;

311 
	`¡rıy
(&
p
->
acID
[7], "RTT");

312 
	`¡rıy
(&
p
->
acID
[0], "SEGGER");

313 
p
->
acID
[6] = ' ';

314 
	}
}

335 
	$_Wr™eBlockšg
(
SEGGER_RTT_BUFFER_UP
* 
pRšg
, cÚ¡ * 
pBufãr
, 
NumBy‹s
) {

336 
NumBy‹sToWr™e
;

337 
NumBy‹sWr™‹n
;

338 
RdOff
;

339 
WrOff
;

340 #ià
SEGGER_RTT_MEMCPY_USE_BYTELOOP


341 * 
pD¡
;

346 
NumBy‹sWr™‹n
 = 0u;

347 
WrOff
 = 
pRšg
->WrOff;

349 
RdOff
 = 
pRšg
->RdOff;

350 ià(
RdOff
 > 
WrOff
) {

351 
NumBy‹sToWr™e
 = 
RdOff
 - 
WrOff
 - 1u;

353 
NumBy‹sToWr™e
 = 
pRšg
->
SizeOfBufãr
 - (
WrOff
 - 
RdOff
 + 1u);

355 
NumBy‹sToWr™e
 = 
	`MIN
(NumBy‹sToWr™e, (
pRšg
->
SizeOfBufãr
 - 
WrOff
));

356 
NumBy‹sToWr™e
 = 
	`MIN
(NumBy‹sToWr™e, 
NumBy‹s
);

357 #ià
SEGGER_RTT_MEMCPY_USE_BYTELOOP


358 
pD¡
 = 
pRšg
->
pBufãr
 + 
WrOff
;

359 
NumBy‹sWr™‹n
 +ğ
NumBy‹sToWr™e
;

360 
NumBy‹s
 -ğ
NumBy‹sToWr™e
;

361 
WrOff
 +ğ
NumBy‹sToWr™e
;

362 
NumBy‹sToWr™e
--) {

363 *
pD¡
++ = *
pBufãr
++;

366 
	`SEGGER_RTT_MEMCPY
(
pRšg
->
pBufãr
 + 
WrOff
,…Bufãr, 
NumBy‹sToWr™e
);

367 
NumBy‹sWr™‹n
 +ğ
NumBy‹sToWr™e
;

368 
pBufãr
 +ğ
NumBy‹sToWr™e
;

369 
NumBy‹s
 -ğ
NumBy‹sToWr™e
;

370 
WrOff
 +ğ
NumBy‹sToWr™e
;

372 ià(
WrOff
 =ğ
pRšg
->
SizeOfBufãr
) {

373 
WrOff
 = 0u;

375 
pRšg
->
WrOff
 = WrOff;

376 } 
NumBy‹s
);

378  
NumBy‹sWr™‹n
;

379 
	}
}

399 
	$_Wr™eNoCheck
(
SEGGER_RTT_BUFFER_UP
* 
pRšg
, cÚ¡ * 
pD©a
, 
NumBy‹s
) {

400 
NumBy‹sAtOnû
;

401 
WrOff
;

402 
Rem
;

403 #ià
SEGGER_RTT_MEMCPY_USE_BYTELOOP


404 * 
pD¡
;

407 
WrOff
 = 
pRšg
->WrOff;

408 
Rem
 = 
pRšg
->
SizeOfBufãr
 - 
WrOff
;

409 ià(
Rem
 > 
NumBy‹s
) {

413 #ià
SEGGER_RTT_MEMCPY_USE_BYTELOOP


414 
pD¡
 = 
pRšg
->
pBufãr
 + 
WrOff
;

415 
WrOff
 +ğ
NumBy‹s
;

416 
NumBy‹s
--) {

417 *
pD¡
++ = *
pD©a
++;

419 
pRšg
->
WrOff
 = WrOff;

421 
	`SEGGER_RTT_MEMCPY
(
pRšg
->
pBufãr
 + 
WrOff
, 
pD©a
, 
NumBy‹s
);

422 
pRšg
->
WrOff
 = WrOfà+ 
NumBy‹s
;

428 #ià
SEGGER_RTT_MEMCPY_USE_BYTELOOP


429 
pD¡
 = 
pRšg
->
pBufãr
 + 
WrOff
;

430 
NumBy‹sAtOnû
 = 
Rem
;

431 
NumBy‹sAtOnû
--) {

432 *
pD¡
++ = *
pD©a
++;

434 
pD¡
 = 
pRšg
->
pBufãr
;

435 
NumBy‹sAtOnû
 = 
NumBy‹s
 - 
Rem
;

436 
NumBy‹sAtOnû
--) {

437 *
pD¡
++ = *
pD©a
++;

439 
pRšg
->
WrOff
 = 
NumBy‹s
 - 
Rem
;

441 
NumBy‹sAtOnû
 = 
Rem
;

442 
	`SEGGER_RTT_MEMCPY
(
pRšg
->
pBufãr
 + 
WrOff
, 
pD©a
, 
NumBy‹sAtOnû
);

443 
NumBy‹sAtOnû
 = 
NumBy‹s
 - 
Rem
;

444 
	`SEGGER_RTT_MEMCPY
(
pRšg
->
pBufãr
, 
pD©a
 + 
Rem
, 
NumBy‹sAtOnû
);

445 
pRšg
->
WrOff
 = 
NumBy‹sAtOnû
;

448 
	}
}

463 
	$_Po¡T”mš®Sw™ch
(
SEGGER_RTT_BUFFER_UP
* 
pRšg
, 
T”mš®Id
) {

464 
ac
[2];

466 
ac
[0] = 0xFFu;

467 
ac
[1] = 
_aT”mš®Id
[
T”mš®Id
];

468 
	`_Wr™eBlockšg
(
pRšg
, 
ac
, 2u);

469 
	}
}

485 
	$_G‘AvaWr™eS·û
(
SEGGER_RTT_BUFFER_UP
* 
pRšg
) {

486 
RdOff
;

487 
WrOff
;

488 
r
;

493 
RdOff
 = 
pRšg
->RdOff;

494 
WrOff
 = 
pRšg
->WrOff;

495 ià(
RdOff
 <ğ
WrOff
) {

496 
r
 = 
pRšg
->
SizeOfBufãr
 - 1u - 
WrOff
 + 
RdOff
;

498 
r
 = 
RdOff
 - 
WrOff
 - 1u;

500  
r
;

501 
	}
}

526 
	$SEGGER_RTT_R—dNoLock
(
BufãrIndex
, * 
pD©a
, 
BufãrSize
) {

527 
NumBy‹sRem
;

528 
NumBy‹sR—d
;

529 
RdOff
;

530 
WrOff
;

531 * 
pBufãr
;

532 
SEGGER_RTT_BUFFER_DOWN
* 
pRšg
;

533 #ià
SEGGER_RTT_MEMCPY_USE_BYTELOOP


534 cÚ¡ * 
pSrc
;

537 
	`INIT
();

538 
pRšg
 = &
_SEGGER_RTT
.
aDown
[
BufãrIndex
];

539 
pBufãr
 = (*)
pD©a
;

540 
RdOff
 = 
pRšg
->RdOff;

541 
WrOff
 = 
pRšg
->WrOff;

542 
NumBy‹sR—d
 = 0u;

546 ià(
RdOff
 > 
WrOff
) {

547 
NumBy‹sRem
 = 
pRšg
->
SizeOfBufãr
 - 
RdOff
;

548 
NumBy‹sRem
 = 
	`MIN
(NumBy‹sRem, 
BufãrSize
);

549 #ià
SEGGER_RTT_MEMCPY_USE_BYTELOOP


550 
pSrc
 = 
pRšg
->
pBufãr
 + 
RdOff
;

551 
NumBy‹sR—d
 +ğ
NumBy‹sRem
;

552 
BufãrSize
 -ğ
NumBy‹sRem
;

553 
RdOff
 +ğ
NumBy‹sRem
;

554 
NumBy‹sRem
--) {

555 *
pBufãr
++ = *
pSrc
++;

558 
	`SEGGER_RTT_MEMCPY
(
pBufãr
, 
pRšg
->pBufã¸+ 
RdOff
, 
NumBy‹sRem
);

559 
NumBy‹sR—d
 +ğ
NumBy‹sRem
;

560 
pBufãr
 +ğ
NumBy‹sRem
;

561 
BufãrSize
 -ğ
NumBy‹sRem
;

562 
RdOff
 +ğ
NumBy‹sRem
;

567 ià(
RdOff
 =ğ
pRšg
->
SizeOfBufãr
) {

568 
RdOff
 = 0u;

574 
NumBy‹sRem
 = 
WrOff
 - 
RdOff
;

575 
NumBy‹sRem
 = 
	`MIN
(NumBy‹sRem, 
BufãrSize
);

576 ià(
NumBy‹sRem
 > 0u) {

577 #ià
SEGGER_RTT_MEMCPY_USE_BYTELOOP


578 
pSrc
 = 
pRšg
->
pBufãr
 + 
RdOff
;

579 
NumBy‹sR—d
 +ğ
NumBy‹sRem
;

580 
BufãrSize
 -ğ
NumBy‹sRem
;

581 
RdOff
 +ğ
NumBy‹sRem
;

582 
NumBy‹sRem
--) {

583 *
pBufãr
++ = *
pSrc
++;

586 
	`SEGGER_RTT_MEMCPY
(
pBufãr
, 
pRšg
->pBufã¸+ 
RdOff
, 
NumBy‹sRem
);

587 
NumBy‹sR—d
 +ğ
NumBy‹sRem
;

588 
pBufãr
 +ğ
NumBy‹sRem
;

589 
BufãrSize
 -ğ
NumBy‹sRem
;

590 
RdOff
 +ğ
NumBy‹sRem
;

593 ià(
NumBy‹sR—d
) {

594 
pRšg
->
RdOff
 = RdOff;

597  
NumBy‹sR—d
;

598 
	}
}

616 
	$SEGGER_RTT_R—d
(
BufãrIndex
, * 
pBufãr
, 
BufãrSize
) {

617 
NumBy‹sR—d
;

619 
	`SEGGER_RTT_LOCK
();

623 
NumBy‹sR—d
 = 
	`SEGGER_RTT_R—dNoLock
(
BufãrIndex
, 
pBufãr
, 
BufãrSize
);

627 
	`SEGGER_RTT_UNLOCK
();

629  
NumBy‹sR—d
;

630 
	}
}

655 
	$SEGGER_RTT_Wr™eW™hOv”wr™eNoLock
(
BufãrIndex
, cÚ¡ * 
pBufãr
, 
NumBy‹s
) {

656 cÚ¡ * 
pD©a
;

657 
SEGGER_RTT_BUFFER_UP
* 
pRšg
;

658 
Ava
;

659 #ià
SEGGER_RTT_MEMCPY_USE_BYTELOOP


660 * 
pD¡
;

663 
pD©a
 = (cÚ¡ *)
pBufãr
;

667 
pRšg
 = &
_SEGGER_RTT
.
aUp
[
BufãrIndex
];

671 ià(
pRšg
->
WrOff
 =ğpRšg->
RdOff
) {

672 
Ava
 = 
pRšg
->
SizeOfBufãr
 - 1u;

673 } iàĞ
pRšg
->
WrOff
 <…Ršg->
RdOff
) {

674 
Ava
 = 
pRšg
->
RdOff
 -…Ršg->
WrOff
 - 1u;

676 
Ava
 = 
pRšg
->
RdOff
 -…Ršg->
WrOff
 - 1u +…Ršg->
SizeOfBufãr
;

678 ià(
NumBy‹s
 > 
Ava
) {

679 
pRšg
->
RdOff
 +ğ(
NumBy‹s
 - 
Ava
);

680 
pRšg
->
RdOff
 >ğpRšg->
SizeOfBufãr
) {

681 
pRšg
->
RdOff
 -ğpRšg->
SizeOfBufãr
;

687 
Ava
 = 
pRšg
->
SizeOfBufãr
 -…Ršg->
WrOff
;

689 ià(
Ava
 > 
NumBy‹s
) {

693 #ià
SEGGER_RTT_MEMCPY_USE_BYTELOOP


694 
pD¡
 = 
pRšg
->
pBufãr
 +…Ršg->
WrOff
;

695 
Ava
 = 
NumBy‹s
;

696 
NumBy‹s
--) {

697 *
pD¡
++ = *
pD©a
++;

699 
pRšg
->
WrOff
 +ğ
Ava
;

701 
	`SEGGER_RTT_MEMCPY
(
pRšg
->
pBufãr
 +…Ršg->
WrOff
, 
pD©a
, 
NumBy‹s
);

702 
pRšg
->
WrOff
 +ğ
NumBy‹s
;

709 #ià
SEGGER_RTT_MEMCPY_USE_BYTELOOP


710 
pD¡
 = 
pRšg
->
pBufãr
 +…Ršg->
WrOff
;

711 
NumBy‹s
 -ğ
Ava
;

712 
Ava
--) {

713 *
pD¡
++ = *
pD©a
++;

715 
pRšg
->
WrOff
 = 0;

717 
	`SEGGER_RTT_MEMCPY
(
pRšg
->
pBufãr
 +…Ršg->
WrOff
, 
pD©a
, 
Ava
);

718 
pD©a
 +ğ
Ava
;

719 
pRšg
->
WrOff
 = 0;

720 
NumBy‹s
 -ğ
Ava
;

722 
Ava
 = (
pRšg
->
SizeOfBufãr
 - 1);

724 } 
NumBy‹s
);

725 
	}
}

751 
	$SEGGER_RTT_Wr™eSkNoLock
(
BufãrIndex
, cÚ¡ * 
pBufãr
, 
NumBy‹s
) {

752 cÚ¡ * 
pD©a
;

753 
SEGGER_RTT_BUFFER_UP
* 
pRšg
;

754 
Ava
;

755 
RdOff
;

756 
WrOff
;

757 
Rem
;

758 #ià
SEGGER_RTT_MEMCPY_USE_BYTELOOP


759 * 
pD¡
;

762 
pD©a
 = (cÚ¡ *)
pBufãr
;

766 
pRšg
 = &
_SEGGER_RTT
.
aUp
[
BufãrIndex
];

767 
RdOff
 = 
pRšg
->RdOff;

768 
WrOff
 = 
pRšg
->WrOff;

782 ià(
RdOff
 <ğ
WrOff
) {

786 
Ava
 = 
pRšg
->
SizeOfBufãr
 - 1u - 
WrOff
 ;

787 ià(
Ava
 >ğ
NumBy‹s
) {

788 #ià
SEGGER_RTT_MEMCPY_USE_BYTELOOP


789 
pD¡
 = 
pRšg
->
pBufãr
 + 
WrOff
;

790 
WrOff
 +ğ
NumBy‹s
;

791 
NumBy‹s
--) {

792 *
pD¡
++ = *
pD©a
++;

794 
pRšg
->
WrOff
 = WrOff;

796 
	`SEGGER_RTT_MEMCPY
(
pRšg
->
pBufãr
 + 
WrOff
, 
pD©a
, 
NumBy‹s
);

797 
pRšg
->
WrOff
 = WrOfà+ 
NumBy‹s
;

804 
Ava
 +ğ
RdOff
;

808 ià(
Ava
 >ğ
NumBy‹s
) {

812 
Rem
 = 
pRšg
->
SizeOfBufãr
 - 
WrOff
;

813 ià(
Rem
 > 
NumBy‹s
) {

814 #ià
SEGGER_RTT_MEMCPY_USE_BYTELOOP


815 
pD¡
 = 
pRšg
->
pBufãr
 + 
WrOff
;

816 
WrOff
 +ğ
NumBy‹s
;

817 
NumBy‹s
--) {

818 *
pD¡
++ = *
pD©a
++;

820 
pRšg
->
WrOff
 = WrOff;

822 
	`SEGGER_RTT_MEMCPY
(
pRšg
->
pBufãr
 + 
WrOff
, 
pD©a
, 
NumBy‹s
);

823 
pRšg
->
WrOff
 = WrOfà+ 
NumBy‹s
;

829 #ià
SEGGER_RTT_MEMCPY_USE_BYTELOOP


830 
pD¡
 = 
pRšg
->
pBufãr
 + 
WrOff
;

831 
NumBy‹s
 -ğ
Rem
;

832 
WrOff
 = 
NumBy‹s
;

834 *
pD¡
++ = *
pD©a
++;

835 } --
Rem
);

836 
pD¡
 = 
pRšg
->
pBufãr
;

838 *
pD¡
++ = *
pD©a
++;

839 } --
NumBy‹s
);

840 
pRšg
->
WrOff
 = WrOff;

842 
	`SEGGER_RTT_MEMCPY
(
pRšg
->
pBufãr
 + 
WrOff
, 
pD©a
, 
Rem
);

843 
	`SEGGER_RTT_MEMCPY
(
pRšg
->
pBufãr
, 
pD©a
 + 
Rem
, 
NumBy‹s
 - Rem);

844 
pRšg
->
WrOff
 = 
NumBy‹s
 - 
Rem
;

850 
Ava
 = 
RdOff
 - 
WrOff
 - 1u;

851 ià(
Ava
 >ğ
NumBy‹s
) {

852 #ià
SEGGER_RTT_MEMCPY_USE_BYTELOOP


853 
pD¡
 = 
pRšg
->
pBufãr
 + 
WrOff
;

854 
WrOff
 +ğ
NumBy‹s
;

855 
NumBy‹s
--) {

856 *
pD¡
++ = *
pD©a
++;

858 
pRšg
->
WrOff
 = WrOff;

860 
	`SEGGER_RTT_MEMCPY
(
pRšg
->
pBufãr
 + 
WrOff
, 
pD©a
, 
NumBy‹s
);

861 
pRšg
->
WrOff
 = WrOfà+ 
NumBy‹s
;

870 
	}
}

895 
	$SEGGER_RTT_Wr™eNoLock
(
BufãrIndex
, cÚ¡ * 
pBufãr
, 
NumBy‹s
) {

896 
Stus
;

897 
Ava
;

898 cÚ¡ * 
pD©a
;

899 
SEGGER_RTT_BUFFER_UP
* 
pRšg
;

901 
pD©a
 = (cÚ¡ *)
pBufãr
;

905 
pRšg
 = &
_SEGGER_RTT
.
aUp
[
BufãrIndex
];

909 
pRšg
->
FÏgs
) {

910 
SEGGER_RTT_MODE_NO_BLOCK_SKIP
:

915 
Ava
 = 
	`_G‘AvaWr™eS·û
(
pRšg
);

916 ià(
Ava
 < 
NumBy‹s
) {

917 
Stus
 = 0u;

919 
Stus
 = 
NumBy‹s
;

920 
	`_Wr™eNoCheck
(
pRšg
, 
pD©a
, 
NumBy‹s
);

923 
SEGGER_RTT_MODE_NO_BLOCK_TRIM
:

927 
Ava
 = 
	`_G‘AvaWr™eS·û
(
pRšg
);

928 
Stus
 = 
Ava
 < 
NumBy‹s
 ? Avail : NumBytes;

929 
	`_Wr™eNoCheck
(
pRšg
, 
pD©a
, 
Stus
);

931 
SEGGER_RTT_MODE_BLOCK_IF_FIFO_FULL
:

935 
Stus
 = 
	`_Wr™eBlockšg
(
pRšg
, 
pD©a
, 
NumBy‹s
);

938 
Stus
 = 0u;

944  
Stus
;

945 
	}
}

966 
	$SEGGER_RTT_Wr™e
(
BufãrIndex
, cÚ¡ * 
pBufãr
, 
NumBy‹s
) {

967 
Stus
;

969 
	`INIT
();

970 
	`SEGGER_RTT_LOCK
();

974 
Stus
 = 
	`SEGGER_RTT_Wr™eNoLock
(
BufãrIndex
, 
pBufãr
, 
NumBy‹s
);

978 
	`SEGGER_RTT_UNLOCK
();

980  
Stus
;

981 
	}
}

1003 
	$SEGGER_RTT_Wr™eSŒšg
(
BufãrIndex
, cÚ¡ * 
s
) {

1004 
L’
;

1006 
L’
 = 
	`STRLEN
(
s
);

1007  
	`SEGGER_RTT_Wr™e
(
BufãrIndex
, 
s
, 
L’
);

1008 
	}
}

1033 
	$SEGGER_RTT_PutCh¬SkNoLock
(
BufãrIndex
, 
c
) {

1034 
SEGGER_RTT_BUFFER_UP
* 
pRšg
;

1035 
WrOff
;

1036 
Stus
;

1040 
pRšg
 = &
_SEGGER_RTT
.
aUp
[
BufãrIndex
];

1044 
WrOff
 = 
pRšg
->WrOff + 1;

1045 ià(
WrOff
 =ğ
pRšg
->
SizeOfBufãr
) {

1046 
WrOff
 = 0;

1051 ià(
WrOff
 !ğ
pRšg
->
RdOff
) {

1052 
pRšg
->
pBufãr
[pRšg->
WrOff
] = 
c
;

1053 
pRšg
->
WrOff
 = WrOff;

1054 
Stus
 = 1;

1056 
Stus
 = 0;

1059  
Stus
;

1060 
	}
}

1080 
	$SEGGER_RTT_PutCh¬Sk
(
BufãrIndex
, 
c
) {

1081 
SEGGER_RTT_BUFFER_UP
* 
pRšg
;

1082 
WrOff
;

1083 
Stus
;

1087 
	`INIT
();

1088 
	`SEGGER_RTT_LOCK
();

1092 
pRšg
 = &
_SEGGER_RTT
.
aUp
[
BufãrIndex
];

1096 
WrOff
 = 
pRšg
->WrOff + 1;

1097 ià(
WrOff
 =ğ
pRšg
->
SizeOfBufãr
) {

1098 
WrOff
 = 0;

1103 ià(
WrOff
 !ğ
pRšg
->
RdOff
) {

1104 
pRšg
->
pBufãr
[pRšg->
WrOff
] = 
c
;

1105 
pRšg
->
WrOff
 = WrOff;

1106 
Stus
 = 1;

1108 
Stus
 = 0;

1113 
	`SEGGER_RTT_UNLOCK
();

1115  
Stus
;

1116 
	}
}

1136 
	$SEGGER_RTT_PutCh¬
(
BufãrIndex
, 
c
) {

1137 
SEGGER_RTT_BUFFER_UP
* 
pRšg
;

1138 
WrOff
;

1139 
Stus
;

1143 
	`INIT
();

1144 
	`SEGGER_RTT_LOCK
();

1148 
pRšg
 = &
_SEGGER_RTT
.
aUp
[
BufãrIndex
];

1152 
WrOff
 = 
pRšg
->WrOff + 1;

1153 ià(
WrOff
 =ğ
pRšg
->
SizeOfBufãr
) {

1154 
WrOff
 = 0;

1159 ià(
pRšg
->
FÏgs
 =ğ
SEGGER_RTT_MODE_BLOCK_IF_FIFO_FULL
) {

1160 
WrOff
 =ğ
pRšg
->
RdOff
) {

1167 ià(
WrOff
 !ğ
pRšg
->
RdOff
) {

1168 
pRšg
->
pBufãr
[pRšg->
WrOff
] = 
c
;

1169 
pRšg
->
WrOff
 = WrOff;

1170 
Stus
 = 1;

1172 
Stus
 = 0;

1177 
	`SEGGER_RTT_UNLOCK
();

1179  
Stus
;

1180 
	}
}

1197 
	$SEGGER_RTT_G‘Key
() {

1198 
c
;

1199 
r
;

1201 
r
 = ()
	`SEGGER_RTT_R—d
(0u, &
c
, 1u);

1202 ià(
r
 == 1) {

1203 
r
 = ()()
c
;

1205 
r
 = -1;

1207  
r
;

1208 
	}
}

1225 
	$SEGGER_RTT_Wa™Key
() {

1226 
r
;

1229 
r
 = 
	`SEGGER_RTT_G‘Key
();

1230 } 
r
 < 0);

1231  
r
;

1232 
	}
}

1248 
	$SEGGER_RTT_HasKey
() {

1249 
RdOff
;

1250 
r
;

1252 
	`INIT
();

1253 
RdOff
 = 
_SEGGER_RTT
.
aDown
[0].RdOff;

1254 ià(
RdOff
 !ğ
_SEGGER_RTT
.
aDown
[0].
WrOff
) {

1255 
r
 = 1;

1257 
r
 = 0;

1259  
r
;

1260 
	}
}

1274 
	$SEGGER_RTT_HasD©a
(
BufãrIndex
) {

1275 
SEGGER_RTT_BUFFER_DOWN
* 
pRšg
;

1276 
v
;

1278 
pRšg
 = &
_SEGGER_RTT
.
aDown
[
BufãrIndex
];

1279 
v
 = 
pRšg
->
WrOff
;

1280  
v
 - 
pRšg
->
RdOff
;

1281 
	}
}

1302 
	$SEGGER_RTT_AÎocDownBufãr
(cÚ¡ * 
sName
, * 
pBufãr
, 
BufãrSize
, 
FÏgs
) {

1303 
BufãrIndex
;

1305 
	`INIT
();

1306 
	`SEGGER_RTT_LOCK
();

1307 
BufãrIndex
 = 0;

1309 ià(
_SEGGER_RTT
.
aDown
[
BufãrIndex
].
pBufãr
 =ğ
NULL
) {

1312 
BufãrIndex
++;

1313 } 
BufãrIndex
 < 
_SEGGER_RTT
.
MaxNumDownBufãrs
);

1314 ià(
BufãrIndex
 < 
_SEGGER_RTT
.
MaxNumDownBufãrs
) {

1315 
_SEGGER_RTT
.
aDown
[
BufãrIndex
].
sName
 = sName;

1316 
_SEGGER_RTT
.
aDown
[
BufãrIndex
].
pBufãr
 = (*)pBuffer;

1317 
_SEGGER_RTT
.
aDown
[
BufãrIndex
].
SizeOfBufãr
 = 
BufãrSize
;

1318 
_SEGGER_RTT
.
aDown
[
BufãrIndex
].
RdOff
 = 0u;

1319 
_SEGGER_RTT
.
aDown
[
BufãrIndex
].
WrOff
 = 0u;

1320 
_SEGGER_RTT
.
aDown
[
BufãrIndex
].
FÏgs
 = Flags;

1322 
BufãrIndex
 = -1;

1324 
	`SEGGER_RTT_UNLOCK
();

1325  
BufãrIndex
;

1326 
	}
}

1347 
	$SEGGER_RTT_AÎocUpBufãr
(cÚ¡ * 
sName
, * 
pBufãr
, 
BufãrSize
, 
FÏgs
) {

1348 
BufãrIndex
;

1350 
	`INIT
();

1351 
	`SEGGER_RTT_LOCK
();

1352 
BufãrIndex
 = 0;

1354 ià(
_SEGGER_RTT
.
aUp
[
BufãrIndex
].
pBufãr
 =ğ
NULL
) {

1357 
BufãrIndex
++;

1358 } 
BufãrIndex
 < 
_SEGGER_RTT
.
MaxNumUpBufãrs
);

1359 ià(
BufãrIndex
 < 
_SEGGER_RTT
.
MaxNumUpBufãrs
) {

1360 
_SEGGER_RTT
.
aUp
[
BufãrIndex
].
sName
 = sName;

1361 
_SEGGER_RTT
.
aUp
[
BufãrIndex
].
pBufãr
 = (*)pBuffer;

1362 
_SEGGER_RTT
.
aUp
[
BufãrIndex
].
SizeOfBufãr
 = 
BufãrSize
;

1363 
_SEGGER_RTT
.
aUp
[
BufãrIndex
].
RdOff
 = 0u;

1364 
_SEGGER_RTT
.
aUp
[
BufãrIndex
].
WrOff
 = 0u;

1365 
_SEGGER_RTT
.
aUp
[
BufãrIndex
].
FÏgs
 = Flags;

1367 
BufãrIndex
 = -1;

1369 
	`SEGGER_RTT_UNLOCK
();

1370  
BufãrIndex
;

1371 
	}
}

1398 
	$SEGGER_RTT_CÚfigUpBufãr
(
BufãrIndex
, cÚ¡ * 
sName
, * 
pBufãr
, 
BufãrSize
, 
FÏgs
) {

1399 
r
;

1401 
	`INIT
();

1402 ià(
BufãrIndex
 < ()
_SEGGER_RTT
.
MaxNumUpBufãrs
) {

1403 
	`SEGGER_RTT_LOCK
();

1404 ià(
BufãrIndex
 > 0u) {

1405 
_SEGGER_RTT
.
aUp
[
BufãrIndex
].
sName
 = sName;

1406 
_SEGGER_RTT
.
aUp
[
BufãrIndex
].
pBufãr
 = (*)pBuffer;

1407 
_SEGGER_RTT
.
aUp
[
BufãrIndex
].
SizeOfBufãr
 = 
BufãrSize
;

1408 
_SEGGER_RTT
.
aUp
[
BufãrIndex
].
RdOff
 = 0u;

1409 
_SEGGER_RTT
.
aUp
[
BufãrIndex
].
WrOff
 = 0u;

1411 
_SEGGER_RTT
.
aUp
[
BufãrIndex
].
FÏgs
 = Flags;

1412 
	`SEGGER_RTT_UNLOCK
();

1413 
r
 = 0;

1415 
r
 = -1;

1417  
r
;

1418 
	}
}

1445 
	$SEGGER_RTT_CÚfigDownBufãr
(
BufãrIndex
, cÚ¡ * 
sName
, * 
pBufãr
, 
BufãrSize
, 
FÏgs
) {

1446 
r
;

1448 
	`INIT
();

1449 ià(
BufãrIndex
 < ()
_SEGGER_RTT
.
MaxNumDownBufãrs
) {

1450 
	`SEGGER_RTT_LOCK
();

1451 ià(
BufãrIndex
 > 0u) {

1452 
_SEGGER_RTT
.
aDown
[
BufãrIndex
].
sName
 = sName;

1453 
_SEGGER_RTT
.
aDown
[
BufãrIndex
].
pBufãr
 = (*)pBuffer;

1454 
_SEGGER_RTT
.
aDown
[
BufãrIndex
].
SizeOfBufãr
 = 
BufãrSize
;

1455 
_SEGGER_RTT
.
aDown
[
BufãrIndex
].
RdOff
 = 0u;

1456 
_SEGGER_RTT
.
aDown
[
BufãrIndex
].
WrOff
 = 0u;

1458 
_SEGGER_RTT
.
aDown
[
BufãrIndex
].
FÏgs
 = Flags;

1459 
	`SEGGER_RTT_UNLOCK
();

1460 
r
 = 0;

1462 
r
 = -1;

1464  
r
;

1465 
	}
}

1483 
	$SEGGER_RTT_S‘NameUpBufãr
(
BufãrIndex
, cÚ¡ * 
sName
) {

1484 
r
;

1486 
	`INIT
();

1487 ià(
BufãrIndex
 < ()
_SEGGER_RTT
.
MaxNumUpBufãrs
) {

1488 
	`SEGGER_RTT_LOCK
();

1489 
_SEGGER_RTT
.
aUp
[
BufãrIndex
].
sName
 = sName;

1490 
	`SEGGER_RTT_UNLOCK
();

1491 
r
 = 0;

1493 
r
 = -1;

1495  
r
;

1496 
	}
}

1514 
	$SEGGER_RTT_S‘NameDownBufãr
(
BufãrIndex
, cÚ¡ * 
sName
) {

1515 
r
;

1517 
	`INIT
();

1518 ià(
BufãrIndex
 < ()
_SEGGER_RTT
.
MaxNumDownBufãrs
) {

1519 
	`SEGGER_RTT_LOCK
();

1520 
_SEGGER_RTT
.
aDown
[
BufãrIndex
].
sName
 = sName;

1521 
	`SEGGER_RTT_UNLOCK
();

1522 
r
 = 0;

1524 
r
 = -1;

1526  
r
;

1527 
	}
}

1545 
	$SEGGER_RTT_S‘FÏgsUpBufãr
(
BufãrIndex
, 
FÏgs
) {

1546 
r
;

1548 
	`INIT
();

1549 ià(
BufãrIndex
 < ()
_SEGGER_RTT
.
MaxNumUpBufãrs
) {

1550 
	`SEGGER_RTT_LOCK
();

1551 
_SEGGER_RTT
.
aUp
[
BufãrIndex
].
FÏgs
 = Flags;

1552 
	`SEGGER_RTT_UNLOCK
();

1553 
r
 = 0;

1555 
r
 = -1;

1557  
r
;

1558 
	}
}

1576 
	$SEGGER_RTT_S‘FÏgsDownBufãr
(
BufãrIndex
, 
FÏgs
) {

1577 
r
;

1579 
	`INIT
();

1580 ià(
BufãrIndex
 < ()
_SEGGER_RTT
.
MaxNumDownBufãrs
) {

1581 
	`SEGGER_RTT_LOCK
();

1582 
_SEGGER_RTT
.
aDown
[
BufãrIndex
].
FÏgs
 = Flags;

1583 
	`SEGGER_RTT_UNLOCK
();

1584 
r
 = 0;

1586 
r
 = -1;

1588  
r
;

1589 
	}
}

1600 
	$SEGGER_RTT_In™
 () {

1601 
	`_DoIn™
();

1602 
	}
}

1618 
	$SEGGER_RTT_S‘T”mš®
 (
T”mš®Id
) {

1619 
ac
[2];

1620 
SEGGER_RTT_BUFFER_UP
* 
pRšg
;

1621 
Ava
;

1622 
r
;

1624 
	`INIT
();

1626 
r
 = 0;

1627 
ac
[0] = 0xFFU;

1628 ià(()
T”mš®Id
 < ()(
_aT”mš®Id
)) {

1629 
ac
[1] = 
_aT”mš®Id
[()
T”mš®Id
];

1630 
pRšg
 = &
_SEGGER_RTT
.
aUp
[0];

1631 
	`SEGGER_RTT_LOCK
();

1632 ià((
pRšg
->
FÏgs
 & 
SEGGER_RTT_MODE_MASK
è=ğ
SEGGER_RTT_MODE_BLOCK_IF_FIFO_FULL
) {

1633 
_AùiveT”mš®
 = 
T”mš®Id
;

1634 
	`_Wr™eBlockšg
(
pRšg
, 
ac
, 2u);

1636 
Ava
 = 
	`_G‘AvaWr™eS·û
(
pRšg
);

1637 ià(
Ava
 >= 2) {

1638 
_AùiveT”mš®
 = 
T”mš®Id
;

1639 
	`_Wr™eNoCheck
(
pRšg
, 
ac
, 2u);

1641 
r
 = -1;

1644 
	`SEGGER_RTT_UNLOCK
();

1646 
r
 = -1;

1648  
r
;

1649 
	}
}

1668 
	$SEGGER_RTT_T”mš®Out
 (
T”mš®Id
, cÚ¡ * 
s
) {

1669 
Stus
;

1670 
F¿gL’
;

1671 
Ava
;

1672 
SEGGER_RTT_BUFFER_UP
* 
pRšg
;

1674 
	`INIT
();

1678 ià(
T”mš®Id
 < ()(
_aT”mš®Id
)) {

1682 
pRšg
 = &
_SEGGER_RTT
.
aUp
[0];

1687 
F¿gL’
 = 
	`STRLEN
(
s
);

1691 
	`SEGGER_RTT_LOCK
();

1692 
Ava
 = 
	`_G‘AvaWr™eS·û
(
pRšg
);

1693 
pRšg
->
FÏgs
 & 
SEGGER_RTT_MODE_MASK
) {

1694 
SEGGER_RTT_MODE_NO_BLOCK_SKIP
:

1699 ià(
Ava
 < (
F¿gL’
 + 4u)) {

1700 
Stus
 = 0;

1702 
	`_Po¡T”mš®Sw™ch
(
pRšg
, 
T”mš®Id
);

1703 
Stus
 = ()
	`_Wr™eBlockšg
(
pRšg
, 
s
, 
F¿gL’
);

1704 
	`_Po¡T”mš®Sw™ch
(
pRšg
, 
_AùiveT”mš®
);

1707 
SEGGER_RTT_MODE_NO_BLOCK_TRIM
:

1713 ià(
Ava
 < 4u) {

1714 
Stus
 = -1;

1716 
	`_Po¡T”mš®Sw™ch
(
pRšg
, 
T”mš®Id
);

1717 
Stus
 = ()
	`_Wr™eBlockšg
(
pRšg
, 
s
, (
F¿gL’
 < (
Ava
 - 4u)) ? FragLen : (Avail - 4u));

1718 
	`_Po¡T”mš®Sw™ch
(
pRšg
, 
_AùiveT”mš®
);

1721 
SEGGER_RTT_MODE_BLOCK_IF_FIFO_FULL
:

1725 
	`_Po¡T”mš®Sw™ch
(
pRšg
, 
T”mš®Id
);

1726 
Stus
 = ()
	`_Wr™eBlockšg
(
pRšg
, 
s
, 
F¿gL’
);

1727 
	`_Po¡T”mš®Sw™ch
(
pRšg
, 
_AùiveT”mš®
);

1730 
Stus
 = -1;

1736 
	`SEGGER_RTT_UNLOCK
();

1738 
Stus
 = -1;

1740  
Stus
;

1741 
	}
}

	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\external\segger_rtt\SEGGER_RTT_Syscalls_GCC.c

66 
	~"sdk_cÚfig.h
"

67 #ià!
defšed
(
RETARGET_ENABLED
) || RETARGET_ENABLED == 0

68 #ià
defšed
(
NRF_LOG_USES_RTT
) && NRF_LOG_USES_RTT == 1

69 #ià(
defšed
 
__GNUC__
è&& !(defšed 
__SES_ARM
è&& !(defšed 
__CROSSWORKS_ARM
)

71 
	~<»’t.h
>

72 
	~"SEGGER_RTT.h
"

85 
	g_»’t
;

93 
_wr™e
(
fe
, *
±r
, 
Ën
);

94 
_ssize_t
 
_wr™e_r
 
_PARAMS
 ((
_»’t
 *, , cÚ¡ *, 
size_t
));

113 
	$_wr™e
(
fe
, *
±r
, 
Ën
) {

114 (è
fe
;

115 
	`SEGGER_RTT_Wr™e
(0, 
±r
, 
Ën
);

116  
Ën
;

117 
	}
}

129 
_ssize_t
 
_wr™e_r
 
_PARAMS
((
_»’t
 *
r
, 
fe
, cÚ¡ *
±r
, 
size_t
 
Ën
)) {

130 (è
	gfe
;

131 (è
	gr
;

132 
SEGGER_RTT_Wr™e
(0, 
±r
, 
Ën
);

133  
	gËn
;

	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\external\segger_rtt\SEGGER_RTT_printf.c

64 
	~"SEGGER_RTT.h
"

65 
	~"SEGGER_RTT_CÚf.h
"

74 #iâdeà
SEGGER_RTT_PRINTF_BUFFER_SIZE


75 
	#SEGGER_RTT_PRINTF_BUFFER_SIZE
 (64)

	)

78 
	~<¡dlib.h
>

79 
	~<¡d¬g.h
>

82 
	#FORMAT_FLAG_LEFT_JUSTIFY
 (1u << 0)

	)

83 
	#FORMAT_FLAG_PAD_ZERO
 (1u << 1)

	)

84 
	#FORMAT_FLAG_PRINT_SIGN
 (1u << 2)

	)

85 
	#FORMAT_FLAG_ALTERNATE
 (1u << 3)

	)

95 * 
	mpBufãr
;

96 
	mBufãrSize
;

97 
	mCÁ
;

99 
	mR‘uºV®ue
;

101 
	mRTTBufãrIndex
;

102 } 
	tSEGGER_RTT_PRINTF_DESC
;

110 
SEGGER_RTT_v´štf
(
BufãrIndex
, cÚ¡ * 
sFÜm©
, 
va_li¡
 * 
pP¬amLi¡
);

122 
	$_StÜeCh¬
(
SEGGER_RTT_PRINTF_DESC
 * 
p
, 
c
) {

123 
CÁ
;

125 
CÁ
 = 
p
->Cnt;

126 ià((
CÁ
 + 1uè<ğ
p
->
BufãrSize
) {

127 *(
p
->
pBufãr
 + 
CÁ
èğ
c
;

128 
p
->
CÁ
 = Cnt + 1u;

129 
p
->
R‘uºV®ue
++;

134 ià(
p
->
CÁ
 =ğp->
BufãrSize
) {

135 ià(
	`SEGGER_RTT_Wr™e
(
p
->
RTTBufãrIndex
,…->
pBufãr
,…->
CÁ
) !=…->Cnt) {

136 
p
->
R‘uºV®ue
 = -1;

138 
p
->
CÁ
 = 0u;

141 
	}
}

147 
	$_PrštUnsigÃd
(
SEGGER_RTT_PRINTF_DESC
 * 
pBufãrDesc
, 
v
, 
Ba£
, 
NumDig™s
, 
F›ldWidth
, 
FÜm©FÏgs
) {

148 cÚ¡ 
_aV2C
[16] = {'0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'A', 'B', 'C', 'D', 'E', 'F' };

149 
Div
;

150 
Dig™
;

151 
Numb”
;

152 
Width
;

153 
c
;

155 
Numb”
 = 
v
;

156 
Dig™
 = 1u;

160 
Width
 = 1u;

161 
Numb”
 >ğ
Ba£
) {

162 
Numb”
 = (Numb” / 
Ba£
);

163 
Width
++;

165 ià(
NumDig™s
 > 
Width
) {

166 
Width
 = 
NumDig™s
;

171 ià((
FÜm©FÏgs
 & 
FORMAT_FLAG_LEFT_JUSTIFY
) == 0u) {

172 ià(
F›ldWidth
 != 0u) {

173 ià(((
FÜm©FÏgs
 & 
FORMAT_FLAG_PAD_ZERO
è=ğFORMAT_FLAG_PAD_ZEROè&& (
NumDig™s
 == 0u)) {

174 
c
 = '0';

176 
c
 = ' ';

178 (
F›ldWidth
 !ğ0uè&& (
Width
 < FieldWidth)) {

179 
F›ldWidth
--;

180 
	`_StÜeCh¬
(
pBufãrDesc
, 
c
);

181 ià(
pBufãrDesc
->
R‘uºV®ue
 < 0) {

187 ià(
pBufãrDesc
->
R‘uºV®ue
 >= 0) {

194 ià(
NumDig™s
 > 1u) {

195 
NumDig™s
--;

197 
Div
 = 
v
 / 
Dig™
;

198 ià(
Div
 < 
Ba£
) {

202 
Dig™
 *ğ
Ba£
;

208 
Div
 = 
v
 / 
Dig™
;

209 
v
 -ğ
Div
 * 
Dig™
;

210 
	`_StÜeCh¬
(
pBufãrDesc
, 
_aV2C
[
Div
]);

211 ià(
pBufãrDesc
->
R‘uºV®ue
 < 0) {

214 
Dig™
 /ğ
Ba£
;

215 } 
Dig™
);

219 ià((
FÜm©FÏgs
 & 
FORMAT_FLAG_LEFT_JUSTIFY
) == FORMAT_FLAG_LEFT_JUSTIFY) {

220 ià(
F›ldWidth
 != 0u) {

221 (
F›ldWidth
 !ğ0uè&& (
Width
 < FieldWidth)) {

222 
F›ldWidth
--;

223 
	`_StÜeCh¬
(
pBufãrDesc
, ' ');

224 ià(
pBufãrDesc
->
R‘uºV®ue
 < 0) {

231 
	}
}

237 
	$_PrštIÁ
(
SEGGER_RTT_PRINTF_DESC
 * 
pBufãrDesc
, 
v
, 
Ba£
, 
NumDig™s
, 
F›ldWidth
, 
FÜm©FÏgs
) {

238 
Width
;

239 
Numb”
;

241 
Numb”
 = (
v
 < 0) ? -v : v;

246 
Width
 = 1u;

247 
Numb”
 >ğ()
Ba£
) {

248 
Numb”
 = (Numb” / ()
Ba£
);

249 
Width
++;

251 ià(
NumDig™s
 > 
Width
) {

252 
Width
 = 
NumDig™s
;

254 ià((
F›ldWidth
 > 0uè&& ((
v
 < 0è|| ((
FÜm©FÏgs
 & 
FORMAT_FLAG_PRINT_SIGN
) == FORMAT_FLAG_PRINT_SIGN))) {

255 
F›ldWidth
--;

261 ià((((
FÜm©FÏgs
 & 
FORMAT_FLAG_PAD_ZERO
è=ğ0uè|| (
NumDig™s
 !ğ0u)è&& ((FÜm©FÏg & 
FORMAT_FLAG_LEFT_JUSTIFY
) == 0u)) {

262 ià(
F›ldWidth
 != 0u) {

263 (
F›ldWidth
 !ğ0uè&& (
Width
 < FieldWidth)) {

264 
F›ldWidth
--;

265 
	`_StÜeCh¬
(
pBufãrDesc
, ' ');

266 ià(
pBufãrDesc
->
R‘uºV®ue
 < 0) {

275 ià(
pBufãrDesc
->
R‘uºV®ue
 >= 0) {

276 ià(
v
 < 0) {

277 
v
 = -v;

278 
	`_StÜeCh¬
(
pBufãrDesc
, '-');

279 } ià((
FÜm©FÏgs
 & 
FORMAT_FLAG_PRINT_SIGN
) == FORMAT_FLAG_PRINT_SIGN) {

280 
	`_StÜeCh¬
(
pBufãrDesc
, '+');

284 ià(
pBufãrDesc
->
R‘uºV®ue
 >= 0) {

288 ià(((
FÜm©FÏgs
 & 
FORMAT_FLAG_PAD_ZERO
è=ğFORMAT_FLAG_PAD_ZEROè&& ((FÜm©FÏg & 
FORMAT_FLAG_LEFT_JUSTIFY
è=ğ0uè&& (
NumDig™s
 == 0u)) {

289 ià(
F›ldWidth
 != 0u) {

290 (
F›ldWidth
 !ğ0uè&& (
Width
 < FieldWidth)) {

291 
F›ldWidth
--;

292 
	`_StÜeCh¬
(
pBufãrDesc
, '0');

293 ià(
pBufãrDesc
->
R‘uºV®ue
 < 0) {

299 ià(
pBufãrDesc
->
R‘uºV®ue
 >= 0) {

303 
	`_PrštUnsigÃd
(
pBufãrDesc
, ()
v
, 
Ba£
, 
NumDig™s
, 
F›ldWidth
, 
FÜm©FÏgs
);

307 
	}
}

332 
	$SEGGER_RTT_v´štf
(
BufãrIndex
, cÚ¡ * 
sFÜm©
, 
va_li¡
 * 
pP¬amLi¡
) {

333 
c
;

334 
SEGGER_RTT_PRINTF_DESC
 
BufãrDesc
;

335 
v
;

336 
NumDig™s
;

337 
FÜm©FÏgs
;

338 
F›ldWidth
;

339 
acBufãr
[
SEGGER_RTT_PRINTF_BUFFER_SIZE
];

341 
BufãrDesc
.
pBufãr
 = 
acBufãr
;

342 
BufãrDesc
.
BufãrSize
 = 
SEGGER_RTT_PRINTF_BUFFER_SIZE
;

343 
BufãrDesc
.
CÁ
 = 0u;

344 
BufãrDesc
.
RTTBufãrIndex
 = 
BufãrIndex
;

345 
BufãrDesc
.
R‘uºV®ue
 = 0;

348 
c
 = *
sFÜm©
;

349 
sFÜm©
++;

350 ià(
c
 == 0u) {

353 ià(
c
 == '%') {

357 
FÜm©FÏgs
 = 0u;

358 
v
 = 1;

360 
c
 = *
sFÜm©
;

361 
c
) {

362 '-': 
FÜm©FÏgs
 |ğ
FORMAT_FLAG_LEFT_JUSTIFY
; 
sFÜm©
++; ;

363 '0': 
FÜm©FÏgs
 |ğ
FORMAT_FLAG_PAD_ZERO
; 
sFÜm©
++; ;

364 '+': 
FÜm©FÏgs
 |ğ
FORMAT_FLAG_PRINT_SIGN
; 
sFÜm©
++; ;

365 '#': 
FÜm©FÏgs
 |ğ
FORMAT_FLAG_ALTERNATE
; 
sFÜm©
++; ;

366 : 
v
 = 0; ;

368 } 
v
);

372 
F›ldWidth
 = 0u;

374 
c
 = *
sFÜm©
;

375 ià((
c
 < '0') || (c > '9')) {

378 
sFÜm©
++;

379 
F›ldWidth
 = (F›ldWidth * 10uè+ (()
c
 - '0');

385 
NumDig™s
 = 0u;

386 
c
 = *
sFÜm©
;

387 ià(
c
 == '.') {

388 
sFÜm©
++;

390 
c
 = *
sFÜm©
;

391 ià((
c
 < '0') || (c > '9')) {

394 
sFÜm©
++;

395 
NumDig™s
 = NumDig™ * 10u + (()
c
 - '0');

401 
c
 = *
sFÜm©
;

403 ià((
c
 == 'l') || (c == 'h')) {

404 
sFÜm©
++;

405 
c
 = *
sFÜm©
;

413 
c
) {

415 
c0
;

416 
v
 = 
	`va_¬g
(*
pP¬amLi¡
, );

417 
c0
 = ()
v
;

418 
	`_StÜeCh¬
(&
BufãrDesc
, 
c0
);

422 
v
 = 
	`va_¬g
(*
pP¬amLi¡
, );

423 
	`_PrštIÁ
(&
BufãrDesc
, 
v
, 10u, 
NumDig™s
, 
F›ldWidth
, 
FÜm©FÏgs
);

426 
v
 = 
	`va_¬g
(*
pP¬amLi¡
, );

427 
	`_PrštUnsigÃd
(&
BufãrDesc
, ()
v
, 10u, 
NumDig™s
, 
F›ldWidth
, 
FÜm©FÏgs
);

431 
v
 = 
	`va_¬g
(*
pP¬amLi¡
, );

432 
	`_PrštUnsigÃd
(&
BufãrDesc
, ()
v
, 16u, 
NumDig™s
, 
F›ldWidth
, 
FÜm©FÏgs
);

436 cÚ¡ * 
s
 = 
	`va_¬g
(*
pP¬amLi¡
, const *);

438 
c
 = *
s
;

439 
s
++;

440 ià(
c
 == '\0') {

443 
	`_StÜeCh¬
(&
BufãrDesc
, 
c
);

444 } 
BufãrDesc
.
R‘uºV®ue
 >= 0);

448 
v
 = 
	`va_¬g
(*
pP¬amLi¡
, );

449 
	`_PrštUnsigÃd
(&
BufãrDesc
, ()
v
, 16u, 8u, 8u, 0u);

452 
	`_StÜeCh¬
(&
BufãrDesc
, '%');

457 
sFÜm©
++;

459 
	`_StÜeCh¬
(&
BufãrDesc
, 
c
);

461 } 
BufãrDesc
.
R‘uºV®ue
 >= 0);

463 ià(
BufãrDesc
.
R‘uºV®ue
 > 0) {

467 ià(
BufãrDesc
.
CÁ
 != 0u) {

468 
	`SEGGER_RTT_Wr™e
(
BufãrIndex
, 
acBufãr
, 
BufãrDesc
.
CÁ
);

470 
BufãrDesc
.
R‘uºV®ue
 +ğ()BufãrDesc.
CÁ
;

472  
BufãrDesc
.
R‘uºV®ue
;

473 
	}
}

506 
	$SEGGER_RTT_´štf
(
BufãrIndex
, cÚ¡ * 
sFÜm©
, ...) {

507 
r
;

508 
va_li¡
 
P¬amLi¡
;

510 
	`va_¡¬t
(
P¬amLi¡
, 
sFÜm©
);

511 
r
 = 
	`SEGGER_RTT_v´štf
(
BufãrIndex
, 
sFÜm©
, &
P¬amLi¡
);

512 
	`va_’d
(
P¬amLi¡
);

513  
r
;

514 
	}
}

	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\integration\nrfx\legacy\nrf_drv_clock.c

41 
	~<nÜdic_commÚ.h
>

42 
	~"Äf_drv_şock.h
"

44 #ià
NRF_MODULE_ENABLED
(
CLOCK
)

46 #ifdeà
SOFTDEVICE_PRESENT


47 
	~"Äf_sdh.h
"

48 
	~"Äf_sdh_soc.h
"

51 
	#NRF_LOG_MODULE_NAME
 
şock


	)

52 #ià
CLOCK_CONFIG_LOG_ENABLED


53 
	#NRF_LOG_LEVEL
 
CLOCK_CONFIG_LOG_LEVEL


	)

54 
	#NRF_LOG_INFO_COLOR
 
CLOCK_CONFIG_INFO_COLOR


	)

55 
	#NRF_LOG_DEBUG_COLOR
 
CLOCK_CONFIG_DEBUG_COLOR


	)

57 
	#NRF_LOG_LEVEL
 0

	)

59 
	~"Äf_log.h
"

60 
NRF_LOG_MODULE_REGISTER
();

62 
	#EVT_TO_STR
(
ev’t
) \

63 (
ev’t
 =ğ
NRF_CLOCK_EVENT_HFCLKSTARTED
 ? "NRF_CLOCK_EVENT_HFCLKSTARTED" : \

64 (
ev’t
 =ğ
NRF_CLOCK_EVENT_LFCLKSTARTED
 ? "NRF_CLOCK_EVENT_LFCLKSTARTED" : \

65 (
ev’t
 =ğ
NRF_CLOCK_EVENT_DONE
 ? "NRF_CLOCK_EVENT_DONE" : \

66 (
ev’t
 =ğ
NRF_CLOCK_EVENT_CTTO
 ? "NRF_CLOCK_EVENT_CTTO" : \

67 "UNKNOWN EVENT"))))

	)

71 
	#NRF_CLOCK_LFCLK_RC
 
CLOCK_LFCLKSRC_SRC_RC


	)

72 
	#NRF_CLOCK_LFCLK_Xl
 
CLOCK_LFCLKSRC_SRC_Xl


	)

73 
	#NRF_CLOCK_LFCLK_SyÁh
 
CLOCK_LFCLKSRC_SRC_SyÁh


	)

76 #ià(
CLOCK_CONFIG_LF_SRC
 =ğ
NRF_CLOCK_LFCLK_RC
è&& !
defšed
(
SOFTDEVICE_PRESENT
)

77 
	#CALIBRATION_SUPPORT
 1

	)

79 
	#CALIBRATION_SUPPORT
 0

	)

83 
	mCAL_STATE_IDLE
,

84 
	mCAL_STATE_CT
,

85 
	mCAL_STATE_HFCLK_REQ
,

86 
	mCAL_STATE_CAL
,

87 
	mCAL_STATE_ABORT
,

88 } 
	tÄf_drv_şock_ÿl_¡©e_t
;

93 
boŞ
 
	mmoduË_š™Ÿlized
;

94 vŞ©
boŞ
 
	mhfşk_Ú
;

95 vŞ©
boŞ
 
	mlfşk_Ú
;

96 vŞ©
ušt32_t
 
	mhfşk_»que¡s
;

97 vŞ©
Äf_drv_şock_hªdËr_™em_t
 * 
	mp_hf_h—d
;

98 vŞ©
ušt32_t
 
	mlfşk_»que¡s
;

99 vŞ©
Äf_drv_şock_hªdËr_™em_t
 * 
	mp_lf_h—d
;

100 #ià
CALIBRATION_SUPPORT


101 
Äf_drv_şock_hªdËr_™em_t
 
	mÿl_hfşk_¡¬‹d_hªdËr_™em
;

102 
Äf_drv_şock_ev’t_hªdËr_t
 
	mÿl_dÚe_hªdËr
;

103 vŞ©
Äf_drv_şock_ÿl_¡©e_t
 
	mÿl_¡©e
;

105 } 
	tÄf_drv_şock_cb_t
;

107 
Äf_drv_şock_cb_t
 
	gm_şock_cb
;

109 
şock_œq_hªdËr
(
Äfx_şock_evt_ty³_t
 
evt
);

111 
	$lfşk_¡İ
()

113 #ià
CALIBRATION_SUPPORT


114 
	`Äfx_şock_ÿlib¿tiÚ_tim”_¡İ
();

117 #ifdeà
SOFTDEVICE_PRESENT


121 
	`ASSERT
(!
	`Äf_sdh_is_’abËd
());

124 
	`Äfx_şock_lfşk_¡İ
();

125 
m_şock_cb
.
lfşk_Ú
 = 
çl£
;

126 
	}
}

128 
	$hfşk_¡¬t
()

130 #ifdeà
SOFTDEVICE_PRESENT


131 ià(
	`Äf_sdh_is_’abËd
())

133 ()
	`sd_şock_hfşk_»que¡
();

138 
	`Äfx_şock_hfşk_¡¬t
();

139 
	}
}

141 
	$hfşk_¡İ
()

143 #ifdeà
SOFTDEVICE_PRESENT


144 ià(
	`Äf_sdh_is_’abËd
())

146 ()
	`sd_şock_hfşk_»Ëa£
();

147 
m_şock_cb
.
hfşk_Ú
 = 
çl£
;

152 
	`Äfx_şock_hfşk_¡İ
();

153 
m_şock_cb
.
hfşk_Ú
 = 
çl£
;

154 
	}
}

156 
boŞ
 
	$Äf_drv_şock_š™_check
()

158  
m_şock_cb
.
moduË_š™Ÿlized
;

159 
	}
}

161 
»t_code_t
 
	$Äf_drv_şock_š™
()

163 
»t_code_t
 
”r_code
 = 
NRF_SUCCESS
;

164 ià(
m_şock_cb
.
moduË_š™Ÿlized
)

166 
”r_code
 = 
NRF_ERROR_MODULE_ALREADY_INITIALIZED
;

170 
m_şock_cb
.
p_hf_h—d
 = 
NULL
;

171 
m_şock_cb
.
hfşk_»que¡s
 = 0;

172 
m_şock_cb
.
p_lf_h—d
 = 
NULL
;

173 
m_şock_cb
.
lfşk_»que¡s
 = 0;

174 
”r_code
 = 
	`Äfx_şock_š™
(
şock_œq_hªdËr
);

175 #ifdeà
SOFTDEVICE_PRESENT


176 ià(!
	`Äf_sdh_is_’abËd
())

179 
	`Äfx_şock_’abË
();

182 #ià
CALIBRATION_SUPPORT


183 
m_şock_cb
.
ÿl_¡©e
 = 
CAL_STATE_IDLE
;

186 
m_şock_cb
.
moduË_š™Ÿlized
 = 
Œue
;

189 
	`NRF_LOG_INFO
("Function: %s,ƒrror code: %s.",

190 (
ušt32_t
)
__func__
,

191 (
ušt32_t
)
	`NRF_LOG_ERROR_STRING_GET
(
”r_code
));

192  
”r_code
;

193 
	}
}

195 
	$Äf_drv_şock_unš™
()

197 
	`ASSERT
(
m_şock_cb
.
moduË_š™Ÿlized
);

198 
	`Äfx_şock_di§bË
();

199 
	`Äfx_şock_unš™
();

200 
	}
}

202 
	$™em_’queue
(
Äf_drv_şock_hªdËr_™em_t
 ** 
p_h—d
,

203 
Äf_drv_şock_hªdËr_™em_t
 * 
p_™em
)

205 
Äf_drv_şock_hªdËr_™em_t
 * 
p_Ãxt
 = *
p_h—d
;

206 
p_Ãxt
)

208 ià(
p_Ãxt
 =ğ
p_™em
)

212 
p_Ãxt
 =…_next->p_next;

215 
p_™em
->
p_Ãxt
 = (*
p_h—d
 ? *p_h—d : 
NULL
);

216 *
p_h—d
 = 
p_™em
;

217 
	}
}

219 
Äf_drv_şock_hªdËr_™em_t
 * 
	$™em_dequeue
(
Äf_drv_şock_hªdËr_™em_t
 ** 
p_h—d
)

221 
Äf_drv_şock_hªdËr_™em_t
 * 
p_™em
 = *
p_h—d
;

222 ià(
p_™em
)

224 *
p_h—d
 = 
p_™em
->
p_Ãxt
;

226  
p_™em
;

227 
	}
}

229 
	$Äf_drv_şock_lfşk_»que¡
(
Äf_drv_şock_hªdËr_™em_t
 * 
p_hªdËr_™em
)

231 
	`ASSERT
(
m_şock_cb
.
moduË_š™Ÿlized
);

233 ià(
m_şock_cb
.
lfşk_Ú
)

235 ià(
p_hªdËr_™em
)

237 
p_hªdËr_™em
->
	`ev’t_hªdËr
(
NRF_DRV_CLOCK_EVT_LFCLK_STARTED
);

239 
	`CRITICAL_REGION_ENTER
();

240 ++(
m_şock_cb
.
lfşk_»que¡s
);

241 
	`CRITICAL_REGION_EXIT
();

245 
	`CRITICAL_REGION_ENTER
();

246 ià(
p_hªdËr_™em
)

248 
	`™em_’queue
((
Äf_drv_şock_hªdËr_™em_t
 **)&
m_şock_cb
.
p_lf_h—d
,

249 
p_hªdËr_™em
);

251 ià(
m_şock_cb
.
lfşk_»que¡s
 == 0)

253 
	`Äfx_şock_lfşk_¡¬t
();

255 ++(
m_şock_cb
.
lfşk_»que¡s
);

256 
	`CRITICAL_REGION_EXIT
();

259 
	`ASSERT
(
m_şock_cb
.
lfşk_»que¡s
 > 0);

260 
	}
}

262 
	$Äf_drv_şock_lfşk_»Ëa£
()

264 
	`ASSERT
(
m_şock_cb
.
moduË_š™Ÿlized
);

265 
	`ASSERT
(
m_şock_cb
.
lfşk_»que¡s
 > 0);

267 
	`CRITICAL_REGION_ENTER
();

268 --(
m_şock_cb
.
lfşk_»que¡s
);

269 ià(
m_şock_cb
.
lfşk_»que¡s
 == 0)

271 
	`lfşk_¡İ
();

273 
	`CRITICAL_REGION_EXIT
();

274 
	}
}

276 
boŞ
 
	$Äf_drv_şock_lfşk_is_ruÂšg
()

278 
	`ASSERT
(
m_şock_cb
.
moduË_š™Ÿlized
);

280 #ifdeà
SOFTDEVICE_PRESENT


281 ià(
	`Äf_sdh_is_’abËd
())

283  
Œue
;

287  
	`Äfx_şock_lfşk_is_ruÂšg
();

288 
	}
}

290 
	$Äf_drv_şock_hfşk_»que¡
(
Äf_drv_şock_hªdËr_™em_t
 * 
p_hªdËr_™em
)

292 
	`ASSERT
(
m_şock_cb
.
moduË_š™Ÿlized
);

294 ià(
m_şock_cb
.
hfşk_Ú
)

296 ià(
p_hªdËr_™em
)

298 
p_hªdËr_™em
->
	`ev’t_hªdËr
(
NRF_DRV_CLOCK_EVT_HFCLK_STARTED
);

300 
	`CRITICAL_REGION_ENTER
();

301 ++(
m_şock_cb
.
hfşk_»que¡s
);

302 
	`CRITICAL_REGION_EXIT
();

306 
	`CRITICAL_REGION_ENTER
();

307 ià(
p_hªdËr_™em
)

309 
	`™em_’queue
((
Äf_drv_şock_hªdËr_™em_t
 **)&
m_şock_cb
.
p_hf_h—d
,

310 
p_hªdËr_™em
);

312 ià(
m_şock_cb
.
hfşk_»que¡s
 == 0)

314 
	`hfşk_¡¬t
();

316 ++(
m_şock_cb
.
hfşk_»que¡s
);

317 
	`CRITICAL_REGION_EXIT
();

320 
	`ASSERT
(
m_şock_cb
.
hfşk_»que¡s
 > 0);

321 
	}
}

323 
	$Äf_drv_şock_hfşk_»Ëa£
()

325 
	`ASSERT
(
m_şock_cb
.
moduË_š™Ÿlized
);

326 
	`ASSERT
(
m_şock_cb
.
hfşk_»que¡s
 > 0);

328 
	`CRITICAL_REGION_ENTER
();

329 --(
m_şock_cb
.
hfşk_»que¡s
);

330 ià(
m_şock_cb
.
hfşk_»que¡s
 == 0)

332 
	`hfşk_¡İ
();

334 
	`CRITICAL_REGION_EXIT
();

335 
	}
}

337 
boŞ
 
	$Äf_drv_şock_hfşk_is_ruÂšg
()

339 
	`ASSERT
(
m_şock_cb
.
moduË_š™Ÿlized
);

341 #ifdeà
SOFTDEVICE_PRESENT


342 ià(
	`Äf_sdh_is_’abËd
())

344 
ušt32_t
 
is_ruÂšg
;

345 
	`UNUSED_VARIABLE
(
	`sd_şock_hfşk_is_ruÂšg
(&
is_ruÂšg
));

346  (
is_ruÂšg
 ? 
Œue
 : 
çl£
);

350  
	`Äfx_şock_hfşk_is_ruÂšg
();

351 
	}
}

353 #ià
CALIBRATION_SUPPORT


354 
	$şock_ÿlib¿tiÚ_hf_¡¬‹d
(
Äf_drv_şock_evt_ty³_t
 
ev’t
)

356 ià(
m_şock_cb
.
ÿl_¡©e
 =ğ
CAL_STATE_ABORT
)

358 
	`Äf_drv_şock_hfşk_»Ëa£
();

359 
m_şock_cb
.
ÿl_¡©e
 = 
CAL_STATE_IDLE
;

360 ià(
m_şock_cb
.
ÿl_dÚe_hªdËr
)

362 
m_şock_cb
.
	`ÿl_dÚe_hªdËr
(
NRF_DRV_CLOCK_EVT_CAL_ABORTED
);

367 
	`ASSERT
(
ev’t
 =ğ
NRF_DRV_CLOCK_EVT_HFCLK_STARTED
);

368 ià(
	`Äfx_şock_ÿlib¿tiÚ_¡¬t
(è!ğ
NRFX_SUCCESS
)

370 
	`ASSERT
(
çl£
);

373 
	}
}

376 
»t_code_t
 
	$Äf_drv_şock_ÿlib¿tiÚ_¡¬t
(
ušt8_t
 
š‹rv®
, 
Äf_drv_şock_ev’t_hªdËr_t
 
hªdËr
)

378 
»t_code_t
 
”r_code
 = 
NRF_SUCCESS
;

379 #ià
CALIBRATION_SUPPORT


380 
	`ASSERT
(
m_şock_cb
.
ÿl_¡©e
 =ğ
CAL_STATE_IDLE
);

381 ià(
m_şock_cb
.
lfşk_Ú
 =ğ
çl£
)

383 
”r_code
 = 
NRF_ERROR_INVALID_STATE
;

385 ià(
m_şock_cb
.
ÿl_¡©e
 =ğ
CAL_STATE_IDLE
)

387 
m_şock_cb
.
ÿl_dÚe_hªdËr
 = 
hªdËr
;

388 
m_şock_cb
.
ÿl_hfşk_¡¬‹d_hªdËr_™em
.
ev’t_hªdËr
 = 
şock_ÿlib¿tiÚ_hf_¡¬‹d
;

389 ià(
š‹rv®
 == 0)

391 
m_şock_cb
.
ÿl_¡©e
 = 
CAL_STATE_HFCLK_REQ
;

392 
	`Äf_drv_şock_hfşk_»que¡
(&
m_şock_cb
.
ÿl_hfşk_¡¬‹d_hªdËr_™em
);

396 
m_şock_cb
.
ÿl_¡©e
 = 
CAL_STATE_CT
;

397 
	`Äfx_şock_ÿlib¿tiÚ_tim”_¡¬t
(
š‹rv®
);

402 
”r_code
 = 
NRF_ERROR_BUSY
;

404 
	`NRF_LOG_WARNING
("Function: %s,ƒrror code: %s.",

405 (
ušt32_t
)
__func__
,

406 (
ušt32_t
)
	`NRF_LOG_ERROR_STRING_GET
(
”r_code
));

407  
”r_code
;

409 
	`UNUSED_PARAMETER
(
š‹rv®
);

410 
	`UNUSED_PARAMETER
(
hªdËr
);

411 
”r_code
 = 
NRF_ERROR_FORBIDDEN
;

412 
	`NRF_LOG_WARNING
("Function: %s,ƒrror code: %s.",

413 (
ušt32_t
)
__func__
,

414 (
ušt32_t
)
	`NRF_LOG_ERROR_STRING_GET
(
”r_code
));

415  
”r_code
;

417 
	}
}

419 
»t_code_t
 
	$Äf_drv_şock_ÿlib¿tiÚ_abÜt
()

421 
»t_code_t
 
”r_code
 = 
NRF_SUCCESS
;

422 #ià
CALIBRATION_SUPPORT


423 
	`CRITICAL_REGION_ENTER
();

424 
m_şock_cb
.
ÿl_¡©e
)

426 
CAL_STATE_CT
:

427 
	`Äfx_şock_ÿlib¿tiÚ_tim”_¡İ
();

428 
m_şock_cb
.
ÿl_¡©e
 = 
CAL_STATE_IDLE
;

429 ià(
m_şock_cb
.
ÿl_dÚe_hªdËr
)

431 
m_şock_cb
.
	`ÿl_dÚe_hªdËr
(
NRF_DRV_CLOCK_EVT_CAL_ABORTED
);

434 
CAL_STATE_HFCLK_REQ
:

436 
CAL_STATE_CAL
:

437 
m_şock_cb
.
ÿl_¡©e
 = 
CAL_STATE_ABORT
;

442 
	`CRITICAL_REGION_EXIT
();

444 
	`NRF_LOG_INFO
("Function: %s,ƒrror code: %s.",

445 (
ušt32_t
)
__func__
,

446 (
ušt32_t
)
	`NRF_LOG_ERROR_STRING_GET
(
”r_code
));

447  
”r_code
;

449 
”r_code
 = 
NRF_ERROR_FORBIDDEN
;

450 
	`NRF_LOG_WARNING
("Function: %s,ƒrror code: %s.",

451 (
ušt32_t
)
__func__
,

452 (
ušt32_t
)
	`NRF_LOG_ERROR_STRING_GET
(
”r_code
));

453  
”r_code
;

455 
	}
}

457 
»t_code_t
 
	$Äf_drv_şock_is_ÿlib¿tšg
(
boŞ
 * 
p_is_ÿlib¿tšg
)

459 
»t_code_t
 
”r_code
 = 
NRF_SUCCESS
;

460 #ià
CALIBRATION_SUPPORT


461 
	`ASSERT
(
m_şock_cb
.
moduË_š™Ÿlized
);

462 *
p_is_ÿlib¿tšg
 = (
m_şock_cb
.
ÿl_¡©e
 !ğ
CAL_STATE_IDLE
);

463 
	`NRF_LOG_INFO
("Function: %s,ƒrror code: %s.",

464 (
ušt32_t
)
__func__
,

465 (
ušt32_t
)
	`NRF_LOG_ERROR_STRING_GET
(
”r_code
));

466  
”r_code
;

468 
	`UNUSED_PARAMETER
(
p_is_ÿlib¿tšg
);

469 
”r_code
 = 
NRF_ERROR_FORBIDDEN
;

470 
	`NRF_LOG_WARNING
("Function: %s,ƒrror code: %s.",

471 (
ušt32_t
)
__func__
,

472 (
ušt32_t
)
	`NRF_LOG_ERROR_STRING_GET
(
”r_code
));

473  
”r_code
;

475 
	}
}

477 
__STATIC_INLINE
 
	$şock_şk_¡¬‹d_nÙify
(
Äf_drv_şock_evt_ty³_t
 
evt_ty³
)

479 
Äf_drv_şock_hªdËr_™em_t
 **
p_h—d
;

480 ià(
evt_ty³
 =ğ
NRF_DRV_CLOCK_EVT_HFCLK_STARTED
)

482 
p_h—d
 = (
Äf_drv_şock_hªdËr_™em_t
 **)&
m_şock_cb
.
p_hf_h—d
;

486 
p_h—d
 = (
Äf_drv_şock_hªdËr_™em_t
 **)&
m_şock_cb
.
p_lf_h—d
;

491 
Äf_drv_şock_hªdËr_™em_t
 * 
p_™em
 = 
	`™em_dequeue
(
p_h—d
);

492 ià(!
p_™em
)

497 
p_™em
->
	`ev’t_hªdËr
(
evt_ty³
);

499 
	}
}

501 
	$şock_œq_hªdËr
(
Äfx_şock_evt_ty³_t
 
evt
)

503 ià(
evt
 =ğ
NRFX_CLOCK_EVT_HFCLK_STARTED
)

505 
m_şock_cb
.
hfşk_Ú
 = 
Œue
;

506 
	`şock_şk_¡¬‹d_nÙify
(
NRF_DRV_CLOCK_EVT_HFCLK_STARTED
);

508 ià(
evt
 =ğ
NRFX_CLOCK_EVT_LFCLK_STARTED
)

510 
m_şock_cb
.
lfşk_Ú
 = 
Œue
;

511 
	`şock_şk_¡¬‹d_nÙify
(
NRF_DRV_CLOCK_EVT_LFCLK_STARTED
);

513 #ià
CALIBRATION_SUPPORT


514 ià(
evt
 =ğ
NRFX_CLOCK_EVT_CTTO
)

516 
	`Äf_drv_şock_hfşk_»que¡
(&
m_şock_cb
.
ÿl_hfşk_¡¬‹d_hªdËr_™em
);

519 ià(
evt
 =ğ
NRFX_CLOCK_EVT_CAL_DONE
)

521 
	`Äf_drv_şock_hfşk_»Ëa£
();

522 
boŞ
 
abÜ‹d
 = (
m_şock_cb
.
ÿl_¡©e
 =ğ
CAL_STATE_ABORT
);

523 
m_şock_cb
.
ÿl_¡©e
 = 
CAL_STATE_IDLE
;

524 ià(
m_şock_cb
.
ÿl_dÚe_hªdËr
)

526 
m_şock_cb
.
	`ÿl_dÚe_hªdËr
(
abÜ‹d
 ?

527 
NRF_DRV_CLOCK_EVT_CAL_ABORTED
 : 
NRF_DRV_CLOCK_EVT_CAL_DONE
);

531 
	}
}

533 #ifdeà
SOFTDEVICE_PRESENT


540 
	$soc_evt_hªdËr
(
ušt32_t
 
evt_id
, * 
p_cÚ‹xt
)

542 ià(
evt_id
 =ğ
NRF_EVT_HFCLKSTARTED
)

544 
m_şock_cb
.
hfşk_Ú
 = 
Œue
;

545 
	`şock_şk_¡¬‹d_nÙify
(
NRF_DRV_CLOCK_EVT_HFCLK_STARTED
);

547 
	}
}

548 
NRF_SDH_SOC_OBSERVER
(
m_soc_evt_ob£rv”
, 
CLOCK_CONFIG_SOC_OBSERVER_PRIO
, 
soc_evt_hªdËr
, 
NULL
);

556 
	$sd_¡©e_evt_hªdËr
(
Äf_sdh_¡©e_evt_t
 
¡©e
, * 
p_cÚ‹xt
)

558 
¡©e
)

560 
NRF_SDH_EVT_STATE_ENABLE_PREPARE
:

561 
	`NVIC_Di§bËIRQ
(
POWER_CLOCK_IRQn
);

564 
NRF_SDH_EVT_STATE_ENABLED
:

565 
	`CRITICAL_REGION_ENTER
();

567 ià(!
m_şock_cb
.
moduË_š™Ÿlized
)

569 ()
	`Äf_drv_şock_š™
();

572 ++(
m_şock_cb
.
lfşk_»que¡s
);

573 
m_şock_cb
.
lfşk_Ú
 = 
Œue
;

574 
	`CRITICAL_REGION_EXIT
();

577 
NRF_SDH_EVT_STATE_DISABLED
:

579 
	`ASSERT
(
m_şock_cb
.
moduË_š™Ÿlized
);

580 
	`Äfx_şock_’abË
();

583 
	`Äf_drv_şock_lfşk_»Ëa£
();

589 
	}
}

591 
NRF_SDH_STATE_OBSERVER
(
m_sd_¡©e_ob£rv”
, 
CLOCK_CONFIG_STATE_OBSERVER_PRIO
) =

593 .
hªdËr
 = 
sd_¡©e_evt_hªdËr
,

594 .
	gp_cÚ‹xt
 = 
NULL
,

599 #undeà
NRF_CLOCK_LFCLK_RC


600 #undeà
NRF_CLOCK_LFCLK_Xl


601 #undeà
NRF_CLOCK_LFCLK_SyÁh


	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\integration\nrfx\legacy\nrf_drv_uart.c

41 
	~"Äf_drv_u¬t.h
"

43 #ifdeà
UARTE_PRESENT


44 
	#INSTANCE_COUNT
 
UARTE_COUNT


	)

46 
	#INSTANCE_COUNT
 
UART_COUNT


	)

49 
Äf_u¬t_ev’t_hªdËr_t
 
	gm_hªdËrs
[
INSTANCE_COUNT
];

50 * 
	gm_cÚ‹xts
[
INSTANCE_COUNT
];

52 #ià
defšed
(
UARTE_PRESENT
è&& defšed(
UART_PRESENT
)

53 
ušt8_t
 
	gÄf_drv_u¬t_u£_—sy_dma
[
INSTANCE_COUNT
];

56 #ià
defšed
(
NRF_DRV_UART_WITH_UARTE
)

57 
	$u¬‹_evt_hªdËr
(
Äfx_u¬‹_ev’t_t
 cÚ¡ * 
p_ev’t
,

58 * 
p_cÚ‹xt
)

60 
ušt32_t
 
š¡_idx
 = (ušt32_t)
p_cÚ‹xt
;

61 
Äf_drv_u¬t_ev’t_t
 
ev’t
 =

63 .
ty³
 = (
Äf_drv_u¬t_evt_ty³_t
)
p_ev’t
->type,

64 .
d©a
 =

66 .
”rÜ
 =

68 .
rxtx
 =

70 .
p_d©a
 = 
p_ev’t
->
d©a
.
”rÜ
.
rxtx
.p_data,

71 .
by‹s
 = 
p_ev’t
->
d©a
.
”rÜ
.
rxtx
.bytes,

73 .
”rÜ_mask
 = 
p_ev’t
->
d©a
.
”rÜ
.error_mask,

77 
m_hªdËrs
[
š¡_idx
](&
ev’t
, 
m_cÚ‹xts
[inst_idx]);

78 
	}
}

81 #ià
defšed
(
NRF_DRV_UART_WITH_UART
)

82 
	$u¬t_evt_hªdËr
(
Äfx_u¬t_ev’t_t
 cÚ¡ * 
p_ev’t
,

83 * 
p_cÚ‹xt
)

85 
ušt32_t
 
š¡_idx
 = (ušt32_t)
p_cÚ‹xt
;

86 
Äf_drv_u¬t_ev’t_t
 
ev’t
 =

88 .
ty³
 = (
Äf_drv_u¬t_evt_ty³_t
)
p_ev’t
->type,

89 .
d©a
 =

91 .
”rÜ
 =

93 .
rxtx
 =

95 .
p_d©a
 = 
p_ev’t
->
d©a
.
”rÜ
.
rxtx
.p_data,

96 .
by‹s
 = 
p_ev’t
->
d©a
.
”rÜ
.
rxtx
.bytes,

98 .
”rÜ_mask
 = 
p_ev’t
->
d©a
.
”rÜ
.error_mask,

102 
m_hªdËrs
[
š¡_idx
](&
ev’t
, 
m_cÚ‹xts
[inst_idx]);

103 
	}
}

106 
»t_code_t
 
	$Äf_drv_u¬t_š™
(
Äf_drv_u¬t_t
 cÚ¡ * 
p_š¡ªû
,

107 
Äf_drv_u¬t_cÚfig_t
 cÚ¡ * 
p_cÚfig
,

108 
Äf_u¬t_ev’t_hªdËr_t
 
ev’t_hªdËr
)

110 
ušt32_t
 
š¡_idx
 = 
p_š¡ªû
->inst_idx;

111 
m_hªdËrs
[
š¡_idx
] = 
ev’t_hªdËr
;

112 
m_cÚ‹xts
[
š¡_idx
] = 
p_cÚfig
->
p_cÚ‹xt
;

114 #ià
	`defšed
(
NRF_DRV_UART_WITH_UARTE
è&& defšed(
NRF_DRV_UART_WITH_UART
)

115 
Äf_drv_u¬t_u£_—sy_dma
[
š¡_idx
] = 
p_cÚfig
->
u£_—sy_dma
;

118 
Äf_drv_u¬t_cÚfig_t
 
cÚfig
 = *
p_cÚfig
;

119 
cÚfig
.
p_cÚ‹xt
 = (*)
š¡_idx
;

121 
»t_code_t
 
»suÉ
 = 0;

122 ià(
NRF_DRV_UART_USE_UARTE
)

124 
»suÉ
 = 
	`Äfx_u¬‹_š™
(&
p_š¡ªû
->
u¬‹
,

125 (
Äfx_u¬‹_cÚfig_t
 cÚ¡ *)&
cÚfig
,

126 
ev’t_hªdËr
 ? 
u¬‹_evt_hªdËr
 : 
NULL
);

128 ià(
NRF_DRV_UART_USE_UART
)

130 
»suÉ
 = 
	`Äfx_u¬t_š™
(&
p_š¡ªû
->
u¬t
,

131 (
Äfx_u¬t_cÚfig_t
 cÚ¡ *)&
cÚfig
,

132 
ev’t_hªdËr
 ? 
u¬t_evt_hªdËr
 : 
NULL
);

134  
»suÉ
;

135 
	}
}

	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\modules\nrfx\drivers\src\nrfx_clock.c

41 
	~<Äfx.h
>

43 #ià
NRFX_CHECK
(
NRFX_CLOCK_ENABLED
)

45 
	~<Äfx_şock.h
>

47 
	#NRFX_LOG_MODULE
 
CLOCK


	)

48 
	~<Äfx_log.h
>

50 #ià
NRFX_CHECK
(
NRFX_POWER_ENABLED
)

51 
boŞ
 
Äfx_pow”_œq_’abËd
;

54 
	#EVT_TO_STR
(
ev’t
) \

55 (
ev’t
 =ğ
NRF_CLOCK_EVENT_HFCLKSTARTED
 ? "NRF_CLOCK_EVENT_HFCLKSTARTED" : \

56 (
ev’t
 =ğ
NRF_CLOCK_EVENT_LFCLKSTARTED
 ? "NRF_CLOCK_EVENT_LFCLKSTARTED" : \

57 (
ev’t
 =ğ
NRF_CLOCK_EVENT_DONE
 ? "NRF_CLOCK_EVENT_DONE" : \

58 (
ev’t
 =ğ
NRF_CLOCK_EVENT_CTTO
 ? "NRF_CLOCK_EVENT_CTTO" : \

59 "UNKNOWN EVENT"))))

	)

63 
	#NRF_CLOCK_LFCLK_RC
 
CLOCK_LFCLKSRC_SRC_RC


	)

64 
	#NRF_CLOCK_LFCLK_Xl
 
CLOCK_LFCLKSRC_SRC_Xl


	)

65 
	#NRF_CLOCK_LFCLK_SyÁh
 
CLOCK_LFCLKSRC_SRC_SyÁh


	)

68 #ià(
NRFX_CLOCK_CONFIG_LF_SRC
 =ğ
NRF_CLOCK_LFCLK_RC
)

69 
	#CALIBRATION_SUPPORT
 1

	)

71 
	#CALIBRATION_SUPPORT
 0

	)

74 #ià
defšed
(
NRF52810_XXAA
) || \

75 
defšed
(
NRF52832_XXAA
è|| defšed(
NRF52832_XXAB
) || \

76 
	$defšed
(
NRF52840_XXAA
)

79 
	#USE_WORKAROUND_FOR_ANOMALY_192


	)

82 
	#USE_WORKAROUND_FOR_ANOMALY_201


	)

87 
CAL_STATE_IDLE
,

88 
CAL_STATE_CAL


89 } 
	tÄfx_şock_ÿl_¡©e_t
;

94 
Äfx_şock_ev’t_hªdËr_t
 
ev’t_hªdËr
;

95 
boŞ
 
moduË_š™Ÿlized
;

96 #ià
	`defšed
(
USE_WORKAROUND_FOR_ANOMALY_201
)

97 
boŞ
 
hfşk_¡¬‹d
;

100 #ià
CALIBRATION_SUPPORT


101 vŞ©
Äfx_şock_ÿl_¡©e_t
 
ÿl_¡©e
;

103 } 
	tÄfx_şock_cb_t
;

105 
Äfx_şock_cb_t
 
m_şock_cb
;

111 #ià
	`NRFX_CHECK
(
NRFX_POWER_ENABLED
)

112 
boŞ
 
Äfx_şock_œq_’abËd
;

115 #ià
	`defšed
(
NRF52832_XXAA
è|| defšed(
NRF52832_XXAB
)

119 
	#ANOMALY_132_REQ_DELAY_US
 138UL

	)

122 
	#ANOMALY_132_NRF52832_FREQ_MHZ
 64UL

	)

125 
	#ANOMALY_132_DELAY_CYCLES
 (
ANOMALY_132_REQ_DELAY_US
 * 
ANOMALY_132_NRF52832_FREQ_MHZ
)

	)

130 
	$Äfx_şock_ªom®y_132
()

132 
ušt32_t
 
cycút_š™®
;

133 
ušt32_t
 
cÜe_debug
;

134 
ušt32_t
 
dwt_ù¾
;

138 
cÜe_debug
 = 
CÜeDebug
->
DEMCR
;

139 
CÜeDebug
->
DEMCR
 = 
cÜe_debug
 | 
CÜeDebug_DEMCR_TRCENA_Msk
;

143 
dwt_ù¾
 = 
DWT
->
CTRL
;

144 
DWT
->
CTRL
 = 
dwt_ù¾
 | 
DWT_CTRL_CYCCNTENA_Msk
;

147 
cycút_š™®
 = 
DWT
->
CYCCNT
;

150 (
DWT
->
CYCCNT
 - 
cycút_š™®
è< 
ANOMALY_132_DELAY_CYCLES
)

154 
DWT
->
CTRL
 = 
dwt_ù¾
;

155 
CÜeDebug
->
DEMCR
 = 
cÜe_debug
;

156 
	}
}

160 
Äfx_”r_t
 
	$Äfx_şock_š™
(
Äfx_şock_ev’t_hªdËr_t
 
ev’t_hªdËr
)

162 
	`NRFX_ASSERT
(
ev’t_hªdËr
);

164 
Äfx_”r_t
 
”r_code
 = 
NRFX_SUCCESS
;

165 ià(
m_şock_cb
.
moduË_š™Ÿlized
)

167 
”r_code
 = 
NRFX_ERROR_ALREADY_INITIALIZED
;

171 #ià
CALIBRATION_SUPPORT


172 
m_şock_cb
.
ÿl_¡©e
 = 
CAL_STATE_IDLE
;

174 
m_şock_cb
.
ev’t_hªdËr
 =ƒvent_handler;

175 
m_şock_cb
.
moduË_š™Ÿlized
 = 
Œue
;

176 #ià
	`defšed
(
USE_WORKAROUND_FOR_ANOMALY_201
)

177 
m_şock_cb
.
hfşk_¡¬‹d
 = 
çl£
;

181 
	`NRFX_LOG_INFO
("FunùiÚ: %s,ƒ¼Ü code: %s.", 
__func__
, 
	`NRFX_LOG_ERROR_STRING_GET
(
”r_code
));

182  
”r_code
;

183 
	}
}

185 
	$Äfx_şock_’abË
()

187 
	`NRFX_ASSERT
(
m_şock_cb
.
moduË_š™Ÿlized
);

188 
	`Äfx_pow”_şock_œq_š™
();

189 
	`Äf_şock_lf_¤c_£t
((
Äf_şock_lfşk_t
)
NRFX_CLOCK_CONFIG_LF_SRC
);

191 #ià
	`NRFX_CHECK
(
NRFX_POWER_ENABLED
)

192 
Äfx_şock_œq_’abËd
 = 
Œue
;

195 
	`NRFX_LOG_INFO
("Moduleƒnabled.");

196 
	}
}

198 
	$Äfx_şock_di§bË
()

200 
	`NRFX_ASSERT
(
m_şock_cb
.
moduË_š™Ÿlized
);

201 #ià
	`NRFX_CHECK
(
NRFX_POWER_ENABLED
)

202 
	`NRFX_ASSERT
(
Äfx_şock_œq_’abËd
);

203 ià(!
Äfx_pow”_œq_’abËd
)

206 
	`NRFX_IRQ_DISABLE
(
POWER_CLOCK_IRQn
);

208 
	`Äf_şock_št_di§bË
(
CLOCK_INTENSET_HFCLKSTARTED_Msk
 |

209 
CLOCK_INTENSET_LFCLKSTARTED_Msk
 |

210 
CLOCK_INTENSET_DONE_Msk
 |

211 
CLOCK_INTENSET_CTTO_Msk
);

212 #ià
	`NRFX_CHECK
(
NRFX_POWER_ENABLED
)

213 
Äfx_şock_œq_’abËd
 = 
çl£
;

215 
	`NRFX_LOG_INFO
("Module disabled.");

216 
	}
}

218 
	$Äfx_şock_unš™
()

220 
	`NRFX_ASSERT
(
m_şock_cb
.
moduË_š™Ÿlized
);

221 
	`Äfx_şock_lfşk_¡İ
();

222 
	`Äfx_şock_hfşk_¡İ
();

223 
m_şock_cb
.
moduË_š™Ÿlized
 = 
çl£
;

224 
	`NRFX_LOG_INFO
("Uninitialized.");

225 
	}
}

227 
	$Äfx_şock_lfşk_¡¬t
()

229 
	`NRFX_ASSERT
(
m_şock_cb
.
moduË_š™Ÿlized
);

230 
	`Äf_şock_ev’t_ş—r
(
NRF_CLOCK_EVENT_LFCLKSTARTED
);

231 
	`Äf_şock_št_’abË
(
NRF_CLOCK_INT_LF_STARTED_MASK
);

233 #ià
	`defšed
(
NRF52832_XXAA
è|| defšed(
NRF52832_XXAB
)

234 
	`Äfx_şock_ªom®y_132
();

237 
	`Äf_şock_sk_Œigg”
(
NRF_CLOCK_TASK_LFCLKSTART
);

238 
	}
}

240 
	$Äfx_şock_lfşk_¡İ
()

242 
	`NRFX_ASSERT
(
m_şock_cb
.
moduË_š™Ÿlized
);

243 
	`Äf_şock_sk_Œigg”
(
NRF_CLOCK_TASK_LFCLKSTOP
);

244 
	`Äf_şock_lf_is_ruÂšg
())

246 
	}
}

248 
	$Äfx_şock_hfşk_¡¬t
()

250 
	`NRFX_ASSERT
(
m_şock_cb
.
moduË_š™Ÿlized
);

251 
	`Äf_şock_ev’t_ş—r
(
NRF_CLOCK_EVENT_HFCLKSTARTED
);

252 
	`Äf_şock_št_’abË
(
NRF_CLOCK_INT_HF_STARTED_MASK
);

253 
	`Äf_şock_sk_Œigg”
(
NRF_CLOCK_TASK_HFCLKSTART
);

254 
	}
}

256 
	$Äfx_şock_hfşk_¡İ
()

258 
	`NRFX_ASSERT
(
m_şock_cb
.
moduË_š™Ÿlized
);

259 
	`Äf_şock_sk_Œigg”
(
NRF_CLOCK_TASK_HFCLKSTOP
);

260 
	`Äf_şock_hf_is_ruÂšg
(
NRF_CLOCK_HFCLK_HIGH_ACCURACY
))

262 #ià
	`defšed
(
USE_WORKAROUND_FOR_ANOMALY_201
)

263 
m_şock_cb
.
hfşk_¡¬‹d
 = 
çl£
;

265 
	}
}

267 
Äfx_”r_t
 
	$Äfx_şock_ÿlib¿tiÚ_¡¬t
()

269 
Äfx_”r_t
 
”r_code
 = 
NRFX_SUCCESS
;

270 #ià
CALIBRATION_SUPPORT


271 ià(
	`Äfx_şock_hfşk_is_ruÂšg
(è=ğ
çl£
)

273  
NRFX_ERROR_INVALID_STATE
;

276 ià(
	`Äfx_şock_lfşk_is_ruÂšg
(è=ğ
çl£
)

278  
NRFX_ERROR_INVALID_STATE
;

281 ià(
m_şock_cb
.
ÿl_¡©e
 =ğ
CAL_STATE_IDLE
)

283 
	`Äf_şock_ev’t_ş—r
(
NRF_CLOCK_EVENT_DONE
);

284 
	`Äf_şock_št_’abË
(
NRF_CLOCK_INT_DONE_MASK
);

285 
m_şock_cb
.
ÿl_¡©e
 = 
CAL_STATE_CAL
;

286 #ià
	`defšed
(
USE_WORKAROUND_FOR_ANOMALY_192
)

287 *(vŞ©
ušt32_t
 *)0x40000C34 = 0x00000002;

289 
	`Äf_şock_sk_Œigg”
(
NRF_CLOCK_TASK_CAL
);

293 
”r_code
 = 
NRFX_ERROR_BUSY
;

296 
	`NRFX_LOG_WARNING
("Function: %s,ƒrror code: %s.",

297 
__func__
,

298 
	`NRFX_LOG_ERROR_STRING_GET
(
”r_code
));

299  
”r_code
;

300 
	}
}

302 
Äfx_”r_t
 
	$Äfx_şock_is_ÿlib¿tšg
()

304 #ià
CALIBRATION_SUPPORT


305 ià(
m_şock_cb
.
ÿl_¡©e
 =ğ
CAL_STATE_CAL
)

307  
NRFX_ERROR_BUSY
;

310  
NRFX_SUCCESS
;

311 
	}
}

313 
	$Äfx_şock_ÿlib¿tiÚ_tim”_¡¬t
(
ušt8_t
 
š‹rv®
)

315 
	`Äf_şock_ÿl_tim”_timeout_£t
(
š‹rv®
);

316 
	`Äf_şock_ev’t_ş—r
(
NRF_CLOCK_EVENT_CTTO
);

317 
	`Äf_şock_št_’abË
(
NRF_CLOCK_INT_CTTO_MASK
);

318 
	`Äf_şock_sk_Œigg”
(
NRF_CLOCK_TASK_CTSTART
);

319 
	}
}

321 
	$Äfx_şock_ÿlib¿tiÚ_tim”_¡İ
()

323 
	`Äf_şock_št_di§bË
(
NRF_CLOCK_INT_CTTO_MASK
);

324 
	`Äf_şock_sk_Œigg”
(
NRF_CLOCK_TASK_CTSTOP
);

325 
	}
}

327 
	$Äfx_şock_œq_hªdËr
()

329 ià(
	`Äf_şock_ev’t_check
(
NRF_CLOCK_EVENT_HFCLKSTARTED
))

331 
	`Äf_şock_ev’t_ş—r
(
NRF_CLOCK_EVENT_HFCLKSTARTED
);

332 
	`NRFX_LOG_DEBUG
("Ev’t: %s.", 
	`EVT_TO_STR
(
NRF_CLOCK_EVENT_HFCLKSTARTED
));

333 
	`Äf_şock_št_di§bË
(
NRF_CLOCK_INT_HF_STARTED_MASK
);

335 #ià
	`defšed
(
USE_WORKAROUND_FOR_ANOMALY_201
)

336 ià(!
m_şock_cb
.
hfşk_¡¬‹d
)

338 
m_şock_cb
.
hfşk_¡¬‹d
 = 
Œue
;

339 
m_şock_cb
.
	`ev’t_hªdËr
(
NRFX_CLOCK_EVT_HFCLK_STARTED
);

342 
m_şock_cb
.
	`ev’t_hªdËr
(
NRFX_CLOCK_EVT_HFCLK_STARTED
);

345 ià(
	`Äf_şock_ev’t_check
(
NRF_CLOCK_EVENT_LFCLKSTARTED
))

347 
	`Äf_şock_ev’t_ş—r
(
NRF_CLOCK_EVENT_LFCLKSTARTED
);

348 
	`NRFX_LOG_DEBUG
("Ev’t: %s.", 
	`EVT_TO_STR
(
NRF_CLOCK_EVENT_LFCLKSTARTED
));

349 
	`Äf_şock_št_di§bË
(
NRF_CLOCK_INT_LF_STARTED_MASK
);

351 
m_şock_cb
.
	`ev’t_hªdËr
(
NRFX_CLOCK_EVT_LFCLK_STARTED
);

353 #ià
CALIBRATION_SUPPORT


354 ià(
	`Äf_şock_ev’t_check
(
NRF_CLOCK_EVENT_CTTO
))

356 
	`Äf_şock_ev’t_ş—r
(
NRF_CLOCK_EVENT_CTTO
);

357 
	`NRFX_LOG_DEBUG
("Ev’t: %s.", 
	`EVT_TO_STR
(
NRF_CLOCK_EVENT_CTTO
));

358 
	`Äf_şock_št_di§bË
(
NRF_CLOCK_INT_CTTO_MASK
);

360 
m_şock_cb
.
	`ev’t_hªdËr
(
NRFX_CLOCK_EVT_CTTO
);

363 ià(
	`Äf_şock_ev’t_check
(
NRF_CLOCK_EVENT_DONE
))

365 #ià
	`defšed
(
USE_WORKAROUND_FOR_ANOMALY_192
)

366 *(vŞ©
ušt32_t
 *)0x40000C34 = 0x00000000;

368 
	`Äf_şock_ev’t_ş—r
(
NRF_CLOCK_EVENT_DONE
);

369 
	`NRFX_LOG_DEBUG
("Ev’t: %s.", 
	`EVT_TO_STR
(
NRF_CLOCK_EVENT_DONE
));

370 
	`Äf_şock_št_di§bË
(
NRF_CLOCK_INT_DONE_MASK
);

371 
m_şock_cb
.
ÿl_¡©e
 = 
CAL_STATE_IDLE
;

372 
m_şock_cb
.
	`ev’t_hªdËr
(
NRFX_CLOCK_EVT_CAL_DONE
);

375 
	}
}

377 #undeà
NRF_CLOCK_LFCLK_RC


378 #undeà
NRF_CLOCK_LFCLK_Xl


379 #undeà
NRF_CLOCK_LFCLK_SyÁh


	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\modules\nrfx\drivers\src\nrfx_gpiote.c

40 
	~<Äfx.h
>

42 #ià
NRFX_CHECK
(
NRFX_GPIOTE_ENABLED
)

44 
	~<Äfx_gpiÙe.h
>

45 
	~"Äf_b™mask.h
"

46 
	~<¡ršg.h
>

48 
	#NRFX_LOG_MODULE
 
GPIOTE


	)

49 
	~<Äfx_log.h
>

52 
	#FORBIDDEN_HANDLER_ADDRESS
 ((
Äfx_gpiÙe_evt_hªdËr_t
)
UINT32_MAX
)

	)

53 
	#PIN_NOT_USED
 (-1)

	)

54 
	#PIN_USED
 (-2)

	)

55 
	#NO_CHANNELS
 (-1)

	)

56 
	#SENSE_FIELD_POS
 (6)

	)

57 
	#SENSE_FIELD_MASK
 (0xC0)

	)

64 
	#TE_IDX_TO_EVENT_ADDR
(
idx
è(
Äf_gpiÙe_ev’ts_t
)((
ušt32_t
)
NRF_GPIOTE_EVENTS_IN_0
 + \

65 ((
ušt32_t
è* (
idx
)))

	)

72 
	#TE_OUT_IDX_TO_TASK_ADDR
(
idx
è(
Äf_gpiÙe_sks_t
)((
ušt32_t
)
NRF_GPIOTE_TASKS_OUT_0
 + \

73 ((
ušt32_t
è* (
idx
)))

	)

75 #ià
defšed
(
GPIOTE_FEATURE_SET_PRESENT
è|| defšed(
__NRFX_DOXYGEN__
)

81 
	#TE_SET_IDX_TO_TASK_ADDR
(
idx
è(
Äf_gpiÙe_sks_t
)((
ušt32_t
)
NRF_GPIOTE_TASKS_SET_0
 + \

82 ((
ušt32_t
è* (
idx
)))

	)

86 #ià
defšed
(
GPIOTE_FEATURE_CLR_PRESENT
è|| defšed(
__NRFX_DOXYGEN__
)

92 
	#TE_CLR_IDX_TO_TASK_ADDR
(
idx
è(
Äf_gpiÙe_sks_t
)((
ušt32_t
)
NRF_GPIOTE_TASKS_CLR_0
 + \

93 ((
ušt32_t
è* (
idx
)))

	)

100 
Äfx_gpiÙe_evt_hªdËr_t
 
	mhªdËrs
[
GPIOTE_CH_NUM
 + 
NRFX_GPIOTE_CONFIG_NUM_OF_LOW_POWER_EVENTS
];

101 
št8_t
 
	mpš_assignm’ts
[
NUMBER_OF_PINS
];

102 
št8_t
 
	mpÜt_hªdËrs_pšs
[
NRFX_GPIOTE_CONFIG_NUM_OF_LOW_POWER_EVENTS
];

103 
ušt8_t
 
	mcÚfigu»d_pšs
[((
NUMBER_OF_PINS
)+7) / 8];

104 
Äfx_drv_¡©e_t
 
	m¡©e
;

105 } 
	tgpiÙe_cÚŒŞ_block_t
;

107 
gpiÙe_cÚŒŞ_block_t
 
	gm_cb
;

109 
__STATIC_INLINE
 
boŞ
 
	$pš_š_u£
(
ušt32_t
 
pš
)

111  (
m_cb
.
pš_assignm’ts
[
pš
] !ğ
PIN_NOT_USED
);

112 
	}
}

115 
__STATIC_INLINE
 
boŞ
 
	$pš_š_u£_as_nÚ_sk_out
(
ušt32_t
 
pš
)

117  (
m_cb
.
pš_assignm’ts
[
pš
] =ğ
PIN_USED
);

118 
	}
}

121 
__STATIC_INLINE
 
boŞ
 
	$pš_š_u£_by_‹
(
ušt32_t
 
pš
)

123  (
m_cb
.
pš_assignm’ts
[
pš
] >ğ0 && m_cb.pš_assignm’ts[pš] < 
GPIOTE_CH_NUM
) ?

124 
Œue
 : 
çl£
;

125 
	}
}

128 
__STATIC_INLINE
 
boŞ
 
	$pš_š_u£_by_pÜt
(
ušt32_t
 
pš
)

130  (
m_cb
.
pš_assignm’ts
[
pš
] >ğ
GPIOTE_CH_NUM
);

131 
	}
}

134 
__STATIC_INLINE
 
boŞ
 
	$pš_š_u£_by_gpiÙe
(
ušt32_t
 
pš
)

136  (
m_cb
.
pš_assignm’ts
[
pš
] >= 0);

137 
	}
}

140 
__STATIC_INLINE
 
	$pš_š_u£_by_‹_£t
(
ušt32_t
 
pš
,

141 
ušt32_t
 
chªÃl_id
,

142 
Äfx_gpiÙe_evt_hªdËr_t
 
hªdËr
,

143 
boŞ
 
is_chªÃl
)

145 
m_cb
.
pš_assignm’ts
[
pš
] = 
chªÃl_id
;

146 
m_cb
.
hªdËrs
[
chªÃl_id
] = 
hªdËr
;

147 ià(!
is_chªÃl
)

149 
m_cb
.
pÜt_hªdËrs_pšs
[
chªÃl_id
 - 
GPIOTE_CH_NUM
] = (
št8_t
)
pš
;

151 
	}
}

154 
__STATIC_INLINE
 
	$pš_š_u£_£t
(
ušt32_t
 
pš
)

156 
m_cb
.
pš_assignm’ts
[
pš
] = 
PIN_USED
;

157 
	}
}

160 
__STATIC_INLINE
 
	$pš_š_u£_ş—r
(
ušt32_t
 
pš
)

162 
m_cb
.
pš_assignm’ts
[
pš
] = 
PIN_NOT_USED
;

163 
	}
}

166 
__STATIC_INLINE
 
	$pš_cÚfigu»d_£t
(
ušt32_t
 
pš
)

168 
	`Äf_b™mask_b™_£t
(
pš
, 
m_cb
.
cÚfigu»d_pšs
);

169 
	}
}

171 
__STATIC_INLINE
 
	$pš_cÚfigu»d_ş—r
(
ušt32_t
 
pš
)

173 
	`Äf_b™mask_b™_ş—r
(
pš
, 
m_cb
.
cÚfigu»d_pšs
);

174 
	}
}

176 
__STATIC_INLINE
 
boŞ
 
	$pš_cÚfigu»d_check
(
ušt32_t
 
pš
)

178  0 !ğ
	`Äf_b™mask_b™_is_£t
(
pš
, 
m_cb
.
cÚfigu»d_pšs
);

179 
	}
}

181 
__STATIC_INLINE
 
št8_t
 
	$chªÃl_pÜt_g‘
(
ušt32_t
 
pš
)

183  
m_cb
.
pš_assignm’ts
[
pš
];

184 
	}
}

187 
__STATIC_INLINE
 
Äfx_gpiÙe_evt_hªdËr_t
 
	$chªÃl_hªdËr_g‘
(
ušt32_t
 
chªÃl
)

189  
m_cb
.
hªdËrs
[
chªÃl
];

190 
	}
}

193 
št8_t
 
	$chªÃl_pÜt_®loc
(
ušt32_t
 
pš
, 
Äfx_gpiÙe_evt_hªdËr_t
 
hªdËr
, 
boŞ
 
chªÃl
)

195 
št8_t
 
chªÃl_id
 = 
NO_CHANNELS
;

196 
ušt32_t
 
i
;

198 
ušt32_t
 
¡¬t_idx
 = 
chªÃl
 ? 0 : 
GPIOTE_CH_NUM
;

199 
ušt32_t
 
’d_idx
 =

200 
chªÃl
 ? 
GPIOTE_CH_NUM
 : (GPIOTE_CH_NUM + 
NRFX_GPIOTE_CONFIG_NUM_OF_LOW_POWER_EVENTS
);

204 
i
 = 
¡¬t_idx
; i < 
’d_idx
; i++)

206 ià(
m_cb
.
hªdËrs
[
i
] =ğ
FORBIDDEN_HANDLER_ADDRESS
)

208 
	`pš_š_u£_by_‹_£t
(
pš
, 
i
, 
hªdËr
, 
chªÃl
);

209 
chªÃl_id
 = 
i
;

214  
chªÃl_id
;

215 
	}
}

218 
	$chªÃl_ä“
(
ušt8_t
 
chªÃl_id
)

220 
m_cb
.
hªdËrs
[
chªÃl_id
] = 
FORBIDDEN_HANDLER_ADDRESS
;

221 ià(
chªÃl_id
 >ğ
GPIOTE_CH_NUM
)

223 
m_cb
.
pÜt_hªdËrs_pšs
[
chªÃl_id
 - 
GPIOTE_CH_NUM
] = (
št8_t
)
PIN_NOT_USED
;

225 
	}
}

228 
Äfx_”r_t
 
	$Äfx_gpiÙe_š™
()

230 
Äfx_”r_t
 
”r_code
;

232 ià(
m_cb
.
¡©e
 !ğ
NRFX_DRV_STATE_UNINITIALIZED
)

234 
”r_code
 = 
NRFX_ERROR_INVALID_STATE
;

235 
	`NRFX_LOG_WARNING
("Function: %s,ƒrror code: %s.",

236 
__func__
,

237 
	`NRFX_LOG_ERROR_STRING_GET
(
”r_code
));

238  
”r_code
;

241 
ušt8_t
 
i
;

243 
i
 = 0; i < 
NUMBER_OF_PINS
; i++)

245 
	`pš_š_u£_ş—r
(
i
);

248 
i
 = 0; i < (
GPIOTE_CH_NUM
 + 
NRFX_GPIOTE_CONFIG_NUM_OF_LOW_POWER_EVENTS
); i++)

250 
	`chªÃl_ä“
(
i
);

253 
	`mem£t
(
m_cb
.
cÚfigu»d_pšs
, 0, (m_cb.configured_pins));

255 
	`NRFX_IRQ_PRIORITY_SET
(
GPIOTE_IRQn
, 
NRFX_GPIOTE_CONFIG_IRQ_PRIORITY
);

256 
	`NRFX_IRQ_ENABLE
(
GPIOTE_IRQn
);

257 
	`Äf_gpiÙe_ev’t_ş—r
(
NRF_GPIOTE_EVENTS_PORT
);

258 
	`Äf_gpiÙe_št_’abË
(
GPIOTE_INTENSET_PORT_Msk
);

259 
m_cb
.
¡©e
 = 
NRFX_DRV_STATE_INITIALIZED
;

261 
”r_code
 = 
NRFX_SUCCESS
;

262 
	`NRFX_LOG_INFO
("FunùiÚ: %s,ƒ¼Ü code: %s.", 
__func__
, 
	`NRFX_LOG_ERROR_STRING_GET
(
”r_code
));

263  
”r_code
;

264 
	}
}

267 
boŞ
 
	$Äfx_gpiÙe_is_š™
()

269  (
m_cb
.
¡©e
 !ğ
NRFX_DRV_STATE_UNINITIALIZED
è? 
Œue
 : 
çl£
;

270 
	}
}

273 
	$Äfx_gpiÙe_unš™
()

275 
	`NRFX_ASSERT
(
m_cb
.
¡©e
 !ğ
NRFX_DRV_STATE_UNINITIALIZED
);

277 
ušt32_t
 
i
;

279 
i
 = 0; i < 
NUMBER_OF_PINS
; i++)

281 ià(
	`pš_š_u£_as_nÚ_sk_out
(
i
))

283 
	`Äfx_gpiÙe_out_unš™
(
i
);

285 iàĞ
	`pš_š_u£_by_gpiÙe
(
i
))

290 
	`Äfx_gpiÙe_š_unš™
(
i
);

293 
m_cb
.
¡©e
 = 
NRFX_DRV_STATE_UNINITIALIZED
;

294 
	`NRFX_LOG_INFO
("Uninitialized.");

295 
	}
}

298 
Äfx_”r_t
 
	$Äfx_gpiÙe_out_š™
(
Äfx_gpiÙe_pš_t
 
pš
,

299 
Äfx_gpiÙe_out_cÚfig_t
 cÚ¡ * 
p_cÚfig
)

301 
	`NRFX_ASSERT
(
pš
 < 
NUMBER_OF_PINS
);

302 
	`NRFX_ASSERT
(
m_cb
.
¡©e
 =ğ
NRFX_DRV_STATE_INITIALIZED
);

303 
	`NRFX_ASSERT
(
p_cÚfig
);

305 
Äfx_”r_t
 
”r_code
 = 
NRFX_SUCCESS
;

307 ià(
	`pš_š_u£
(
pš
))

309 
”r_code
 = 
NRFX_ERROR_INVALID_STATE
;

313 ià(
p_cÚfig
->
sk_pš
)

315 
št8_t
 
chªÃl
 = 
	`chªÃl_pÜt_®loc
(
pš
, 
NULL
, 
Œue
);

317 ià(
chªÃl
 !ğ
NO_CHANNELS
)

319 
	`Äf_gpiÙe_sk_cÚfigu»
((
ušt32_t
)
chªÃl
,

320 
pš
,

321 
p_cÚfig
->
aùiÚ
,

322 
p_cÚfig
->
š™_¡©e
);

326 
”r_code
 = 
NRFX_ERROR_NO_MEM
;

331 
	`pš_š_u£_£t
(
pš
);

334 ià(
”r_code
 =ğ
NRFX_SUCCESS
)

336 ià(
p_cÚfig
->
š™_¡©e
 =ğ
NRF_GPIOTE_INITIAL_VALUE_HIGH
)

338 
	`Äf_gpio_pš_£t
(
pš
);

342 
	`Äf_gpio_pš_ş—r
(
pš
);

345 
	`Äf_gpio_cfg_ouut
(
pš
);

346 
	`pš_cÚfigu»d_£t
(
pš
);

350 
	`NRFX_LOG_INFO
("FunùiÚ: %s,ƒ¼Ü code: %s.", 
__func__
, 
	`NRFX_LOG_ERROR_STRING_GET
(
”r_code
));

351  
”r_code
;

352 
	}
}

355 
	$Äfx_gpiÙe_out_unš™
(
Äfx_gpiÙe_pš_t
 
pš
)

357 
	`NRFX_ASSERT
(
pš
 < 
NUMBER_OF_PINS
);

358 
	`NRFX_ASSERT
(
	`pš_š_u£
(
pš
));

360 ià(
	`pš_š_u£_by_‹
(
pš
))

362 
	`chªÃl_ä“
((
ušt8_t
)
	`chªÃl_pÜt_g‘
(
pš
));

363 
	`Äf_gpiÙe_‹_deçuÉ
((
ušt32_t
)
	`chªÃl_pÜt_g‘
(
pš
));

365 
	`pš_š_u£_ş—r
(
pš
);

367 ià(
	`pš_cÚfigu»d_check
(
pš
))

369 
	`Äf_gpio_cfg_deçuÉ
(
pš
);

370 
	`pš_cÚfigu»d_ş—r
(
pš
);

372 
	}
}

375 
	$Äfx_gpiÙe_out_£t
(
Äfx_gpiÙe_pš_t
 
pš
)

377 
	`NRFX_ASSERT
(
pš
 < 
NUMBER_OF_PINS
);

378 
	`NRFX_ASSERT
(
	`pš_š_u£
(
pš
));

379 
	`NRFX_ASSERT
(!
	`pš_š_u£_by_‹
(
pš
));

381 
	`Äf_gpio_pš_£t
(
pš
);

382 
	}
}

385 
	$Äfx_gpiÙe_out_ş—r
(
Äfx_gpiÙe_pš_t
 
pš
)

387 
	`NRFX_ASSERT
(
pš
 < 
NUMBER_OF_PINS
);

388 
	`NRFX_ASSERT
(
	`pš_š_u£
(
pš
));

389 
	`NRFX_ASSERT
(!
	`pš_š_u£_by_‹
(
pš
));

391 
	`Äf_gpio_pš_ş—r
(
pš
);

392 
	}
}

395 
	$Äfx_gpiÙe_out_toggË
(
Äfx_gpiÙe_pš_t
 
pš
)

397 
	`NRFX_ASSERT
(
pš
 < 
NUMBER_OF_PINS
);

398 
	`NRFX_ASSERT
(
	`pš_š_u£
(
pš
));

399 
	`NRFX_ASSERT
(!
	`pš_š_u£_by_‹
(
pš
));

401 
	`Äf_gpio_pš_toggË
(
pš
);

402 
	}
}

405 
	$Äfx_gpiÙe_out_sk_’abË
(
Äfx_gpiÙe_pš_t
 
pš
)

407 
	`NRFX_ASSERT
(
pš
 < 
NUMBER_OF_PINS
);

408 
	`NRFX_ASSERT
(
	`pš_š_u£
(
pš
));

409 
	`NRFX_ASSERT
(
	`pš_š_u£_by_‹
(
pš
));

411 
	`Äf_gpiÙe_sk_’abË
((
ušt32_t
)
m_cb
.
pš_assignm’ts
[
pš
]);

412 
	}
}

415 
	$Äfx_gpiÙe_out_sk_di§bË
(
Äfx_gpiÙe_pš_t
 
pš
)

417 
	`NRFX_ASSERT
(
pš
 < 
NUMBER_OF_PINS
);

418 
	`NRFX_ASSERT
(
	`pš_š_u£
(
pš
));

419 
	`NRFX_ASSERT
(
	`pš_š_u£_by_‹
(
pš
));

421 
	`Äf_gpiÙe_sk_di§bË
((
ušt32_t
)
m_cb
.
pš_assignm’ts
[
pš
]);

422 
	}
}

425 
ušt32_t
 
	$Äfx_gpiÙe_out_sk_addr_g‘
(
Äfx_gpiÙe_pš_t
 
pš
)

427 
	`NRFX_ASSERT
(
pš
 < 
NUMBER_OF_PINS
);

428 
	`NRFX_ASSERT
(
	`pš_š_u£_by_‹
(
pš
));

430 
Äf_gpiÙe_sks_t
 
sk
 = 
	`TE_OUT_IDX_TO_TASK_ADDR
((
ušt32_t
)
	`chªÃl_pÜt_g‘
(
pš
));

431  
	`Äf_gpiÙe_sk_addr_g‘
(
sk
);

432 
	}
}

435 #ià
defšed
(
GPIOTE_FEATURE_SET_PRESENT
)

436 
ušt32_t
 
	$Äfx_gpiÙe_£t_sk_addr_g‘
(
Äfx_gpiÙe_pš_t
 
pš
)

438 
	`NRFX_ASSERT
(
pš
 < 
NUMBER_OF_PINS
);

439 
	`NRFX_ASSERT
(
	`pš_š_u£_by_‹
(
pš
));

441 
Äf_gpiÙe_sks_t
 
sk
 = 
	`TE_SET_IDX_TO_TASK_ADDR
((
ušt32_t
)
	`chªÃl_pÜt_g‘
(
pš
));

442  
	`Äf_gpiÙe_sk_addr_g‘
(
sk
);

443 
	}
}

448 #ià
defšed
(
GPIOTE_FEATURE_CLR_PRESENT
)

449 
ušt32_t
 
	$Äfx_gpiÙe_şr_sk_addr_g‘
(
Äfx_gpiÙe_pš_t
 
pš
)

451 
	`NRFX_ASSERT
(
pš
 < 
NUMBER_OF_PINS
);

452 
	`NRFX_ASSERT
(
	`pš_š_u£_by_‹
(
pš
));

454 
Äf_gpiÙe_sks_t
 
sk
 = 
	`TE_CLR_IDX_TO_TASK_ADDR
((
ušt32_t
)
	`chªÃl_pÜt_g‘
(
pš
));

455  
	`Äf_gpiÙe_sk_addr_g‘
(
sk
);

456 
	}
}

461 
	$Äfx_gpiÙe_out_sk_fÜû
(
Äfx_gpiÙe_pš_t
 
pš
, 
ušt8_t
 
¡©e
)

463 
	`NRFX_ASSERT
(
pš
 < 
NUMBER_OF_PINS
);

464 
	`NRFX_ASSERT
(
	`pš_š_u£
(
pš
));

465 
	`NRFX_ASSERT
(
	`pš_š_u£_by_‹
(
pš
));

467 
Äf_gpiÙe_outš™_t
 
š™_v®
 =

468 
¡©e
 ? 
NRF_GPIOTE_INITIAL_VALUE_HIGH
 : 
NRF_GPIOTE_INITIAL_VALUE_LOW
;

469 
	`Äf_gpiÙe_sk_fÜû
((
ušt32_t
)
m_cb
.
pš_assignm’ts
[
pš
], 
š™_v®
);

470 
	}
}

473 
	$Äfx_gpiÙe_out_sk_Œigg”
(
Äfx_gpiÙe_pš_t
 
pš
)

475 
	`NRFX_ASSERT
(
pš
 < 
NUMBER_OF_PINS
);

476 
	`NRFX_ASSERT
(
	`pš_š_u£
(
pš
));

477 
	`NRFX_ASSERT
(
	`pš_š_u£_by_‹
(
pš
));

479 
Äf_gpiÙe_sks_t
 
sk
 = 
	`TE_OUT_IDX_TO_TASK_ADDR
((
ušt32_t
)
	`chªÃl_pÜt_g‘
(
pš
));

480 
	`Äf_gpiÙe_sk_£t
(
sk
);

481 
	}
}

484 #ià
defšed
(
GPIOTE_FEATURE_SET_PRESENT
)

485 
	$Äfx_gpiÙe_£t_sk_Œigg”
(
Äfx_gpiÙe_pš_t
 
pš
)

487 
	`NRFX_ASSERT
(
pš
 < 
NUMBER_OF_PINS
);

488 
	`NRFX_ASSERT
(
	`pš_š_u£
(
pš
));

489 
	`NRFX_ASSERT
(
	`pš_š_u£_by_‹
(
pš
));

491 
Äf_gpiÙe_sks_t
 
sk
 = 
	`TE_SET_IDX_TO_TASK_ADDR
((
ušt32_t
)
	`chªÃl_pÜt_g‘
(
pš
));

492 
	`Äf_gpiÙe_sk_£t
(
sk
);

493 
	}
}

498 #ià 
defšed
(
GPIOTE_FEATURE_CLR_PRESENT
)

499 
	$Äfx_gpiÙe_şr_sk_Œigg”
(
Äfx_gpiÙe_pš_t
 
pš
)

501 
	`NRFX_ASSERT
(
pš
 < 
NUMBER_OF_PINS
);

502 
	`NRFX_ASSERT
(
	`pš_š_u£
(
pš
));

503 
	`NRFX_ASSERT
(
	`pš_š_u£_by_‹
(
pš
));

505 
Äf_gpiÙe_sks_t
 
sk
 = 
	`TE_CLR_IDX_TO_TASK_ADDR
((
ušt32_t
)
	`chªÃl_pÜt_g‘
(
pš
));

506 
	`Äf_gpiÙe_sk_£t
(
sk
);

507 
	}
}

512 
Äfx_”r_t
 
	$Äfx_gpiÙe_š_š™
(
Äfx_gpiÙe_pš_t
 
pš
,

513 
Äfx_gpiÙe_š_cÚfig_t
 cÚ¡ * 
p_cÚfig
,

514 
Äfx_gpiÙe_evt_hªdËr_t
 
evt_hªdËr
)

516 
	`NRFX_ASSERT
(
pš
 < 
NUMBER_OF_PINS
);

517 
Äfx_”r_t
 
”r_code
 = 
NRFX_SUCCESS
;

520 ià(
	`pš_š_u£_by_gpiÙe
(
pš
))

522 
”r_code
 = 
NRFX_ERROR_INVALID_STATE
;

526 
št8_t
 
chªÃl
 = 
	`chªÃl_pÜt_®loc
(
pš
, 
evt_hªdËr
, 
p_cÚfig
->
hi_accu¿cy
);

527 ià(
chªÃl
 !ğ
NO_CHANNELS
)

529 ià(!
p_cÚfig
->
sk_gpio_£tup
)

531 ià(
p_cÚfig
->
is_w©ch”
)

533 
	`Äf_gpio_cfg_w©ch”
(
pš
);

537 
	`Äf_gpio_cfg_šput
(
pš
, 
p_cÚfig
->
puÎ
);

539 
	`pš_cÚfigu»d_£t
(
pš
);

542 ià(
p_cÚfig
->
hi_accu¿cy
)

544 
	`Äf_gpiÙe_ev’t_cÚfigu»
((
ušt32_t
)
chªÃl
, 
pš
, 
p_cÚfig
->
£n£
);

548 
m_cb
.
pÜt_hªdËrs_pšs
[
chªÃl
 -

549 
GPIOTE_CH_NUM
] |ğ(
p_cÚfig
->
£n£
è<< 
SENSE_FIELD_POS
;

554 
”r_code
 = 
NRFX_ERROR_NO_MEM
;

558 
	`NRFX_LOG_INFO
("FunùiÚ: %s,ƒ¼Ü code: %s.", 
__func__
, 
	`NRFX_LOG_ERROR_STRING_GET
(
”r_code
));

559  
”r_code
;

560 
	}
}

562 
	$Äfx_gpiÙe_š_ev’t_’abË
(
Äfx_gpiÙe_pš_t
 
pš
, 
boŞ
 
št_’abË
)

564 
	`NRFX_ASSERT
(
pš
 < 
NUMBER_OF_PINS
);

565 
	`NRFX_ASSERT
(
	`pš_š_u£_by_gpiÙe
(
pš
));

566 ià(
	`pš_š_u£_by_pÜt
(
pš
))

568 
ušt8_t
 
pš_ªd_£n£
 = (uint8_t)

569 
m_cb
.
pÜt_hªdËrs_pšs
[
	`chªÃl_pÜt_g‘
(
pš
è- 
GPIOTE_CH_NUM
];

570 
Äf_gpiÙe_pŞ¬™y_t
 
pŞ¬™y
 =

571 (
Äf_gpiÙe_pŞ¬™y_t
)(
pš_ªd_£n£
 >> 
SENSE_FIELD_POS
);

572 
Äf_gpio_pš_£n£_t
 
£n£
;

573 ià(
pŞ¬™y
 =ğ
NRF_GPIOTE_POLARITY_TOGGLE
)

576 
£n£
 = (
	`Äf_gpio_pš_»ad
(
pš
)) ?

577 
NRF_GPIO_PIN_SENSE_LOW
 : 
NRF_GPIO_PIN_SENSE_HIGH
;

581 
£n£
 = (
pŞ¬™y
 =ğ
NRF_GPIOTE_POLARITY_LOTOHI
) ?

582 
NRF_GPIO_PIN_SENSE_HIGH
 : 
NRF_GPIO_PIN_SENSE_LOW
;

584 
	`Äf_gpio_cfg_£n£_£t
(
pš
, 
£n£
);

586 ià(
	`pš_š_u£_by_‹
(
pš
))

588 
št32_t
 
chªÃl
 = (št32_t)
	`chªÃl_pÜt_g‘
(
pš
);

589 
Äf_gpiÙe_ev’ts_t
 
ev’t
 = 
	`TE_IDX_TO_EVENT_ADDR
((
ušt32_t
)
chªÃl
);

591 
	`Äf_gpiÙe_ev’t_’abË
((
ušt32_t
)
chªÃl
);

593 
	`Äf_gpiÙe_ev’t_ş—r
(
ev’t
);

594 ià(
št_’abË
)

596 
Äfx_gpiÙe_evt_hªdËr_t
 
hªdËr
 = 
	`chªÃl_hªdËr_g‘
((
ušt32_t
)
	`chªÃl_pÜt_g‘
(
pš
));

598 ià(
hªdËr
)

600 
	`Äf_gpiÙe_št_’abË
(1 << 
chªÃl
);

604 
	}
}

607 
	$Äfx_gpiÙe_š_ev’t_di§bË
(
Äfx_gpiÙe_pš_t
 
pš
)

609 
	`NRFX_ASSERT
(
pš
 < 
NUMBER_OF_PINS
);

610 
	`NRFX_ASSERT
(
	`pš_š_u£_by_gpiÙe
(
pš
));

611 ià(
	`pš_š_u£_by_pÜt
(
pš
))

613 
	`Äf_gpio_cfg_£n£_£t
(
pš
, 
NRF_GPIO_PIN_NOSENSE
);

615 ià(
	`pš_š_u£_by_‹
(
pš
))

617 
št32_t
 
chªÃl
 = (št32_t)
	`chªÃl_pÜt_g‘
(
pš
);

618 
	`Äf_gpiÙe_ev’t_di§bË
((
ušt32_t
)
chªÃl
);

619 
	`Äf_gpiÙe_št_di§bË
(1 << 
chªÃl
);

621 
	}
}

624 
	$Äfx_gpiÙe_š_unš™
(
Äfx_gpiÙe_pš_t
 
pš
)

626 
	`NRFX_ASSERT
(
pš
 < 
NUMBER_OF_PINS
);

627 
	`NRFX_ASSERT
(
	`pš_š_u£_by_gpiÙe
(
pš
));

628 
	`Äfx_gpiÙe_š_ev’t_di§bË
(
pš
);

629 ià(
	`pš_š_u£_by_‹
(
pš
))

631 
	`Äf_gpiÙe_‹_deçuÉ
((
ušt32_t
)
	`chªÃl_pÜt_g‘
(
pš
));

633 ià(
	`pš_cÚfigu»d_check
(
pš
))

635 
	`Äf_gpio_cfg_deçuÉ
(
pš
);

636 
	`pš_cÚfigu»d_ş—r
(
pš
);

638 
	`chªÃl_ä“
((
ušt8_t
)
	`chªÃl_pÜt_g‘
(
pš
));

639 
	`pš_š_u£_ş—r
(
pš
);

640 
	}
}

643 
boŞ
 
	$Äfx_gpiÙe_š_is_£t
(
Äfx_gpiÙe_pš_t
 
pš
)

645 
	`NRFX_ASSERT
(
pš
 < 
NUMBER_OF_PINS
);

646  
	`Äf_gpio_pš_»ad
(
pš
è? 
Œue
 : 
çl£
;

647 
	}
}

650 
ušt32_t
 
	$Äfx_gpiÙe_š_ev’t_addr_g‘
(
Äfx_gpiÙe_pš_t
 
pš
)

652 
	`NRFX_ASSERT
(
pš
 < 
NUMBER_OF_PINS
);

653 
	`NRFX_ASSERT
(
	`pš_š_u£_by_pÜt
(
pš
è|| 
	`pš_š_u£_by_‹
(pin));

655 
Äf_gpiÙe_ev’ts_t
 
ev’t
 = 
NRF_GPIOTE_EVENTS_PORT
;

657 ià(
	`pš_š_u£_by_‹
(
pš
))

659 
ev’t
 = 
	`TE_IDX_TO_EVENT_ADDR
((
ušt32_t
)
	`chªÃl_pÜt_g‘
(
pš
));

661  
	`Äf_gpiÙe_ev’t_addr_g‘
(
ev’t
);

662 
	}
}

665 
	$Äfx_gpiÙe_œq_hªdËr
()

667 
ušt32_t
 
¡©us
 = 0;

668 
ušt32_t
 
šput
[
GPIO_COUNT
] = {0};

671 
ušt32_t
 
i
;

672 
Äf_gpiÙe_ev’ts_t
 
ev’t
 = 
NRF_GPIOTE_EVENTS_IN_0
;

673 
ušt32_t
 
mask
 = (ušt32_t)
NRF_GPIOTE_INT_IN0_MASK
;

675 
i
 = 0; i < 
GPIOTE_CH_NUM
; i++)

677 ià(
	`Äf_gpiÙe_ev’t_is_£t
(
ev’t
è&& 
	`Äf_gpiÙe_št_is_’abËd
(
mask
))

679 
	`Äf_gpiÙe_ev’t_ş—r
(
ev’t
);

680 
¡©us
 |ğ
mask
;

682 
mask
 <<= 1;

685 
ev’t
 = (
Äf_gpiÙe_ev’ts_t
)((
ušt32_t
)event + (uint32_t));

690 ià(
	`Äf_gpiÙe_ev’t_is_£t
(
NRF_GPIOTE_EVENTS_PORT
))

692 
	`Äf_gpiÙe_ev’t_ş—r
(
NRF_GPIOTE_EVENTS_PORT
);

693 
¡©us
 |ğ(
ušt32_t
)
NRF_GPIOTE_INT_PORT_MASK
;

694 
	`Äf_gpio_pÜts_»ad
(0, 
GPIO_COUNT
, 
šput
);

698 ià(
¡©us
 & 
NRF_GPIOTE_INT_IN_MASK
)

700 
mask
 = (
ušt32_t
)
NRF_GPIOTE_INT_IN0_MASK
;

702 
i
 = 0; i < 
GPIOTE_CH_NUM
; i++)

704 ià(
mask
 & 
¡©us
)

706 
Äfx_gpiÙe_pš_t
 
pš
 = 
	`Äf_gpiÙe_ev’t_pš_g‘
(
i
);

707 
	`NRFX_LOG_DEBUG
("Ev’ˆš‚umb”: %d.", 
i
);

708 
Äf_gpiÙe_pŞ¬™y_t
 
pŞ¬™y
 = 
	`Äf_gpiÙe_ev’t_pŞ¬™y_g‘
(
i
);

709 
Äfx_gpiÙe_evt_hªdËr_t
 
hªdËr
 = 
	`chªÃl_hªdËr_g‘
(
i
);

710 
	`NRFX_LOG_DEBUG
("Pš: %d,…Ş¬™y: %d.", 
pš
, 
pŞ¬™y
);

711 ià(
hªdËr
)

713 
	`hªdËr
(
pš
, 
pŞ¬™y
);

716 
mask
 <<= 1;

720 ià(
¡©us
 & (
ušt32_t
)
NRF_GPIOTE_INT_PORT_MASK
)

723 
ušt32_t
 
pÜt_idx
;

724 
ušt8_t
 
»³©
 = 0;

725 
ušt32_t
 
toggË_mask
[
GPIO_COUNT
] = {0};

726 
ušt32_t
 
pšs_to_check
[
GPIO_COUNT
];

729 
pÜt_idx
 = 0;…Üt_idx < 
GPIO_COUNT
;…ort_idx++)

731 
pšs_to_check
[
pÜt_idx
] = 0xFFFFFFFF;

736 
»³©
 = 0;

738 
i
 = 0; i < 
NRFX_GPIOTE_CONFIG_NUM_OF_LOW_POWER_EVENTS
; i++)

740 
ušt8_t
 
pš_ªd_£n£
 = (ušt8_t)
m_cb
.
pÜt_hªdËrs_pšs
[
i
];

741 
Äfx_gpiÙe_pš_t
 
pš
 = (
pš_ªd_£n£
 & ~
SENSE_FIELD_MASK
);

743 ià((
m_cb
.
pÜt_hªdËrs_pšs
[
i
] !ğ
PIN_NOT_USED
)

744 && 
	`Äf_b™mask_b™_is_£t
(
pš
, 
pšs_to_check
))

746 
Äf_gpiÙe_pŞ¬™y_t
 
pŞ¬™y
 =

747 (
Äf_gpiÙe_pŞ¬™y_t
)((
pš_ªd_£n£
 &

748 
SENSE_FIELD_MASK
è>> 
SENSE_FIELD_POS
);

749 
Äfx_gpiÙe_evt_hªdËr_t
 
hªdËr
 =

750 
	`chªÃl_hªdËr_g‘
((
ušt32_t
)
	`chªÃl_pÜt_g‘
(
pš
));

751 ià(
hªdËr
 || (
pŞ¬™y
 =ğ
NRF_GPIOTE_POLARITY_TOGGLE
))

753 ià(
pŞ¬™y
 =ğ
NRF_GPIOTE_POLARITY_TOGGLE
)

755 
	`Äf_b™mask_b™_£t
(
pš
, 
toggË_mask
);

757 
Äf_gpio_pš_£n£_t
 
£n£
 = 
	`Äf_gpio_pš_£n£_g‘
(
pš
);

758 
ušt32_t
 
pš_¡©e
 = 
	`Äf_b™mask_b™_is_£t
(
pš
, 
šput
);

759 ià((
pš_¡©e
 && (
£n£
 =ğ
NRF_GPIO_PIN_SENSE_HIGH
)) ||

760 (!
pš_¡©e
 && (
£n£
 =ğ
NRF_GPIO_PIN_SENSE_LOW
)) )

762 
	`NRFX_LOG_DEBUG
("PORTƒv’ˆfÜ…š: %d,…Ş¬™y: %d.", 
pš
, 
pŞ¬™y
);

763 ià(
pŞ¬™y
 =ğ
NRF_GPIOTE_POLARITY_TOGGLE
)

765 
Äf_gpio_pš_£n£_t
 
Ãxt_£n£
 =

766 (
£n£
 =ğ
NRF_GPIO_PIN_SENSE_HIGH
) ?

767 
NRF_GPIO_PIN_SENSE_LOW
 :

768 
NRF_GPIO_PIN_SENSE_HIGH
;

769 
	`Äf_gpio_cfg_£n£_£t
(
pš
, 
Ãxt_£n£
);

770 ++
»³©
;

773 ià(
hªdËr
)

775 
	`hªdËr
(
pš
, 
pŞ¬™y
);

782 ià(
»³©
)

790 
ušt32_t
 
Ãw_šput
[
GPIO_COUNT
];

791 
boŞ
 
šput_unchªged
 = 
Œue
;

792 
	`Äf_gpio_pÜts_»ad
(0, 
GPIO_COUNT
, 
Ãw_šput
);

795 
pÜt_idx
 = 0;…Üt_idx < 
GPIO_COUNT
;…ort_idx++)

797 ià(
Ãw_šput
[
pÜt_idx
] !ğ
šput
[port_idx])

799 
šput_unchªged
 = 
çl£
;

804 ià(
šput_unchªged
)

807 
»³©
 = 0;

812 
pÜt_idx
 = 0;…Üt_idx < 
GPIO_COUNT
;…ort_idx++)

814 
šput
[
pÜt_idx
] = 
Ãw_šput
[port_idx];

815 
pšs_to_check
[
pÜt_idx
] = 
toggË_mask
[port_idx];

820 
»³©
);

822 
	}
}

	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\modules\nrfx\drivers\src\nrfx_power_clock.c

41 
	~<Äfx.h
>

42 
	~<Äfx_pow”.h
>

43 
	~<Äfx_şock.h
>

46 #ià
NRFX_CHECK
(
NRFX_POWER_ENABLED
è&& NRFX_CHECK(
NRFX_CLOCK_ENABLED
)

47 
	$Äfx_pow”_şock_œq_hªdËr
()

49 
	`Äfx_pow”_œq_hªdËr
();

50 
	`Äfx_şock_œq_hªdËr
();

51 
	}
}

	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\modules\nrfx\drivers\src\nrfx_uart.c

41 
	~<Äfx.h
>

43 #ià
NRFX_CHECK
(
NRFX_UART_ENABLED
)

45 #ià!
NRFX_CHECK
(
NRFX_UART0_ENABLED
)

49 
	~<Äfx_u¬t.h
>

50 
	~"´s/Äfx_´s.h
"

51 
	~<h®/Äf_gpio.h
>

53 
	#NRFX_LOG_MODULE
 
UART


	)

54 
	~<Äfx_log.h
>

56 
	#EVT_TO_STR
(
ev’t
) \

57 (
ev’t
 =ğ
NRF_UART_EVENT_ERROR
 ? "NRF_UART_EVENT_ERROR" : \

58 "UNKNOWN EVENT")

	)

61 
	#TX_COUNTER_ABORT_REQ_VALUE
 
UINT32_MAX


	)

65 * 
	mp_cÚ‹xt
;

66 
Äfx_u¬t_ev’t_hªdËr_t
 
	mhªdËr
;

67 
ušt8_t
 cÚ¡ * 
	mp_tx_bufãr
;

68 
ušt8_t
 * 
	mp_rx_bufãr
;

69 
ušt8_t
 * 
	mp_rx_£cÚd¬y_bufãr
;

70 
size_t
 
	mtx_bufãr_Ëngth
;

71 
size_t
 
	mrx_bufãr_Ëngth
;

72 
size_t
 
	mrx_£cÚd¬y_bufãr_Ëngth
;

73 vŞ©
size_t
 
	mtx_couÁ”
;

74 vŞ©
size_t
 
	mrx_couÁ”
;

75 vŞ©
boŞ
 
	mtx_abÜt
;

76 
boŞ
 
	mrx_’abËd
;

77 
Äfx_drv_¡©e_t
 
	m¡©e
;

78 } 
	tu¬t_cÚŒŞ_block_t
;

79 
u¬t_cÚŒŞ_block_t
 
	gm_cb
[
NRFX_UART_ENABLED_COUNT
];

81 
	$­¶y_cÚfig
(
Äfx_u¬t_t
 cÚ¡ * 
p_š¡ªû
,

82 
Äfx_u¬t_cÚfig_t
 cÚ¡ * 
p_cÚfig
)

84 ià(
p_cÚfig
->
p£Éxd
 !ğ
NRF_UART_PSEL_DISCONNECTED
)

86 
	`Äf_gpio_pš_£t
(
p_cÚfig
->
p£Éxd
);

87 
	`Äf_gpio_cfg_ouut
(
p_cÚfig
->
p£Éxd
);

89 ià(
p_cÚfig
->
p£Ìxd
 !ğ
NRF_UART_PSEL_DISCONNECTED
)

91 
	`Äf_gpio_cfg_šput
(
p_cÚfig
->
p£Ìxd
, 
NRF_GPIO_PIN_NOPULL
);

94 
	`Äf_u¬t_baud¿‹_£t
(
p_š¡ªû
->
p_»g
, 
p_cÚfig
->
baud¿‹
);

95 
	`Äf_u¬t_cÚfigu»
(
p_š¡ªû
->
p_»g
, 
p_cÚfig
->
·r™y
,…_cÚfig->
hwfc
);

96 
	`Äf_u¬t_txrx_pšs_£t
(
p_š¡ªû
->
p_»g
, 
p_cÚfig
->
p£Éxd
,…_cÚfig->
p£Ìxd
);

97 ià(
p_cÚfig
->
hwfc
 =ğ
NRF_UART_HWFC_ENABLED
)

99 ià(
p_cÚfig
->
p£lùs
 !ğ
NRF_UART_PSEL_DISCONNECTED
)

101 
	`Äf_gpio_cfg_šput
(
p_cÚfig
->
p£lùs
, 
NRF_GPIO_PIN_NOPULL
);

103 ià(
p_cÚfig
->
p£Ìts
 !ğ
NRF_UART_PSEL_DISCONNECTED
)

105 
	`Äf_gpio_pš_£t
(
p_cÚfig
->
p£Ìts
);

106 
	`Äf_gpio_cfg_ouut
(
p_cÚfig
->
p£Ìts
);

108 
	`Äf_u¬t_hwfc_pšs_£t
(
p_š¡ªû
->
p_»g
, 
p_cÚfig
->
p£Ìts
,…_cÚfig->
p£lùs
);

110 
	}
}

112 
	$š‹¼u±s_’abË
(
Äfx_u¬t_t
 cÚ¡ * 
p_š¡ªû
,

113 
ušt8_t
 
š‹¼u±_´iÜ™y
)

115 
	`Äf_u¬t_ev’t_ş—r
(
p_š¡ªû
->
p_»g
, 
NRF_UART_EVENT_TXDRDY
);

116 
	`Äf_u¬t_ev’t_ş—r
(
p_š¡ªû
->
p_»g
, 
NRF_UART_EVENT_RXTO
);

117 
	`Äf_u¬t_št_’abË
(
p_š¡ªû
->
p_»g
, 
NRF_UART_INT_MASK_TXDRDY
 |

118 
NRF_UART_INT_MASK_RXTO
);

119 
	`NRFX_IRQ_PRIORITY_SET
(
	`Äfx_g‘_œq_numb”
((*)
p_š¡ªû
->
p_»g
),

120 
š‹¼u±_´iÜ™y
);

121 
	`NRFX_IRQ_ENABLE
(
	`Äfx_g‘_œq_numb”
((*)
p_š¡ªû
->
p_»g
));

122 
	}
}

124 
	$š‹¼u±s_di§bË
(
Äfx_u¬t_t
 cÚ¡ * 
p_š¡ªû
)

126 
	`Äf_u¬t_št_di§bË
(
p_š¡ªû
->
p_»g
, 
NRF_UART_INT_MASK_RXDRDY
 |

127 
NRF_UART_INT_MASK_TXDRDY
 |

128 
NRF_UART_INT_MASK_ERROR
 |

129 
NRF_UART_INT_MASK_RXTO
);

130 
	`NRFX_IRQ_DISABLE
(
	`Äfx_g‘_œq_numb”
((*)
p_š¡ªû
->
p_»g
));

131 
	}
}

133 
	$pšs_to_deçuÉ
(
Äfx_u¬t_t
 cÚ¡ * 
p_š¡ªû
)

136 
ušt32_t
 
txd
;

137 
ušt32_t
 
rxd
;

138 
ušt32_t
 
¹s
;

139 
ušt32_t
 
ùs
;

141 
txd
 = 
	`Äf_u¬t_tx_pš_g‘
(
p_š¡ªû
->
p_»g
);

142 
rxd
 = 
	`Äf_u¬t_rx_pš_g‘
(
p_š¡ªû
->
p_»g
);

143 
¹s
 = 
	`Äf_u¬t_¹s_pš_g‘
(
p_š¡ªû
->
p_»g
);

144 
ùs
 = 
	`Äf_u¬t_ùs_pš_g‘
(
p_š¡ªû
->
p_»g
);

145 
	`Äf_u¬t_txrx_pšs_discÚÃù
(
p_š¡ªû
->
p_»g
);

146 
	`Äf_u¬t_hwfc_pšs_discÚÃù
(
p_š¡ªû
->
p_»g
);

148 ià(
txd
 !ğ
NRF_UART_PSEL_DISCONNECTED
)

150 
	`Äf_gpio_cfg_deçuÉ
(
txd
);

152 ià(
rxd
 !ğ
NRF_UART_PSEL_DISCONNECTED
)

154 
	`Äf_gpio_cfg_deçuÉ
(
rxd
);

156 ià(
ùs
 !ğ
NRF_UART_PSEL_DISCONNECTED
)

158 
	`Äf_gpio_cfg_deçuÉ
(
ùs
);

160 ià(
¹s
 !ğ
NRF_UART_PSEL_DISCONNECTED
)

162 
	`Äf_gpio_cfg_deçuÉ
(
¹s
);

164 
	}
}

166 
Äfx_”r_t
 
	$Äfx_u¬t_š™
(
Äfx_u¬t_t
 cÚ¡ * 
p_š¡ªû
,

167 
Äfx_u¬t_cÚfig_t
 cÚ¡ * 
p_cÚfig
,

168 
Äfx_u¬t_ev’t_hªdËr_t
 
ev’t_hªdËr
)

170 
	`NRFX_ASSERT
(
p_cÚfig
);

171 
u¬t_cÚŒŞ_block_t
 * 
p_cb
 = &
m_cb
[
p_š¡ªû
->
drv_š¡_idx
];

172 
Äfx_”r_t
 
”r_code
 = 
NRFX_SUCCESS
;

174 ià(
p_cb
->
¡©e
 !ğ
NRFX_DRV_STATE_UNINITIALIZED
)

176 
”r_code
 = 
NRFX_ERROR_INVALID_STATE
;

177 
	`NRFX_LOG_WARNING
("Function: %s,ƒrror code: %s.",

178 
__func__
,

179 
	`NRFX_LOG_ERROR_STRING_GET
(
”r_code
));

180  
”r_code
;

183 #ià
	`NRFX_CHECK
(
NRFX_PRS_ENABLED
)

184 
Äfx_œq_hªdËr_t
 cÚ¡ 
œq_hªdËrs
[
NRFX_UART_ENABLED_COUNT
] = {

185 #ià
	`NRFX_CHECK
(
NRFX_UART0_ENABLED
)

186 
Äfx_u¬t_0_œq_hªdËr
,

189 ià(
	`Äfx_´s_acquœe
(
p_š¡ªû
->
p_»g
,

190 
œq_hªdËrs
[
p_š¡ªû
->
drv_š¡_idx
]è!ğ
NRFX_SUCCESS
)

192 
”r_code
 = 
NRFX_ERROR_BUSY
;

193 
	`NRFX_LOG_WARNING
("Function: %s,ƒrror code: %s.",

194 
__func__
,

195 
	`NRFX_LOG_ERROR_STRING_GET
(
”r_code
));

196  
”r_code
;

200 
	`­¶y_cÚfig
(
p_š¡ªû
, 
p_cÚfig
);

202 
p_cb
->
hªdËr
 = 
ev’t_hªdËr
;

203 
p_cb
->
p_cÚ‹xt
 = 
p_cÚfig
->p_context;

205 ià(
p_cb
->
hªdËr
)

207 
	`š‹¼u±s_’abË
(
p_š¡ªû
, 
p_cÚfig
->
š‹¼u±_´iÜ™y
);

210 
	`Äf_u¬t_’abË
(
p_š¡ªû
->
p_»g
);

211 
p_cb
->
rx_bufãr_Ëngth
 = 0;

212 
p_cb
->
rx_£cÚd¬y_bufãr_Ëngth
 = 0;

213 
p_cb
->
rx_’abËd
 = 
çl£
;

214 
p_cb
->
tx_bufãr_Ëngth
 = 0;

215 
p_cb
->
¡©e
 = 
NRFX_DRV_STATE_INITIALIZED
;

216 
	`NRFX_LOG_WARNING
("Function: %s,ƒrror code: %s.",

217 
__func__
,

218 
	`NRFX_LOG_ERROR_STRING_GET
(
”r_code
));

219  
”r_code
;

220 
	}
}

222 
	$Äfx_u¬t_unš™
(
Äfx_u¬t_t
 cÚ¡ * 
p_š¡ªû
)

224 
u¬t_cÚŒŞ_block_t
 * 
p_cb
 = &
m_cb
[
p_š¡ªû
->
drv_š¡_idx
];

226 
	`Äf_u¬t_di§bË
(
p_š¡ªû
->
p_»g
);

228 ià(
p_cb
->
hªdËr
)

230 
	`š‹¼u±s_di§bË
(
p_š¡ªû
);

233 
	`pšs_to_deçuÉ
(
p_š¡ªû
);

235 #ià
	`NRFX_CHECK
(
NRFX_PRS_ENABLED
)

236 
	`Äfx_´s_»Ëa£
(
p_š¡ªû
->
p_»g
);

239 
p_cb
->
¡©e
 = 
NRFX_DRV_STATE_UNINITIALIZED
;

240 
p_cb
->
hªdËr
 = 
NULL
;

241 
	`NRFX_LOG_INFO
("In¡ªû unš™Ÿlized: %d.", 
p_š¡ªû
->
drv_š¡_idx
);

242 
	}
}

244 
	$tx_by‹
(
NRF_UART_Ty³
 * 
p_u¬t
, 
u¬t_cÚŒŞ_block_t
 * 
p_cb
)

246 
	`Äf_u¬t_ev’t_ş—r
(
p_u¬t
, 
NRF_UART_EVENT_TXDRDY
);

247 
ušt8_t
 
txd
 = 
p_cb
->
p_tx_bufãr
[p_cb->
tx_couÁ”
];

248 
p_cb
->
tx_couÁ”
++;

249 
	`Äf_u¬t_txd_£t
(
p_u¬t
, 
txd
);

250 
	}
}

252 
boŞ
 
	$tx_blockšg
(
NRF_UART_Ty³
 * 
p_u¬t
, 
u¬t_cÚŒŞ_block_t
 * 
p_cb
)

254 
p_cb
->
tx_couÁ”
 <…_cb->
tx_bufãr_Ëngth
)

258 !
	`Äf_u¬t_ev’t_check
(
p_u¬t
, 
NRF_UART_EVENT_TXDRDY
))

260 ià(
p_cb
->
tx_abÜt
)

262  
çl£
;

266 
	`tx_by‹
(
p_u¬t
, 
p_cb
);

269  
Œue
;

270 
	}
}

272 
Äfx_”r_t
 
	$Äfx_u¬t_tx
(
Äfx_u¬t_t
 cÚ¡ * 
p_š¡ªû
,

273 
ušt8_t
 cÚ¡ * 
p_d©a
,

274 
size_t
 
Ëngth
)

276 
u¬t_cÚŒŞ_block_t
 * 
p_cb
 = &
m_cb
[
p_š¡ªû
->
drv_š¡_idx
];

277 
	`NRFX_ASSERT
(
p_cb
->
¡©e
 =ğ
NRFX_DRV_STATE_INITIALIZED
);

278 
	`NRFX_ASSERT
(
p_d©a
);

279 
	`NRFX_ASSERT
(
Ëngth
 > 0);

281 
Äfx_”r_t
 
”r_code
;

283 ià(
	`Äfx_u¬t_tx_š_´og»ss
(
p_š¡ªû
))

285 
”r_code
 = 
NRFX_ERROR_BUSY
;

286 
	`NRFX_LOG_WARNING
("Function: %s,ƒrror code: %s.",

287 
__func__
,

288 
	`NRFX_LOG_ERROR_STRING_GET
(
”r_code
));

289  
”r_code
;

291 
p_cb
->
tx_bufãr_Ëngth
 = 
Ëngth
;

292 
p_cb
->
p_tx_bufãr
 = 
p_d©a
;

293 
p_cb
->
tx_couÁ”
 = 0;

294 
p_cb
->
tx_abÜt
 = 
çl£
;

296 
	`NRFX_LOG_INFO
("T¿nsã¸tx_Ën: %d.", 
p_cb
->
tx_bufãr_Ëngth
);

297 
	`NRFX_LOG_DEBUG
("Tx data:");

298 
	`NRFX_LOG_HEXDUMP_DEBUG
(
p_cb
->
p_tx_bufãr
,

299 
p_cb
->
tx_bufãr_Ëngth
 * Õ_cb->
p_tx_bufãr
[0]));

301 
”r_code
 = 
NRFX_SUCCESS
;

303 
	`Äf_u¬t_ev’t_ş—r
(
p_š¡ªû
->
p_»g
, 
NRF_UART_EVENT_TXDRDY
);

304 
	`Äf_u¬t_sk_Œigg”
(
p_š¡ªû
->
p_»g
, 
NRF_UART_TASK_STARTTX
);

306 
	`tx_by‹
(
p_š¡ªû
->
p_»g
, 
p_cb
);

308 ià(
p_cb
->
hªdËr
 =ğ
NULL
)

310 ià(!
	`tx_blockšg
(
p_š¡ªû
->
p_»g
, 
p_cb
))

313 
”r_code
 = 
NRFX_ERROR_FORBIDDEN
;

318 !
	`Äf_u¬t_ev’t_check
(
p_š¡ªû
->
p_»g
, 
NRF_UART_EVENT_TXDRDY
))

320 
	`Äf_u¬t_sk_Œigg”
(
p_š¡ªû
->
p_»g
, 
NRF_UART_TASK_STOPTX
);

322 
p_cb
->
tx_bufãr_Ëngth
 = 0;

325 
	`NRFX_LOG_INFO
("FunùiÚ: %s,ƒ¼Ü code: %s.", 
__func__
, 
	`NRFX_LOG_ERROR_STRING_GET
(
”r_code
));

326  
”r_code
;

327 
	}
}

329 
boŞ
 
	$Äfx_u¬t_tx_š_´og»ss
(
Äfx_u¬t_t
 cÚ¡ * 
p_š¡ªû
)

331  (
m_cb
[
p_š¡ªû
->
drv_š¡_idx
].
tx_bufãr_Ëngth
 != 0);

332 
	}
}

334 
	$rx_’abË
(
Äfx_u¬t_t
 cÚ¡ * 
p_š¡ªû
)

336 
	`Äf_u¬t_ev’t_ş—r
(
p_š¡ªû
->
p_»g
, 
NRF_UART_EVENT_ERROR
);

337 
	`Äf_u¬t_ev’t_ş—r
(
p_š¡ªû
->
p_»g
, 
NRF_UART_EVENT_RXDRDY
);

338 
	`Äf_u¬t_sk_Œigg”
(
p_š¡ªû
->
p_»g
, 
NRF_UART_TASK_STARTRX
);

339 
	}
}

341 
	$rx_by‹
(
NRF_UART_Ty³
 * 
p_u¬t
, 
u¬t_cÚŒŞ_block_t
 * 
p_cb
)

343 ià(!
p_cb
->
rx_bufãr_Ëngth
)

345 
	`Äf_u¬t_ev’t_ş—r
(
p_u¬t
, 
NRF_UART_EVENT_RXDRDY
);

347 (è
	`Äf_u¬t_rxd_g‘
(
p_u¬t
);

350 
	`Äf_u¬t_ev’t_ş—r
(
p_u¬t
, 
NRF_UART_EVENT_RXDRDY
);

351 
p_cb
->
p_rx_bufãr
[p_cb->
rx_couÁ”
] = 
	`Äf_u¬t_rxd_g‘
(
p_u¬t
);

352 
p_cb
->
rx_couÁ”
++;

353 
	}
}

355 
Äfx_”r_t
 
	$Äfx_u¬t_rx
(
Äfx_u¬t_t
 cÚ¡ * 
p_š¡ªû
,

356 
ušt8_t
 * 
p_d©a
,

357 
size_t
 
Ëngth
)

359 
u¬t_cÚŒŞ_block_t
 * 
p_cb
 = &
m_cb
[
p_š¡ªû
->
drv_š¡_idx
];

361 
	`NRFX_ASSERT
(
m_cb
[
p_š¡ªû
->
drv_š¡_idx
].
¡©e
 =ğ
NRFX_DRV_STATE_INITIALIZED
);

362 
	`NRFX_ASSERT
(
p_d©a
);

363 
	`NRFX_ASSERT
(
Ëngth
 > 0);

365 
Äfx_”r_t
 
”r_code
;

367 
boŞ
 
£cÚd_bufãr
 = 
çl£
;

369 ià(
p_cb
->
hªdËr
)

371 
	`Äf_u¬t_št_di§bË
(
p_š¡ªû
->
p_»g
, 
NRF_UART_INT_MASK_RXDRDY
 |

372 
NRF_UART_INT_MASK_ERROR
);

374 ià(
p_cb
->
rx_bufãr_Ëngth
 != 0)

376 ià(
p_cb
->
rx_£cÚd¬y_bufãr_Ëngth
 != 0)

378 ià(
p_cb
->
hªdËr
)

380 
	`Äf_u¬t_št_’abË
(
p_š¡ªû
->
p_»g
, 
NRF_UART_INT_MASK_RXDRDY
 |

381 
NRF_UART_INT_MASK_ERROR
);

383 
”r_code
 = 
NRFX_ERROR_BUSY
;

384 
	`NRFX_LOG_WARNING
("Function: %s,ƒrror code: %s.",

385 
__func__
,

386 
	`NRFX_LOG_ERROR_STRING_GET
(
”r_code
));

387  
”r_code
;

389 
£cÚd_bufãr
 = 
Œue
;

392 ià(!
£cÚd_bufãr
)

394 
p_cb
->
rx_bufãr_Ëngth
 = 
Ëngth
;

395 
p_cb
->
p_rx_bufãr
 = 
p_d©a
;

396 
p_cb
->
rx_couÁ”
 = 0;

397 
p_cb
->
rx_£cÚd¬y_bufãr_Ëngth
 = 0;

401 
p_cb
->
p_rx_£cÚd¬y_bufãr
 = 
p_d©a
;

402 
p_cb
->
rx_£cÚd¬y_bufãr_Ëngth
 = 
Ëngth
;

405 
	`NRFX_LOG_INFO
("T¿nsã¸rx_Ën: %d.", 
Ëngth
);

407 ià((!
p_cb
->
rx_’abËd
è&& (!
£cÚd_bufãr
))

409 
	`rx_’abË
(
p_š¡ªû
);

412 ià(
p_cb
->
hªdËr
 =ğ
NULL
)

414 
	`Äf_u¬t_ev’t_ş—r
(
p_š¡ªû
->
p_»g
, 
NRF_UART_EVENT_RXTO
);

416 
boŞ
 
rxrdy
;

417 
boŞ
 
rxto
;

418 
boŞ
 
”rÜ
;

423 
”rÜ
 = 
	`Äf_u¬t_ev’t_check
(
p_š¡ªû
->
p_»g
, 
NRF_UART_EVENT_ERROR
);

424 
rxrdy
 = 
	`Äf_u¬t_ev’t_check
(
p_š¡ªû
->
p_»g
, 
NRF_UART_EVENT_RXDRDY
);

425 
rxto
 = 
	`Äf_u¬t_ev’t_check
(
p_š¡ªû
->
p_»g
, 
NRF_UART_EVENT_RXTO
);

426 } (!
rxrdy
è&& (!
rxto
è&& (!
”rÜ
));

428 ià(
”rÜ
 || 
rxto
)

432 
	`rx_by‹
(
p_š¡ªû
->
p_»g
, 
p_cb
);

433 } 
p_cb
->
rx_bufãr_Ëngth
 >…_cb->
rx_couÁ”
);

435 
p_cb
->
rx_bufãr_Ëngth
 = 0;

436 ià(
”rÜ
)

438 
”r_code
 = 
NRFX_ERROR_INTERNAL
;

439 
	`NRFX_LOG_WARNING
("Function: %s,ƒrror code: %s.",

440 
__func__
,

441 
	`NRFX_LOG_ERROR_STRING_GET
(
”r_code
));

442  
”r_code
;

445 ià(
rxto
)

447 
”r_code
 = 
NRFX_ERROR_FORBIDDEN
;

448 
	`NRFX_LOG_WARNING
("Function: %s,ƒrror code: %s.",

449 
__func__
,

450 
	`NRFX_LOG_ERROR_STRING_GET
(
”r_code
));

451  
”r_code
;

454 ià(
p_cb
->
rx_’abËd
)

456 
	`Äf_u¬t_sk_Œigg”
(
p_š¡ªû
->
p_»g
, 
NRF_UART_TASK_STARTRX
);

461 
	`Äf_u¬t_sk_Œigg”
(
p_š¡ªû
->
p_»g
, 
NRF_UART_TASK_STOPRX
);

466 
	`Äf_u¬t_št_’abË
(
p_š¡ªû
->
p_»g
, 
NRF_UART_INT_MASK_RXDRDY
 |

467 
NRF_UART_INT_MASK_ERROR
);

469 
”r_code
 = 
NRFX_SUCCESS
;

470 
	`NRFX_LOG_INFO
("FunùiÚ: %s,ƒ¼Ü code: %s.", 
__func__
, 
	`NRFX_LOG_ERROR_STRING_GET
(
”r_code
));

471  
”r_code
;

472 
	}
}

474 
boŞ
 
	$Äfx_u¬t_rx_»ady
(
Äfx_u¬t_t
 cÚ¡ * 
p_š¡ªû
)

476  
	`Äf_u¬t_ev’t_check
(
p_š¡ªû
->
p_»g
, 
NRF_UART_EVENT_RXDRDY
);

477 
	}
}

479 
	$Äfx_u¬t_rx_’abË
(
Äfx_u¬t_t
 cÚ¡ * 
p_š¡ªû
)

481 ià(!
m_cb
[
p_š¡ªû
->
drv_š¡_idx
].
rx_’abËd
)

483 
	`rx_’abË
(
p_š¡ªû
);

484 
m_cb
[
p_š¡ªû
->
drv_š¡_idx
].
rx_’abËd
 = 
Œue
;

486 
	}
}

488 
	$Äfx_u¬t_rx_di§bË
(
Äfx_u¬t_t
 cÚ¡ * 
p_š¡ªû
)

490 
	`Äf_u¬t_sk_Œigg”
(
p_š¡ªû
->
p_»g
, 
NRF_UART_TASK_STOPRX
);

491 
m_cb
[
p_š¡ªû
->
drv_š¡_idx
].
rx_’abËd
 = 
çl£
;

492 
	}
}

494 
ušt32_t
 
	$Äfx_u¬t_”rÜ¤c_g‘
(
Äfx_u¬t_t
 cÚ¡ * 
p_š¡ªû
)

496 
	`Äf_u¬t_ev’t_ş—r
(
p_š¡ªû
->
p_»g
, 
NRF_UART_EVENT_ERROR
);

497  
	`Äf_u¬t_”rÜ¤c_g‘_ªd_ş—r
(
p_š¡ªû
->
p_»g
);

498 
	}
}

500 
	$rx_dÚe_ev’t
(
u¬t_cÚŒŞ_block_t
 * 
p_cb
,

501 
size_t
 
by‹s
,

502 
ušt8_t
 * 
p_d©a
)

504 
Äfx_u¬t_ev’t_t
 
ev’t
;

506 
ev’t
.
ty³
 = 
NRFX_UART_EVT_RX_DONE
;

507 
ev’t
.
d©a
.
rxtx
.
by‹s
 = bytes;

508 
ev’t
.
d©a
.
rxtx
.
p_d©a
 =…_data;

510 
p_cb
->
	`hªdËr
(&
ev’t
,…_cb->
p_cÚ‹xt
);

511 
	}
}

513 
	$tx_dÚe_ev’t
(
u¬t_cÚŒŞ_block_t
 * 
p_cb
,

514 
size_t
 
by‹s
)

516 
Äfx_u¬t_ev’t_t
 
ev’t
;

518 
ev’t
.
ty³
 = 
NRFX_UART_EVT_TX_DONE
;

519 
ev’t
.
d©a
.
rxtx
.
by‹s
 = bytes;

520 
ev’t
.
d©a
.
rxtx
.
p_d©a
 = (
ušt8_t
 *)
p_cb
->
p_tx_bufãr
;

522 
p_cb
->
tx_bufãr_Ëngth
 = 0;

524 
p_cb
->
	`hªdËr
(&
ev’t
,…_cb->
p_cÚ‹xt
);

525 
	}
}

527 
	$Äfx_u¬t_tx_abÜt
(
Äfx_u¬t_t
 cÚ¡ * 
p_š¡ªû
)

529 
u¬t_cÚŒŞ_block_t
 * 
p_cb
 = &
m_cb
[
p_š¡ªû
->
drv_š¡_idx
];

531 
p_cb
->
tx_abÜt
 = 
Œue
;

532 
	`Äf_u¬t_sk_Œigg”
(
p_š¡ªû
->
p_»g
, 
NRF_UART_TASK_STOPTX
);

533 ià(
p_cb
->
hªdËr
)

535 
	`tx_dÚe_ev’t
(
p_cb
,…_cb->
tx_couÁ”
);

538 
	`NRFX_LOG_INFO
("TXransaction‡borted.");

539 
	}
}

541 
	$Äfx_u¬t_rx_abÜt
(
Äfx_u¬t_t
 cÚ¡ * 
p_š¡ªû
)

543 
	`Äf_u¬t_št_di§bË
(
p_š¡ªû
->
p_»g
, 
NRF_UART_INT_MASK_RXDRDY
 |

544 
NRF_UART_INT_MASK_ERROR
);

545 
	`Äf_u¬t_sk_Œigg”
(
p_š¡ªû
->
p_»g
, 
NRF_UART_TASK_STOPRX
);

547 
	`NRFX_LOG_INFO
("RXransaction‡borted.");

548 
	}
}

550 
	$u¬t_œq_hªdËr
(
NRF_UART_Ty³
 * 
p_u¬t
,

551 
u¬t_cÚŒŞ_block_t
 * 
p_cb
)

553 ià(
	`Äf_u¬t_št_’abË_check
(
p_u¬t
, 
NRF_UART_INT_MASK_ERROR
) &&

554 
	`Äf_u¬t_ev’t_check
(
p_u¬t
, 
NRF_UART_EVENT_ERROR
))

556 
Äfx_u¬t_ev’t_t
 
ev’t
;

557 
	`Äf_u¬t_ev’t_ş—r
(
p_u¬t
, 
NRF_UART_EVENT_ERROR
);

558 
	`NRFX_LOG_DEBUG
("Ev’t: %s.", 
	`EVT_TO_STR
(
NRF_UART_EVENT_ERROR
));

559 
	`Äf_u¬t_št_di§bË
(
p_u¬t
, 
NRF_UART_INT_MASK_RXDRDY
 |

560 
NRF_UART_INT_MASK_ERROR
);

561 ià(!
p_cb
->
rx_’abËd
)

563 
	`Äf_u¬t_sk_Œigg”
(
p_u¬t
, 
NRF_UART_TASK_STOPRX
);

565 
ev’t
.
ty³
 = 
NRFX_UART_EVT_ERROR
;

566 
ev’t
.
d©a
.
”rÜ
.
”rÜ_mask
 = 
	`Äf_u¬t_”rÜ¤c_g‘_ªd_ş—r
(
p_u¬t
);

567 
ev’t
.
d©a
.
”rÜ
.
rxtx
.
by‹s
 = 
p_cb
->
rx_bufãr_Ëngth
;

568 
ev’t
.
d©a
.
”rÜ
.
rxtx
.
p_d©a
 = 
p_cb
->
p_rx_bufãr
;

571 
p_cb
->
rx_bufãr_Ëngth
 = 0;

572 
p_cb
->
rx_£cÚd¬y_bufãr_Ëngth
 = 0;

574 
p_cb
->
	`hªdËr
(&
ev’t
,p_cb->
p_cÚ‹xt
);

576 ià(
	`Äf_u¬t_št_’abË_check
(
p_u¬t
, 
NRF_UART_INT_MASK_RXDRDY
) &&

577 
	`Äf_u¬t_ev’t_check
(
p_u¬t
, 
NRF_UART_EVENT_RXDRDY
))

579 
	`rx_by‹
(
p_u¬t
, 
p_cb
);

580 ià(
p_cb
->
rx_bufãr_Ëngth
 =ğp_cb->
rx_couÁ”
)

582 ià(
p_cb
->
rx_£cÚd¬y_bufãr_Ëngth
)

584 
ušt8_t
 * 
p_d©a
 = 
p_cb
->
p_rx_bufãr
;

585 
size_t
 
rx_couÁ”
 = 
p_cb
->rx_counter;

588 
p_cb
->
rx_bufãr_Ëngth
 =…_cb->
rx_£cÚd¬y_bufãr_Ëngth
;

589 
p_cb
->
p_rx_bufãr
 =…_cb->
p_rx_£cÚd¬y_bufãr
;

590 
p_cb
->
rx_£cÚd¬y_bufãr_Ëngth
 = 0;

591 
p_cb
->
rx_couÁ”
 = 0;

592 
	`rx_dÚe_ev’t
(
p_cb
, 
rx_couÁ”
, 
p_d©a
);

596 ià(!
p_cb
->
rx_’abËd
)

598 
	`Äf_u¬t_sk_Œigg”
(
p_u¬t
, 
NRF_UART_TASK_STOPRX
);

600 
	`Äf_u¬t_št_di§bË
(
p_u¬t
, 
NRF_UART_INT_MASK_RXDRDY
 |

601 
NRF_UART_INT_MASK_ERROR
);

602 
p_cb
->
rx_bufãr_Ëngth
 = 0;

603 
	`rx_dÚe_ev’t
(
p_cb
,…_cb->
rx_couÁ”
,…_cb->
p_rx_bufãr
);

608 ià(
	`Äf_u¬t_ev’t_check
(
p_u¬t
, 
NRF_UART_EVENT_TXDRDY
))

610 ià(
p_cb
->
tx_couÁ”
 <…_cb->
tx_bufãr_Ëngth
 &&

611 !
p_cb
->
tx_abÜt
)

613 
	`tx_by‹
(
p_u¬t
, 
p_cb
);

617 
	`Äf_u¬t_ev’t_ş—r
(
p_u¬t
, 
NRF_UART_EVENT_TXDRDY
);

618 ià(
p_cb
->
tx_bufãr_Ëngth
)

620 
	`tx_dÚe_ev’t
(
p_cb
,…_cb->
tx_bufãr_Ëngth
);

625 ià(
	`Äf_u¬t_ev’t_check
(
p_u¬t
, 
NRF_UART_EVENT_RXTO
))

627 
	`Äf_u¬t_ev’t_ş—r
(
p_u¬t
, 
NRF_UART_EVENT_RXTO
);

630 ià(
p_cb
->
rx_’abËd
)

632 
	`Äf_u¬t_sk_Œigg”
(
p_u¬t
, 
NRF_UART_TASK_STARTRX
);

634 ià(
p_cb
->
rx_bufãr_Ëngth
)

636 
p_cb
->
rx_bufãr_Ëngth
 = 0;

637 
	`rx_dÚe_ev’t
(
p_cb
,…_cb->
rx_couÁ”
,…_cb->
p_rx_bufãr
);

640 
	}
}

642 #ià
NRFX_CHECK
(
NRFX_UART0_ENABLED
)

643 
	$Äfx_u¬t_0_œq_hªdËr
()

645 
	`u¬t_œq_hªdËr
(
NRF_UART0
, &
m_cb
[
NRFX_UART0_INST_IDX
]);

646 
	}
}

	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\modules\nrfx\drivers\src\nrfx_uarte.c

41 
	~<Äfx.h
>

43 #ià
NRFX_CHECK
(
NRFX_UARTE_ENABLED
)

45 #ià!(
NRFX_CHECK
(
NRFX_UARTE0_ENABLED
è|| NRFX_CHECK(
NRFX_UARTE1_ENABLED
))

49 
	~<Äfx_u¬‹.h
>

50 
	~"´s/Äfx_´s.h
"

51 
	~<h®/Äf_gpio.h
>

53 
	#NRFX_LOG_MODULE
 
UARTE


	)

54 
	~<Äfx_log.h
>

56 
	#EVT_TO_STR
(
ev’t
) \

57 (
ev’t
 =ğ
NRF_UARTE_EVENT_ERROR
 ? "NRF_UARTE_EVENT_ERROR" : \

58 "UNKNOWN EVENT")

	)

60 
	#UARTEX_LENGTH_VALIDATE
(
³rh”®
, 
drv_š¡_idx
, 
Ën1
, 
Ën2
) \

61 (((
drv_š¡_idx
è=ğ
	`NRFX_CONCAT_3
(
NRFX_
, 
³rh”®
, 
_INST_IDX
)) && \

62 
	`NRFX_EASYDMA_LENGTH_VALIDATE
(
³rh”®
, 
Ën1
, 
Ën2
))

	)

64 #ià
NRFX_CHECK
(
NRFX_UARTE0_ENABLED
)

65 
	#UARTE0_LENGTH_VALIDATE
(...è
	`UARTEX_LENGTH_VALIDATE
(
UARTE0
, 
__VA_ARGS__
)

	)

67 
	#UARTE0_LENGTH_VALIDATE
(...è0

	)

70 #ià
NRFX_CHECK
(
NRFX_UARTE1_ENABLED
)

71 
	#UARTE1_LENGTH_VALIDATE
(...è
	`UARTEX_LENGTH_VALIDATE
(
UARTE1
, 
__VA_ARGS__
)

	)

73 
	#UARTE1_LENGTH_VALIDATE
(...è0

	)

76 
	#UARTE_LENGTH_VALIDATE
(
drv_š¡_idx
, 
Ëngth
) \

77 (
	`UARTE0_LENGTH_VALIDATE
(
drv_š¡_idx
, 
Ëngth
, 0) || \

78 
	`UARTE1_LENGTH_VALIDATE
(
drv_š¡_idx
, 
Ëngth
, 0))

	)

83 * 
	mp_cÚ‹xt
;

84 
Äfx_u¬‹_ev’t_hªdËr_t
 
	mhªdËr
;

85 
ušt8_t
 cÚ¡ * 
	mp_tx_bufãr
;

86 
ušt8_t
 * 
	mp_rx_bufãr
;

87 
ušt8_t
 * 
	mp_rx_£cÚd¬y_bufãr
;

88 
size_t
 
	mtx_bufãr_Ëngth
;

89 
size_t
 
	mrx_bufãr_Ëngth
;

90 
size_t
 
	mrx_£cÚd¬y_bufãr_Ëngth
;

91 
Äfx_drv_¡©e_t
 
	m¡©e
;

92 } 
	tu¬‹_cÚŒŞ_block_t
;

93 
u¬‹_cÚŒŞ_block_t
 
	gm_cb
[
NRFX_UARTE_ENABLED_COUNT
];

95 
	$­¶y_cÚfig
(
Äfx_u¬‹_t
 cÚ¡ * 
p_š¡ªû
,

96 
Äfx_u¬‹_cÚfig_t
 cÚ¡ * 
p_cÚfig
)

98 ià(
p_cÚfig
->
p£Éxd
 !ğ
NRF_UARTE_PSEL_DISCONNECTED
)

100 
	`Äf_gpio_pš_£t
(
p_cÚfig
->
p£Éxd
);

101 
	`Äf_gpio_cfg_ouut
(
p_cÚfig
->
p£Éxd
);

103 ià(
p_cÚfig
->
p£Ìxd
 !ğ
NRF_UARTE_PSEL_DISCONNECTED
)

105 
	`Äf_gpio_cfg_šput
(
p_cÚfig
->
p£Ìxd
, 
NRF_GPIO_PIN_NOPULL
);

108 
	`Äf_u¬‹_baud¿‹_£t
(
p_š¡ªû
->
p_»g
, 
p_cÚfig
->
baud¿‹
);

109 
	`Äf_u¬‹_cÚfigu»
(
p_š¡ªû
->
p_»g
, 
p_cÚfig
->
·r™y
,…_cÚfig->
hwfc
);

110 
	`Äf_u¬‹_txrx_pšs_£t
(
p_š¡ªû
->
p_»g
, 
p_cÚfig
->
p£Éxd
,…_cÚfig->
p£Ìxd
);

111 ià(
p_cÚfig
->
hwfc
 =ğ
NRF_UARTE_HWFC_ENABLED
)

113 ià(
p_cÚfig
->
p£lùs
 !ğ
NRF_UARTE_PSEL_DISCONNECTED
)

115 
	`Äf_gpio_cfg_šput
(
p_cÚfig
->
p£lùs
, 
NRF_GPIO_PIN_NOPULL
);

117 ià(
p_cÚfig
->
p£Ìts
 !ğ
NRF_UARTE_PSEL_DISCONNECTED
)

119 
	`Äf_gpio_pš_£t
(
p_cÚfig
->
p£Ìts
);

120 
	`Äf_gpio_cfg_ouut
(
p_cÚfig
->
p£Ìts
);

122 
	`Äf_u¬‹_hwfc_pšs_£t
(
p_š¡ªû
->
p_»g
, 
p_cÚfig
->
p£Ìts
,…_cÚfig->
p£lùs
);

124 
	}
}

126 
	$š‹¼u±s_’abË
(
Äfx_u¬‹_t
 cÚ¡ * 
p_š¡ªû
,

127 
ušt8_t
 
š‹¼u±_´iÜ™y
)

129 
	`Äf_u¬‹_ev’t_ş—r
(
p_š¡ªû
->
p_»g
, 
NRF_UARTE_EVENT_ENDRX
);

130 
	`Äf_u¬‹_ev’t_ş—r
(
p_š¡ªû
->
p_»g
, 
NRF_UARTE_EVENT_ENDTX
);

131 
	`Äf_u¬‹_ev’t_ş—r
(
p_š¡ªû
->
p_»g
, 
NRF_UARTE_EVENT_ERROR
);

132 
	`Äf_u¬‹_ev’t_ş—r
(
p_š¡ªû
->
p_»g
, 
NRF_UARTE_EVENT_RXTO
);

133 
	`Äf_u¬‹_št_’abË
(
p_š¡ªû
->
p_»g
, 
NRF_UARTE_INT_ENDRX_MASK
 |

134 
NRF_UARTE_INT_ENDTX_MASK
 |

135 
NRF_UARTE_INT_ERROR_MASK
 |

136 
NRF_UARTE_INT_RXTO_MASK
);

137 
	`NRFX_IRQ_PRIORITY_SET
(
	`Äfx_g‘_œq_numb”
((*)
p_š¡ªû
->
p_»g
),

138 
š‹¼u±_´iÜ™y
);

139 
	`NRFX_IRQ_ENABLE
(
	`Äfx_g‘_œq_numb”
((*)
p_š¡ªû
->
p_»g
));

140 
	}
}

142 
	$š‹¼u±s_di§bË
(
Äfx_u¬‹_t
 cÚ¡ * 
p_š¡ªû
)

144 
	`Äf_u¬‹_št_di§bË
(
p_š¡ªû
->
p_»g
, 
NRF_UARTE_INT_ENDRX_MASK
 |

145 
NRF_UARTE_INT_ENDTX_MASK
 |

146 
NRF_UARTE_INT_ERROR_MASK
 |

147 
NRF_UARTE_INT_RXTO_MASK
);

148 
	`NRFX_IRQ_DISABLE
(
	`Äfx_g‘_œq_numb”
((*)
p_š¡ªû
->
p_»g
));

149 
	}
}

151 
	$pšs_to_deçuÉ
(
Äfx_u¬‹_t
 cÚ¡ * 
p_š¡ªû
)

154 
ušt32_t
 
txd
;

155 
ušt32_t
 
rxd
;

156 
ušt32_t
 
¹s
;

157 
ušt32_t
 
ùs
;

159 
txd
 = 
	`Äf_u¬‹_tx_pš_g‘
(
p_š¡ªû
->
p_»g
);

160 
rxd
 = 
	`Äf_u¬‹_rx_pš_g‘
(
p_š¡ªû
->
p_»g
);

161 
¹s
 = 
	`Äf_u¬‹_¹s_pš_g‘
(
p_š¡ªû
->
p_»g
);

162 
ùs
 = 
	`Äf_u¬‹_ùs_pš_g‘
(
p_š¡ªû
->
p_»g
);

163 
	`Äf_u¬‹_txrx_pšs_discÚÃù
(
p_š¡ªû
->
p_»g
);

164 
	`Äf_u¬‹_hwfc_pšs_discÚÃù
(
p_š¡ªû
->
p_»g
);

166 ià(
txd
 !ğ
NRF_UARTE_PSEL_DISCONNECTED
)

168 
	`Äf_gpio_cfg_deçuÉ
(
txd
);

170 ià(
rxd
 !ğ
NRF_UARTE_PSEL_DISCONNECTED
)

172 
	`Äf_gpio_cfg_deçuÉ
(
rxd
);

174 ià(
ùs
 !ğ
NRF_UARTE_PSEL_DISCONNECTED
)

176 
	`Äf_gpio_cfg_deçuÉ
(
ùs
);

178 ià(
¹s
 !ğ
NRF_UARTE_PSEL_DISCONNECTED
)

180 
	`Äf_gpio_cfg_deçuÉ
(
¹s
);

182 
	}
}

184 
Äfx_”r_t
 
	$Äfx_u¬‹_š™
(
Äfx_u¬‹_t
 cÚ¡ * 
p_š¡ªû
,

185 
Äfx_u¬‹_cÚfig_t
 cÚ¡ * 
p_cÚfig
,

186 
Äfx_u¬‹_ev’t_hªdËr_t
 
ev’t_hªdËr
)

188 
	`NRFX_ASSERT
(
p_cÚfig
);

189 
u¬‹_cÚŒŞ_block_t
 * 
p_cb
 = &
m_cb
[
p_š¡ªû
->
drv_š¡_idx
];

190 
Äfx_”r_t
 
”r_code
 = 
NRFX_SUCCESS
;

192 ià(
p_cb
->
¡©e
 !ğ
NRFX_DRV_STATE_UNINITIALIZED
)

194 
”r_code
 = 
NRFX_ERROR_INVALID_STATE
;

195 
	`NRFX_LOG_WARNING
("Function: %s,ƒrror code: %s.",

196 
__func__
,

197 
	`NRFX_LOG_ERROR_STRING_GET
(
”r_code
));

198  
”r_code
;

201 #ià
	`NRFX_CHECK
(
NRFX_PRS_ENABLED
)

202 
Äfx_œq_hªdËr_t
 cÚ¡ 
œq_hªdËrs
[
NRFX_UARTE_ENABLED_COUNT
] = {

203 #ià
	`NRFX_CHECK
(
NRFX_UARTE0_ENABLED
)

204 
Äfx_u¬‹_0_œq_hªdËr
,

206 #ià
	`NRFX_CHECK
(
NRFX_UARTE1_ENABLED
)

207 
Äfx_u¬‹_1_œq_hªdËr
,

210 ià(
	`Äfx_´s_acquœe
(
p_š¡ªû
->
p_»g
,

211 
œq_hªdËrs
[
p_š¡ªû
->
drv_š¡_idx
]è!ğ
NRFX_SUCCESS
)

213 
”r_code
 = 
NRFX_ERROR_BUSY
;

214 
	`NRFX_LOG_WARNING
("Function: %s,ƒrror code: %s.",

215 
__func__
,

216 
	`NRFX_LOG_ERROR_STRING_GET
(
”r_code
));

217  
”r_code
;

221 
	`­¶y_cÚfig
(
p_š¡ªû
, 
p_cÚfig
);

223 
p_cb
->
hªdËr
 = 
ev’t_hªdËr
;

224 
p_cb
->
p_cÚ‹xt
 = 
p_cÚfig
->p_context;

226 ià(
p_cb
->
hªdËr
)

228 
	`š‹¼u±s_’abË
(
p_š¡ªû
, 
p_cÚfig
->
š‹¼u±_´iÜ™y
);

231 
	`Äf_u¬‹_’abË
(
p_š¡ªû
->
p_»g
);

232 
p_cb
->
rx_bufãr_Ëngth
 = 0;

233 
p_cb
->
rx_£cÚd¬y_bufãr_Ëngth
 = 0;

234 
p_cb
->
tx_bufãr_Ëngth
 = 0;

235 
p_cb
->
¡©e
 = 
NRFX_DRV_STATE_INITIALIZED
;

236 
	`NRFX_LOG_WARNING
("Function: %s,ƒrror code: %s.",

237 
__func__
,

238 
	`NRFX_LOG_ERROR_STRING_GET
(
”r_code
));

239  
”r_code
;

240 
	}
}

242 
	$Äfx_u¬‹_unš™
(
Äfx_u¬‹_t
 cÚ¡ * 
p_š¡ªû
)

244 
u¬‹_cÚŒŞ_block_t
 * 
p_cb
 = &
m_cb
[
p_š¡ªû
->
drv_š¡_idx
];

246 
	`Äf_u¬‹_di§bË
(
p_š¡ªû
->
p_»g
);

248 ià(
p_cb
->
hªdËr
)

250 
	`š‹¼u±s_di§bË
(
p_š¡ªû
);

253 
	`pšs_to_deçuÉ
(
p_š¡ªû
);

255 #ià
	`NRFX_CHECK
(
NRFX_PRS_ENABLED
)

256 
	`Äfx_´s_»Ëa£
(
p_š¡ªû
->
p_»g
);

259 
p_cb
->
¡©e
 = 
NRFX_DRV_STATE_UNINITIALIZED
;

260 
p_cb
->
hªdËr
 = 
NULL
;

261 
	`NRFX_LOG_INFO
("In¡ªû unš™Ÿlized: %d.", 
p_š¡ªû
->
drv_š¡_idx
);

262 
	}
}

264 
Äfx_”r_t
 
	$Äfx_u¬‹_tx
(
Äfx_u¬‹_t
 cÚ¡ * 
p_š¡ªû
,

265 
ušt8_t
 cÚ¡ * 
p_d©a
,

266 
size_t
 
Ëngth
)

268 
u¬‹_cÚŒŞ_block_t
 * 
p_cb
 = &
m_cb
[
p_š¡ªû
->
drv_š¡_idx
];

269 
	`NRFX_ASSERT
(
p_cb
->
¡©e
 =ğ
NRFX_DRV_STATE_INITIALIZED
);

270 
	`NRFX_ASSERT
(
p_d©a
);

271 
	`NRFX_ASSERT
(
Ëngth
 > 0);

272 
	`NRFX_ASSERT
(
	`UARTE_LENGTH_VALIDATE
(
p_š¡ªû
->
drv_š¡_idx
, 
Ëngth
));

274 
Äfx_”r_t
 
”r_code
;

278 ià(!
	`Äfx_is_š_¿m
(
p_d©a
))

280 
”r_code
 = 
NRFX_ERROR_INVALID_ADDR
;

281 
	`NRFX_LOG_WARNING
("Function: %s,ƒrror code: %s.",

282 
__func__
,

283 
	`NRFX_LOG_ERROR_STRING_GET
(
”r_code
));

284  
”r_code
;

287 ià(
	`Äfx_u¬‹_tx_š_´og»ss
(
p_š¡ªû
))

289 
”r_code
 = 
NRFX_ERROR_BUSY
;

290 
	`NRFX_LOG_WARNING
("Function: %s,ƒrror code: %s.",

291 
__func__
,

292 
	`NRFX_LOG_ERROR_STRING_GET
(
”r_code
));

293  
”r_code
;

295 
p_cb
->
tx_bufãr_Ëngth
 = 
Ëngth
;

296 
p_cb
->
p_tx_bufãr
 = 
p_d©a
;

298 
	`NRFX_LOG_INFO
("T¿nsã¸tx_Ën: %d.", 
p_cb
->
tx_bufãr_Ëngth
);

299 
	`NRFX_LOG_DEBUG
("Tx data:");

300 
	`NRFX_LOG_HEXDUMP_DEBUG
(
p_cb
->
p_tx_bufãr
,

301 
p_cb
->
tx_bufãr_Ëngth
 * Õ_cb->
p_tx_bufãr
[0]));

303 
”r_code
 = 
NRFX_SUCCESS
;

305 
	`Äf_u¬‹_ev’t_ş—r
(
p_š¡ªû
->
p_»g
, 
NRF_UARTE_EVENT_ENDTX
);

306 
	`Äf_u¬‹_ev’t_ş—r
(
p_š¡ªû
->
p_»g
, 
NRF_UARTE_EVENT_TXSTOPPED
);

307 
	`Äf_u¬‹_tx_bufãr_£t
(
p_š¡ªû
->
p_»g
, 
p_cb
->
p_tx_bufãr
,…_cb->
tx_bufãr_Ëngth
);

308 
	`Äf_u¬‹_sk_Œigg”
(
p_š¡ªû
->
p_»g
, 
NRF_UARTE_TASK_STARTTX
);

310 ià(
p_cb
->
hªdËr
 =ğ
NULL
)

312 
boŞ
 
’dtx
;

313 
boŞ
 
tx¡İ³d
;

316 
’dtx
 = 
	`Äf_u¬‹_ev’t_check
(
p_š¡ªû
->
p_»g
, 
NRF_UARTE_EVENT_ENDTX
);

317 
tx¡İ³d
 = 
	`Äf_u¬‹_ev’t_check
(
p_š¡ªû
->
p_»g
, 
NRF_UARTE_EVENT_TXSTOPPED
);

319 (!
’dtx
è&& (!
tx¡İ³d
));

321 ià(
tx¡İ³d
)

323 
”r_code
 = 
NRFX_ERROR_FORBIDDEN
;

325 
p_cb
->
tx_bufãr_Ëngth
 = 0;

328 
	`NRFX_LOG_INFO
("FunùiÚ: %s,ƒ¼Ü code: %s.", 
__func__
, 
	`NRFX_LOG_ERROR_STRING_GET
(
”r_code
));

329  
”r_code
;

330 
	}
}

332 
boŞ
 
	$Äfx_u¬‹_tx_š_´og»ss
(
Äfx_u¬‹_t
 cÚ¡ * 
p_š¡ªû
)

334  (
m_cb
[
p_š¡ªû
->
drv_š¡_idx
].
tx_bufãr_Ëngth
 != 0);

335 
	}
}

337 
Äfx_”r_t
 
	$Äfx_u¬‹_rx
(
Äfx_u¬‹_t
 cÚ¡ * 
p_š¡ªû
,

338 
ušt8_t
 * 
p_d©a
,

339 
size_t
 
Ëngth
)

341 
u¬‹_cÚŒŞ_block_t
 * 
p_cb
 = &
m_cb
[
p_š¡ªû
->
drv_š¡_idx
];

343 
	`NRFX_ASSERT
(
m_cb
[
p_š¡ªû
->
drv_š¡_idx
].
¡©e
 =ğ
NRFX_DRV_STATE_INITIALIZED
);

344 
	`NRFX_ASSERT
(
p_d©a
);

345 
	`NRFX_ASSERT
(
Ëngth
 > 0);

346 
	`NRFX_ASSERT
(
	`UARTE_LENGTH_VALIDATE
(
p_š¡ªû
->
drv_š¡_idx
, 
Ëngth
));

348 
Äfx_”r_t
 
”r_code
;

352 ià(!
	`Äfx_is_š_¿m
(
p_d©a
))

354 
”r_code
 = 
NRFX_ERROR_INVALID_ADDR
;

355 
	`NRFX_LOG_WARNING
("Function: %s,ƒrror code: %s.",

356 
__func__
,

357 
	`NRFX_LOG_ERROR_STRING_GET
(
”r_code
));

358  
”r_code
;

361 
boŞ
 
£cÚd_bufãr
 = 
çl£
;

363 ià(
p_cb
->
hªdËr
)

365 
	`Äf_u¬‹_št_di§bË
(
p_š¡ªû
->
p_»g
, 
NRF_UARTE_INT_ERROR_MASK
 |

366 
NRF_UARTE_INT_ENDRX_MASK
);

368 ià(
p_cb
->
rx_bufãr_Ëngth
 != 0)

370 ià(
p_cb
->
rx_£cÚd¬y_bufãr_Ëngth
 != 0)

372 ià(
p_cb
->
hªdËr
)

374 
	`Äf_u¬‹_št_’abË
(
p_š¡ªû
->
p_»g
, 
NRF_UARTE_INT_ERROR_MASK
 |

375 
NRF_UARTE_INT_ENDRX_MASK
);

377 
”r_code
 = 
NRFX_ERROR_BUSY
;

378 
	`NRFX_LOG_WARNING
("Function: %s,ƒrror code: %s.",

379 
__func__
,

380 
	`NRFX_LOG_ERROR_STRING_GET
(
”r_code
));

381  
”r_code
;

383 
£cÚd_bufãr
 = 
Œue
;

386 ià(!
£cÚd_bufãr
)

388 
p_cb
->
rx_bufãr_Ëngth
 = 
Ëngth
;

389 
p_cb
->
p_rx_bufãr
 = 
p_d©a
;

390 
p_cb
->
rx_£cÚd¬y_bufãr_Ëngth
 = 0;

394 
p_cb
->
p_rx_£cÚd¬y_bufãr
 = 
p_d©a
;

395 
p_cb
->
rx_£cÚd¬y_bufãr_Ëngth
 = 
Ëngth
;

398 
	`NRFX_LOG_INFO
("T¿nsã¸rx_Ën: %d.", 
Ëngth
);

400 
”r_code
 = 
NRFX_SUCCESS
;

402 
	`Äf_u¬‹_ev’t_ş—r
(
p_š¡ªû
->
p_»g
, 
NRF_UARTE_EVENT_ENDRX
);

403 
	`Äf_u¬‹_ev’t_ş—r
(
p_š¡ªû
->
p_»g
, 
NRF_UARTE_EVENT_RXTO
);

404 
	`Äf_u¬‹_rx_bufãr_£t
(
p_š¡ªû
->
p_»g
, 
p_d©a
, 
Ëngth
);

405 ià(!
£cÚd_bufãr
)

407 
	`Äf_u¬‹_sk_Œigg”
(
p_š¡ªû
->
p_»g
, 
NRF_UARTE_TASK_STARTRX
);

411 
	`Äf_u¬‹_shÜts_’abË
(
p_š¡ªû
->
p_»g
, 
NRF_UARTE_SHORT_ENDRX_STARTRX
);

414 ià(
m_cb
[
p_š¡ªû
->
drv_š¡_idx
].
hªdËr
 =ğ
NULL
)

416 
boŞ
 
’drx
;

417 
boŞ
 
rxto
;

418 
boŞ
 
”rÜ
;

420 
’drx
 = 
	`Äf_u¬‹_ev’t_check
(
p_š¡ªû
->
p_»g
, 
NRF_UARTE_EVENT_ENDRX
);

421 
rxto
 = 
	`Äf_u¬‹_ev’t_check
(
p_š¡ªû
->
p_»g
, 
NRF_UARTE_EVENT_RXTO
);

422 
”rÜ
 = 
	`Äf_u¬‹_ev’t_check
(
p_š¡ªû
->
p_»g
, 
NRF_UARTE_EVENT_ERROR
);

423 } (!
’drx
è&& (!
rxto
è&& (!
”rÜ
));

425 
m_cb
[
p_š¡ªû
->
drv_š¡_idx
].
rx_bufãr_Ëngth
 = 0;

427 ià(
”rÜ
)

429 
”r_code
 = 
NRFX_ERROR_INTERNAL
;

432 ià(
rxto
)

434 
”r_code
 = 
NRFX_ERROR_FORBIDDEN
;

439 
	`Äf_u¬‹_št_’abË
(
p_š¡ªû
->
p_»g
, 
NRF_UARTE_INT_ERROR_MASK
 |

440 
NRF_UARTE_INT_ENDRX_MASK
);

442 
	`NRFX_LOG_INFO
("FunùiÚ: %s,ƒ¼Ü code: %s.", 
__func__
, 
	`NRFX_LOG_ERROR_STRING_GET
(
”r_code
));

443  
”r_code
;

444 
	}
}

446 
boŞ
 
	$Äfx_u¬‹_rx_»ady
(
Äfx_u¬‹_t
 cÚ¡ * 
p_š¡ªû
)

448  
	`Äf_u¬‹_ev’t_check
(
p_š¡ªû
->
p_»g
, 
NRF_UARTE_EVENT_ENDRX
);

449 
	}
}

451 
ušt32_t
 
	$Äfx_u¬‹_”rÜ¤c_g‘
(
Äfx_u¬‹_t
 cÚ¡ * 
p_š¡ªû
)

453 
	`Äf_u¬‹_ev’t_ş—r
(
p_š¡ªû
->
p_»g
, 
NRF_UARTE_EVENT_ERROR
);

454  
	`Äf_u¬‹_”rÜ¤c_g‘_ªd_ş—r
(
p_š¡ªû
->
p_»g
);

455 
	}
}

457 
	$rx_dÚe_ev’t
(
u¬‹_cÚŒŞ_block_t
 * 
p_cb
,

458 
size_t
 
by‹s
,

459 
ušt8_t
 * 
p_d©a
)

461 
Äfx_u¬‹_ev’t_t
 
ev’t
;

463 
ev’t
.
ty³
 = 
NRFX_UARTE_EVT_RX_DONE
;

464 
ev’t
.
d©a
.
rxtx
.
by‹s
 = bytes;

465 
ev’t
.
d©a
.
rxtx
.
p_d©a
 =…_data;

467 
p_cb
->
	`hªdËr
(&
ev’t
,…_cb->
p_cÚ‹xt
);

468 
	}
}

470 
	$tx_dÚe_ev’t
(
u¬‹_cÚŒŞ_block_t
 * 
p_cb
,

471 
size_t
 
by‹s
)

473 
Äfx_u¬‹_ev’t_t
 
ev’t
;

475 
ev’t
.
ty³
 = 
NRFX_UARTE_EVT_TX_DONE
;

476 
ev’t
.
d©a
.
rxtx
.
by‹s
 = bytes;

477 
ev’t
.
d©a
.
rxtx
.
p_d©a
 = (
ušt8_t
 *)
p_cb
->
p_tx_bufãr
;

479 
p_cb
->
tx_bufãr_Ëngth
 = 0;

481 
p_cb
->
	`hªdËr
(&
ev’t
,…_cb->
p_cÚ‹xt
);

482 
	}
}

484 
	$Äfx_u¬‹_tx_abÜt
(
Äfx_u¬‹_t
 cÚ¡ * 
p_š¡ªû
)

486 
u¬‹_cÚŒŞ_block_t
 * 
p_cb
 = &
m_cb
[
p_š¡ªû
->
drv_š¡_idx
];

488 
	`Äf_u¬‹_ev’t_ş—r
(
p_š¡ªû
->
p_»g
, 
NRF_UARTE_EVENT_TXSTOPPED
);

489 
	`Äf_u¬‹_sk_Œigg”
(
p_š¡ªû
->
p_»g
, 
NRF_UARTE_TASK_STOPTX
);

490 ià(
p_cb
->
hªdËr
 =ğ
NULL
)

492 !
	`Äf_u¬‹_ev’t_check
(
p_š¡ªû
->
p_»g
, 
NRF_UARTE_EVENT_TXSTOPPED
))

495 
	`NRFX_LOG_INFO
("TXransaction‡borted.");

496 
	}
}

498 
	$Äfx_u¬‹_rx_abÜt
(
Äfx_u¬‹_t
 cÚ¡ * 
p_š¡ªû
)

500 
	`Äf_u¬‹_sk_Œigg”
(
p_š¡ªû
->
p_»g
, 
NRF_UARTE_TASK_STOPRX
);

501 
	`NRFX_LOG_INFO
("RXransaction‡borted.");

502 
	}
}

504 
	$u¬‹_œq_hªdËr
(
NRF_UARTE_Ty³
 * 
p_u¬‹
,

505 
u¬‹_cÚŒŞ_block_t
 * 
p_cb
)

507 ià(
	`Äf_u¬‹_ev’t_check
(
p_u¬‹
, 
NRF_UARTE_EVENT_ERROR
))

509 
Äfx_u¬‹_ev’t_t
 
ev’t
;

511 
	`Äf_u¬‹_ev’t_ş—r
(
p_u¬‹
, 
NRF_UARTE_EVENT_ERROR
);

513 
ev’t
.
ty³
 = 
NRFX_UARTE_EVT_ERROR
;

514 
ev’t
.
d©a
.
”rÜ
.
”rÜ_mask
 = 
	`Äf_u¬‹_”rÜ¤c_g‘_ªd_ş—r
(
p_u¬‹
);

515 
ev’t
.
d©a
.
”rÜ
.
rxtx
.
by‹s
 = 
	`Äf_u¬‹_rx_amouÁ_g‘
(
p_u¬‹
);

516 
ev’t
.
d©a
.
”rÜ
.
rxtx
.
p_d©a
 = 
p_cb
->
p_rx_bufãr
;

519 
p_cb
->
rx_bufãr_Ëngth
 = 0;

520 
p_cb
->
rx_£cÚd¬y_bufãr_Ëngth
 = 0;

522 
p_cb
->
	`hªdËr
(&
ev’t
,…_cb->
p_cÚ‹xt
);

524 ià(
	`Äf_u¬‹_ev’t_check
(
p_u¬‹
, 
NRF_UARTE_EVENT_ENDRX
))

526 
	`Äf_u¬‹_ev’t_ş—r
(
p_u¬‹
, 
NRF_UARTE_EVENT_ENDRX
);

527 
size_t
 
amouÁ
 = 
	`Äf_u¬‹_rx_amouÁ_g‘
(
p_u¬‹
);

530 ià(
amouÁ
 =ğ
p_cb
->
rx_bufãr_Ëngth
)

532 ià(
p_cb
->
rx_£cÚd¬y_bufãr_Ëngth
)

534 
ušt8_t
 * 
p_d©a
 = 
p_cb
->
p_rx_bufãr
;

535 
	`Äf_u¬‹_shÜts_di§bË
(
p_u¬‹
, 
NRF_UARTE_SHORT_ENDRX_STARTRX
);

536 
p_cb
->
rx_bufãr_Ëngth
 =…_cb->
rx_£cÚd¬y_bufãr_Ëngth
;

537 
p_cb
->
p_rx_bufãr
 =…_cb->
p_rx_£cÚd¬y_bufãr
;

538 
p_cb
->
rx_£cÚd¬y_bufãr_Ëngth
 = 0;

539 
	`rx_dÚe_ev’t
(
p_cb
, 
amouÁ
, 
p_d©a
);

543 
p_cb
->
rx_bufãr_Ëngth
 = 0;

544 
	`rx_dÚe_ev’t
(
p_cb
, 
amouÁ
,…_cb->
p_rx_bufãr
);

549 ià(
	`Äf_u¬‹_ev’t_check
(
p_u¬‹
, 
NRF_UARTE_EVENT_RXTO
))

551 
	`Äf_u¬‹_ev’t_ş—r
(
p_u¬‹
, 
NRF_UARTE_EVENT_RXTO
);

552 ià(
p_cb
->
rx_bufãr_Ëngth
)

554 
p_cb
->
rx_bufãr_Ëngth
 = 0;

555 
	`rx_dÚe_ev’t
(
p_cb
, 
	`Äf_u¬‹_rx_amouÁ_g‘
(
p_u¬‹
),…_cb->
p_rx_bufãr
);

559 ià(
	`Äf_u¬‹_ev’t_check
(
p_u¬‹
, 
NRF_UARTE_EVENT_ENDTX
))

561 
	`Äf_u¬‹_ev’t_ş—r
(
p_u¬‹
, 
NRF_UARTE_EVENT_ENDTX
);

562 ià(
p_cb
->
tx_bufãr_Ëngth
)

564 
	`tx_dÚe_ev’t
(
p_cb
, 
	`Äf_u¬‹_tx_amouÁ_g‘
(
p_u¬‹
));

567 
	}
}

569 #ià
NRFX_CHECK
(
NRFX_UARTE0_ENABLED
)

570 
	$Äfx_u¬‹_0_œq_hªdËr
()

572 
	`u¬‹_œq_hªdËr
(
NRF_UARTE0
, &
m_cb
[
NRFX_UARTE0_INST_IDX
]);

573 
	}
}

576 #ià
NRFX_CHECK
(
NRFX_UARTE1_ENABLED
)

577 
	$Äfx_u¬‹_1_œq_hªdËr
()

579 
	`u¬‹_œq_hªdËr
(
NRF_UARTE1
, &
m_cb
[
NRFX_UARTE1_INST_IDX
]);

580 
	}
}

	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\modules\nrfx\drivers\src\prs\nrfx_prs.c

41 
	~<Äfx.h
>

43 #ià
NRFX_CHECK
(
NRFX_PRS_ENABLED
)

44 
	~"Äfx_´s.h
"

46 
	#NRFX_LOG_MODULE
 
PRS


	)

47 
	~<Äfx_log.h
>

49 
	#LOG_FUNCTION_EXIT
(
Ëv–
, 
»t_code
) \

50 
NRFX_LOG_
##
	`Ëv–
("Function: %s,ƒrror code: %s.", \

51 
__func__
, \

52 
	`NRFX_LOG_ERROR_STRING_GET
(
»t_code
))

	)

56 
Äfx_œq_hªdËr_t
 
	mhªdËr
;

57 
boŞ
 
	macquœed
;

58 } 
	t´s_box_t
;

60 
	#PRS_BOX_DEFINE
(
n
) \

61 
´s_box_t
 
m_´s_box_
##
n
 = { .
hªdËr
 = 
NULL
, .
acquœed
 = 
çl£
 }; \

62 
Äfx_´s_box_
##
n
##
	`_œq_hªdËr
() \

64 
	`NRFX_ASSERT
(
m_´s_box_
##
n
.
hªdËr
); \

65 
m_´s_box_
##
n
.
	`hªdËr
(); \

66 }

	)

68 #ià
defšed
(
NRFX_PRS_BOX_0_ADDR
è&& 
NRFX_CHECK
(
NRFX_PRS_BOX_0_ENABLED
)

69 
	$PRS_BOX_DEFINE
(0)

71 #ià
	`defšed
(
NRFX_PRS_BOX_1_ADDR
è&& 
	`NRFX_CHECK
(
NRFX_PRS_BOX_1_ENABLED
)

72 
	$PRS_BOX_DEFINE
(1)

74 #ià
	`defšed
(
NRFX_PRS_BOX_2_ADDR
è&& 
	`NRFX_CHECK
(
NRFX_PRS_BOX_2_ENABLED
)

75 
	$PRS_BOX_DEFINE
(2)

77 #ià
	`defšed
(
NRFX_PRS_BOX_3_ADDR
è&& 
	`NRFX_CHECK
(
NRFX_PRS_BOX_3_ENABLED
)

78 
	$PRS_BOX_DEFINE
(3)

80 #ià
	`defšed
(
NRFX_PRS_BOX_4_ADDR
è&& 
	`NRFX_CHECK
(
NRFX_PRS_BOX_4_ENABLED
)

81 
	$PRS_BOX_DEFINE
(4)

85 
´s_box_t
 * 
	$´s_box_g‘
(cÚ¡ * 
p_ba£_addr
)

87 #ià!
	`defšed
(
IS_PRS_BOX
)

88 
	#IS_PRS_BOX
(
n
, 
p_ba£_addr
è(Õ_ba£_addrè=ğ
NRFX_PRS_BOX_
##n##
_ADDR
)

	)

91 #ià
	`defšed
(
NRFX_PRS_BOX_0_ADDR
è&& 
	`NRFX_CHECK
(
NRFX_PRS_BOX_0_ENABLED
)

92 ià(
	`IS_PRS_BOX
(0, 
p_ba£_addr
)è{  &
m_´s_box_0
; }

95 #ià
	`defšed
(
NRFX_PRS_BOX_1_ADDR
è&& 
	`NRFX_CHECK
(
NRFX_PRS_BOX_1_ENABLED
)

96 ià(
	`IS_PRS_BOX
(1, 
p_ba£_addr
)è{  &
m_´s_box_1
; }

99 #ià
	`defšed
(
NRFX_PRS_BOX_2_ADDR
è&& 
	`NRFX_CHECK
(
NRFX_PRS_BOX_2_ENABLED
)

100 ià(
	`IS_PRS_BOX
(2, 
p_ba£_addr
)è{  &
m_´s_box_2
; }

103 #ià
	`defšed
(
NRFX_PRS_BOX_3_ADDR
è&& 
	`NRFX_CHECK
(
NRFX_PRS_BOX_3_ENABLED
)

104 ià(
	`IS_PRS_BOX
(3, 
p_ba£_addr
)è{  &
m_´s_box_3
; }

107 #ià
	`defšed
(
NRFX_PRS_BOX_4_ADDR
è&& 
	`NRFX_CHECK
(
NRFX_PRS_BOX_4_ENABLED
)

108 ià(
	`IS_PRS_BOX
(4, 
p_ba£_addr
)è{  &
m_´s_box_4
; }

112  
NULL
;

114 
	}
}

116 
Äfx_”r_t
 
	$Äfx_´s_acquœe
(cÚ¡ * 
p_ba£_addr
,

117 
Äfx_œq_hªdËr_t
 
œq_hªdËr
)

119 
	`NRFX_ASSERT
(
p_ba£_addr
);

121 
Äfx_”r_t
 
»t_code
;

123 
´s_box_t
 * 
p_box
 = 
	`´s_box_g‘
(
p_ba£_addr
);

124 ià(
p_box
 !ğ
NULL
)

126 
boŞ
 
busy
 = 
çl£
;

128 
	`NRFX_CRITICAL_SECTION_ENTER
();

129 ià(
p_box
->
acquœed
)

131 
busy
 = 
Œue
;

135 
p_box
->
hªdËr
 = 
œq_hªdËr
;

136 
p_box
->
acquœed
 = 
Œue
;

138 
	`NRFX_CRITICAL_SECTION_EXIT
();

140 ià(
busy
)

142 
»t_code
 = 
NRFX_ERROR_BUSY
;

143 
	`LOG_FUNCTION_EXIT
(
WARNING
, 
»t_code
);

144  
»t_code
;

148 
»t_code
 = 
NRFX_SUCCESS
;

149 
	`LOG_FUNCTION_EXIT
(
INFO
, 
»t_code
);

150  
»t_code
;

151 
	}
}

153 
	$Äfx_´s_»Ëa£
(cÚ¡ * 
p_ba£_addr
)

155 
	`NRFX_ASSERT
(
p_ba£_addr
);

157 
´s_box_t
 * 
p_box
 = 
	`´s_box_g‘
(
p_ba£_addr
);

158 ià(
p_box
 !ğ
NULL
)

160 
p_box
->
hªdËr
 = 
NULL
;

161 
p_box
->
acquœed
 = 
çl£
;

163 
	}
}

	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\modules\nrfx\mdk\gcc_startup_nrf52840.S

23 .
syÁax
 
	gunif›d


24 .
¬ch
 
	g¬mv7e
-
	gm


26 #ifdeà
__STARTUP_CONFIG


27 
	~"¡¬tup_cÚfig.h
"

28 #iâdeà
__STARTUP_CONFIG_STACK_ALIGNEMENT


29 
	#__STARTUP_CONFIG_STACK_ALIGNEMENT
 3

	)

33 .
	g£ùiÚ
 .
	g¡ack


34 #ià
defšed
(
__STARTUP_CONFIG
)

35 .
®ign
 
	g__STARTUP_CONFIG_STACK_ALIGNEMENT


36 .
equ
 
	gSck_Size
, 
	g__STARTUP_CONFIG_STACK_SIZE


37 #–ià
defšed
(
__STACK_SIZE
)

38 .
	g®ign
 3

39 .
equ
 
	gSck_Size
, 
	g__STACK_SIZE


41 .
	g®ign
 3

42 .
equ
 
	gSck_Size
, 8192

44 .
globl
 
	g__SckTİ


45 .
globl
 
__SckLim™


46 
	g__SckLim™
:

47 .
¥aû
 
Sck_Size


48 .
size
 
__SckLim™
, . - __StackLimit

49 
	g__SckTİ
:

50 .
size
 
__SckTİ
, . - 
	g__SckTİ


52 .
	g£ùiÚ
 .
	gh—p


53 .
	g®ign
 3

54 #ià
defšed
(
__STARTUP_CONFIG
)

55 .
equ
 
	gH—p_Size
, 
	g__STARTUP_CONFIG_HEAP_SIZE


56 #–ià
defšed
(
__HEAP_SIZE
)

57 .
equ
 
	gH—p_Size
, 
	g__HEAP_SIZE


59 .
equ
 
	gH—p_Size
, 8192

61 .
globl
 
	g__H—pBa£


62 .
globl
 
__H—pLim™


63 
	g__H—pBa£
:

64 .
H—p_Size


65 .
¥aû
 
H—p_Size


66 .
’dif


67 .
size
 
__H—pBa£
, . - __HeapBase

68 
	g__H—pLim™
:

69 .
size
 
__H—pLim™
, . - 
	g__H—pLim™


71 .
	g£ùiÚ
 .
	gi¤_veùÜ


72 .
	g®ign
 2

73 .
globl
 
__i¤_veùÜ


74 
	g__i¤_veùÜ
:

75 .
__SckTİ


76 .
Re£t_HªdËr


77 .
NMI_HªdËr


78 .
H¬dFauÉ_HªdËr


79 .
MemÜyMªagem’t_HªdËr


80 .
BusFauÉ_HªdËr


81 .
U§geFauÉ_HªdËr


86 .
SVC_HªdËr


87 .
DebugMÚ_HªdËr


89 .
P’dSV_HªdËr


90 .
SysTick_HªdËr


93 .
POWER_CLOCK_IRQHªdËr


94 .
RADIO_IRQHªdËr


95 .
UARTE0_UART0_IRQHªdËr


96 .
SPIM0_SPIS0_TWIM0_TWIS0_SPI0_TWI0_IRQHªdËr


97 .
SPIM1_SPIS1_TWIM1_TWIS1_SPI1_TWI1_IRQHªdËr


98 .
NFCT_IRQHªdËr


99 .
GPIOTE_IRQHªdËr


100 .
SAADC_IRQHªdËr


101 .
TIMER0_IRQHªdËr


102 .
TIMER1_IRQHªdËr


103 .
TIMER2_IRQHªdËr


104 .
RTC0_IRQHªdËr


105 .
TEMP_IRQHªdËr


106 .
RNG_IRQHªdËr


107 .
ECB_IRQHªdËr


108 .
CCM_AAR_IRQHªdËr


109 .
WDT_IRQHªdËr


110 .
RTC1_IRQHªdËr


111 .
QDEC_IRQHªdËr


112 .
COMP_LPCOMP_IRQHªdËr


113 .
SWI0_EGU0_IRQHªdËr


114 .
SWI1_EGU1_IRQHªdËr


115 .
SWI2_EGU2_IRQHªdËr


116 .
SWI3_EGU3_IRQHªdËr


117 .
SWI4_EGU4_IRQHªdËr


118 .
SWI5_EGU5_IRQHªdËr


119 .
TIMER3_IRQHªdËr


120 .
TIMER4_IRQHªdËr


121 .
PWM0_IRQHªdËr


122 .
PDM_IRQHªdËr


125 .
MWU_IRQHªdËr


126 .
PWM1_IRQHªdËr


127 .
PWM2_IRQHªdËr


128 .
SPIM2_SPIS2_SPI2_IRQHªdËr


129 .
RTC2_IRQHªdËr


130 .
I2S_IRQHªdËr


131 .
FPU_IRQHªdËr


132 .
USBD_IRQHªdËr


133 .
UARTE1_IRQHªdËr


134 .
QSPI_IRQHªdËr


135 .
CRYPTOCELL_IRQHªdËr


138 .
PWM3_IRQHªdËr


140 .
SPIM3_IRQHªdËr


206 .
size
 
__i¤_veùÜ
, . - 
	g__i¤_veùÜ


211 .
	g‹xt


212 .
	gthumb


213 .
	gthumb_func


214 .
	g®ign
 1

215 .
globl
 
	gRe£t_HªdËr


216 .
ty³
 
	gRe£t_HªdËr
, %
funùiÚ


217 
	gRe£t_HªdËr
:

229 
ldr
 
r1
, =
__‘ext


230 
ldr
 
r2
, =
__d©a_¡¬t__


231 
ldr
 
r3
, =
__bss_¡¬t__


233 
subs
 
r3
, 
r2


234 
	gbË
 .
	gL_loİ1_dÚe


236 .
	gL_loİ1
:

237 
subs
 
r3
, #4

238 
ldr
 
	gr0
, [
r1
,
r3
]

239 
¡r
 
	gr0
, [
r2
,
r3
]

240 
	gbgt
 .
	gL_loİ1


242 .
	gL_loİ1_dÚe
:

254 #ifdeà
__STARTUP_CLEAR_BSS


255 
ldr
 
r1
, =
__bss_¡¬t__


256 
ldr
 
r2
, =
__bss_’d__


258 
movs
 
r0
, 0

260 
subs
 
	gr2
, 
r1


261 
	gbË
 .
	gL_loİ3_dÚe


263 .
	gL_loİ3
:

264 
subs
 
r2
, #4

265 
¡r
 
	gr0
, [
r1
, 
r2
]

266 
	gbgt
 .
	gL_loİ3


268 .
	gL_loİ3_dÚe
:

272 
bl
 
Sy¡emIn™


277 #iâdeà
__START


278 
	#__START
 
_¡¬t


	)

280 
bl
 
__START


282 .
poŞ


283 .
size
 
Re£t_HªdËr
,.-
	gRe£t_HªdËr


285 .
	g£ùiÚ
 ".text"

290 .
w—k
 
	gNMI_HªdËr


291 .
ty³
 
	gNMI_HªdËr
, %
funùiÚ


292 
	gNMI_HªdËr
:

293 
b
 .

294 .
size
 
NMI_HªdËr
, . - 
	gNMI_HªdËr


297 .
w—k
 
	gH¬dFauÉ_HªdËr


298 .
ty³
 
	gH¬dFauÉ_HªdËr
, %
funùiÚ


299 
	gH¬dFauÉ_HªdËr
:

300 
b
 .

301 .
size
 
H¬dFauÉ_HªdËr
, . - 
	gH¬dFauÉ_HªdËr


304 .
w—k
 
	gMemÜyMªagem’t_HªdËr


305 .
ty³
 
	gMemÜyMªagem’t_HªdËr
, %
funùiÚ


306 
	gMemÜyMªagem’t_HªdËr
:

307 
b
 .

308 .
size
 
MemÜyMªagem’t_HªdËr
, . - 
	gMemÜyMªagem’t_HªdËr


311 .
w—k
 
	gBusFauÉ_HªdËr


312 .
ty³
 
	gBusFauÉ_HªdËr
, %
funùiÚ


313 
	gBusFauÉ_HªdËr
:

314 
b
 .

315 .
size
 
BusFauÉ_HªdËr
, . - 
	gBusFauÉ_HªdËr


318 .
w—k
 
	gU§geFauÉ_HªdËr


319 .
ty³
 
	gU§geFauÉ_HªdËr
, %
funùiÚ


320 
	gU§geFauÉ_HªdËr
:

321 
b
 .

322 .
size
 
U§geFauÉ_HªdËr
, . - 
	gU§geFauÉ_HªdËr


325 .
w—k
 
	gSVC_HªdËr


326 .
ty³
 
	gSVC_HªdËr
, %
funùiÚ


327 
	gSVC_HªdËr
:

328 
b
 .

329 .
size
 
SVC_HªdËr
, . - 
	gSVC_HªdËr


332 .
w—k
 
	gDebugMÚ_HªdËr


333 .
ty³
 
	gDebugMÚ_HªdËr
, %
funùiÚ


334 
	gDebugMÚ_HªdËr
:

335 
b
 .

336 .
size
 
DebugMÚ_HªdËr
, . - 
	gDebugMÚ_HªdËr


339 .
w—k
 
	gP’dSV_HªdËr


340 .
ty³
 
	gP’dSV_HªdËr
, %
funùiÚ


341 
	gP’dSV_HªdËr
:

342 
b
 .

343 .
size
 
P’dSV_HªdËr
, . - 
	gP’dSV_HªdËr


346 .
w—k
 
	gSysTick_HªdËr


347 .
ty³
 
	gSysTick_HªdËr
, %
funùiÚ


348 
	gSysTick_HªdËr
:

349 
b
 .

350 .
size
 
SysTick_HªdËr
, . - 
	gSysTick_HªdËr


355 .
globl
 
	gDeçuÉ_HªdËr


356 .
ty³
 
	gDeçuÉ_HªdËr
, %
funùiÚ


357 
	gDeçuÉ_HªdËr
:

358 
b
 .

359 .
size
 
DeçuÉ_HªdËr
, . - 
	gDeçuÉ_HªdËr


361 .
maüo
 
IRQ
 
	ghªdËr


362 .
	gw—k
 \
	ghªdËr


363 .
	g£t
 \
	ghªdËr
, 
	gDeçuÉ_HªdËr


364 .
’dm


366 
IRQ
 
POWER_CLOCK_IRQHªdËr


367 
IRQ
 
RADIO_IRQHªdËr


368 
IRQ
 
UARTE0_UART0_IRQHªdËr


369 
IRQ
 
SPIM0_SPIS0_TWIM0_TWIS0_SPI0_TWI0_IRQHªdËr


370 
IRQ
 
SPIM1_SPIS1_TWIM1_TWIS1_SPI1_TWI1_IRQHªdËr


371 
IRQ
 
NFCT_IRQHªdËr


372 
IRQ
 
GPIOTE_IRQHªdËr


373 
IRQ
 
SAADC_IRQHªdËr


374 
IRQ
 
TIMER0_IRQHªdËr


375 
IRQ
 
TIMER1_IRQHªdËr


376 
IRQ
 
TIMER2_IRQHªdËr


377 
IRQ
 
RTC0_IRQHªdËr


378 
IRQ
 
TEMP_IRQHªdËr


379 
IRQ
 
RNG_IRQHªdËr


380 
IRQ
 
ECB_IRQHªdËr


381 
IRQ
 
CCM_AAR_IRQHªdËr


382 
IRQ
 
WDT_IRQHªdËr


383 
IRQ
 
RTC1_IRQHªdËr


384 
IRQ
 
QDEC_IRQHªdËr


385 
IRQ
 
COMP_LPCOMP_IRQHªdËr


386 
IRQ
 
SWI0_EGU0_IRQHªdËr


387 
IRQ
 
SWI1_EGU1_IRQHªdËr


388 
IRQ
 
SWI2_EGU2_IRQHªdËr


389 
IRQ
 
SWI3_EGU3_IRQHªdËr


390 
IRQ
 
SWI4_EGU4_IRQHªdËr


391 
IRQ
 
SWI5_EGU5_IRQHªdËr


392 
IRQ
 
TIMER3_IRQHªdËr


393 
IRQ
 
TIMER4_IRQHªdËr


394 
IRQ
 
PWM0_IRQHªdËr


395 
IRQ
 
PDM_IRQHªdËr


396 
IRQ
 
MWU_IRQHªdËr


397 
IRQ
 
PWM1_IRQHªdËr


398 
IRQ
 
PWM2_IRQHªdËr


399 
IRQ
 
SPIM2_SPIS2_SPI2_IRQHªdËr


400 
IRQ
 
RTC2_IRQHªdËr


401 
IRQ
 
I2S_IRQHªdËr


402 
IRQ
 
FPU_IRQHªdËr


403 
IRQ
 
USBD_IRQHªdËr


404 
IRQ
 
UARTE1_IRQHªdËr


405 
IRQ
 
QSPI_IRQHªdËr


406 
IRQ
 
CRYPTOCELL_IRQHªdËr


407 
IRQ
 
PWM3_IRQHªdËr


408 
IRQ
 
	gSPIM3_IRQHªdËr


410 .
	g’d


	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\modules\nrfx\mdk\system_nrf52840.c

26 
	~<¡dšt.h
>

27 
	~<¡dboŞ.h
>

28 
	~"Äf.h
"

29 
	~"sy¡em_Äf52840.h
"

33 
	#__SYSTEM_CLOCK_64M
 (64000000UL)

	)

35 
boŞ
 
”¿_36
();

36 
boŞ
 
”¿_66
();

37 
boŞ
 
”¿_98
();

38 
boŞ
 
”¿_103
();

39 
boŞ
 
”¿_115
();

40 
boŞ
 
”¿_120
();

41 
boŞ
 
”¿_136
();

44 #ià
defšed
 ( 
__CC_ARM
 )

45 
ušt32_t
 
Sy¡emCÜeClock
 
__©Œibu‹__
((
u£d
)èğ
__SYSTEM_CLOCK_64M
;

46 #–ià
defšed
 ( 
__ICCARM__
 )

47 
__roÙ
 
ušt32_t
 
	gSy¡emCÜeClock
 = 
__SYSTEM_CLOCK_64M
;

48 #–ià
defšed
 ( 
__GNUC__
 )

49 
ušt32_t
 
Sy¡emCÜeClock
 
__©Œibu‹__
((
u£d
)èğ
__SYSTEM_CLOCK_64M
;

52 
	$Sy¡emCÜeClockUpd©e
()

54 
Sy¡emCÜeClock
 = 
__SYSTEM_CLOCK_64M
;

55 
	}
}

57 
	$Sy¡emIn™
()

61 #ià
	`defšed
 (
ENABLE_SWO
)

62 
CÜeDebug
->
DEMCR
 |ğ
CÜeDebug_DEMCR_TRCENA_Msk
;

63 
NRF_CLOCK
->
TRACECONFIG
 |ğ
CLOCK_TRACECONFIG_TRACEMUX_S”Ÿl
 << 
CLOCK_TRACECONFIG_TRACEMUX_Pos
;

64 
NRF_P1
->
PIN_CNF
[0] = (
GPIO_PIN_CNF_DRIVE_H0H1
 << 
GPIO_PIN_CNF_DRIVE_Pos
è| (
GPIO_PIN_CNF_INPUT_CÚÃù
 << 
GPIO_PIN_CNF_INPUT_Pos
è| (
GPIO_PIN_CNF_DIR_Ouut
 << 
GPIO_PIN_CNF_DIR_Pos
);

69 #ià
	`defšed
 (
ENABLE_TRACE
)

70 
CÜeDebug
->
DEMCR
 |ğ
CÜeDebug_DEMCR_TRCENA_Msk
;

71 
NRF_CLOCK
->
TRACECONFIG
 |ğ
CLOCK_TRACECONFIG_TRACEMUX_P¬®Ël
 << 
CLOCK_TRACECONFIG_TRACEMUX_Pos
;

72 
NRF_P0
->
PIN_CNF
[7] = (
GPIO_PIN_CNF_DRIVE_H0H1
 << 
GPIO_PIN_CNF_DRIVE_Pos
è| (
GPIO_PIN_CNF_INPUT_CÚÃù
 << 
GPIO_PIN_CNF_INPUT_Pos
è| (
GPIO_PIN_CNF_DIR_Ouut
 << 
GPIO_PIN_CNF_DIR_Pos
);

73 
NRF_P1
->
PIN_CNF
[0] = (
GPIO_PIN_CNF_DRIVE_H0H1
 << 
GPIO_PIN_CNF_DRIVE_Pos
è| (
GPIO_PIN_CNF_INPUT_CÚÃù
 << 
GPIO_PIN_CNF_INPUT_Pos
è| (
GPIO_PIN_CNF_DIR_Ouut
 << 
GPIO_PIN_CNF_DIR_Pos
);

74 
NRF_P0
->
PIN_CNF
[12] = (
GPIO_PIN_CNF_DRIVE_H0H1
 << 
GPIO_PIN_CNF_DRIVE_Pos
è| (
GPIO_PIN_CNF_INPUT_CÚÃù
 << 
GPIO_PIN_CNF_INPUT_Pos
è| (
GPIO_PIN_CNF_DIR_Ouut
 << 
GPIO_PIN_CNF_DIR_Pos
);

75 
NRF_P0
->
PIN_CNF
[11] = (
GPIO_PIN_CNF_DRIVE_H0H1
 << 
GPIO_PIN_CNF_DRIVE_Pos
è| (
GPIO_PIN_CNF_INPUT_CÚÃù
 << 
GPIO_PIN_CNF_INPUT_Pos
è| (
GPIO_PIN_CNF_DIR_Ouut
 << 
GPIO_PIN_CNF_DIR_Pos
);

76 
NRF_P1
->
PIN_CNF
[9] = (
GPIO_PIN_CNF_DRIVE_H0H1
 << 
GPIO_PIN_CNF_DRIVE_Pos
è| (
GPIO_PIN_CNF_INPUT_CÚÃù
 << 
GPIO_PIN_CNF_INPUT_Pos
è| (
GPIO_PIN_CNF_DIR_Ouut
 << 
GPIO_PIN_CNF_DIR_Pos
);

81 ià(
	`”¿_36
()){

82 
NRF_CLOCK
->
EVENTS_DONE
 = 0;

83 
NRF_CLOCK
->
EVENTS_CTTO
 = 0;

84 
NRF_CLOCK
->
CTIV
 = 0;

89 ià(
	`”¿_66
()){

90 
NRF_TEMP
->
A0
 = 
NRF_FICR
->
TEMP
.A0;

91 
NRF_TEMP
->
A1
 = 
NRF_FICR
->
TEMP
.A1;

92 
NRF_TEMP
->
A2
 = 
NRF_FICR
->
TEMP
.A2;

93 
NRF_TEMP
->
A3
 = 
NRF_FICR
->
TEMP
.A3;

94 
NRF_TEMP
->
A4
 = 
NRF_FICR
->
TEMP
.A4;

95 
NRF_TEMP
->
A5
 = 
NRF_FICR
->
TEMP
.A5;

96 
NRF_TEMP
->
B0
 = 
NRF_FICR
->
TEMP
.B0;

97 
NRF_TEMP
->
B1
 = 
NRF_FICR
->
TEMP
.B1;

98 
NRF_TEMP
->
B2
 = 
NRF_FICR
->
TEMP
.B2;

99 
NRF_TEMP
->
B3
 = 
NRF_FICR
->
TEMP
.B3;

100 
NRF_TEMP
->
B4
 = 
NRF_FICR
->
TEMP
.B4;

101 
NRF_TEMP
->
B5
 = 
NRF_FICR
->
TEMP
.B5;

102 
NRF_TEMP
->
T0
 = 
NRF_FICR
->
TEMP
.T0;

103 
NRF_TEMP
->
T1
 = 
NRF_FICR
->
TEMP
.T1;

104 
NRF_TEMP
->
T2
 = 
NRF_FICR
->
TEMP
.T2;

105 
NRF_TEMP
->
T3
 = 
NRF_FICR
->
TEMP
.T3;

106 
NRF_TEMP
->
T4
 = 
NRF_FICR
->
TEMP
.T4;

111 ià(
	`”¿_98
()){

112 *(vŞ©
ušt32_t
 *)0x4000568Cul = 0x00038148ul;

117 ià(
	`”¿_103
()){

118 
NRF_CCM
->
MAXPACKETSIZE
 = 0xFBul;

123 ià(
	`”¿_115
()){

124 *(vŞ©
ušt32_t
 *)0x40000EE4 = (*(volatile uint32_t *)0x40000EE4 & 0xFFFFFFF0) | (*(uint32_t *)0x10000258 & 0x0000000F);

129 ià(
	`”¿_120
()){

130 *(vŞ©
ušt32_t
 *)0x40029640ul = 0x200ul;

135 ià(
	`”¿_136
()){

136 ià(
NRF_POWER
->
RESETREAS
 & 
POWER_RESETREAS_RESETPIN_Msk
){

137 
NRF_POWER
->
RESETREAS
 = ~
POWER_RESETREAS_RESETPIN_Msk
;

144 #ià(
__FPU_USED
 == 1)

145 
SCB
->
CPACR
 |= (3UL << 20) | (3UL << 22);

146 
	`__DSB
();

147 
	`__ISB
();

153 #ià
	`defšed
 (
CONFIG_NFCT_PINS_AS_GPIOS
)

154 ià((
NRF_UICR
->
NFCPINS
 & 
UICR_NFCPINS_PROTECT_Msk
è=ğ(
UICR_NFCPINS_PROTECT_NFC
 << 
UICR_NFCPINS_PROTECT_Pos
)){

155 
NRF_NVMC
->
CONFIG
 = 
NVMC_CONFIG_WEN_W’
 << 
NVMC_CONFIG_WEN_Pos
;

156 
NRF_NVMC
->
READY
 =ğ
NVMC_READY_READY_Busy
){}

157 
NRF_UICR
->
NFCPINS
 &ğ~
UICR_NFCPINS_PROTECT_Msk
;

158 
NRF_NVMC
->
READY
 =ğ
NVMC_READY_READY_Busy
){}

159 
NRF_NVMC
->
CONFIG
 = 
NVMC_CONFIG_WEN_R’
 << 
NVMC_CONFIG_WEN_Pos
;

160 
NRF_NVMC
->
READY
 =ğ
NVMC_READY_READY_Busy
){}

161 
	`NVIC_Sy¡emRe£t
();

168 #ià
	`defšed
 (
CONFIG_GPIO_AS_PINRESET
)

169 ià(((
NRF_UICR
->
PSELRESET
[0] & 
UICR_PSELRESET_CONNECT_Msk
è!ğ(
UICR_PSELRESET_CONNECT_CÚÃùed
 << 
UICR_PSELRESET_CONNECT_Pos
)) ||

170 ((
NRF_UICR
->
PSELRESET
[1] & 
UICR_PSELRESET_CONNECT_Msk
è!ğ(
UICR_PSELRESET_CONNECT_CÚÃùed
 << 
UICR_PSELRESET_CONNECT_Pos
))){

171 
NRF_NVMC
->
CONFIG
 = 
NVMC_CONFIG_WEN_W’
 << 
NVMC_CONFIG_WEN_Pos
;

172 
NRF_NVMC
->
READY
 =ğ
NVMC_READY_READY_Busy
){}

173 
NRF_UICR
->
PSELRESET
[0] = 18;

174 
NRF_NVMC
->
READY
 =ğ
NVMC_READY_READY_Busy
){}

175 
NRF_UICR
->
PSELRESET
[1] = 18;

176 
NRF_NVMC
->
READY
 =ğ
NVMC_READY_READY_Busy
){}

177 
NRF_NVMC
->
CONFIG
 = 
NVMC_CONFIG_WEN_R’
 << 
NVMC_CONFIG_WEN_Pos
;

178 
NRF_NVMC
->
READY
 =ğ
NVMC_READY_READY_Busy
){}

179 
	`NVIC_Sy¡emRe£t
();

183 
	`Sy¡emCÜeClockUpd©e
();

184 
	}
}

187 
boŞ
 
	$”¿_36
()

189 ià(*(
ušt32_t
 *)0x10000130ul == 0x8ul){

190 ià(*(
ušt32_t
 *)0x10000134ul == 0x0ul){

191  
Œue
;

193 ià(*(
ušt32_t
 *)0x10000134ul == 0x1ul){

194  
Œue
;

196 ià(*(
ušt32_t
 *)0x10000134ul == 0x2ul){

197  
Œue
;

201  
Œue
;

202 
	}
}

205 
boŞ
 
	$”¿_66
()

207 ià(*(
ušt32_t
 *)0x10000130ul == 0x8ul){

208 ià(*(
ušt32_t
 *)0x10000134ul == 0x0ul){

209  
Œue
;

211 ià(*(
ušt32_t
 *)0x10000134ul == 0x1ul){

212  
Œue
;

214 ià(*(
ušt32_t
 *)0x10000134ul == 0x2ul){

215  
Œue
;

219  
Œue
;

220 
	}
}

223 
boŞ
 
	$”¿_98
()

225 ià(*(
ušt32_t
 *)0x10000130ul == 0x8ul){

226 ià(*(
ušt32_t
 *)0x10000134ul == 0x0ul){

227  
Œue
;

231  
çl£
;

232 
	}
}

235 
boŞ
 
	$”¿_103
()

237 ià(*(
ušt32_t
 *)0x10000130ul == 0x8ul){

238 ià(*(
ušt32_t
 *)0x10000134ul == 0x0ul){

239  
Œue
;

243  
çl£
;

244 
	}
}

247 
boŞ
 
	$”¿_115
()

249 ià(*(
ušt32_t
 *)0x10000130ul == 0x8ul){

250 ià(*(
ušt32_t
 *)0x10000134ul == 0x0ul){

251  
Œue
;

255  
çl£
;

256 
	}
}

259 
boŞ
 
	$”¿_120
()

261 ià(*(
ušt32_t
 *)0x10000130ul == 0x8ul){

262 ià(*(
ušt32_t
 *)0x10000134ul == 0x0ul){

263  
Œue
;

267  
çl£
;

268 
	}
}

271 
boŞ
 
	$”¿_136
()

273 ià(*(
ušt32_t
 *)0x10000130ul == 0x8ul){

274 ià(*(
ušt32_t
 *)0x10000134ul == 0x0ul){

275  
Œue
;

277 ià(*(
ušt32_t
 *)0x10000134ul == 0x1ul){

278  
Œue
;

280 ià(*(
ušt32_t
 *)0x10000134ul == 0x2ul){

281  
Œue
;

285  
Œue
;

286 
	}
}

	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\orderProcessing.c

5 
	~"¡dšt.h
"

6 
	~"¡ršg.h
"

7 
	~"¡dboŞ.h
"

9 
	~"Üd”Proûssšg.h
"

11 
	#ORDER_CLEAR_BYTE
 0xFF

	)

12 
	#ORDER_ITEM_FREE
 0xFFFF

	)

13 
	#ORDER_HEAP_ITEM_FREE
 0xFF

	)

14 
	#ORDER_HEAP_ITEM_BUSY
 0x00

	)

15 
	#ORDER_FLASH_DATA_VALIDATOR
 0xAABBCCDD

	)

18 
	sÜd”


20 
ušt16_t
 
	mÜd”
[
ORDER_ITEM_QUANTITY
];

21 } 
	tdeviûOrd”S
;

25 
deviûOrd”S
 
	mh—p
[
HEAP_ORDER_QUANTITY
];

26 
ušt8_t
 
	mh—pI‹mS‹
[
HEAP_ORDER_QUANTITY
];

27 }
	gh—pDesütÜ
 =

29 .
h—pI‹mS‹
 = {[0 ... 
HEAP_ORDER_QUANTITY
 - 1] = 
ORDER_HEAP_ITEM_FREE
}

33 
šlše
 
boŞ
 
	$g‘IDPos
(
Üd”T
 
Üd”In
, 
ušt16_t
 *
»zPos
, 
ušt8_t
 
šI‹m
)

35 
ušt16_t
 
út
 = 0; cÁ < 
ORDER_ITEM_QUANTITY
; cnt++ )

37 ifĞ
šI‹m
 !ğ
Üd”In
->
Üd”
[
út
])

41 *
»zPos
 = 
út
;

42  
Œue
;

44  
çl£
;

45 
	}
}

48 
Üd”T
 
	$Üd”M®loc
()

50 
ušt8_t
 
út
 = 0; cÁ < 
HEAP_ORDER_QUANTITY
; cnt++)

52 if(
h—pDesütÜ
.
h—pI‹mS‹
[
út
] !ğ
ORDER_HEAP_ITEM_FREE
)

56 
h—pDesütÜ
.
h—pI‹mS‹
[
út
] = 
ORDER_HEAP_ITEM_BUSY
;

57 
	`mem£t
(
h—pDesütÜ
.
h—p
[
út
].
Üd”
, 
ORDER_CLEAR_BYTE
, (heapDescriptor.heap[cnt].order));

58  &
h—pDesütÜ
.
h—p
[
út
];

60  
NULL
;

61 
	}
}

63 
boŞ
 
	$Üd”F»e
(
Üd”T
 
Üd”In
)

65 
ušt8_t
 
út
 = 0; cÁ < 
HEAP_ORDER_QUANTITY
; cnt++)

67 if(
Üd”In
 !ğ&
h—pDesütÜ
.
h—p
[
út
])

71 
h—pDesütÜ
.
h—pI‹mS‹
[
út
] = 
ORDER_HEAP_ITEM_FREE
;

72  
Œue
;

74  
çl£
;

75 
	}
}

78 
boŞ
 
	$Üd”S‘Fœ¡
 (
Üd”T
 
Üd”In
, 
ušt8_t
 
šI‹m
)

80 
ušt16_t
 
cu¼’tPos
;

81 ifĞ
Üd”In
 =ğ
NULL
)

83  
çl£
;

85 ifĞ!
	`g‘IDPos
(
Üd”In
, &
cu¼’tPos
, 
šI‹m
))

87 
cu¼’tPos
 = 
ORDER_ITEM_QUANTITY
 - 1;

89 if(
cu¼’tPos
 == 0)

91  
Œue
;

93 ; 
cu¼’tPos
 > 0; currentPos--)

95 
Üd”In
->
Üd”
[
cu¼’tPos
] = orderIn->order[currentPos - 1];

97 
Üd”In
->
Üd”
[0] = 
šI‹m
;

98  
Œue
;

99 
	}
}

102 
boŞ
 
	$Üd”G‘Pos
(cÚ¡ 
Üd”T
 
Üd”In
, 
ušt8_t
 
deviûID
, ušt8_ˆ*
pos
)

104 
ušt16_t
 
út
 = 0; cÁ < 
ORDER_ITEM_QUANTITY
; cnt++)

106 if(
Üd”In
->
Üd”
[
út
] !ğ
deviûID
)

110 *
pos
 = 
út
;

111  
Œue
;

113  
çl£
;

114 
	}
}

116 
ušt16_t
 
	$Üd”G‘I‹m
(cÚ¡ 
Üd”T
 
Üd”In
, 
ušt8_t
 
pos
)

118  
Üd”In
->
Üd”
[
pos
];

119 
	}
}

122 
ušt8_t
 
	$Üd”G‘Quªt™y
(cÚ¡ 
Üd”T
 
Üd”In
)

124 
ušt16_t
 
út
 = 0; cÁ < 
ORDER_ITEM_QUANTITY
; cnt++)

126 if(
Üd”In
->
Üd”
[
út
] =ğ
ORDER_ITEM_FREE
)

128  
út
;

131  
ORDER_ITEM_QUANTITY
;

132 
	}
}

135 
	$Üd”CËª
(
Üd”T
 
Üd”In
)

137 
	`mem£t
(
Üd”In
->
Üd”
, 
ORDER_CLEAR_BYTE
, (orderIn->order));

138 
	}
}

141 
boŞ
 
	$Üd”R—dFÏsh
(
Üd”T
 
Üd”In
, 
ušt32_t
 
æashAdd»ss
)

143 
	`æashMemR—dBy‹s
(
æashAdd»ss
, (
ušt8_t
*)
Üd”In
->
Üd”
, (orderIn->order));

144  
Œue
;

145 
	}
}

148 
	$Üd”Wr™eFÏsh
(
Üd”T
 
Üd”In
, 
ušt32_t
 
æashAdd»ss
)

150 
	`æashMemWr™eBy‹s
(
æashAdd»ss
, (
ušt8_t
*)
Üd”In
->
Üd”
, (orderIn->order));

151 
	}
}

	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\orderProcessing.h

5 #iâdeà
ORDERPROCESSING


6 
	#ORDERPROCESSING


	)

8 
	~"¡dšt.h
"

9 
	~"¡dboŞ.h
"

11 
	#ORDER_ITEM_QUANTITY
 5

	)

12 
	#HEAP_ORDER_QUANTITY
 2

	)

14 
Üd”
 *
	tÜd”T
;

16 
Üd”T
 
Üd”M®loc
 ();

17 
boŞ
 
Üd”F»e
 (
Üd”T
 
Üd”In
);

18 
boŞ
 
Üd”S‘Fœ¡
 (
Üd”T
 
Üd”In
, 
ušt8_t
 
šI‹m
);

19 
boŞ
 
Üd”G‘Pos
 (cÚ¡ 
Üd”T
 
Üd”In
, 
ušt8_t
 
deviûID
, ušt8_ˆ*
pos
);

20 
ušt16_t
 
Üd”G‘I‹m
 (cÚ¡ 
Üd”T
 
Üd”In
, 
ušt8_t
 
pos
);

21 
ušt8_t
 
Üd”G‘Quªt™y
(cÚ¡ 
Üd”T
 
Üd”In
);

22 
Üd”CËª
 (
Üd”T
 
Üd”In
);

23 
boŞ
 
Üd”R—dFÏsh
 (
Üd”T
 
Üd”In
, 
ušt32_t
 
æashAdd»ss
);

24 
Üd”Wr™eFÏsh
 (
Üd”T
 
Üd”In
, 
ušt32_t
 
æashAdd»ss
);

28 
æashMemWr™eBy‹s
(
ušt32_t
 
æashAdd»ss
, 
ušt8_t
 
bufãr
[], ušt32_ˆ
bufãrSize
);

29 
æashMemR—dBy‹s
(
ušt32_t
 
æashAdd»ss
, 
ušt8_t
 
bufãr
[], ušt32_ˆ
bufãrSize
);

	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\systemTime.c

4 
	~"¡dšt.h
"

5 
	~"sy¡emTime.h
"

7 
	~"Äf.h
"

8 
	~"Äf_tim”.h
"

10 
	#TIMER_INT_MS
 1

	)

13 vŞ©
ušt32_t
 
	gútMs
;

14 
boŞ
 
	gisNewTick
 = 
çl£
;

16 vŞ©
	stim”C®lback


18 
tim”C®lbackFunT
 
	mfun
;

19 
ušt32_t
 
	mtimeC®lback
;

20 
boŞ
 
	mrunC®lback
;

21 
boŞ
 
	mwa™eC®lback
;

22 } 
	gtim”C®lbackH—p
[
CALLBACK_QUANTITY
];

24 
boŞ
 
	gisC®lbackF»e
[
CALLBACK_QUANTITY
] = {[0 ... CALLBACK_QUANTITY - 1] = 
Œue
};

27 cÚ¡ 
ušt32_t
 
	gtimFrqLi¡
[]=

29 [
NRF_TIMER_FREQ_16MHz
] = 16000000,

30 [
NRF_TIMER_FREQ_8MHz
] = 8000000,

31 [
NRF_TIMER_FREQ_4MHz
] = 4000000,

32 [
NRF_TIMER_FREQ_2MHz
] = 2000000,

33 [
NRF_TIMER_FREQ_1MHz
] = 1000000,

34 [
NRF_TIMER_FREQ_500kHz
] = 500000,

35 [
NRF_TIMER_FREQ_250kHz
] = 250000,

36 [
NRF_TIMER_FREQ_125kHz
] = 125000,

37 [
NRF_TIMER_FREQ_62500Hz
] = 62500,

38 [
NRF_TIMER_FREQ_31250Hz
] = 31250

42 
	$š™U£rTim”
()

45 
ušt32_t
 
v®CC
 = (
timFrqLi¡
[
NRF_TIMER_FREQ_500kHz
] / 1000è* 
TIMER_INT_MS
;

46 
	`Äf_tim”_mode_£t
(
USER_SCHEDULER_TIMER
, 
NRF_TIMER_MODE_TIMER
);

47 
	`Äf_tim”_b™_width_£t
(
USER_SCHEDULER_TIMER
, 
NRF_TIMER_BIT_WIDTH_16
);

48 
	`Äf_tim”_äequ’cy_£t
(
USER_SCHEDULER_TIMER
, 
NRF_TIMER_FREQ_500kHz
);

49 
	`Äf_tim”_cc_wr™e
(
USER_SCHEDULER_TIMER
, 
NRF_TIMER_CC_CHANNEL0
, 
v®CC
);

50 
	`Äf_tim”_št_’abË
(
USER_SCHEDULER_TIMER
, (0b1 << 16));

52 
	`NVIC_S‘PriÜ™y
(
TIMER1_IRQn
, 3);

53 
	`NVIC_EÇbËIRQ
(
TIMER1_IRQn
);

55 
	`Äf_tim”_sk_Œigg”
(
USER_SCHEDULER_TIMER
, 
NRF_TIMER_TASK_START
);

56 
	}
}

59 
	$TIMER1_IRQHªdËr
()

61 
útMs
++;

62 
	`Äf_tim”_sk_Œigg”
(
USER_SCHEDULER_TIMER
, 
NRF_TIMER_TASK_CLEAR
);

63 
	`Äf_tim”_ev’t_ş—r
(
USER_SCHEDULER_TIMER
, 
NRF_TIMER_EVENT_COMPARE0
);

64 
ušt16_t
 
út
 = 0; cÁ < 
CALLBACK_QUANTITY
; cnt++)

66 if(
tim”C®lbackH—p
[
út
].
wa™eC®lback
 && (tim”C®lbackH—p[út].
timeC®lback
 <ğ
útMs
))

68 if(
tim”C®lbackH—p
[
út
].
timeC®lback
 >ğ
útMs
)

69 
tim”C®lbackH—p
[
út
].
wa™eC®lback
 = 
çl£
;

70 
tim”C®lbackH—p
[
út
].
runC®lback
 = 
Œue
;

74 
isNewTick
 = 
Œue
;

75 
	}
}

78 
ušt32_t
 
	$g‘Time
()

80  
útMs
;

81 
	}
}

84 
tim”C®lbacT
 
	$tim”G‘C®lback
(
tim”C®lbackFunT
 
tim”C®lbackFun
)

86 
ušt16_t
 
út
 = 0; cÁ < 
CALLBACK_QUANTITY
; cnt ++)

88 if(!
isC®lbackF»e
[
út
])

92 
isC®lbackF»e
[
út
] = 
çl£
;

93 
tim”C®lbackH—p
[
út
].
fun
 = 
tim”C®lbackFun
;

94 
tim”C®lbackH—p
[
út
].
runC®lback
 = 
çl£
;

95 
tim”C®lbackH—p
[
út
].
wa™eC®lback
 = 
çl£
;

96  &
tim”C®lbackH—p
[
út
];

98  
NULL
;

99 
	}
}

102 
	$tim”Run
(
tim”C®lbacT
 
šTim”C®lbac
, 
št32_t
 
wa™Time
)

104 
šTim”C®lbac
->
timeC®lback
 = 
útMs
 + 
wa™Time
;

105 
šTim”C®lbac
->
runC®lback
 = 
çl£
;

106 
šTim”C®lbac
->
wa™eC®lback
 = 
Œue
;

107 
	}
}

109 
	$tim”Stİ
(
tim”C®lbacT
 
šTim”C®lbac
)

111 
šTim”C®lbac
->
wa™eC®lback
 = 
çl£
;

112 
	}
}

114 
	$u£rProûssšgTim”C®lbackFun
()

116 if(!
isNewTick
)

120 
isNewTick
 = 
çl£
;

121 
ušt16_t
 
út
 = 0; cÁ < 
CALLBACK_QUANTITY
; cnt++)

123 if(!
tim”C®lbackH—p
[
út
].
runC®lback
)

127 
tim”C®lbackH—p
[
út
].
runC®lback
 = 
çl£
;

128 
tim”C®lbackH—p
[
út
].
	`fun
();

130 
	}
}

	@C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\systemTime.h

5 #iâdeà
SYSTEMTIME_H_


6 
	#SYSTEMTIME_H_


	)

8 
	#USER_SCHEDULER_TIMER
 
NRF_TIMER1


	)

9 
	#CALLBACK_QUANTITY
 5

	)

11 vŞ©
	ttim”C®lback
 *
	ttim”C®lbacT
;

12 (*
	ttim”C®lbackFunT
)();

15 
	`š™U£rTim”
();

16 
ušt32_t
 
	`g‘Time
();

17 
tim”C®lbacT
 
	`tim”G‘C®lback
(
tim”C®lbackFunT
 
tim”C®lbackFun
);

18 
	`tim”Run
(
tim”C®lbacT
 
šTim”C®lbac
, 
št32_t
 
wa™Time
);

19 
	`u£rProûssšgTim”C®lbackFun
();

20 
	`tim”Stİ
(
tim”C®lbacT
 
šTim”C®lbac
);

	@orderProcessing.h

5 #iâdeà
ORDERPROCESSING


6 
	#ORDERPROCESSING


	)

8 
	~"¡dšt.h
"

9 
	~"¡dboŞ.h
"

11 
	#ORDER_ITEM_QUANTITY
 5

	)

12 
	#HEAP_ORDER_QUANTITY
 2

	)

14 
Üd”
 *
	tÜd”T
;

16 
Üd”T
 
Üd”M®loc
 ();

17 
boŞ
 
Üd”F»e
 (
Üd”T
 
Üd”In
);

18 
boŞ
 
Üd”S‘Fœ¡
 (
Üd”T
 
Üd”In
, 
ušt8_t
 
šI‹m
);

19 
boŞ
 
Üd”G‘Pos
 (cÚ¡ 
Üd”T
 
Üd”In
, 
ušt8_t
 
deviûID
, ušt8_ˆ*
pos
);

20 
ušt16_t
 
Üd”G‘I‹m
 (cÚ¡ 
Üd”T
 
Üd”In
, 
ušt8_t
 
pos
);

21 
ušt8_t
 
Üd”G‘Quªt™y
(cÚ¡ 
Üd”T
 
Üd”In
);

22 
Üd”CËª
 (
Üd”T
 
Üd”In
);

23 
boŞ
 
Üd”R—dFÏsh
 (
Üd”T
 
Üd”In
, 
ušt32_t
 
æashAdd»ss
);

24 
Üd”Wr™eFÏsh
 (
Üd”T
 
Üd”In
, 
ušt32_t
 
æashAdd»ss
);

28 
æashMemWr™eBy‹s
(
ušt32_t
 
æashAdd»ss
, 
ušt8_t
 
bufãr
[], ušt32_ˆ
bufãrSize
);

29 
æashMemR—dBy‹s
(
ušt32_t
 
æashAdd»ss
, 
ušt8_t
 
bufãr
[], ušt32_ˆ
bufãrSize
);

	@systemTime.h

5 #iâdeà
SYSTEMTIME_H_


6 
	#SYSTEMTIME_H_


	)

8 
	#USER_SCHEDULER_TIMER
 
NRF_TIMER1


	)

9 
	#CALLBACK_QUANTITY
 5

	)

11 vŞ©
	ttim”C®lback
 *
	ttim”C®lbacT
;

12 (*
	ttim”C®lbackFunT
)();

15 
	`š™U£rTim”
();

16 
ušt32_t
 
	`g‘Time
();

17 
tim”C®lbacT
 
	`tim”G‘C®lback
(
tim”C®lbackFunT
 
tim”C®lbackFun
);

18 
	`tim”Run
(
tim”C®lbacT
 
šTim”C®lbac
, 
št32_t
 
wa™Time
);

19 
	`u£rProûssšgTim”C®lbackFun
();

20 
	`tim”Stİ
(
tim”C®lbacT
 
šTim”C®lbac
);

	@
1
.
0
79
9055
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\ble\ble_advertising\ble_advertising.c
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\ble\ble_link_ctx_manager\ble_link_ctx_manager.c
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\ble\ble_services\ble_bas\ble_bas.c
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\ble\ble_services\ble_dis\ble_dis.c
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\ble\ble_services\ble_hids\ble_hids.c
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\ble\common\ble_advdata.c
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\ble\common\ble_conn_params.c
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\ble\common\ble_conn_state.c
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\ble\common\ble_srv_common.c
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\ble\nrf_ble_gatt\nrf_ble_gatt.c
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\ble\nrf_ble_qwr\nrf_ble_qwr.c
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\ble\peer_manager\gatt_cache_manager.c
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\ble\peer_manager\gatts_cache_manager.c
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\ble\peer_manager\id_manager.c
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\ble\peer_manager\peer_data_storage.c
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\ble\peer_manager\peer_database.c
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\ble\peer_manager\peer_id.c
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\ble\peer_manager\peer_manager.c
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\ble\peer_manager\pm_buffer.c
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\ble\peer_manager\pm_mutex.c
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\ble\peer_manager\security_dispatcher.c
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\ble\peer_manager\security_manager.c
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\boards\boards.c
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\libraries\atomic\nrf_atomic.c
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\libraries\atomic_fifo\nrf_atfifo.c
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\libraries\atomic_flags\nrf_atflags.c
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\libraries\balloc\nrf_balloc.c
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\libraries\bsp\bsp.c
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\libraries\bsp\bsp_btn_ble.c
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\libraries\button\app_button.c
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\libraries\crc16\crc16.c
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\libraries\experimental_log\src\nrf_log_backend_rtt.c
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\libraries\experimental_log\src\nrf_log_backend_serial.c
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\libraries\experimental_log\src\nrf_log_backend_uart.c
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\libraries\experimental_log\src\nrf_log_default_backends.c
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\libraries\experimental_log\src\nrf_log_frontend.c
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\libraries\experimental_log\src\nrf_log_str_formatter.c
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\libraries\experimental_memobj\nrf_memobj.c
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\libraries\experimental_section_vars\nrf_section_iter.c
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\libraries\fds\fds.c
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\libraries\fstorage\nrf_fstorage.c
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\libraries\fstorage\nrf_fstorage_sd.c
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\libraries\hardfault\hardfault_implementation.c
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\libraries\pwr_mgmt\nrf_pwr_mgmt.c
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\libraries\scheduler\app_scheduler.c
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\libraries\sensorsim\sensorsim.c
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\libraries\strerror\nrf_strerror.c
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\libraries\timer\app_timer.c
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\libraries\util\app_error.c
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\libraries\util\app_error_handler_gcc.c
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\libraries\util\app_error_weak.c
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\libraries\util\app_util_platform.c
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\libraries\util\nrf_assert.c
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\softdevice\common\nrf_sdh.c
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\softdevice\common\nrf_sdh_ble.c
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\components\softdevice\common\nrf_sdh_soc.c
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\examples\ble_peripheral\ble_app_hids_mouse\main.c
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\examples\ble_peripheral\ble_app_hids_mouse\pca10056\s140\config\sdk_config.h
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\external\fprintf\nrf_fprintf.c
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\external\fprintf\nrf_fprintf_format.c
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\external\segger_rtt\SEGGER_RTT.c
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\external\segger_rtt\SEGGER_RTT_Syscalls_GCC.c
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\external\segger_rtt\SEGGER_RTT_printf.c
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\integration\nrfx\legacy\nrf_drv_clock.c
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\integration\nrfx\legacy\nrf_drv_uart.c
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\modules\nrfx\drivers\src\nrfx_clock.c
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\modules\nrfx\drivers\src\nrfx_gpiote.c
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\modules\nrfx\drivers\src\nrfx_power_clock.c
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\modules\nrfx\drivers\src\nrfx_uart.c
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\modules\nrfx\drivers\src\nrfx_uarte.c
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\modules\nrfx\drivers\src\prs\nrfx_prs.c
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\modules\nrfx\mdk\gcc_startup_nrf52840.S
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\nRF5_SDK_15.0.0_a53641a\modules\nrfx\mdk\system_nrf52840.c
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\orderProcessing.c
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\orderProcessing.h
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\systemTime.c
C:\Private\Programing\Nordic\nrf52840Mouse_SDK15_0\systemTime.h
orderProcessing.h
systemTime.h
